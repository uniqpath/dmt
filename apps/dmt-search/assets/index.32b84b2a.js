var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,c=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&a(e,n,t[n]);if(r)for(var n of r(t))s.call(t,n)&&a(e,n,t[n]);return e},i=(e,r)=>t(e,n(r));import{w as l,d as u,g as h,S as d,i as f,s as p,e as m,t as g,a as v,c as y,b as w,f as b,h as $,j as E,k as _,l as k,m as A,n as S,o as x,p as T,q as P,r as O,u as R,v as I,x as N,y as C,z as D,A as M,B as j,C as U,D as V,E as z,F as L,G as q,H as F,I as B,J as K,K as H,L as W,M as Y,N as Q,O as J,P as G,Q as Z,R as X,T as ee,U as te,V as ne,W as re,X as oe,Y as se,Z as ae,_ as ce}from"./vendor.b6d77f56.js";var ie="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function le(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return he(null==t&&n.path)}},n.exports),n.exports}function ue(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}function he(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var de=ue(Object.freeze({__proto__:null,default:{}})),fe=le((function(e){!function(e){var t=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},n=function(){throw new Error("no PRNG")},r=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=t(),a=t([1]),c=t([56129,1]),i=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,n,r){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n,e[t+4]=r>>24&255,e[t+5]=r>>16&255,e[t+6]=r>>8&255,e[t+7]=255&r}function p(e,t,n,r,o){var s,a=0;for(s=0;s<o;s++)a|=e[t+s]^n[r+s];return(1&a-1>>>8)-1}function m(e,t,n,r){return p(e,t,n,r,16)}function g(e,t,n,r){return p(e,t,n,r,32)}function v(e,t,n,r){!function(e,t,n,r){for(var o,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,c=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,i=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,l=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,g=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,v=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,y=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,w=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,b=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,$=s,E=a,_=c,k=i,A=l,S=u,x=h,T=d,P=f,O=p,R=m,I=g,N=v,C=y,D=w,M=b,j=0;j<20;j+=2)$^=(o=(N^=(o=(P^=(o=(A^=(o=$+N|0)<<7|o>>>25)+$|0)<<9|o>>>23)+A|0)<<13|o>>>19)+P|0)<<18|o>>>14,S^=(o=(E^=(o=(C^=(o=(O^=(o=S+E|0)<<7|o>>>25)+S|0)<<9|o>>>23)+O|0)<<13|o>>>19)+C|0)<<18|o>>>14,R^=(o=(x^=(o=(_^=(o=(D^=(o=R+x|0)<<7|o>>>25)+R|0)<<9|o>>>23)+D|0)<<13|o>>>19)+_|0)<<18|o>>>14,M^=(o=(I^=(o=(T^=(o=(k^=(o=M+I|0)<<7|o>>>25)+M|0)<<9|o>>>23)+k|0)<<13|o>>>19)+T|0)<<18|o>>>14,$^=(o=(k^=(o=(_^=(o=(E^=(o=$+k|0)<<7|o>>>25)+$|0)<<9|o>>>23)+E|0)<<13|o>>>19)+_|0)<<18|o>>>14,S^=(o=(A^=(o=(T^=(o=(x^=(o=S+A|0)<<7|o>>>25)+S|0)<<9|o>>>23)+x|0)<<13|o>>>19)+T|0)<<18|o>>>14,R^=(o=(O^=(o=(P^=(o=(I^=(o=R+O|0)<<7|o>>>25)+R|0)<<9|o>>>23)+I|0)<<13|o>>>19)+P|0)<<18|o>>>14,M^=(o=(D^=(o=(C^=(o=(N^=(o=M+D|0)<<7|o>>>25)+M|0)<<9|o>>>23)+N|0)<<13|o>>>19)+C|0)<<18|o>>>14;$=$+s|0,E=E+a|0,_=_+c|0,k=k+i|0,A=A+l|0,S=S+u|0,x=x+h|0,T=T+d|0,P=P+f|0,O=O+p|0,R=R+m|0,I=I+g|0,N=N+v|0,C=C+y|0,D=D+w|0,M=M+b|0,e[0]=$>>>0&255,e[1]=$>>>8&255,e[2]=$>>>16&255,e[3]=$>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=_>>>0&255,e[9]=_>>>8&255,e[10]=_>>>16&255,e[11]=_>>>24&255,e[12]=k>>>0&255,e[13]=k>>>8&255,e[14]=k>>>16&255,e[15]=k>>>24&255,e[16]=A>>>0&255,e[17]=A>>>8&255,e[18]=A>>>16&255,e[19]=A>>>24&255,e[20]=S>>>0&255,e[21]=S>>>8&255,e[22]=S>>>16&255,e[23]=S>>>24&255,e[24]=x>>>0&255,e[25]=x>>>8&255,e[26]=x>>>16&255,e[27]=x>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=P>>>0&255,e[33]=P>>>8&255,e[34]=P>>>16&255,e[35]=P>>>24&255,e[36]=O>>>0&255,e[37]=O>>>8&255,e[38]=O>>>16&255,e[39]=O>>>24&255,e[40]=R>>>0&255,e[41]=R>>>8&255,e[42]=R>>>16&255,e[43]=R>>>24&255,e[44]=I>>>0&255,e[45]=I>>>8&255,e[46]=I>>>16&255,e[47]=I>>>24&255,e[48]=N>>>0&255,e[49]=N>>>8&255,e[50]=N>>>16&255,e[51]=N>>>24&255,e[52]=C>>>0&255,e[53]=C>>>8&255,e[54]=C>>>16&255,e[55]=C>>>24&255,e[56]=D>>>0&255,e[57]=D>>>8&255,e[58]=D>>>16&255,e[59]=D>>>24&255,e[60]=M>>>0&255,e[61]=M>>>8&255,e[62]=M>>>16&255,e[63]=M>>>24&255}(e,t,n,r)}function y(e,t,n,r){!function(e,t,n,r){for(var o,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,c=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,i=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,l=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,g=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,v=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,y=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,w=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,b=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,$=0;$<20;$+=2)s^=(o=(v^=(o=(f^=(o=(l^=(o=s+v|0)<<7|o>>>25)+s|0)<<9|o>>>23)+l|0)<<13|o>>>19)+f|0)<<18|o>>>14,u^=(o=(a^=(o=(y^=(o=(p^=(o=u+a|0)<<7|o>>>25)+u|0)<<9|o>>>23)+p|0)<<13|o>>>19)+y|0)<<18|o>>>14,m^=(o=(h^=(o=(c^=(o=(w^=(o=m+h|0)<<7|o>>>25)+m|0)<<9|o>>>23)+w|0)<<13|o>>>19)+c|0)<<18|o>>>14,b^=(o=(g^=(o=(d^=(o=(i^=(o=b+g|0)<<7|o>>>25)+b|0)<<9|o>>>23)+i|0)<<13|o>>>19)+d|0)<<18|o>>>14,s^=(o=(i^=(o=(c^=(o=(a^=(o=s+i|0)<<7|o>>>25)+s|0)<<9|o>>>23)+a|0)<<13|o>>>19)+c|0)<<18|o>>>14,u^=(o=(l^=(o=(d^=(o=(h^=(o=u+l|0)<<7|o>>>25)+u|0)<<9|o>>>23)+h|0)<<13|o>>>19)+d|0)<<18|o>>>14,m^=(o=(p^=(o=(f^=(o=(g^=(o=m+p|0)<<7|o>>>25)+m|0)<<9|o>>>23)+g|0)<<13|o>>>19)+f|0)<<18|o>>>14,b^=(o=(w^=(o=(y^=(o=(v^=(o=b+w|0)<<7|o>>>25)+b|0)<<9|o>>>23)+v|0)<<13|o>>>19)+y|0)<<18|o>>>14;e[0]=s>>>0&255,e[1]=s>>>8&255,e[2]=s>>>16&255,e[3]=s>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=m>>>0&255,e[9]=m>>>8&255,e[10]=m>>>16&255,e[11]=m>>>24&255,e[12]=b>>>0&255,e[13]=b>>>8&255,e[14]=b>>>16&255,e[15]=b>>>24&255,e[16]=h>>>0&255,e[17]=h>>>8&255,e[18]=h>>>16&255,e[19]=h>>>24&255,e[20]=d>>>0&255,e[21]=d>>>8&255,e[22]=d>>>16&255,e[23]=d>>>24&255,e[24]=f>>>0&255,e[25]=f>>>8&255,e[26]=f>>>16&255,e[27]=f>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,n,r)}var w=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function b(e,t,n,r,o,s,a){var c,i,l=new Uint8Array(16),u=new Uint8Array(64);for(i=0;i<16;i++)l[i]=0;for(i=0;i<8;i++)l[i]=s[i];for(;o>=64;){for(v(u,l,a,w),i=0;i<64;i++)e[t+i]=n[r+i]^u[i];for(c=1,i=8;i<16;i++)c=c+(255&l[i])|0,l[i]=255&c,c>>>=8;o-=64,t+=64,r+=64}if(o>0)for(v(u,l,a,w),i=0;i<o;i++)e[t+i]=n[r+i]^u[i];return 0}function $(e,t,n,r,o){var s,a,c=new Uint8Array(16),i=new Uint8Array(64);for(a=0;a<16;a++)c[a]=0;for(a=0;a<8;a++)c[a]=r[a];for(;n>=64;){for(v(i,c,o,w),a=0;a<64;a++)e[t+a]=i[a];for(s=1,a=8;a<16;a++)s=s+(255&c[a])|0,c[a]=255&s,s>>>=8;n-=64,t+=64}if(n>0)for(v(i,c,o,w),a=0;a<n;a++)e[t+a]=i[a];return 0}function E(e,t,n,r,o){var s=new Uint8Array(32);y(s,r,o,w);for(var a=new Uint8Array(8),c=0;c<8;c++)a[c]=r[c+16];return $(e,t,n,a,s)}function _(e,t,n,r,o,s,a){var c=new Uint8Array(32);y(c,s,a,w);for(var i=new Uint8Array(8),l=0;l<8;l++)i[l]=s[l+16];return b(e,t,n,r,o,i,c)}var k=function(e){var t,n,r,o,s,a,c,i;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,n=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|n<<3),r=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(n>>>10|r<<6),o=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(r>>>7|o<<9),s=255&e[8]|(255&e[9])<<8,this.r[4]=255&(o>>>4|s<<12),this.r[5]=s>>>1&8190,a=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(s>>>14|a<<2),c=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(a>>>11|c<<5),i=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(c>>>8|i<<8),this.r[9]=i>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function A(e,t,n,r,o,s){var a=new k(s);return a.update(n,r,o),a.finish(e,t),0}function S(e,t,n,r,o,s){var a=new Uint8Array(16);return A(a,0,n,r,o,s),m(e,t,a,0)}function x(e,t,n,r,o){var s;if(n<32)return-1;for(_(e,0,t,0,n,r,o),A(e,16,e,32,n-32,e),s=0;s<16;s++)e[s]=0;return 0}function T(e,t,n,r,o){var s,a=new Uint8Array(32);if(n<32)return-1;if(E(a,0,32,r,o),0!==S(t,16,t,32,n-32,a))return-1;for(_(e,0,t,0,n,r,o),s=0;s<32;s++)e[s]=0;return 0}function P(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function O(e){var t,n,r=1;for(t=0;t<16;t++)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function R(e,t,n){for(var r,o=~(n-1),s=0;s<16;s++)r=o&(e[s]^t[s]),e[s]^=r,t[s]^=r}function I(e,n){var r,o,s,a=t(),c=t();for(r=0;r<16;r++)c[r]=n[r];for(O(c),O(c),O(c),o=0;o<2;o++){for(a[0]=c[0]-65517,r=1;r<15;r++)a[r]=c[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=c[15]-32767-(a[14]>>16&1),s=a[15]>>16&1,a[14]&=65535,R(c,a,1-s)}for(r=0;r<16;r++)e[2*r]=255&c[r],e[2*r+1]=c[r]>>8}function N(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return I(n,e),I(r,t),g(n,0,r,0)}function C(e){var t=new Uint8Array(32);return I(t,e),1&t[0]}function D(e,t){var n;for(n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function M(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function j(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function U(e,t,n){var r,o,s=0,a=0,c=0,i=0,l=0,u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,y=0,w=0,b=0,$=0,E=0,_=0,k=0,A=0,S=0,x=0,T=0,P=0,O=0,R=0,I=0,N=0,C=0,D=0,M=n[0],j=n[1],U=n[2],V=n[3],z=n[4],L=n[5],q=n[6],F=n[7],B=n[8],K=n[9],H=n[10],W=n[11],Y=n[12],Q=n[13],J=n[14],G=n[15];s+=(r=t[0])*M,a+=r*j,c+=r*U,i+=r*V,l+=r*z,u+=r*L,h+=r*q,d+=r*F,f+=r*B,p+=r*K,m+=r*H,g+=r*W,v+=r*Y,y+=r*Q,w+=r*J,b+=r*G,a+=(r=t[1])*M,c+=r*j,i+=r*U,l+=r*V,u+=r*z,h+=r*L,d+=r*q,f+=r*F,p+=r*B,m+=r*K,g+=r*H,v+=r*W,y+=r*Y,w+=r*Q,b+=r*J,$+=r*G,c+=(r=t[2])*M,i+=r*j,l+=r*U,u+=r*V,h+=r*z,d+=r*L,f+=r*q,p+=r*F,m+=r*B,g+=r*K,v+=r*H,y+=r*W,w+=r*Y,b+=r*Q,$+=r*J,E+=r*G,i+=(r=t[3])*M,l+=r*j,u+=r*U,h+=r*V,d+=r*z,f+=r*L,p+=r*q,m+=r*F,g+=r*B,v+=r*K,y+=r*H,w+=r*W,b+=r*Y,$+=r*Q,E+=r*J,_+=r*G,l+=(r=t[4])*M,u+=r*j,h+=r*U,d+=r*V,f+=r*z,p+=r*L,m+=r*q,g+=r*F,v+=r*B,y+=r*K,w+=r*H,b+=r*W,$+=r*Y,E+=r*Q,_+=r*J,k+=r*G,u+=(r=t[5])*M,h+=r*j,d+=r*U,f+=r*V,p+=r*z,m+=r*L,g+=r*q,v+=r*F,y+=r*B,w+=r*K,b+=r*H,$+=r*W,E+=r*Y,_+=r*Q,k+=r*J,A+=r*G,h+=(r=t[6])*M,d+=r*j,f+=r*U,p+=r*V,m+=r*z,g+=r*L,v+=r*q,y+=r*F,w+=r*B,b+=r*K,$+=r*H,E+=r*W,_+=r*Y,k+=r*Q,A+=r*J,S+=r*G,d+=(r=t[7])*M,f+=r*j,p+=r*U,m+=r*V,g+=r*z,v+=r*L,y+=r*q,w+=r*F,b+=r*B,$+=r*K,E+=r*H,_+=r*W,k+=r*Y,A+=r*Q,S+=r*J,x+=r*G,f+=(r=t[8])*M,p+=r*j,m+=r*U,g+=r*V,v+=r*z,y+=r*L,w+=r*q,b+=r*F,$+=r*B,E+=r*K,_+=r*H,k+=r*W,A+=r*Y,S+=r*Q,x+=r*J,T+=r*G,p+=(r=t[9])*M,m+=r*j,g+=r*U,v+=r*V,y+=r*z,w+=r*L,b+=r*q,$+=r*F,E+=r*B,_+=r*K,k+=r*H,A+=r*W,S+=r*Y,x+=r*Q,T+=r*J,P+=r*G,m+=(r=t[10])*M,g+=r*j,v+=r*U,y+=r*V,w+=r*z,b+=r*L,$+=r*q,E+=r*F,_+=r*B,k+=r*K,A+=r*H,S+=r*W,x+=r*Y,T+=r*Q,P+=r*J,O+=r*G,g+=(r=t[11])*M,v+=r*j,y+=r*U,w+=r*V,b+=r*z,$+=r*L,E+=r*q,_+=r*F,k+=r*B,A+=r*K,S+=r*H,x+=r*W,T+=r*Y,P+=r*Q,O+=r*J,R+=r*G,v+=(r=t[12])*M,y+=r*j,w+=r*U,b+=r*V,$+=r*z,E+=r*L,_+=r*q,k+=r*F,A+=r*B,S+=r*K,x+=r*H,T+=r*W,P+=r*Y,O+=r*Q,R+=r*J,I+=r*G,y+=(r=t[13])*M,w+=r*j,b+=r*U,$+=r*V,E+=r*z,_+=r*L,k+=r*q,A+=r*F,S+=r*B,x+=r*K,T+=r*H,P+=r*W,O+=r*Y,R+=r*Q,I+=r*J,N+=r*G,w+=(r=t[14])*M,b+=r*j,$+=r*U,E+=r*V,_+=r*z,k+=r*L,A+=r*q,S+=r*F,x+=r*B,T+=r*K,P+=r*H,O+=r*W,R+=r*Y,I+=r*Q,N+=r*J,C+=r*G,b+=(r=t[15])*M,a+=38*(E+=r*U),c+=38*(_+=r*V),i+=38*(k+=r*z),l+=38*(A+=r*L),u+=38*(S+=r*q),h+=38*(x+=r*F),d+=38*(T+=r*B),f+=38*(P+=r*K),p+=38*(O+=r*H),m+=38*(R+=r*W),g+=38*(I+=r*Y),v+=38*(N+=r*Q),y+=38*(C+=r*J),w+=38*(D+=r*G),s=(r=(s+=38*($+=r*j))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),i=(r=i+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),w=(r=w+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),s=(r=(s+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),i=(r=i+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),w=(r=w+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),s+=o-1+37*(o-1),e[0]=s,e[1]=a,e[2]=c,e[3]=i,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=m,e[11]=g,e[12]=v,e[13]=y,e[14]=w,e[15]=b}function V(e,t){U(e,t,t)}function z(e,n){var r,o=t();for(r=0;r<16;r++)o[r]=n[r];for(r=253;r>=0;r--)V(o,o),2!==r&&4!==r&&U(o,o,n);for(r=0;r<16;r++)e[r]=o[r]}function L(e,n){var r,o=t();for(r=0;r<16;r++)o[r]=n[r];for(r=250;r>=0;r--)V(o,o),1!==r&&U(o,o,n);for(r=0;r<16;r++)e[r]=o[r]}function q(e,n,r){var o,s,a=new Uint8Array(32),i=new Float64Array(80),l=t(),u=t(),h=t(),d=t(),f=t(),p=t();for(s=0;s<31;s++)a[s]=n[s];for(a[31]=127&n[31]|64,a[0]&=248,D(i,r),s=0;s<16;s++)u[s]=i[s],d[s]=l[s]=h[s]=0;for(l[0]=d[0]=1,s=254;s>=0;--s)R(l,u,o=a[s>>>3]>>>(7&s)&1),R(h,d,o),M(f,l,h),j(l,l,h),M(h,u,d),j(u,u,d),V(d,f),V(p,l),U(l,h,l),U(h,u,f),M(f,l,h),j(l,l,h),V(u,l),j(h,d,p),U(l,h,c),M(l,l,d),U(h,h,l),U(l,d,p),U(d,u,i),V(u,f),R(l,u,o),R(h,d,o);for(s=0;s<16;s++)i[s+16]=l[s],i[s+32]=h[s],i[s+48]=u[s],i[s+64]=d[s];var m=i.subarray(32),g=i.subarray(16);return z(m,m),U(g,g,m),I(e,g),0}function F(e,t){return q(e,t,o)}function B(e,t){return n(t,32),F(e,t)}function K(e,t,n){var o=new Uint8Array(32);return q(o,n,t),y(e,r,o,w)}k.prototype.blocks=function(e,t,n){for(var r,o,s,a,c,i,l,u,h,d,f,p,m,g,v,y,w,b,$,E=this.fin?0:2048,_=this.h[0],k=this.h[1],A=this.h[2],S=this.h[3],x=this.h[4],T=this.h[5],P=this.h[6],O=this.h[7],R=this.h[8],I=this.h[9],N=this.r[0],C=this.r[1],D=this.r[2],M=this.r[3],j=this.r[4],U=this.r[5],V=this.r[6],z=this.r[7],L=this.r[8],q=this.r[9];n>=16;)d=h=0,d+=(_+=8191&(r=255&e[t+0]|(255&e[t+1])<<8))*N,d+=(k+=8191&(r>>>13|(o=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*q),d+=(A+=8191&(o>>>10|(s=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*L),d+=(S+=8191&(s>>>7|(a=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*z),h=(d+=(x+=8191&(a>>>4|(c=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*V))>>>13,d&=8191,d+=(T+=c>>>1&8191)*(5*U),d+=(P+=8191&(c>>>14|(i=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*j),d+=(O+=8191&(i>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*M),d+=(R+=8191&(l>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*D),f=h+=(d+=(I+=u>>>5|E)*(5*C))>>>13,f+=_*C,f+=k*N,f+=A*(5*q),f+=S*(5*L),h=(f+=x*(5*z))>>>13,f&=8191,f+=T*(5*V),f+=P*(5*U),f+=O*(5*j),f+=R*(5*M),h+=(f+=I*(5*D))>>>13,f&=8191,p=h,p+=_*D,p+=k*C,p+=A*N,p+=S*(5*q),h=(p+=x*(5*L))>>>13,p&=8191,p+=T*(5*z),p+=P*(5*V),p+=O*(5*U),p+=R*(5*j),m=h+=(p+=I*(5*M))>>>13,m+=_*M,m+=k*D,m+=A*C,m+=S*N,h=(m+=x*(5*q))>>>13,m&=8191,m+=T*(5*L),m+=P*(5*z),m+=O*(5*V),m+=R*(5*U),g=h+=(m+=I*(5*j))>>>13,g+=_*j,g+=k*M,g+=A*D,g+=S*C,h=(g+=x*N)>>>13,g&=8191,g+=T*(5*q),g+=P*(5*L),g+=O*(5*z),g+=R*(5*V),v=h+=(g+=I*(5*U))>>>13,v+=_*U,v+=k*j,v+=A*M,v+=S*D,h=(v+=x*C)>>>13,v&=8191,v+=T*N,v+=P*(5*q),v+=O*(5*L),v+=R*(5*z),y=h+=(v+=I*(5*V))>>>13,y+=_*V,y+=k*U,y+=A*j,y+=S*M,h=(y+=x*D)>>>13,y&=8191,y+=T*C,y+=P*N,y+=O*(5*q),y+=R*(5*L),w=h+=(y+=I*(5*z))>>>13,w+=_*z,w+=k*V,w+=A*U,w+=S*j,h=(w+=x*M)>>>13,w&=8191,w+=T*D,w+=P*C,w+=O*N,w+=R*(5*q),b=h+=(w+=I*(5*L))>>>13,b+=_*L,b+=k*z,b+=A*V,b+=S*U,h=(b+=x*j)>>>13,b&=8191,b+=T*M,b+=P*D,b+=O*C,b+=R*N,$=h+=(b+=I*(5*q))>>>13,$+=_*q,$+=k*L,$+=A*z,$+=S*V,h=($+=x*U)>>>13,$&=8191,$+=T*j,$+=P*M,$+=O*D,$+=R*C,_=d=8191&(h=(h=((h+=($+=I*N)>>>13)<<2)+h|0)+(d&=8191)|0),k=f+=h>>>=13,A=p&=8191,S=m&=8191,x=g&=8191,T=v&=8191,P=y&=8191,O=w&=8191,R=b&=8191,I=$&=8191,t+=16,n-=16;this.h[0]=_,this.h[1]=k,this.h[2]=A,this.h[3]=S,this.h[4]=x,this.h[5]=T,this.h[6]=P,this.h[7]=O,this.h[8]=R,this.h[9]=I},k.prototype.finish=function(e,t){var n,r,o,s,a=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=n,n=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,a[0]=this.h[0]+5,n=a[0]>>>13,a[0]&=8191,s=1;s<10;s++)a[s]=this.h[s]+n,n=a[s]>>>13,a[s]&=8191;for(a[9]-=8192,r=(1^n)-1,s=0;s<10;s++)a[s]&=r;for(r=~r,s=0;s<10;s++)this.h[s]=this.h[s]&r|a[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,s=1;s<8;s++)o=(this.h[s]+this.pad[s]|0)+(o>>>16)|0,this.h[s]=65535&o;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},k.prototype.update=function(e,t,n){var r,o;if(this.leftover){for((o=16-this.leftover)>n&&(o=n),r=0;r<o;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(o=n-n%16,this.blocks(e,t,o),t+=o,n-=o),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};var H=x,W=T;var Y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Q(e,t,n,r){for(var o,s,a,c,i,l,u,h,d,f,p,m,g,v,y,w,b,$,E,_,k,A,S,x,T,P,O=new Int32Array(16),R=new Int32Array(16),I=e[0],N=e[1],C=e[2],D=e[3],M=e[4],j=e[5],U=e[6],V=e[7],z=t[0],L=t[1],q=t[2],F=t[3],B=t[4],K=t[5],H=t[6],W=t[7],Q=0;r>=128;){for(E=0;E<16;E++)_=8*E+Q,O[E]=n[_+0]<<24|n[_+1]<<16|n[_+2]<<8|n[_+3],R[E]=n[_+4]<<24|n[_+5]<<16|n[_+6]<<8|n[_+7];for(E=0;E<80;E++)if(o=I,s=N,a=C,c=D,i=M,l=j,u=U,V,d=z,f=L,p=q,m=F,g=B,v=K,y=H,W,S=65535&(A=W),x=A>>>16,T=65535&(k=V),P=k>>>16,S+=65535&(A=(B>>>14|M<<18)^(B>>>18|M<<14)^(M>>>9|B<<23)),x+=A>>>16,T+=65535&(k=(M>>>14|B<<18)^(M>>>18|B<<14)^(B>>>9|M<<23)),P+=k>>>16,S+=65535&(A=B&K^~B&H),x+=A>>>16,T+=65535&(k=M&j^~M&U),P+=k>>>16,S+=65535&(A=Y[2*E+1]),x+=A>>>16,T+=65535&(k=Y[2*E]),P+=k>>>16,k=O[E%16],x+=(A=R[E%16])>>>16,T+=65535&k,P+=k>>>16,T+=(x+=(S+=65535&A)>>>16)>>>16,S=65535&(A=$=65535&S|x<<16),x=A>>>16,T=65535&(k=b=65535&T|(P+=T>>>16)<<16),P=k>>>16,S+=65535&(A=(z>>>28|I<<4)^(I>>>2|z<<30)^(I>>>7|z<<25)),x+=A>>>16,T+=65535&(k=(I>>>28|z<<4)^(z>>>2|I<<30)^(z>>>7|I<<25)),P+=k>>>16,x+=(A=z&L^z&q^L&q)>>>16,T+=65535&(k=I&N^I&C^N&C),P+=k>>>16,h=65535&(T+=(x+=(S+=65535&A)>>>16)>>>16)|(P+=T>>>16)<<16,w=65535&S|x<<16,S=65535&(A=m),x=A>>>16,T=65535&(k=c),P=k>>>16,x+=(A=$)>>>16,T+=65535&(k=b),P+=k>>>16,N=o,C=s,D=a,M=c=65535&(T+=(x+=(S+=65535&A)>>>16)>>>16)|(P+=T>>>16)<<16,j=i,U=l,V=u,I=h,L=d,q=f,F=p,B=m=65535&S|x<<16,K=g,H=v,W=y,z=w,E%16==15)for(_=0;_<16;_++)k=O[_],S=65535&(A=R[_]),x=A>>>16,T=65535&k,P=k>>>16,k=O[(_+9)%16],S+=65535&(A=R[(_+9)%16]),x+=A>>>16,T+=65535&k,P+=k>>>16,b=O[(_+1)%16],S+=65535&(A=(($=R[(_+1)%16])>>>1|b<<31)^($>>>8|b<<24)^($>>>7|b<<25)),x+=A>>>16,T+=65535&(k=(b>>>1|$<<31)^(b>>>8|$<<24)^b>>>7),P+=k>>>16,b=O[(_+14)%16],x+=(A=(($=R[(_+14)%16])>>>19|b<<13)^(b>>>29|$<<3)^($>>>6|b<<26))>>>16,T+=65535&(k=(b>>>19|$<<13)^($>>>29|b<<3)^b>>>6),P+=k>>>16,P+=(T+=(x+=(S+=65535&A)>>>16)>>>16)>>>16,O[_]=65535&T|P<<16,R[_]=65535&S|x<<16;S=65535&(A=z),x=A>>>16,T=65535&(k=I),P=k>>>16,k=e[0],x+=(A=t[0])>>>16,T+=65535&k,P+=k>>>16,P+=(T+=(x+=(S+=65535&A)>>>16)>>>16)>>>16,e[0]=I=65535&T|P<<16,t[0]=z=65535&S|x<<16,S=65535&(A=L),x=A>>>16,T=65535&(k=N),P=k>>>16,k=e[1],x+=(A=t[1])>>>16,T+=65535&k,P+=k>>>16,P+=(T+=(x+=(S+=65535&A)>>>16)>>>16)>>>16,e[1]=N=65535&T|P<<16,t[1]=L=65535&S|x<<16,S=65535&(A=q),x=A>>>16,T=65535&(k=C),P=k>>>16,k=e[2],x+=(A=t[2])>>>16,T+=65535&k,P+=k>>>16,P+=(T+=(x+=(S+=65535&A)>>>16)>>>16)>>>16,e[2]=C=65535&T|P<<16,t[2]=q=65535&S|x<<16,S=65535&(A=F),x=A>>>16,T=65535&(k=D),P=k>>>16,k=e[3],x+=(A=t[3])>>>16,T+=65535&k,P+=k>>>16,P+=(T+=(x+=(S+=65535&A)>>>16)>>>16)>>>16,e[3]=D=65535&T|P<<16,t[3]=F=65535&S|x<<16,S=65535&(A=B),x=A>>>16,T=65535&(k=M),P=k>>>16,k=e[4],x+=(A=t[4])>>>16,T+=65535&k,P+=k>>>16,P+=(T+=(x+=(S+=65535&A)>>>16)>>>16)>>>16,e[4]=M=65535&T|P<<16,t[4]=B=65535&S|x<<16,S=65535&(A=K),x=A>>>16,T=65535&(k=j),P=k>>>16,k=e[5],x+=(A=t[5])>>>16,T+=65535&k,P+=k>>>16,P+=(T+=(x+=(S+=65535&A)>>>16)>>>16)>>>16,e[5]=j=65535&T|P<<16,t[5]=K=65535&S|x<<16,S=65535&(A=H),x=A>>>16,T=65535&(k=U),P=k>>>16,k=e[6],x+=(A=t[6])>>>16,T+=65535&k,P+=k>>>16,P+=(T+=(x+=(S+=65535&A)>>>16)>>>16)>>>16,e[6]=U=65535&T|P<<16,t[6]=H=65535&S|x<<16,S=65535&(A=W),x=A>>>16,T=65535&(k=V),P=k>>>16,k=e[7],x+=(A=t[7])>>>16,T+=65535&k,P+=k>>>16,P+=(T+=(x+=(S+=65535&A)>>>16)>>>16)>>>16,e[7]=V=65535&T|P<<16,t[7]=W=65535&S|x<<16,Q+=128,r-=128}return r}function J(e,t,n){var r,o=new Int32Array(8),s=new Int32Array(8),a=new Uint8Array(256),c=n;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,Q(o,s,t,n),n%=128,r=0;r<n;r++)a[r]=t[c-n+r];for(a[n]=128,a[(n=256-128*(n<112?1:0))-9]=0,f(a,n-8,c/536870912|0,c<<3),Q(o,s,a,n),r=0;r<8;r++)f(e,8*r,o[r],s[r]);return 0}function G(e,n){var r=t(),o=t(),s=t(),a=t(),c=t(),i=t(),u=t(),h=t(),d=t();j(r,e[1],e[0]),j(d,n[1],n[0]),U(r,r,d),M(o,e[0],e[1]),M(d,n[0],n[1]),U(o,o,d),U(s,e[3],n[3]),U(s,s,l),U(a,e[2],n[2]),M(a,a,a),j(c,o,r),j(i,a,s),M(u,a,s),M(h,o,r),U(e[0],c,i),U(e[1],h,u),U(e[2],u,i),U(e[3],c,h)}function Z(e,t,n){var r;for(r=0;r<4;r++)R(e[r],t[r],n)}function X(e,n){var r=t(),o=t(),s=t();z(s,n[2]),U(r,n[0],s),U(o,n[1],s),I(e,o),e[31]^=C(r)<<7}function ee(e,t,n){var r,o;for(P(e[0],s),P(e[1],a),P(e[2],a),P(e[3],s),o=255;o>=0;--o)Z(e,t,r=n[o/8|0]>>(7&o)&1),G(t,e),G(e,e),Z(e,t,r)}function te(e,n){var r=[t(),t(),t(),t()];P(r[0],u),P(r[1],h),P(r[2],a),U(r[3],u,h),ee(e,r,n)}function ne(e,r,o){var s,a=new Uint8Array(64),c=[t(),t(),t(),t()];for(o||n(r,32),J(a,r,32),a[0]&=248,a[31]&=127,a[31]|=64,te(c,a),X(e,c),s=0;s<32;s++)r[s+32]=e[s];return 0}var re=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var n,r,o,s;for(r=63;r>=32;--r){for(n=0,o=r-32,s=r-12;o<s;++o)t[o]+=n-16*t[r]*re[o-(r-32)],n=Math.floor((t[o]+128)/256),t[o]-=256*n;t[o]+=n,t[r]=0}for(n=0,o=0;o<32;o++)t[o]+=n-(t[31]>>4)*re[o],n=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=n*re[o];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function se(e){var t,n=new Float64Array(64);for(t=0;t<64;t++)n[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,n)}function ae(e,n,r,o){var s,a,c=new Uint8Array(64),i=new Uint8Array(64),l=new Uint8Array(64),u=new Float64Array(64),h=[t(),t(),t(),t()];J(c,o,32),c[0]&=248,c[31]&=127,c[31]|=64;var d=r+64;for(s=0;s<r;s++)e[64+s]=n[s];for(s=0;s<32;s++)e[32+s]=c[32+s];for(J(l,e.subarray(32),r+32),se(l),te(h,l),X(e,h),s=32;s<64;s++)e[s]=o[s];for(J(i,e,r+64),se(i),s=0;s<64;s++)u[s]=0;for(s=0;s<32;s++)u[s]=l[s];for(s=0;s<32;s++)for(a=0;a<32;a++)u[s+a]+=i[s]*c[a];return oe(e.subarray(32),u),d}function ce(e,n,r,o){var c,l=new Uint8Array(32),u=new Uint8Array(64),h=[t(),t(),t(),t()],f=[t(),t(),t(),t()];if(r<64)return-1;if(function(e,n){var r=t(),o=t(),c=t(),l=t(),u=t(),h=t(),f=t();return P(e[2],a),D(e[1],n),V(c,e[1]),U(l,c,i),j(c,c,e[2]),M(l,e[2],l),V(u,l),V(h,u),U(f,h,u),U(r,f,c),U(r,r,l),L(r,r),U(r,r,c),U(r,r,l),U(r,r,l),U(e[0],r,l),V(o,e[0]),U(o,o,l),N(o,c)&&U(e[0],e[0],d),V(o,e[0]),U(o,o,l),N(o,c)?-1:(C(e[0])===n[31]>>7&&j(e[0],s,e[0]),U(e[3],e[0],e[1]),0)}(f,o))return-1;for(c=0;c<r;c++)e[c]=n[c];for(c=0;c<32;c++)e[c+32]=o[c];if(J(u,e,r),se(u),ee(h,f,u),te(f,n.subarray(32)),G(h,f),X(l,h),r-=64,g(n,0,l,0)){for(c=0;c<r;c++)e[c]=0;return-1}for(c=0;c<r;c++)e[c]=n[c+64];return r}var ie=16,le=64,ue=32,he=64;function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function pe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function me(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:y,crypto_stream_xor:_,crypto_stream:E,crypto_stream_salsa20_xor:b,crypto_stream_salsa20:$,crypto_onetimeauth:A,crypto_onetimeauth_verify:S,crypto_verify_16:m,crypto_verify_32:g,crypto_secretbox:x,crypto_secretbox_open:T,crypto_scalarmult:q,crypto_scalarmult_base:F,crypto_box_beforenm:K,crypto_box_afternm:H,crypto_box:function(e,t,n,r,o,s){var a=new Uint8Array(32);return K(a,o,s),H(e,t,n,r,a)},crypto_box_open:function(e,t,n,r,o,s){var a=new Uint8Array(32);return K(a,o,s),W(e,t,n,r,a)},crypto_box_keypair:B,crypto_hash:J,crypto_sign:ae,crypto_sign_keypair:ne,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ie,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:le,crypto_sign_PUBLICKEYBYTES:ue,crypto_sign_SECRETKEYBYTES:he,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:i,L:re,pack25519:I,unpack25519:D,M:U,A:M,S:V,Z:j,pow2523:L,add:G,set25519:P,modL:oe,scalarmult:ee,scalarbase:te},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,n){pe(e,t,n),fe(n,t);for(var r=new Uint8Array(32+e.length),o=new Uint8Array(r.length),s=0;s<e.length;s++)r[s+32]=e[s];return x(o,r,r.length,t,n),o.subarray(ie)},e.secretbox.open=function(e,t,n){pe(e,t,n),fe(n,t);for(var r=new Uint8Array(ie+e.length),o=new Uint8Array(r.length),s=0;s<e.length;s++)r[s+ie]=e[s];return r.length<32||0!==T(o,r,r.length,t,n)?null:o.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=ie,e.scalarMult=function(e,t){if(pe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var n=new Uint8Array(32);return q(n,e,t),n},e.scalarMult.base=function(e){if(pe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return F(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,n,r,o){var s=e.box.before(r,o);return e.secretbox(t,n,s)},e.box.before=function(e,t){pe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var n=new Uint8Array(32);return K(n,e,t),n},e.box.after=e.secretbox,e.box.open=function(t,n,r,o){var s=e.box.before(r,o);return e.secretbox.open(t,n,s)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return B(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(pe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return F(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(pe(e,t),t.length!==he)throw new Error("bad secret key size");var n=new Uint8Array(le+e.length);return ae(n,e,e.length,t),n},e.sign.open=function(e,t){if(pe(e,t),t.length!==ue)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=ce(n,e,e.length,t);if(r<0)return null;for(var o=new Uint8Array(r),s=0;s<o.length;s++)o[s]=n[s];return o},e.sign.detached=function(t,n){for(var r=e.sign(t,n),o=new Uint8Array(le),s=0;s<o.length;s++)o[s]=r[s];return o},e.sign.detached.verify=function(e,t,n){if(pe(e,t,n),t.length!==le)throw new Error("bad signature size");if(n.length!==ue)throw new Error("bad public key size");var r,o=new Uint8Array(le+e.length),s=new Uint8Array(le+e.length);for(r=0;r<le;r++)o[r]=t[r];for(r=0;r<e.length;r++)o[r+le]=e[r];return ce(s,o,o.length,n)>=0},e.sign.keyPair=function(){var e=new Uint8Array(ue),t=new Uint8Array(he);return ne(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(pe(e),e.length!==he)throw new Error("bad secret key size");for(var t=new Uint8Array(ue),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(pe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(ue),n=new Uint8Array(he),r=0;r<32;r++)n[r]=e[r];return ne(t,n,!0),{publicKey:t,secretKey:n}},e.sign.publicKeyLength=ue,e.sign.secretKeyLength=he,e.sign.seedLength=32,e.sign.signatureLength=le,e.hash=function(e){pe(e);var t=new Uint8Array(64);return J(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return pe(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===p(e,0,t,0,e.length))},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,n){var r,o=new Uint8Array(n);for(r=0;r<n;r+=65536)t.getRandomValues(o.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)e[r]=o[r];me(o)}))}else(t=de)&&t.randomBytes&&e.setPRNG((function(e,n){var r,o=t.randomBytes(n);for(r=0;r<n;r++)e[r]=o[r];me(o)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})})),pe=le((function(e){var t,n;t=ie,n=function(){var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,n=unescape(encodeURIComponent(e)),r=new Uint8Array(n.length);for(t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r},e.encodeUTF8=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(n.join("")))},"undefined"==typeof atob?void 0!==Buffer.from?(e.encodeBase64=function(e){return Buffer.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(Buffer.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new Buffer(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new Buffer(e,"base64"),0))}):(e.encodeBase64=function(e){var t,n=[],r=e.length;for(t=0;t<r;t++)n.push(String.fromCharCode(e[t]));return btoa(n.join(""))},e.decodeBase64=function(e){t(e);var n,r=atob(e),o=new Uint8Array(r.length);for(n=0;n<r.length;n++)o[n]=r.charCodeAt(n);return o}),e},e.exports?e.exports=n():(t.nacl||(t.nacl={}),t.nacl.util=n())}));function me(){}class ge{constructor(e,t,n){this.prev=e,this.next=t,this.fn=n||me}run(e){this.fn(e),this.next&&this.next.run(e)}}class ve{constructor(e){this.head=new ge,this.tail=new ge(this.head),this.head.next=this.tail,this.linkConstructor=e,this.reg={}}insert(e){const t=new ge(this.tail.prev,this.tail,e);return t.next.prev=t,t.prev.next=t,t}remove(e){e.prev.next=e.next,e.next.prev=e.prev}}let ye=0;class we{constructor(){this.__events_list={}}on(e,t){const n=this.__events_list[e]||(this.__events_list[e]=new ve),r=t._eev||(t._eev=++ye);n.reg[r]||(n.reg[r]=n.insert(t))}off(e,t){if(t){const n=this.__events_list[e];if(!n)return;const r=n.reg[t._eev];n.reg[t._eev]=void 0,n&&r&&n.remove(r)}}removeListener(...e){this.off(...e)}emit(e,t){const n=this.__events_list[e];n&&n.head.run(t)}}function be(e){return Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")}function $e(e){const t=e.match(/.{1,2}(?=(.{2})+(?!.))|.{1,2}$/g);return new Uint8Array(t.map((e=>parseInt(e,16))))}function Ee(e,t=8){const n=new Array(t).fill(0);for(let r=0;r<n.length;r++){const t=255&e;n[r]=t,e=(e-t)/256}return n}var _e=ke;
/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 * @license MIT (Â© Joyent)
 */function ke(e,t){var n={seen:[],stylize:Ae};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Se(t)?n.showHidden=t:t&&Le(n,t),xe(n.showHidden)&&(n.showHidden=!1),xe(n.depth)&&(n.depth=2),xe(n.colors)&&(n.colors=!1),xe(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Te),Ve(n,e,n.depth)}function Ae(e,t){return e}function Se(e){return"boolean"==typeof e}function xe(e){return void 0===e}function Te(e,t){var n=ke.styles[t];return n?"["+ke.colors[n][0]+"m"+e+"["+ke.colors[n][1]+"m":e}function Pe(e){return"function"==typeof e}function Oe(e){return"string"==typeof e}function Re(e){return null===e}function Ie(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ne(e){return Ce(e)&&"[object RegExp]"===je(e)}function Ce(e){return"object"==typeof e&&null!==e}function De(e){return Ce(e)&&("[object Error]"===je(e)||e instanceof Error)}function Me(e){return Ce(e)&&"[object Date]"===je(e)}function je(e){return Object.prototype.toString.call(e)}function Ue(e){return"["+Error.prototype.toString.call(e)+"]"}function Ve(e,t,n){if(e.customInspect&&t&&Pe(t.inspect)&&t.inspect!==ke&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return Oe(r)||(r=Ve(e,r,n)),r}var o=function(e,t){if(xe(t))return e.stylize("undefined","undefined");if(Oe(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(r=t,"number"==typeof r)return e.stylize(""+t,"number");var r;if(Se(t))return e.stylize(""+t,"boolean");if(Re(t))return e.stylize("null","null")}(e,t);if(o)return o;var s=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);try{e.showHidden&&Object.getOwnPropertyNames&&(s=Object.getOwnPropertyNames(t))}catch(d){}if(De(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Ue(t);if(0===s.length){if(Pe(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(Ne(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Me(t))return e.stylize(Date.prototype.toString.call(t),"date");if(De(t))return Ue(t)}var i,l="",u=!1,h=["{","}"];(Array.isArray(t)&&(u=!0,h=["[","]"]),Pe(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return Ne(t)&&(l=" "+RegExp.prototype.toString.call(t)),Me(t)&&(l=" "+Date.prototype.toUTCString.call(t)),De(t)&&(l=" "+Ue(t)),0!==s.length||u&&0!=t.length?n<0?Ne(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),i=u?function(e,t,n,r,o){for(var s=[],a=0,c=t.length;a<c;++a)Ie(t,String(a))?s.push(ze(e,t,n,r,String(a),!0)):s.push("");return o.forEach((function(o){o.match(/^\d+$/)||s.push(ze(e,t,n,r,o,!0))})),s}(e,t,n,a,s):s.map((function(r){return ze(e,t,n,a,r,u)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(i,l,h)):h[0]+l+h[1]}function ze(e,t,n,r,o,s){var a,c,i;i={value:void 0};try{i.value=t[o]}catch(l){}try{Object.getOwnPropertyDescriptor&&(i=Object.getOwnPropertyDescriptor(t,o)||i)}catch(l){}if(i.get?c=i.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):i.set&&(c=e.stylize("[Setter]","special")),Ie(r,o)||(a="["+o+"]"),c||(e.seen.indexOf(i.value)<0?(c=Re(n)?Ve(e,i.value,null):Ve(e,i.value,n-1)).indexOf("\n")>-1&&(c=s?c.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+c.split("\n").map((function(e){return"   "+e})).join("\n")):c=e.stylize("[Circular]","special")),xe(a)){if(s&&o.match(/^\d+$/))return c;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+c}function Le(e,t){if(!t||!Ce(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function qe(e,t,...n){try{t==console.log?t(`${(new Date).toLocaleString()} â†’ ${_e(...n).replace(/^'/,"").replace(/'$/,"")}`):"function"==typeof t?t(...n):t&&t.logOutput(e,{source:"connectome"},...n)}catch(r){console.log(r)}}ke.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ke.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Fe=new class{write(e,...t){qe(void 0,e,...t)}red(e,...t){qe("red",e,...t)}green(e,...t){qe("green",e,...t)}yellow(e,...t){qe("yellow",e,...t)}blue(e,...t){qe("blue",e,...t)}cyan(e,...t){qe("cyan",e,...t)}magenta(e,...t){qe("magenta",e,...t)}gray(e,...t){qe("gray",e,...t)}white(e,...t){qe("white",e,...t)}};function Be({data:e,connector:t}){const{log:n}=t;var r;null!=(r=e)&&r.constructor==Object&&(e=JSON.stringify(e));const o=new Uint8Array(Ee(2*t.sentCount,24));if(t.closed())Fe.red(n,`âš ï¸ Warning: "${e}" was not sent because connector is not ready`);else if(t.sentCount>1){let r=0;"string"==typeof e&&(r=1);const s=function(e,t){const n=new Uint8Array(e.length+1),r=new Uint8Array(1);return r[0]=t,n.set(r),n.set(e,r.length),n}(1==r?fe.util.decodeUTF8(e):e,r),a=fe.secretbox(s,o,t.sharedSecret);t.verbose&&(Fe.green(n,`Connector ${t.endpoint} â†’ Sending encrypted message #${t.sentCount} â†´`),Fe.gray(n,e)),t.connection.websocket.send(a)}else t.verbose&&(Fe.green(n,`Connector ${t.endpoint} â†’ Sending message #${t.sentCount} â†´`),Fe.gray(n,e)),t.connection.websocket.send(e)}function Ke({jsonData:e,encryptedData:t,rawMessage:n,wasEncrypted:r,connector:o}){const{log:s}=o;o.lastMessageAt=Date.now();const a=new Uint8Array(Ee(2*o.receivedCount+1,24));if(o.verbose&&!r&&Fe.magenta(s,`Connector ${o.endpoint} â†’ Received message #${o.receivedCount} â†´`),e)e.jsonrpc?!function(e){return Object.keys(e).includes("result")||Object.keys(e).includes("error")}(e)?o.emit("json_rpc",n):(o.verbose&&!r&&(Fe.magenta(s,`Connector ${o.endpoint} received plain-text rpc result â†´`),Fe.gray(s,e)),o.rpcClient.jsonrpcMsgReceive(n)):o.emit("receive",{jsonData:e,rawMessage:n});else if(t){"extra"==o.verbose&&(Fe.magenta(s,`Connector ${o.endpoint} received bytes â†´`),Fe.gray(s,t),Fe.magenta(s,`Connector ${o.endpoint} decrypting with shared secret ${o.sharedSecret}...`));const e=fe.secretbox.open(t,a,o.sharedSecret),n=e[0],r=e.subarray(1);if(1==n){const e=fe.util.encodeUTF8(r);o.verbose&&Fe.write(s,`Received message: ${e}`);try{const t=JSON.parse(e);t.jsonrpc?Ke({jsonData:t,rawMessage:e,wasEncrypted:!0,connector:o}):t.state?o.emit("receive_state",t.state):t.diff?o.emit("receive_diff",t.diff):t.signal?o.emit(t.signal,t.data):t.stateField?o.emit("receive_state_field",t.stateField):o.emit("receive",{jsonData:t,rawMessage:e})}catch(c){throw Fe.red(s,"Couldn't parse json message although the flag was for string ..."),Fe.red(s,e),c}}else o.emit("receive_binary",r)}}fe.util=pe,fe.util=pe,fe.util=pe;class He extends we{constructor(e){super(),this.state=e,this.subscriptions=[]}get(){return this.state}subscribe(e){return this.subscriptions.push(e),e(this.state),()=>{this.subscriptions=this.subscriptions.filter((t=>t!==e))}}announceStateChange(){this.subscriptions.forEach((e=>e(this.state)))}}class We extends He{set(e){this.state=e,this.announceStateChange()}}class Ye extends we{constructor(e){super(),this.connector=e}send(...e){this.connector.send(...e)}}var Qe=-32700,Je=-32600,Ge=-32601,Ze=-32602,Xe=-32603,et=-32701;class tt{constructor({transports:e}){if(!e)throw new Error("TRANSPORT_REQUIRED");this.transportsToRegister=e,this.methods={}}setMethodPrefix(e){this.methodPrefix=e}expose(e){this.methods=e}registerTransport(e){e.onData(this._processRequest.bind(this,e))}async _processRequest(e,t){const n=JSON.parse(t);let r;return r=Array.isArray(n)?await Promise.all(n.map((t=>this._callMethod(t,e)))):await this._callMethod(n,e),JSON.stringify(r)}async _callMethod(e,t){if(!e.hasOwnProperty("method"))return;const{method:n,params:r=[],id:o}=e;let s=n;if(s.includes("::")){const[e,t]=s.split("::");if(s=t,this.methodPrefix&&e!=this.methodPrefix)return}let a={};if(!this.methods[s]||"function"!=typeof this.methods[s]||"constructor"===s||s.startsWith("_")||this.methods[s]===Object.prototype[s])a={jsonrpc:"2.0",id:o,error:{code:Ge,message:`Method [${s}] not found on remote target object`}};else{this.currentTransport=t;try{const e=await this.methods[s].apply(this.methods,r);if(!o)return;a={jsonrpc:"2.0",result:void 0===e?null:e,id:o}}catch(c){console.log(`Exposed RPC method ${n} internal error:`),console.log(c),console.log("Sending this error as a result to calling client ..."),a={jsonrpc:"2.0",error:{code:Xe,message:`Method [${n}] internal error: ${c.stack}`},id:o}}}return a}run(){for(const e of this.transportsToRegister)this.registerTransport(e);this.transportsToRegister=[]}}class nt extends Error{constructor(e={}){if(super(),!e.code)throw new Error("Code required");if(!e.message)throw new Error("Message required");this.code=e.code,this.message=e.message}}class rt extends nt{}var ot={Base:nt,MethodNotFound:class extends nt{constructor(e){super({code:Ge,message:e||"Method not found"})}},InvalidRequest:class extends nt{constructor(){super({code:Je,message:"Invalid request"})}},InvalidParams:class extends nt{constructor(){super({code:Ze,message:"Invalid params"})}},RemoteInternalError:class extends nt{constructor(e){super({code:Xe,message:`Error originating at remote endpoint: ${e}`||"Remote Internal error"})}},ServerError:rt,ParseError:class extends nt{constructor(){super({code:Qe,message:"Parse error"})}},RequestTimeout:class extends rt{constructor(e,t){super({code:et,message:`Request exceeded maximum execution time (${t}ms): ${e}`})}}};class st{constructor({transport:e,requestTimeout:t=2e4}){if(!e)throw new Error("TRANSPORT_REQUIRED");this.transport=e,this.requestTimeout=t,this.pendingRequest={},this.initialized=!1}setMethodPrefix(e){this.methodPrefix=e}async callMethod(e,t){this._init();const n=this.methodPrefix?`${this.methodPrefix}::${e}`:e,r=this._makeRequestObject({method:n,params:t});return this._sendRequest({object:r,id:r.id})}notify(e,t){this._init();const n=this._makeRequestObject({method:e,params:t,mode:"notify"});return this.transport.sendData(JSON.stringify(n)),!0}async runBatch(e){const t=this._generateId();let n=!0;const r=[];for(const[o,s,a]of e){const e=this._makeRequestObject({method:o,params:s,mode:a,batchId:t});e.id&&(n=!1),r.push(e)}return n?this.transport.sendData(JSON.stringify(r)):this._sendRequest({object:r,id:t})}_init(){this.initialized||(this.transport.onData(this._processResponse.bind(this)),this.initialized=!0)}_sendRequest({object:e,id:t}){const n=JSON.stringify(e);return new Promise(((r,o)=>{this.pendingRequest[t]={resolve:r,reject:o,sentObject:e},setTimeout((()=>{this.pendingRequest[t]&&(delete this.pendingRequest[t],o(new ot.RequestTimeout(n,this.requestTimeout)))}),this.requestTimeout);try{this.transport.sendData(n)}catch(s){delete this.pendingRequest[t],o(s)}}))}_processResponse(e){const t=JSON.parse(e);Array.isArray(t)?this._processBatchResponse(t):this._processSingleCallResponse(t)}_processSingleCallResponse(e){const t=e.hasOwnProperty("result")||!1,n=e.hasOwnProperty("error");if(!t&&!n)return;const r=this.pendingRequest[e.id];if(delete this.pendingRequest[e.id],r)if(t)r.resolve(e.result);else if(n){const t=this._makeErrorObject(e.error);r.reject(t)}}_processBatchResponse(e){let t;const n={},r=[];for(const i of e)i.id?(t||(t=i.id.split("|")[0]),n[i.id]=i):i.error&&r.push(i.error);if(!this.pendingRequest[t])return;const{sentObject:o,resolve:s}=this.pendingRequest[t];delete this.pendingRequest[t];const a=[];let c=0;for(const i of o){if(!i.id){a.push(null);continue}const e=n[i.id];if(e){e.hasOwnProperty("result")||!1?a.push({success:!0,result:e.result}):a.push({success:!1,result:this._makeErrorObject(e.error)})}else a.push({success:!1,error:this._makeErrorObject(r[c])}),c++}s(a)}_makeRequestObject({method:e,params:t,mode:n,batchId:r}){const o={jsonrpc:"2.0",method:e};return t&&t.length&&(o.params=t),"notify"!==n&&(o.id=r?`${r}|${this._generateId()}`:this._generateId()),o}_makeErrorObject(e){return(0,{[Ge]:()=>new ot.MethodNotFound(e.message),[Xe]:()=>new ot.RemoteInternalError(e.message)}[e.code])()}_generateId(){let e=10,t="";for(;0<e--;)t+="bjectSymhasOwnProp-0123456789ABCDEFGHIJKLMNQRTUVWXYZ_dfgiklquvxz"[64*Math.random()|0];return t}}function at(e){return new Proxy(e,{get:(e,t)=>(...n)=>e.call(null,t,n),apply:(e,t,n)=>e.apply(null,n)})}class ct{constructor(e){this.channel=e}onData(e){this.channel.on("json_rpc",(async t=>{const n=await e(t);n&&this.channel.send(n)}))}}var it=Object.freeze({__proto__:null,MoleServer:tt,MoleClient:st,MoleClientProxified:class extends st{constructor(...e){return super(...e),function(e){const t=at(e.callMethod.bind(e)),n=at(e.notify.bind(e));return new Proxy(e,{get:(r,o)=>"notify"===o?n:"callMethod"===o?t:"then"!==o?"setMethodPrefix"===o?(...t)=>e.setMethodPrefix(t):(...e)=>r.callMethod.call(r,o,e):void 0})}(this)}},ClientTransport:class{constructor(e){this.channel=e}onData(e){this.channel.on("json_rpc",e)}sendData(e){this.channel.send(e)}},ServerTransport:ct});class lt extends Error{constructor(e,t){super(e),this.name=this.constructor.name,this.errorCode=t}errorCode(){return this.errorCode}}const{MoleClient:ut,ClientTransport:ht}=it;class dt{constructor(e,t,n){this.moleChannel=new Ye(e),this.methodPrefix=t,this.connectorOrServersideChannel=e,this.client=new ut({requestTimeout:n,transport:new ht(this.moleChannel)})}jsonrpcMsgReceive(e){this.moleChannel.emit("json_rpc",e)}call(e,t){return this.connectorOrServersideChannel.closed()?new Promise(((t,n)=>{n(new lt(`Method call [${this.methodPrefix}::${e}] on closed channel or connector ignored. Please add a check for closed channel in your code.`,"CLOSED_CHANNEL"))})):this.client.callMethod(`${this.methodPrefix}::${e}`,t)}}class ft{constructor(e,t){this.connectorOrServersideChannel=e,this.remoteObjects={},this.requestTimeout=t||1e4}remoteObject(e){return this.remoteObjects[e]||(this.remoteObjects[e]=new dt(this.connectorOrServersideChannel,e,this.requestTimeout)),this.remoteObjects[e]}jsonrpcMsgReceive(e){for(const t of Object.values(this.remoteObjects))t.jsonrpcMsgReceive(e)}}class pt{constructor({serversideChannel:e,serverMethods:t,methodPrefix:n}){const r=[new ct(e)];this.server=new tt({transports:r}),this.server.expose(t),this.server.setMethodPrefix(n),this.server.run()}}function mt(){const e=fe.box.keyPair(),t=be(e.publicKey),n=be(e.secretKey);return{privateKey:e.secretKey,publicKey:e.publicKey,privateKeyHex:n,publicKeyHex:t}}fe.util=pe,fe.util=pe;
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var gt,vt=(gt=function(e,t){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}gt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),yt=Object.prototype.hasOwnProperty;function wt(e,t){return yt.call(e,t)}function bt(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)wt(e,r)&&t.push(r);return t}function $t(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Et(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function _t(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function kt(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function At(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(At(e[t]))return!0}else if("object"==typeof e){var r=bt(e),o=r.length;for(t=0;t<o;t++)if(At(e[r[t]]))return!0}return!1}function St(e,t){var n=[e];for(var r in t){var o="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==o&&n.push(r+": "+o)}return n.join("\n")}var xt=function(e){function t(t,n,r,o,s){var a=this.constructor,c=e.call(this,St(t,{name:n,index:r,operation:o,tree:s}))||this;return c.name=n,c.index=r,c.operation=o,c.tree=s,Object.setPrototypeOf(c,a.prototype),c.message=St(t,{name:n,index:r,operation:o,tree:s}),c}return vt(t,e),t}(Error),Tt=xt,Pt=$t,Ot={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=It(n,this.path);r&&(r=$t(r));var o=Nt(n,{op:"remove",path:this.from}).removed;return Nt(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=It(n,this.from);return Nt(n,{op:"add",path:this.path,value:$t(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:jt(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Rt={add:function(e,t,n){return Et(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Ot.move,copy:Ot.copy,test:Ot.test,_get:Ot._get};function It(e,t){if(""==t)return e;var n={op:"_get",path:t};return Nt(e,n),n.value}function Nt(e,t,n,r,o,s){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===s&&(s=0),n&&("function"==typeof n?n(t,0,e,t.path):Dt(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=It(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=jt(e,t.value),!1===a.test)throw new Tt("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new Tt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return a}r||(e=$t(e));var c=(t.path||"").split("/"),i=e,l=1,u=c.length,h=void 0,d=void 0,f=void 0;for(f="function"==typeof n?n:Dt;;){if(d=c[l],o&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===h&&(void 0===i[d]?h=c.slice(0,l).join("/"):l==u-1&&(h=t.path),void 0!==h&&f(t,0,e,h)),l++,Array.isArray(i)){if("-"===d)d=i.length;else{if(n&&!Et(d))throw new Tt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Et(d)&&(d=~~d)}if(l>=u){if(n&&"add"===t.op&&d>i.length)throw new Tt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);if(!1===(a=Rt[t.op].call(t,i,d,e)).test)throw new Tt("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}}else if(d&&-1!=d.indexOf("~")&&(d=kt(d)),l>=u){if(!1===(a=Ot[t.op].call(t,i,d,e)).test)throw new Tt("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}i=i[d]}}function Ct(e,t,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=!0),n&&!Array.isArray(t))throw new Tt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=$t(e));for(var s=new Array(t.length),a=0,c=t.length;a<c;a++)s[a]=Nt(e,t[a],n,!0,o,a),e=s[a].newDocument;return s.newDocument=e,s}function Dt(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new Tt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!Ot[e.op])throw new Tt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new Tt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Tt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new Tt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Tt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&At(e.value))throw new Tt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var o=e.path.split("/").length,s=r.split("/").length;if(o!==s+1&&o!==s)throw new Tt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new Tt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=Mt([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new Tt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function Mt(e,t,n){try{if(!Array.isArray(e))throw new Tt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Ct($t(t),$t(e),n||!0);else{n=n||Dt;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(o){if(o instanceof Tt)return o;throw o}}function jt(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,o,s=Array.isArray(e),a=Array.isArray(t);if(s&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!jt(e[n],t[n]))return!1;return!0}if(s!=a)return!1;var c=Object.keys(e);if((r=c.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(c[n]))return!1;for(n=r;0!=n--;)if(!jt(e[o=c[n]],t[o]))return!1;return!0}return e!=e&&t!=t}var Ut=Object.freeze({__proto__:null,JsonPatchError:Tt,deepClone:Pt,getValueByPointer:It,applyOperation:Nt,applyPatch:Ct,applyReducer:function(e,t,n){var r=Nt(e,t);if(!1===r.test)throw new Tt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument},validator:Dt,validate:Mt,_areEquals:jt}),Vt=new WeakMap,zt=function(e){this.observers=new Map,this.obj=e},Lt=function(e,t){this.callback=e,this.observer=t};
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */function qt(e,t){void 0===t&&(t=!1);var n=Vt.get(e.object);Ft(n.value,e.object,e.patches,"",t),e.patches.length&&Ct(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Ft(e,t,n,r,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var s=bt(t),a=bt(e),c=!1,i=a.length-1;i>=0;i--){var l=e[h=a[i]];if(!wt(t,h)||void 0===t[h]&&void 0!==l&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(o&&n.push({op:"test",path:r+"/"+_t(h),value:$t(l)}),n.push({op:"remove",path:r+"/"+_t(h)}),c=!0):(o&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}));else{var u=t[h];"object"==typeof l&&null!=l&&"object"==typeof u&&null!=u?Ft(l,u,n,r+"/"+_t(h),o):l!==u&&(o&&n.push({op:"test",path:r+"/"+_t(h),value:$t(l)}),n.push({op:"replace",path:r+"/"+_t(h),value:$t(u)}))}}if(c||s.length!=a.length)for(i=0;i<s.length;i++){var h;wt(e,h=s[i])||void 0===t[h]||n.push({op:"add",path:r+"/"+_t(h),value:$t(t[h])})}}}var Bt=Object.freeze({__proto__:null,unobserve:function(e,t){t.unobserve()},observe:function(e,t){var n,r=function(e){return Vt.get(e)}(e);if(r){var o=function(e,t){return e.observers.get(t)}(r,t);n=o&&o.observer}else r=new zt(e),Vt.set(e,r);if(n)return n;if(n={},r.value=$t(e),t){n.callback=t,n.next=null;var s=function(){qt(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return n.patches=[],n.object=e,n.unobserve=function(){qt(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new Lt(t,n)),n},generate:qt,compare:function(e,t,n){void 0===n&&(n=!1);var r=[];return Ft(e,t,r,"",n),r}}),Kt=Object.assign({},Ut,Bt,{JsonPatchError:xt,deepClone:$t,escapePathComponent:_t,unescapePathComponent:kt});const{applyPatch:Ht}=Kt;class Wt extends We{constructor(e){super({}),this.connector=e,this.connector.on("receive_state",(e=>{this.wireStateReceived=!0,this.set(e)})),this.connector.on("receive_diff",(e=>{this.wireStateReceived&&(Ht(this.state,e),this.announceStateChange())}))}field(e){return this.connector.connectionState.get(e)}}class Yt extends We{constructor(e){super({}),this.fields={},this.connector=e,this.connector.on("receive_state_field",(({name:e,state:t})=>{this.get(e).set(t)}))}get(e){return this.fields[e]||(this.fields[e]=new We),this.fields[e]}}fe.util=pe;class Qt extends we{constructor({endpoint:e,protocol:t,keypair:n=mt(),rpcRequestTimeout:r,verbose:o=!1,tag:s,log:a=console.log,autoDecommission:c=!1,dummy:i}={}){super(),this.protocol=t,this.log=a;const{privateKey:l,publicKey:u}=function(e){return e.publicKeyHex&&!e.publicKey&&(e.publicKey=$e(e.publicKeyHex)),e.privateKeyHex&&!e.privateKey&&(e.privateKey=$e(e.privateKeyHex)),e}(n);this.clientPrivateKey=l,this.clientPublicKey=u,this.clientPublicKeyHex=be(u),this.rpcClient=new ft(this,r),this.endpoint=e,this.verbose=o,this.tag=s,this.autoDecommission=c,this.sentCount=0,this.receivedCount=0,this.successfulConnectsCount=0,i||(this.state=new Wt(this),this.connectionState=new Yt(this)),this.connected=new We,this.delayedAdjustConnectionStatus(),o&&Fe.green(this.log,`Connector ${this.endpoint} created`),this.decommissionCheckCounter=0,this.lastPongReceivedAt=Date.now(),this.on("pong",(()=>{this.lastPongReceivedAt=Date.now()}))}delayedAdjustConnectionStatus(){setTimeout((()=>{null==this.connected.get()&&this.connected.set(!1)}),700)}send(e){Be({data:e,connector:this}),this.sentCount+=1}signal(e,t){this.connected.get()?this.send({signal:e,data:t}):Fe.write(this.log,"Warning: trying to send signal over disconnected connector, this should be prevented by GUI")}userAction({action:e,scope:t,payload:n}){this.signal("__action",{action:e,scope:t,payload:n})}on(e,t){"ready"==e&&this.isReady()&&t(),super.on(e,t)}getSharedSecret(){return this.sharedSecret?be(this.sharedSecret):void 0}wireReceive({jsonData:e,encryptedData:t,rawMessage:n}){Ke({jsonData:e,encryptedData:t,rawMessage:n,connector:this}),this.receivedCount+=1}field(e){return this.connectionState.get(e)}isReady(){return this.ready}closed(){return!this.transportConnected}connectStatus(e){if(e){this.sentCount=0,this.receivedCount=0,this.transportConnected=!0,this.successfulConnectsCount+=1,this.verbose&&Fe.green(this.log,`âœ“ Connector ${this.endpoint} connected #${this.successfulConnectsCount}`);const e=this.connection.websocket.__id;(function({connector:e,afterFirstStep:t=(()=>{})}){const{clientPrivateKey:n,clientPublicKey:r,clientPublicKeyHex:o,protocol:s,tag:a,endpoint:c,verbose:i}=e;return new Promise(((r,l)=>{e.remoteObject("Auth").call("exchangePubkeys",{pubkey:o}).then((o=>{const u=fe.box.before($e(o),n);t({sharedSecret:u,remotePubkeyHex:o}),i&&Fe.write(e.log,`Connector ${c} established shared secret through diffie-hellman exchange.`),e.remoteObject("Auth").call("finalizeHandshake",{protocol:s}).then((t=>{if(t&&t.error)console.log(t.error);else{r();const t=a?` (${a})`:"";Fe.cyan(e.log,`${c}${t} âœ“ Connection [ ${s||'"no-name"'} ] ready`)}})).catch(l)})).catch(l)}))})({connector:this,afterFirstStep:({sharedSecret:e,remotePubkeyHex:t})=>{this.sharedSecret=e,this._remotePubkeyHex=t}}).then((()=>{this.connectedAt=Date.now(),this.connected.set(!0),this.ready=!0,this.emit("ready")})).catch((t=>{this.connection.websocket.__id==e&&1==this.connection.websocket.readyState&&t.code==et&&(Fe.write(this.log,`${this.endpoint} x Connector [ ${this.protocol} ] handshake error: "${t.message}"`),Fe.write(this.log,`${this.endpoint} Connector dropping stale websocket after handshake error`),this.connection.terminate()),t.code!=et&&Fe.write(this.log,`${this.endpoint} x Connector [ ${this.protocol} ] on:ready error: "${t.stack}" â€” (will not try to reconnect, fix the error and reload this gui)`)}))}else{let t;this.transportConnected&&(t=!0),null==this.transportConnected&&Fe.write(this.log,`${this.endpoint} Connector was not able to connect at first try`),this.transportConnected=!1,this.ready=!1,this.sharedSecret=void 0,delete this.connectedAt,t&&(this.emit("disconnect"),null==e&&this.delayedAdjustConnectionStatus(),this.connected.set(e))}}checkForDecommission(){this.autoDecommission&&(this.decommissionCheckRequestedAt&&Date.now()-this.decommissionCheckRequestedAt>3e3&&(this.decommissionCheckCounter=0),this.decommissionCheckRequestedAt=Date.now(),this.decommissionCheckCounter+=1,this.decommissionCheckCounter>12&&Date.now()-this.lastPongReceivedAt>6e4&&(Fe.write(this.log,`Decommissioning connector ${this.endpoint} (long inactive)`),this.decommission(),this.emit("decommission")))}decommission(){this.decommissioned=!0}remoteObject(e){return{call:(t,n=[])=>{return this.rpcClient.remoteObject(e).call(t,void 0===(r=n)||null==r?[]:Array.isArray(r)?r:[r]);var r}}}attachObject(e,t){new pt({serversideChannel:this,serverMethods:t,methodPrefix:e})}clientPubkey(){return this.clientPublicKeyHex}remotePubkeyHex(){return this._remotePubkeyHex}remoteAddress(){return this.endpoint}}const Jt="undefined"!=typeof window;const Gt="undefined"!=typeof window;function Zt({endpoint:e,host:t,port:n,protocol:r,keypair:o,remotePubkey:s,rpcRequestTimeout:a,autoDecommission:c,log:i,verbose:l,tag:u,dummy:h},{WebSocket:d}){e=function({endpoint:e,host:t,port:n}){Jt&&e&&e.startsWith("/")&&(e=`${window.location.protocol.includes("s")?"wss":"ws"}://${window.location.host}${e}`);if(!e)if(Jt){t=t||window.location.hostname;const r=window.location.protocol.includes("s")?"wss":"ws";e=`${r}://${t}`,"wss"==r?e=`${r}://${t}/ws`:n?e=`${e}:${n}`:window.location.port&&(e=`${e}:${window.location.port}`)}else{if(!n)throw new Error(`Connectome determineEndpoint: No websocket port provided for ${t}`);e=`ws://${t||"localhost"}:${n}`}return e}({endpoint:e,host:t,port:n});const f=new Qt({endpoint:e,protocol:r,rpcRequestTimeout:a,keypair:o,verbose:l,tag:u,log:i,autoDecommission:c,dummy:h}),p=()=>{!function({connector:e,endpoint:t},{WebSocket:n,reconnect:r,log:o,verbose:s}){const a=e.connection;if(e.checkForDecommission(),e.decommissioned)return void Xt(e);if(a.currentlyTryingWS&&0==a.currentlyTryingWS.readyState){if(a.currentlyTryingWS._waitForConnectCounter<5)return void(a.currentlyTryingWS._waitForConnectCounter+=1);(s||Gt)&&Fe.write(o,`${t} Reconnect timeout, creating new ws`),a.currentlyTryingWS._removeAllCallbacks(),a.currentlyTryingWS.close()}else(s||Gt)&&Fe.write(o,`${t} Created new websocket`);const c=new n(t);c.__id=Math.random(),a.currentlyTryingWS=c,a.currentlyTryingWS._waitForConnectCounter=0,Gt&&(c.binaryType="arraybuffer");Gt||c.on("error",(()=>{}));const i=()=>{e.decommissioned||((s||Gt)&&Fe.write(o,`${t} Websocket open`),a.currentlyTryingWS=null,a.checkTicker=0,function({ws:e,connector:t,openCallback:n,reconnect:r},{log:o,verbose:s}){const a=t.connection,c=e=>{const n=`${t.endpoint} Websocket error`;console.log(n),console.log(e)},i=()=>{Fe.write(o,`${t.endpoint} âœ– Connection closed`),t.decommissioned?t.connectStatus(!1):(t.connectStatus(void 0),r())},l=e=>{if(t.decommissioned)return;a.checkTicker=0;const n=Gt?e.data:e;if("pong"==n)return void t.emit("pong");let r;try{r=JSON.parse(n)}catch(o){}if(r)t.wireReceive({jsonData:r,rawMessage:n});else{const e=Gt?new Uint8Array(n):n;t.wireReceive({encryptedData:e})}};e._removeAllCallbacks=()=>{e.removeEventListener("error",c),e.removeEventListener("close",i),e.removeEventListener("message",l),e.removeEventListener("open",n)},Gt?(e.addEventListener("error",c),e.addEventListener("close",i),e.addEventListener("message",l)):(e.on("error",c),e.on("close",i),e.on("message",l))}({ws:c,connector:e,openCallback:i,reconnect:r},{log:o,verbose:s}),a.websocket=c,e.connectStatus(!0))};c._removeAllCallbacks=()=>{c.removeEventListener("open",i)},Gt?c.addEventListener("open",i):c.on("open",i)}({connector:f,endpoint:e},{WebSocket:d,reconnect:p,log:i,verbose:l})};f.connection={terminate(){this.websocket._removeAllCallbacks(),this.websocket.close(),f.connectStatus(!1),p()},endpoint:e,checkTicker:0};const m=()=>{f.decommissioned||(!function({connector:e,reconnect:t,log:n}){const r=e.connection;if(function(e){return en(e)&&e.checkTicker>3}(r)||e.decommissioned)return e.decommissioned?(Fe.yellow(n,`${e.endpoint} Connection decommisioned, closing websocket ${r.websocket.__id}, will not retry again `),Xt(e)):(e.emit("inactive_connection"),Fe.yellow(n,`${e.endpoint} âœ– Terminated inactive connection`)),void r.terminate();en(r)?r.websocket.send("ping"):(null==e.connected&&(Fe.write(n,`${e.endpoint} Setting connector status to FALSE because connector.connected is undefined`),e.connectStatus(!1)),t());r.checkTicker+=1}({connector:f,reconnect:p,log:i}),setTimeout(m,1e3))};return setTimeout(m,10),f}function Xt(e){const t=e.connection;t.currentlyTryingWS&&(t.currentlyTryingWS._removeAllCallbacks(),t.currentlyTryingWS.close(),t.currentlyTryingWS=null),t.ws&&(t.ws._removeAllCallbacks(),t.ws.close(),t.ws=null),e.connectStatus(!1)}function en(e){return e.websocket&&1==e.websocket.readyState}function tn(e){return e.log=e.log||console.log,Zt(e,{WebSocket:WebSocket})}class nn{constructor(e,t){this.num=e,this.callback=t,this.counter=0}oneConditionFulfilled(){this.counter+=1,this.counter==this.num&&this.callback()}}var rn=Object.freeze({__proto__:null,promiseTimeout:function(e,t){const n=new Promise(((t,n)=>{const r=setTimeout((()=>{clearTimeout(r),n(new Error(`Timed out in ${e} ms.`))}),e)}));return Promise.race([t,n])},requireConditions:function(e,t){return new nn(e,t)}});const on=l(),sn=l(),an=l(),cn=l(),ln="localhost"==window.location.hostname||"127.0.0.1"==window.location.hostname,un=ln||window.location.hostname.startsWith("192.168."),hn="zetaseek.com"==window.location.hostname,dn=u(an,(e=>ln&&"eclipse"==e)),fn=u(dn,(e=>e||hn)),pn=u(sn,(e=>ln||e)),mn=u(fn,(e=>e||"guest.zetaseek.com"==window.location.hostname)),gn=u(on,(e=>e<768));function vn(e,t){return`<span style="color: ${t};">${e}</span>`}var yn={white:function(e){return vn(e,"white")},red:function(e){return vn(e,"#E34042")},green:function(e){return vn(e,"#5FE02A")},gray:function(e){return vn(e,"#C3C6C6")},yellow:function(e){return vn(e,"#E5AE34")},cyan:function(e){return vn(e,"#29B3BF")},magenta:function(e){return vn(e,"#A144E9")}};function wn(){return"undefined"!=typeof ethereum&&ethereum.isMetaMask}function bn(e){if(e.length>0)return e[0]}function $n(e){return()=>new Promise(((t,n)=>{new Promise(((e,t)=>{wn()?ethereum.request({method:"eth_requestAccounts"}).then((({result:t})=>{e(t)})).catch((e=>{4001===e.code?t(new Error("Please connect to MetaMask.")):t(e)})):t(new Error("Metamask not installed! Why was the connect button shown ?"))})).then((t=>{const n=bn(t);n?e(n):(console.log("WARNING: received this from eth_requestAccounts, could not parse out a single account:"),console.log(t),console.log("--------------------"))})).catch(n)}))}var En=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",metamaskInit:function e(t=(()=>{}),{retryCount:n=20}={}){const r=20==n;return wn()?(ethereum.selectedAddress?t(ethereum.selectedAddress):n>0&&setTimeout((()=>e(t,{retryCount:n-1})),100),r&&ethereum.on("accountsChanged",(e=>{const n=bn(e);n&&t(n)})),$n(t)):(console.log("METAMASK INIT FAILED: not installed"),!1)}});function _n(e){return e?e.trim().replace(/\s+/g," "):e}let kn,An,Sn,xn="";const Tn=[];function Pn({searchQuery:e="",page:t,searchMode:n,selectedTags:r,keepSelectedTags:o,remoteObject:s,remoteMethod:a,searchStatusCallback:c=(()=>{}),searchDelay:i=1300,force:l,searchMetadata:u,timezone:d}){return new Promise(((f,p)=>{if(""==e.trim())return Tn.push(Date.now()),o||r.set({}),(""!=xn||l)&&(clearTimeout(Sn),c({searching:!1}),f(l?null:[])),xn=e,kn=t,void(An=n);try{(l||function({searchQuery:e,prevQuery:t,searchMode:n,prevSearchMode:r,page:o,prevPage:s}){return _n(e)!=_n(t)||n!=r||o!=s}({searchQuery:e,prevQuery:xn,searchMode:n,prevSearchMode:An,page:t,prevPage:kn}))&&(o||r.set({}),clearTimeout(Sn),c({searching:!0}),xn=e,kn=t,An=n,Sn=setTimeout((()=>{const n=Date.now();Tn.push(n),console.log(`Search executed on remote object: ${e}`),s.call(a,{query:_n(e),page:t,selectedTags:Object.keys(h(r)),searchMetadata:u,timezone:d}).then((e=>{const t=Tn[Tn.length-1];if(n==t){const t=e.filter((e=>e.error||0==e.results.length)).length==e.length,n=e.filter((e=>{var t;return null==(t=e.results)?void 0:t.length})),r=n.filter((e=>e.meta.noMorePages)).length==n.length;c({searching:!1,noHits:t,noMorePages:r}),f(e)}else console.log("Discarding search result which came out of order because a more recent result is due ...")})).catch((e=>{c({searching:!1}),console.log("executeSearch ERROR:"),console.log(e),p(e)}))}),i))}catch(m){console.log("This error should not happen: bug in dmt-js"),c({searching:!1}),p(m)}}))}const On=l(),Rn=l(1),In=l(),Nn=l(0),Cn=l({}),Dn=l(!1),Mn=l(!1),jn=l(!1),Un=l({});function Vn(e){let t,n,r,o,s,a,c;return{c(){t=m("div"),n=m("div"),r=m("a"),o=g("DMT SYSTEM"),s=v(),a=m("span"),c=g(e[0]),this.h()},l(i){t=y(i,"DIV",{class:!0});var l=w(t);n=y(l,"DIV",{class:!0});var u=w(n);r=y(u,"A",{href:!0,class:!0});var h=w(r);o=b(h,"DMT SYSTEM"),h.forEach($),u.forEach($),s=E(l),a=y(l,"SPAN",{class:!0});var d=w(a);c=b(d,e[0]),d.forEach($),l.forEach($),this.h()},h(){_(r,"href","https://dmt-system.com"),_(r,"class","svelte-1873t78"),_(n,"class","tagline svelte-1873t78"),_(a,"class","version svelte-1873t78"),_(t,"class","about svelte-1873t78")},m(e,i){k(e,t,i),A(t,n),A(n,r),A(r,o),A(t,s),A(t,a),A(a,c)},p(e,[t]){1&t&&S(c,e[0])},i:x,o:x,d(e){e&&$(t)}}}function zn(e,t,n){let r,{dmtVersion:o}=t;return e.$$set=e=>{"dmtVersion"in e&&n(1,o=e.dmtVersion)},e.$$.update=()=>{2&e.$$.dirty&&n(0,r=o?`v${o}`:"")},[r,o]}class Ln extends d{constructor(e){super(),f(this,e,zn,Vn,p,{dmtVersion:1})}}function qn(e,t,n){const r=e.slice();return r[7]=t[n].deviceTag,r[8]=t[n].operational,r[9]=t[n].versionCompareSymbol,r[10]=t[n].peerState,r}function Fn(e){let t,n;function r(e,t){return e[1]&&e[1].length>0?Kn:Bn}let o=r(e),s=o(e),a=e[1]&&Hn(e);return{c(){s.c(),t=v(),a&&a.c(),n=T()},l(e){s.l(e),t=E(e),a&&a.l(e),n=T()},m(e,r){s.m(e,r),k(e,t,r),a&&a.m(e,r),k(e,n,r)},p(e,c){o!==(o=r(e))&&(s.d(1),s=o(e),s&&(s.c(),s.m(t.parentNode,t))),e[1]?a?a.p(e,c):(a=Hn(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(e){s.d(e),e&&$(t),a&&a.d(e),e&&$(n)}}}function Bn(e){let t,n,r,o;return{c(){t=m("span"),n=g("Peers â†’ "),r=m("span"),o=g("Not following anyone yet."),this.h()},l(e){t=y(e,"SPAN",{class:!0});var s=w(t);n=b(s,"Peers â†’ "),r=y(s,"SPAN",{class:!0});var a=w(r);o=b(a,"Not following anyone yet."),a.forEach($),s.forEach($),this.h()},h(){_(r,"class","white svelte-13gawhg"),_(t,"class","title svelte-13gawhg")},m(e,s){k(e,t,s),A(t,n),A(t,r),A(r,o)},d(e){e&&$(t)}}}function Kn(e){let t,n;return{c(){t=m("span"),n=g("â€” Following Peers â€”"),this.h()},l(e){t=y(e,"SPAN",{class:!0});var r=w(t);n=b(r,"â€” Following Peers â€”"),r.forEach($),this.h()},h(){_(t,"class","title svelte-13gawhg")},m(e,r){k(e,t,r),A(t,n)},d(e){e&&$(t)}}}function Hn(e){let t,n=e[1],r=[];for(let o=0;o<n.length;o+=1)r[o]=Jn(qn(e,n,o));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=T()},l(e){for(let t=0;t<r.length;t+=1)r[t].l(e);t=T()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);k(e,t,n)},p(e,o){if(2&o){let s;for(n=e[1],s=0;s<n.length;s+=1){const a=qn(e,n,s);r[s]?r[s].p(a,o):(r[s]=Jn(a),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){O(r,e),e&&$(t)}}}function Wn(e){let t,n=e[10].dmtVersion&&Yn(e);return{c(){n&&n.c(),t=T()},l(e){n&&n.l(e),t=T()},m(e,r){n&&n.m(e,r),k(e,t,r)},p(e,r){e[10].dmtVersion?n?n.p(e,r):(n=Yn(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&$(t)}}}function Yn(e){let t,n,r,o=e[10].dmtVersion+"",s=e[9]&&Qn(e);return{c(){t=m("span"),s&&s.c(),n=v(),r=g(o),this.h()},l(e){t=y(e,"SPAN",{class:!0});var a=w(t);s&&s.l(a),n=E(a),r=b(a,o),a.forEach($),this.h()},h(){_(t,"class","dmt_version svelte-13gawhg")},m(e,o){k(e,t,o),s&&s.m(t,null),A(t,n),A(t,r)},p(e,a){e[9]?s?s.p(e,a):(s=Qn(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),2&a&&o!==(o=e[10].dmtVersion+"")&&S(r,o)},d(e){e&&$(t),s&&s.d()}}}function Qn(e){let t,n,r=e[9]+"";return{c(){t=m("span"),n=g(r),this.h()},l(e){t=y(e,"SPAN",{class:!0});var o=w(t);n=b(o,r),o.forEach($),this.h()},h(){_(t,"class","compare svelte-13gawhg")},m(e,r){k(e,t,r),A(t,n)},p(e,t){2&t&&r!==(r=e[9]+"")&&S(n,r)},d(e){e&&$(t)}}}function Jn(e){let t,n,r,o,s,a,c,i,l,u,h=e[7]+"",d=e[10]&&Wn(e);return{c(){t=m("div"),n=m("span"),r=g("ok"),o=v(),s=m("span"),a=g("âœ–"),c=v(),i=g(h),l=v(),d&&d.c(),u=v(),this.h()},l(e){t=y(e,"DIV",{class:!0});var f=w(t);n=y(f,"SPAN",{class:!0});var p=w(n);r=b(p,"ok"),p.forEach($),o=E(f),s=y(f,"SPAN",{class:!0});var m=w(s);a=b(m,"âœ–"),m.forEach($),c=E(f),i=b(f,h),l=E(f),d&&d.l(f),u=E(f),f.forEach($),this.h()},h(){_(n,"class","ok svelte-13gawhg"),_(s,"class","cross svelte-13gawhg"),_(t,"class","peer svelte-13gawhg"),P(t,"operational",1==e[8])},m(e,h){k(e,t,h),A(t,n),A(n,r),A(t,o),A(t,s),A(s,a),A(t,c),A(t,i),A(t,l),d&&d.m(t,null),A(t,u)},p(e,n){2&n&&h!==(h=e[7]+"")&&S(i,h),e[10]?d?d.p(e,n):(d=Wn(e),d.c(),d.m(t,u)):d&&(d.d(1),d=null),2&n&&P(t,"operational",1==e[8])},d(e){e&&$(t),d&&d.d()}}}function Gn(e){let t,n=e[2]&&Fn(e);return{c(){t=m("div"),n&&n.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var r=w(t);n&&n.l(r),r.forEach($),this.h()},h(){_(t,"class","peerlist svelte-13gawhg")},m(e,r){k(e,t,r),n&&n.m(t,null)},p(e,[r]){e[2]?n?n.p(e,r):(n=Fn(e),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i:x,o:x,d(e){e&&$(t),n&&n.d()}}}function Zn(e,t,n){let r,o,s,a,c=x,i=()=>(c(),c=R(l,(e=>n(5,s=e))),l);e.$$.on_destroy.push((()=>c()));let{backend:l}=t;i();const{connected:u}=l;return I(e,u,(e=>n(2,a=e))),e.$$set=e=>{"backend"in e&&i(n(0,l=e.backend))},e.$$.update=()=>{32&e.$$.dirty&&n(4,r=s.device),16&e.$$.dirty&&r&&r.dmtVersion,32&e.$$.dirty&&n(1,o=s.peerlist)},[l,o,a,u,r,s]}class Xn extends d{constructor(e){super(),f(this,e,Zn,Gn,p,{backend:0})}}function er(e){let t,n;return t=new Xn({props:{backend:e[1]}}),{c(){N(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){D(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.backend=e[1]),t.$set(r)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function tr(e){let t,n,r,o=e[5]&&er(e);return{c(){t=m("div"),o&&o.c(),n=v(),this.h()},l(e){t=y(e,"DIV",{class:!0});var r=w(t);o&&o.l(r),n=E(r),r.forEach($),this.h()},h(){_(t,"class","leftbar svelte-1fmv5sa")},m(e,s){k(e,t,s),o&&o.m(t,null),A(t,n),r=!0},p(e,[r]){e[5]?o?(o.p(e,r),32&r&&M(o,1)):(o=er(e),o.c(),M(o,1),o.m(t,n)):o&&(V(),j(o,1,1,(()=>{o=null})),z())},i(e){r||(M(o),M(false),r=!0)},o(e){j(o),j(false),r=!1},d(e){e&&$(t),o&&o.d()}}}function nr(e,t,n){let r,o,s,a=x,c=()=>(a(),a=R(i,(e=>n(7,s=e))),i);I(e,pn,(e=>n(5,r=e))),I(e,fn,(e=>n(6,o=e))),e.$$.on_destroy.push((()=>a()));let{connected:i}=t;c();let l,u,h,{backend:d}=t,{backend2:f}=t;return f&&f.subscribe((({meetup:e})=>{n(2,l=null==e?void 0:e.meetupScheduled),n(3,u=null==e?void 0:e.meetupStatus)})),L((()=>{setTimeout((()=>{n(4,h=!0)}),1e3)})),e.$$set=e=>{"connected"in e&&c(n(0,i=e.connected)),"backend"in e&&n(1,d=e.backend),"backend2"in e&&n(8,f=e.backend2)},[i,d,l,u,h,r,o,s,f]}class rr extends d{constructor(e){super(),f(this,e,nr,tr,p,{connected:0,backend:1,backend2:8})}}function or(e,t,n){const r=e.slice();return r[5]=t[n],r}function sr(e){let t,n;return{c(){t=m("span"),n=g("No results for:"),this.h()},l(e){t=y(e,"SPAN",{class:!0});var r=w(t);n=b(r,"No results for:"),r.forEach($),this.h()},h(){_(t,"class","no_hits_notice svelte-172m6ii")},m(e,r){k(e,t,r),A(t,n)},d(e){e&&$(t)}}}function ar(e){let t,n=e[1],r=[];for(let o=0;o<n.length;o+=1)r[o]=cr(or(e,n,o));return{c(){t=m("div");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=y(e,"DIV",{class:!0});var n=w(t);for(let t=0;t<r.length;t+=1)r[t].l(n);n.forEach($),this.h()},h(){_(t,"class","tags svelte-172m6ii")},m(e,n){k(e,t,n);for(let o=0;o<r.length;o+=1)r[o].m(t,null)},p(e,o){if(2&o){let s;for(n=e[1],s=0;s<n.length;s+=1){const a=or(e,n,s);r[s]?r[s].p(a,o):(r[s]=cr(a),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){e&&$(t),O(r,e)}}}function cr(e){let t,n,r,o=e[5]+"";return{c(){t=m("div"),n=g(o),r=v(),this.h()},l(e){t=y(e,"DIV",{class:!0});var s=w(t);n=b(s,o),r=E(s),s.forEach($),this.h()},h(){_(t,"class","tag svelte-172m6ii")},m(e,o){k(e,t,o),A(t,n),A(t,r)},p(e,t){2&t&&o!==(o=e[5]+"")&&S(n,o)},d(e){e&&$(t)}}}function ir(e){var t;let n,r,o,s,a,c,i,l=0==e[3]&&sr(),u=(null==(t=e[1])?void 0:t.length)&&ar(e);return{c(){n=m("div"),l&&l.c(),r=v(),o=g(e[0]),s=v(),u&&u.c(),a=v(),c=m("div"),i=g(e[2]),this.h()},l(t){n=y(t,"DIV",{class:!0});var h=w(n);l&&l.l(h),r=E(h),o=b(h,e[0]),s=E(h),u&&u.l(h),a=E(h),c=y(h,"DIV",{class:!0});var d=w(c);i=b(d,e[2]),d.forEach($),h.forEach($),this.h()},h(){_(c,"class","timezone svelte-172m6ii"),_(n,"class","query svelte-172m6ii")},m(e,t){k(e,n,t),l&&l.m(n,null),A(n,r),A(n,o),A(n,s),u&&u.m(n,null),A(n,a),A(n,c),A(c,i)},p(e,[t]){var s;0==e[3]?l||(l=sr(),l.c(),l.m(n,r)):l&&(l.d(1),l=null),1&t&&S(o,e[0]),(null==(s=e[1])?void 0:s.length)?u?u.p(e,t):(u=ar(e),u.c(),u.m(n,a)):u&&(u.d(1),u=null),4&t&&S(i,e[2])},i:x,o:x,d(e){e&&$(n),l&&l.d(),u&&u.d()}}}function lr(e,t,n){let{query:r}=t,{selectedTags:o}=t,{timezone:s}=t,{totalHits:a}=t,{i:c}=t;return e.$$set=e=>{"query"in e&&n(0,r=e.query),"selectedTags"in e&&n(1,o=e.selectedTags),"timezone"in e&&n(2,s=e.timezone),"totalHits"in e&&n(3,a=e.totalHits),"i"in e&&n(4,c=e.i)},[r,o,s,a,c]}class ur extends d{constructor(e){super(),f(this,e,lr,ir,p,{query:0,selectedTags:1,timezone:2,totalHits:3,i:4})}}function hr(e){let t,n,r,o,s,a;return{c(){t=m("div"),n=m("a"),r=g(e[0]),o=v(),s=m("div"),a=g(e[1]),this.h()},l(c){t=y(c,"DIV",{class:!0});var i=w(t);n=y(i,"A",{href:!0,class:!0});var l=w(n);r=b(l,e[0]),l.forEach($),o=E(i),s=y(i,"DIV",{class:!0});var u=w(s);a=b(u,e[1]),u.forEach($),i.forEach($),this.h()},h(){_(n,"href",e[0]),_(n,"class","svelte-y9481j"),_(s,"class","timezone svelte-y9481j"),_(t,"class","query svelte-y9481j")},m(e,c){k(e,t,c),A(t,n),A(n,r),A(t,o),A(t,s),A(s,a)},p(e,[t]){1&t&&S(r,e[0]),1&t&&_(n,"href",e[0]),2&t&&S(a,e[1])},i:x,o:x,d(e){e&&$(t)}}}function dr(e,t,n){let{url:r}=t,{timezone:o}=t,{i:s}=t;return e.$$set=e=>{"url"in e&&n(0,r=e.url),"timezone"in e&&n(1,o=e.timezone),"i"in e&&n(2,s=e.i)},[r,o,s]}class fr extends d{constructor(e){super(),f(this,e,dr,hr,p,{url:0,timezone:1,i:2})}}function pr(e,t,n){const r=e.slice();return r[1]=t[n],r[3]=n,r}function mr(e){let t,n,r,o,s,a=e[0],c=[];for(let l=0;l<a.length;l+=1)c[l]=yr(pr(e,a,l));const i=e=>j(c[e],1,1,(()=>{c[e]=null}));return{c(){t=m("h3"),n=g("â€” Recent clicks and searches â€”"),r=v();for(let e=0;e<c.length;e+=1)c[e].c();o=T(),this.h()},l(e){t=y(e,"H3",{class:!0});var s=w(t);n=b(s,"â€” Recent clicks and searches â€”"),s.forEach($),r=E(e);for(let t=0;t<c.length;t+=1)c[t].l(e);o=T(),this.h()},h(){_(t,"class","svelte-1ojil64")},m(e,a){k(e,t,a),A(t,n),k(e,r,a);for(let t=0;t<c.length;t+=1)c[t].m(e,a);k(e,o,a),s=!0},p(e,t){if(1&t){let n;for(a=e[0],n=0;n<a.length;n+=1){const r=pr(e,a,n);c[n]?(c[n].p(r,t),M(c[n],1)):(c[n]=yr(r),c[n].c(),M(c[n],1),c[n].m(o.parentNode,o))}for(V(),n=a.length;n<c.length;n+=1)i(n);z()}},i(e){if(!s){for(let e=0;e<a.length;e+=1)M(c[e]);s=!0}},o(e){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)j(c[t]);s=!1},d(e){e&&$(t),e&&$(r),O(c,e),e&&$(o)}}}function gr(e){let t,n;const r=[e[1],{i:e[3]}];let o={};for(let s=0;s<r.length;s+=1)o=q(o,r[s]);return t=new fr({props:o}),{c(){N(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){D(t,e,r),n=!0},p(e,n){const o=1&n?F(r,[B(e[1]),r[1]]):{};t.$set(o)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function vr(e){let t,n;const r=[e[1],{i:e[3]}];let o={};for(let s=0;s<r.length;s+=1)o=q(o,r[s]);return t=new ur({props:o}),{c(){N(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){D(t,e,r),n=!0},p(e,n){const o=1&n?F(r,[B(e[1]),r[1]]):{};t.$set(o)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function yr(e){let t,n,r,o;const s=[vr,gr],a=[];function c(e,t){return e[1].query?0:e[1].url?1:-1}return~(t=c(e))&&(n=a[t]=s[t](e)),{c(){n&&n.c(),r=T()},l(e){n&&n.l(e),r=T()},m(e,n){~t&&a[t].m(e,n),k(e,r,n),o=!0},p(e,o){let i=t;t=c(e),t===i?~t&&a[t].p(e,o):(n&&(V(),j(a[i],1,1,(()=>{a[i]=null})),z()),~t?(n=a[t],n?n.p(e,o):(n=a[t]=s[t](e),n.c()),M(n,1),n.m(r.parentNode,r)):n=null)},i(e){o||(M(n),o=!0)},o(e){j(n),o=!1},d(e){~t&&a[t].d(e),e&&$(r)}}}function wr(e){var t;let n,r,o=(null==(t=e[0])?void 0:t.length)&&mr(e);return{c(){n=m("div"),o&&o.c(),this.h()},l(e){n=y(e,"DIV",{class:!0});var t=w(n);o&&o.l(t),t.forEach($),this.h()},h(){_(n,"class","recent_searches svelte-1ojil64")},m(e,t){k(e,n,t),o&&o.m(n,null),r=!0},p(e,[t]){var r;(null==(r=e[0])?void 0:r.length)?o?(o.p(e,t),1&t&&M(o,1)):(o=mr(e),o.c(),M(o,1),o.m(n,null)):o&&(V(),j(o,1,1,(()=>{o=null})),z())},i(e){r||(M(o),r=!0)},o(e){j(o),r=!1},d(e){e&&$(n),o&&o.d()}}}function br(e,t,n){let{recentSearchQueries:r}=t;return e.$$set=e=>{"recentSearchQueries"in e&&n(0,r=e.recentSearchQueries)},[r]}class $r extends d{constructor(e){super(),f(this,e,br,wr,p,{recentSearchQueries:0})}}function Er(e){let t,n;return t=new $r({props:{recentSearchQueries:e[1]}}),{c(){N(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){D(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.recentSearchQueries=e[1]),t.$set(r)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function _r(e){let t,n,r=e[2]&&Er(e);return{c(){t=m("div"),r&&r.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var n=w(t);r&&r.l(n),n.forEach($),this.h()},h(){_(t,"class","right_bar svelte-giyyxp")},m(e,o){k(e,t,o),r&&r.m(t,null),n=!0},p(e,[n]){e[2]?r?(r.p(e,n),4&n&&M(r,1)):(r=Er(e),r.c(),M(r,1),r.m(t,null)):r&&(V(),j(r,1,1,(()=>{r=null})),z())},i(e){n||(M(r),n=!0)},o(e){j(r),n=!1},d(e){e&&$(t),r&&r.d()}}}function kr(e,t,n){let r,o,s,a=x,c=()=>(a(),a=R(i,(e=>n(4,o=e))),i);I(e,sn,(e=>n(2,s=e))),e.$$.on_destroy.push((()=>a()));let{backend:i}=t;c();let{metamaskConnect:l}=t;return e.$$set=e=>{"backend"in e&&c(n(0,i=e.backend)),"metamaskConnect"in e&&n(3,l=e.metamaskConnect)},e.$$.update=()=>{16&e.$$.dirty&&n(1,r=o.recentSearchQueries)},[i,r,s,l,o]}class Ar extends d{constructor(e){super(),f(this,e,kr,_r,p,{backend:0,metamaskConnect:3})}}const Sr=l([]);Sr.LIMIT=300,Sr.log=(e,{dedup:t=!1}={})=>{Sr.update((n=>(t&&n.length>0&&n[n.length-1].entry==e&&n.pop(),n.push({entry:e,createdDate:new Date,createdAt:Date.now(),isRecent:!0,isVeryRecent:!0}),n.slice(-Sr.LIMIT))))},function e(){const t=Date.now();Sr.update((e=>{for(const n of e)n.isRecent=t-n.createdAt<6e4,n.isVeryRecent=t-n.createdAt<5e3;return e})),setTimeout(e,1e3)}();function xr(e){let t,n,r,o,s,a,c,i;return c=new K({props:{size:"16",speed:"2000",color:"#EFCAF8",thickness:"3",gap:"25"}}),{c(){t=m("span"),n=m("span"),r=g(e[2]),o=g(" reconnecting"),s=v(),a=m("span"),N(c.$$.fragment),this.h()},l(i){t=y(i,"SPAN",{class:!0});var l=w(t);n=y(l,"SPAN",{class:!0});var u=w(n);r=b(u,e[2]),u.forEach($),o=b(l," reconnecting"),l.forEach($),s=E(i),a=y(i,"SPAN",{class:!0});var h=w(a);C(c.$$.fragment,h),h.forEach($),this.h()},h(){_(n,"class","device_name svelte-uq65fr"),_(t,"class","device_status svelte-uq65fr"),_(a,"class","spinner svelte-uq65fr")},m(e,l){k(e,t,l),A(t,n),A(n,r),A(t,o),k(e,s,l),k(e,a,l),D(c,a,null),i=!0},p(e,t){(!i||4&t)&&S(r,e[2])},i(e){i||(M(c.$$.fragment,e),i=!0)},o(e){j(c.$$.fragment,e),i=!1},d(e){e&&$(t),e&&$(s),e&&$(a),U(c)}}}function Tr(e){let t,n,r,o,s,a,c,i,l,u,h,d=un?"local node":"";const f=[Or,Pr],p=[];function x(e,t){return e[3]?0:1}return l=x(e),u=p[l]=f[l](e),{c(){t=m("span"),n=g(d),r=v(),o=m("span"),s=g(e[2]),a=g(" ready"),c=v(),i=m("div"),u.c(),this.h()},l(l){t=y(l,"SPAN",{class:!0});var h=w(t);n=b(h,d),r=E(h),o=y(h,"SPAN",{class:!0});var f=w(o);s=b(f,e[2]),f.forEach($),a=b(h," ready"),h.forEach($),c=E(l),i=y(l,"DIV",{class:!0});var p=w(i);u.l(p),p.forEach($),this.h()},h(){_(o,"class","device_name svelte-uq65fr"),_(t,"class","device_status svelte-uq65fr"),_(i,"class","spinner_or_mark svelte-uq65fr")},m(e,u){k(e,t,u),A(t,n),A(t,r),A(t,o),A(o,s),A(t,a),k(e,c,u),k(e,i,u),p[l].m(i,null),h=!0},p(e,t){(!h||4&t)&&S(s,e[2]);let n=l;l=x(e),l!==n&&(V(),j(p[n],1,1,(()=>{p[n]=null})),z(),u=p[l],u||(u=p[l]=f[l](e),u.c()),M(u,1),u.m(i,null))},i(e){h||(M(u),h=!0)},o(e){j(u),h=!1},d(e){e&&$(t),e&&$(c),e&&$(i),p[l].d()}}}function Pr(e){let t,n;return{c(){t=m("img"),this.h()},l(e){t=y(e,"IMG",{class:!0,src:!0}),this.h()},h(){_(t,"class","mark svelte-uq65fr"),t.src!==(n="img/redesign/zetaseek_icon-OK.svg")&&_(t,"src","img/redesign/zetaseek_icon-OK.svg")},m(e,n){k(e,t,n)},i:x,o:x,d(e){e&&$(t)}}}function Or(e){let t,n,r;return n=new K({props:{size:"16",speed:"400",color:"#fff",thickness:"3",gap:"40"}}),{c(){t=m("span"),N(n.$$.fragment),this.h()},l(e){t=y(e,"SPAN",{class:!0});var r=w(t);C(n.$$.fragment,r),r.forEach($),this.h()},h(){_(t,"class","spinner svelte-uq65fr")},m(e,o){k(e,t,o),D(n,t,null),r=!0},i(e){r||(M(n.$$.fragment,e),r=!0)},o(e){j(n.$$.fragment,e),r=!1},d(e){e&&$(t),U(n)}}}function Rr(e){let t,n,r,o;const s=[Tr,xr],a=[];function c(e,t){return e[1]?0:1}return n=c(e),r=a[n]=s[n](e),{c(){t=m("p"),r.c(),this.h()},l(e){t=y(e,"P",{class:!0});var n=w(t);r.l(n),n.forEach($),this.h()},h(){_(t,"class","connection_status svelte-uq65fr"),P(t,"ok",e[1])},m(e,r){k(e,t,r),a[n].m(t,null),o=!0},p(e,[o]){let i=n;n=c(e),n===i?a[n].p(e,o):(V(),j(a[i],1,1,(()=>{a[i]=null})),z(),r=a[n],r?r.p(e,o):(r=a[n]=s[n](e),r.c()),M(r,1),r.m(t,null)),2&o&&P(t,"ok",e[1])},i(e){o||(M(r),o=!0)},o(e){j(r),o=!1},d(e){e&&$(t),a[n].d()}}}function Ir(e,t,n){let r,o,s,a=x,c=()=>(a(),a=R(i,(e=>n(1,r=e))),i);I(e,Dn,(e=>n(3,s=e))),e.$$.on_destroy.push((()=>a()));let{connected:i}=t;c();const l=u(an,(e=>e&&un?`@${e}`:`@${window.location.hostname}`));return I(e,l,(e=>n(2,o=e))),e.$$set=e=>{"connected"in e&&c(n(0,i=e.connected))},[i,r,o,s,l]}class Nr extends d{constructor(e){super(),f(this,e,Ir,Rr,p,{connected:0})}}function Cr(e){let t,n;return{c(){t=m("div"),n=g(e[0]),this.h()},l(r){t=y(r,"DIV",{class:!0});var o=w(t);n=b(o,e[0]),o.forEach($),this.h()},h(){_(t,"class","tagline svelte-595vqi")},m(e,r){k(e,t,r),A(t,n)},p(e,t){1&t&&S(n,e[0])},d(e){e&&$(t)}}}function Dr(e){let t,n=e[0]&&Cr(e);return{c(){n&&n.c(),t=T()},l(e){n&&n.l(e),t=T()},m(e,r){n&&n.m(e,r),k(e,t,r)},p(e,[r]){e[0]?n?n.p(e,r):(n=Cr(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:x,o:x,d(e){n&&n.d(e),e&&$(t)}}}function Mr(e,t,n){let r;return I(e,cn,(e=>n(0,r=e))),[r]}class jr extends d{constructor(e){super(),f(this,e,Mr,Dr,p,{})}}function Ur(e,t,n){const r=e.slice();return r[8]=t[n].tag,r[9]=t[n].count,r[10]=t[n].impliedTag,r[11]=t[n].unreachableTag,r[12]=t[n].lowQuantile,r[13]=t[n].midQuantile,r[14]=t[n].highQuantile,r}function Vr(e){let t,n,r,o,s;return{c(){t=m("div"),n=m("span"),r=g("Search query:"),o=v(),s=g(e[4]),this.h()},l(a){t=y(a,"DIV",{class:!0});var c=w(t);n=y(c,"SPAN",{class:!0});var i=w(n);r=b(i,"Search query:"),i.forEach($),o=E(c),s=b(c,e[4]),c.forEach($),this.h()},h(){_(n,"class","svelte-18uwrer"),_(t,"class","search_query svelte-18uwrer")},m(e,a){k(e,t,a),A(t,n),A(n,r),A(t,o),A(t,s)},p(e,t){16&t&&S(s,e[4])},d(e){e&&$(t)}}}function zr(e){let t,n,r,o,s=e[0],a=[];for(let c=0;c<s.length;c+=1)a[c]=Lr(Ur(e,s,c));return{c(){t=m("div");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=y(e,"DIV",{class:!0,style:!0});var n=w(t);for(let t=0;t<a.length;t+=1)a[t].l(n);n.forEach($),this.h()},h(){_(t,"class","tagcloud svelte-18uwrer"),H(t,"--maxWidth",e[3]),P(t,"disabled",!e[5])},m(e,n){k(e,t,n);for(let r=0;r<a.length;r+=1)a[r].m(t,null);o=!0},p(e,n){if(67&n){let r;for(s=e[0],r=0;r<s.length;r+=1){const o=Ur(e,s,r);a[r]?a[r].p(o,n):(a[r]=Lr(o),a[r].c(),a[r].m(t,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}(!o||8&n)&&H(t,"--maxWidth",e[3]),32&n&&P(t,"disabled",!e[5])},i(e){o||(Y((()=>{r&&r.end(1),n||(n=Q(t,J,{duration:300,delay:100})),n.start()})),o=!0)},o(e){n&&n.invalidate(),r=G(t,J,{}),o=!1},d(e){e&&$(t),O(a,e),e&&r&&r.end()}}}function Lr(e){let t,n,r,o,s,a,c,i,l=e[9]+"",u=e[8]+"";function h(){return e[7](e[10],e[11],e[8])}return{c(){t=m("span"),n=m("span"),r=g(l),o=g("x"),s=v(),a=g(u),this.h()},l(e){t=y(e,"SPAN",{class:!0});var c=w(t);n=y(c,"SPAN",{class:!0});var i=w(n);r=b(i,l),o=b(i,"x"),i.forEach($),s=E(c),a=b(c,u),c.forEach($),this.h()},h(){_(n,"class","count svelte-18uwrer"),_(t,"class","tag svelte-18uwrer"),P(t,"implied_tag",e[10]),P(t,"unreachable",e[11]),P(t,"active",e[6][e[8]]),P(t,"low_quantile",e[12]),P(t,"mid_quantile",e[13]),P(t,"high_quantile",e[14])},m(e,l){k(e,t,l),A(t,n),A(n,r),A(n,o),A(t,s),A(t,a),c||(i=W(t,"click",h),c=!0)},p(n,o){e=n,1&o&&l!==(l=e[9]+"")&&S(r,l),1&o&&u!==(u=e[8]+"")&&S(a,u),1&o&&P(t,"implied_tag",e[10]),1&o&&P(t,"unreachable",e[11]),65&o&&P(t,"active",e[6][e[8]]),1&o&&P(t,"low_quantile",e[12]),1&o&&P(t,"mid_quantile",e[13]),1&o&&P(t,"high_quantile",e[14])},d(e){e&&$(t),c=!1,i()}}}function qr(e){let t,n,r,o=e[4]&&Vr(e),s=e[0]&&zr(e);return{c(){o&&o.c(),t=v(),s&&s.c(),n=T()},l(e){o&&o.l(e),t=E(e),s&&s.l(e),n=T()},m(e,a){o&&o.m(e,a),k(e,t,a),s&&s.m(e,a),k(e,n,a),r=!0},p(e,[r]){e[4]?o?o.p(e,r):(o=Vr(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[0]?s?(s.p(e,r),1&r&&M(s,1)):(s=zr(e),s.c(),M(s,1),s.m(n.parentNode,n)):s&&(V(),j(s,1,1,(()=>{s=null})),z())},i(e){r||(M(s),r=!0)},o(e){j(s),r=!1},d(e){o&&o.d(e),e&&$(t),s&&s.d(e),e&&$(n)}}}function Fr(e,t,n){let r,o,s,a=x,c=()=>(a(),a=R(u,(e=>n(5,o=e))),u);I(e,On,(e=>n(4,r=e))),I(e,Un,(e=>n(6,s=e))),e.$$.on_destroy.push((()=>a()));let{tagcloud:i}=t,{onTagClick:l}=t,{connected:u}=t;c();let{maxWidth:h="600px"}=t;return e.$$set=e=>{"tagcloud"in e&&n(0,i=e.tagcloud),"onTagClick"in e&&n(1,l=e.onTagClick),"connected"in e&&c(n(2,u=e.connected)),"maxWidth"in e&&n(3,h=e.maxWidth)},[i,l,u,h,r,o,s,(e,t,n)=>{e||t||l(n)}]}class Br extends d{constructor(e){super(),f(this,e,Fr,qr,p,{tagcloud:0,onTagClick:1,connected:2,maxWidth:3})}}function Kr(e=new Date){return e.toString().match(new RegExp("\\((.*?)\\)"))[1]}function Hr(e){let t,n,r,o=e[0].toUpperCase()+"";return{c(){t=m("div"),n=g(o),this.h()},l(e){t=y(e,"DIV",{class:!0});var r=w(t);n=b(r,o),r.forEach($),this.h()},h(){_(t,"class",r="tag "+e[0].replace("-","").toLowerCase()+" svelte-by8e9u")},m(e,r){k(e,t,r),A(t,n)},p(e,[s]){1&s&&o!==(o=e[0].toUpperCase()+"")&&S(n,o),1&s&&r!==(r="tag "+e[0].replace("-","").toLowerCase()+" svelte-by8e9u")&&_(t,"class",r)},i:x,o:x,d(e){e&&$(t)}}}function Wr(e,t,n){let{siteTag:r}=t;return e.$$set=e=>{"siteTag"in e&&n(0,r=e.siteTag)},[r]}class Yr extends d{constructor(e){super(),f(this,e,Wr,Hr,p,{siteTag:0})}}function Qr(e){let t,n,r,o,s,a,c,i;return{c(){t=m("div"),n=m("div"),r=m("div"),o=v(),s=m("div"),a=g("â“˜"),this.h()},l(e){t=y(e,"DIV",{class:!0});var c=w(t);n=y(c,"DIV",{class:!0});var i=w(n);r=y(i,"DIV",{class:!0}),w(r).forEach($),o=E(i),s=y(i,"DIV",{role:!0,class:!0});var l=w(s);a=b(l,"â“˜"),l.forEach($),i.forEach($),c.forEach($),this.h()},h(){_(r,"class","bg svelte-86a428"),P(r,"hovering",e[6]),P(r,"active",e[0]),_(s,"role","button"),_(s,"class","toggle svelte-86a428"),P(s,"hovering",e[6]),_(n,"class","corner svelte-86a428"),_(t,"class","toggle-container svelte-86a428"),P(t,"scoreInfoVisible",e[0])},m(l,u){k(l,t,u),A(t,n),A(n,r),A(n,o),A(n,s),A(s,a),c||(i=[W(s,"click",Z(X(e[14]))),W(s,"mouseover",e[15]),W(s,"mouseout",e[16])],c=!0)},p(e,n){64&n&&P(r,"hovering",e[6]),1&n&&P(r,"active",e[0]),64&n&&P(s,"hovering",e[6]),1&n&&P(t,"scoreInfoVisible",e[0])},d(e){e&&$(t),c=!1,ee(i)}}}function Jr(e){let t,n,r,o,s,a,c,i,l,u,h,d,f,p=e[2]&&Gr(e),T="this"==e[4].providerTag&&e[3]&&e[8]!=e[3]&&Zr(e);return{c(){t=m("section"),n=v(),r=m("div"),o=m("label"),s=g("Score"),a=v(),c=m("div"),i=m("span"),l=g(e[1]),u=v(),p&&p.c(),h=v(),d=v(),T&&T.c(),this.h()},l(f){t=y(f,"SECTION",{class:!0});var m=w(t);n=E(m),r=y(m,"DIV",{class:!0});var g=w(r);o=y(g,"LABEL",{for:!0,class:!0});var v=w(o);s=b(v,"Score"),v.forEach($),a=E(g),c=y(g,"DIV",{name:!0,class:!0});var _=w(c);i=y(_,"SPAN",{class:!0});var k=w(i);l=b(k,e[1]),k.forEach($),u=E(_),p&&p.l(_),_.forEach($),g.forEach($),h=E(m),d=E(m),T&&T.l(m),m.forEach($),this.h()},h(){_(o,"for","link-score"),_(o,"class","svelte-86a428"),_(i,"class","svelte-86a428"),_(c,"name","link-score"),_(c,"class","value score svelte-86a428"),_(r,"class","info svelte-86a428"),_(t,"class","score_info svelte-86a428"),P(t,"scoreInfoVisible",e[0])},m(e,f){k(e,t,f),A(t,n),A(t,r),A(r,o),A(o,s),A(r,a),A(r,c),A(c,i),A(i,l),A(c,u),p&&p.m(c,null),A(t,h),A(t,d),T&&T.m(t,null)},p(e,n){2&n&&S(l,e[1]),e[2]?p?p.p(e,n):(p=Gr(e),p.c(),p.m(c,null)):p&&(p.d(1),p=null),"this"==e[4].providerTag&&e[3]&&e[8]!=e[3]?T?T.p(e,n):(T=Zr(e),T.c(),T.m(t,null)):T&&(T.d(1),T=null),1&n&&P(t,"scoreInfoVisible",e[0])},i(e){f||Y((()=>{f=Q(t,te,{delay:200,duration:100}),f.start()}))},o:x,d(e){e&&$(t),p&&p.d(),T&&T.d()}}}function Gr(e){let t,n,r,o;return{c(){t=m("span"),n=g("(incl. "),r=g(e[2]),o=g(" boost)"),this.h()},l(s){t=y(s,"SPAN",{class:!0});var a=w(t);n=b(a,"(incl. "),r=b(a,e[2]),o=b(a," boost)"),a.forEach($),this.h()},h(){_(t,"class","boost svelte-86a428")},m(e,s){k(e,t,s),A(t,n),A(t,r),A(t,o)},p(e,t){4&t&&S(r,e[2])},d(e){e&&$(t)}}}function Zr(e){let t,n,r,o,s,a;return{c(){t=m("div"),n=m("label"),r=g("Index"),o=v(),s=m("div"),a=g(e[3]),this.h()},l(c){t=y(c,"DIV",{class:!0});var i=w(t);n=y(i,"LABEL",{for:!0,class:!0});var l=w(n);r=b(l,"Index"),l.forEach($),o=E(i),s=y(i,"DIV",{name:!0,class:!0});var u=w(s);a=b(u,e[3]),u.forEach($),i.forEach($),this.h()},h(){_(n,"for","linkIndex"),_(n,"class","svelte-86a428"),_(s,"name","linkIndex"),_(s,"class","value svelte-86a428"),_(t,"class","info svelte-86a428")},m(e,c){k(e,t,c),A(t,n),A(n,r),A(t,o),A(t,s),A(s,a)},p(e,t){8&t&&S(a,e[3])},d(e){e&&$(t)}}}function Xr(e){let t,n,r=!e[7]&&Qr(e),o=e[0]&&Jr(e);return{c(){r&&r.c(),t=v(),o&&o.c(),n=T()},l(e){r&&r.l(e),t=E(e),o&&o.l(e),n=T()},m(e,s){r&&r.m(e,s),k(e,t,s),o&&o.m(e,s),k(e,n,s)},p(e,[s]){e[7]?r&&(r.d(1),r=null):r?r.p(e,s):(r=Qr(e),r.c(),r.m(t.parentNode,t)),e[0]?o?(o.p(e,s),1&s&&M(o,1)):(o=Jr(e),o.c(),M(o,1),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i(e){M(o)},o:x,d(e){r&&r.d(e),e&&$(t),o&&o.d(e),e&&$(n)}}}function eo(e,t,n){let r,o;I(e,gn,(e=>n(7,r=e))),I(e,an,(e=>n(8,o=e)));let{scoreInfoVisible:s=!1}=t,{score:a}=t,{title:c}=t,{tags:i}=t,{boost:l}=t,{context:u}=t,{linkIndexName:h}=t,{meta:d}=t,{i:f}=t;const p=ne();let m;s=!1;return e.$$set=e=>{"scoreInfoVisible"in e&&n(0,s=e.scoreInfoVisible),"score"in e&&n(1,a=e.score),"title"in e&&n(11,c=e.title),"tags"in e&&n(12,i=e.tags),"boost"in e&&n(2,l=e.boost),"context"in e&&n(13,u=e.context),"linkIndexName"in e&&n(3,h=e.linkIndexName),"meta"in e&&n(4,d=e.meta),"i"in e&&n(5,f=e.i)},[s,a,l,h,d,f,m,r,o,p,["Frida Jaramillo","Marshall Ferreira","Aarav Logan","Edna Hayden","Elaina Davie","Danni Ruiz","Krystal Dodson","Jordanne Mccullough","Zubair Boyd","Natalya Hancock","Zayden Galloway","Casey Mayer","Fergus Emerson","Bella-Rose Vang","Rabia Franks","Ernest Atherton","Rachel Jensen","Shivani Metcalfe","Ayisha Mueller","Davey Preston"],c,i,u,()=>p("toggle"),()=>n(6,m=!0),()=>n(6,m=!1)]}class to extends d{constructor(e){super(),f(this,e,eo,Xr,p,{scoreInfoVisible:0,score:1,title:11,tags:12,boost:2,context:13,linkIndexName:3,meta:4,i:5})}}function no(e,t,n){const r=e.slice();return r[26]=t[n],r}function ro(e){let t;return{c(){t=m("div"),this.h()},l(e){t=y(e,"DIV",{class:!0,style:!0}),w(t).forEach($),this.h()},h(){_(t,"class","favicon svelte-11lvo0l"),H(t,"background-image","url("+e[12]+")")},m(e,n){k(e,t,n)},p(e,n){4096&n&&H(t,"background-image","url("+e[12]+")")},d(e){e&&$(t)}}}function oo(e){let t,n;return{c(){t=m("div"),n=g(e[4]),this.h()},l(r){t=y(r,"DIV",{class:!0});var o=w(t);n=b(o,e[4]),o.forEach($),this.h()},h(){_(t,"class","media_type svelte-11lvo0l")},m(e,r){k(e,t,r),A(t,n)},p(e,t){16&t&&S(n,e[4])},d(e){e&&$(t)}}}function so(e){let t;function n(e,t){return e[11].imageUrl?co:ao}let r=n(e),o=r(e);return{c(){o.c(),t=T()},l(e){o.l(e),t=T()},m(e,n){o.m(e,n),k(e,t,n)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&$(t)}}}function ao(e){let t;return{c(){t=m("div"),this.h()},l(e){t=y(e,"DIV",{class:!0}),w(t).forEach($),this.h()},h(){_(t,"class","image image-placeholder svelte-11lvo0l")},m(e,n){k(e,t,n)},p:x,d(e){e&&$(t)}}}function co(e){let t;return{c(){t=m("div"),this.h()},l(e){t=y(e,"DIV",{class:!0,style:!0}),w(t).forEach($),this.h()},h(){_(t,"class","image svelte-11lvo0l"),H(t,"background-image","url("+e[11].imageUrl+")")},m(e,n){k(e,t,n)},p(e,n){2048&n&&H(t,"background-image","url("+e[11].imageUrl+")")},d(e){e&&$(t)}}}function io(e){let t,n,r;return n=new Yr({props:{siteTag:e[10]}}),{c(){t=m("div"),N(n.$$.fragment),this.h()},l(e){t=y(e,"DIV",{class:!0});var r=w(t);C(n.$$.fragment,r),r.forEach($),this.h()},h(){_(t,"class","site_tag svelte-11lvo0l")},m(e,o){k(e,t,o),D(n,t,null),r=!0},p(e,t){const r={};1024&t&&(r.siteTag=e[10]),n.$set(r)},i(e){r||(M(n.$$.fragment,e),r=!0)},o(e){j(n.$$.fragment,e),r=!1},d(e){e&&$(t),U(n)}}}function lo(e){let t,n;return{c(){t=m("div"),n=g(e[7]),this.h()},l(r){t=y(r,"DIV",{class:!0});var o=w(t);n=b(o,e[7]),o.forEach($),this.h()},h(){_(t,"class","context svelte-11lvo0l")},m(e,r){k(e,t,r),A(t,n)},p(e,t){128&t&&S(n,e[7])},d(e){e&&$(t)}}}function uo(e){let t,n,r=e[11].description+"";return{c(){t=m("div"),n=g(r),this.h()},l(e){t=y(e,"DIV",{class:!0});var o=w(t);n=b(o,r),o.forEach($),this.h()},h(){_(t,"class","description svelte-11lvo0l"),P(t,"expand",wo)},m(e,r){k(e,t,r),A(t,n)},p(e,t){2048&t&&r!==(r=e[11].description+"")&&S(n,r)},d(e){e&&$(t)}}}function ho(e){let t,n,r="this"==e[0].providerTag&&e[5]&&e[16]!=e[5]&&fo(e),o=e[3],s=[];for(let a=0;a<o.length;a+=1)s[a]=po(no(e,o,a));return{c(){t=m("div"),r&&r.c(),n=T();for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){t=y(e,"DIV",{class:!0});var o=w(t);r&&r.l(o),n=T();for(let t=0;t<s.length;t+=1)s[t].l(o);o.forEach($),this.h()},h(){_(t,"class","tags svelte-11lvo0l")},m(e,o){k(e,t,o),r&&r.m(t,null),A(t,n);for(let n=0;n<s.length;n+=1)s[n].m(t,null)},p(e,a){if("this"==e[0].providerTag&&e[5]&&e[16]!=e[5]?r?r.p(e,a):(r=fo(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),1179656&a){let n;for(o=e[3],n=0;n<o.length;n+=1){const r=no(e,o,n);s[n]?s[n].p(r,a):(s[n]=po(r),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(e){e&&$(t),r&&r.d(),O(s,e)}}}function fo(e){let t,n;return{c(){t=m("span"),n=g(e[5]),this.h()},l(r){t=y(r,"SPAN",{class:!0});var o=w(t);n=b(o,e[5]),o.forEach($),this.h()},h(){_(t,"class","link_index svelte-11lvo0l")},m(e,r){k(e,t,r),A(t,n)},p(e,t){32&t&&S(n,e[5])},d(e){e&&$(t)}}}function po(e){let t,n,r=e[26]+"";return{c(){t=m("span"),n=g(r),this.h()},l(e){t=y(e,"SPAN",{class:!0});var o=w(t);n=b(o,r),o.forEach($),this.h()},h(){_(t,"class","svelte-11lvo0l"),P(t,"active",e[17][e[26]]),P(t,"implied_tag",e[20](e[26]))},m(e,r){k(e,t,r),A(t,n)},p(e,o){8&o&&r!==(r=e[26]+"")&&S(n,r),131080&o&&P(t,"active",e[17][e[26]]),1048584&o&&P(t,"implied_tag",e[20](e[26]))},d(e){e&&$(t)}}}function mo(e){let t,n,r;function o(t){e[23](t)}let s={context:e[7],score:e[8],title:e[2],boost:e[6],meta:e[0],linkIndexName:e[5],i:e[14]};return void 0!==e[15]&&(s.scoreInfoVisible=e[15]),t=new to({props:s}),oe.push((()=>se(t,"scoreInfoVisible",o))),t.$on("toggle",e[19]),{c(){N(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,n){D(t,e,n),r=!0},p(e,r){const o={};128&r&&(o.context=e[7]),256&r&&(o.score=e[8]),4&r&&(o.title=e[2]),64&r&&(o.boost=e[6]),1&r&&(o.meta=e[0]),32&r&&(o.linkIndexName=e[5]),16384&r&&(o.i=e[14]),!n&&32768&r&&(n=!0,o.scoreInfoVisible=e[15],re((()=>n=!1))),t.$set(o)},i(e){r||(M(t.$$.fragment,e),r=!0)},o(e){j(t.$$.fragment,e),r=!1},d(e){U(t,e)}}}function go(e){let t,n=e[9]&&vo(e);return{c(){t=m("div"),n&&n.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var r=w(t);n&&n.l(r),r.forEach($),this.h()},h(){_(t,"class","explain_scores svelte-11lvo0l")},m(e,r){k(e,t,r),n&&n.m(t,null)},p(e,r){e[9]?n?n.p(e,r):(n=vo(e),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},d(e){e&&$(t),n&&n.d()}}}function vo(e){let t,n,r,o,s,a=(e[9]||"")+"";return{c(){t=g("score "),n=m("b"),r=g(e[8]),o=g(" = "),s=g(a),this.h()},l(c){t=b(c,"score "),n=y(c,"B",{class:!0});var i=w(n);r=b(i,e[8]),i.forEach($),o=b(c," = "),s=b(c,a),this.h()},h(){_(n,"class","svelte-11lvo0l")},m(e,a){k(e,t,a),k(e,n,a),A(n,r),k(e,o,a),k(e,s,a)},p(e,t){256&t&&S(r,e[8]),512&t&&a!==(a=(e[9]||"")+"")&&S(s,a)},d(e){e&&$(t),e&&$(n),e&&$(o),e&&$(s)}}}function yo(e){var t;let n,r,o,s,a,c,i,l,u,h,d,f,p,x,P,O,R,I,N,C,D,U,L,q,F,B=("this"==e[0].providerTag?"":e[0].providerTag)+"",K=(e[2]||"")+"",H=e[1].replace(/^https?:\/\//,"").replace(/\/$/,"")+"",Y=e[12]&&ro(e);function Q(e,t){return e[11]?so:e[4]?oo:void 0}let J=Q(e),G=J&&J(e),Z=e[10]&&io(e),X=e[7]&&lo(e),ee=(null==(t=e[11])?void 0:t.description)&&uo(e),te=e[3]&&ho(e),ne=!e[13]&&mo(e),re=(ln||e[15])&&go(e);return{c(){n=m("a"),Y&&Y.c(),r=v(),o=m("div"),s=g(B),a=v(),c=m("div"),i=m("div"),G&&G.c(),l=v(),Z&&Z.c(),u=v(),h=m("div"),d=m("div"),f=g(K),p=v(),X&&X.c(),x=v(),P=m("div"),O=g(H),R=v(),ee&&ee.c(),I=v(),te&&te.c(),N=v(),ne&&ne.c(),D=v(),re&&re.c(),U=T(),this.h()},l(e){n=y(e,"A",{class:!0,href:!0,tabindex:!0,role:!0});var t=w(n);Y&&Y.l(t),r=E(t),o=y(t,"DIV",{class:!0});var m=w(o);s=b(m,B),m.forEach($),a=E(t),c=y(t,"DIV",{class:!0});var g=w(c);i=y(g,"DIV",{class:!0});var v=w(i);G&&G.l(v),l=E(v),Z&&Z.l(v),v.forEach($),u=E(g),h=y(g,"DIV",{class:!0});var _=w(h);d=y(_,"DIV",{class:!0});var k=w(d);f=b(k,K),k.forEach($),p=E(_),X&&X.l(_),x=E(_),P=y(_,"DIV",{class:!0});var A=w(P);O=b(A,H),A.forEach($),R=E(_),ee&&ee.l(_),I=E(_),te&&te.l(_),_.forEach($),g.forEach($),N=E(t),ne&&ne.l(t),t.forEach($),D=E(e),re&&re.l(e),U=T(),this.h()},h(){_(o,"class","provider_tag svelte-11lvo0l"),_(i,"class","preview"),_(d,"class","title svelte-11lvo0l"),_(P,"class","url svelte-11lvo0l"),_(h,"class","content svelte-11lvo0l"),_(c,"class","entry svelte-11lvo0l"),_(n,"class","container svelte-11lvo0l"),_(n,"href",e[1]),_(n,"tabindex",C=e[14]+1),_(n,"role","link")},m(t,m){k(t,n,m),Y&&Y.m(n,null),A(n,r),A(n,o),A(o,s),A(n,a),A(n,c),A(c,i),G&&G.m(i,null),A(i,l),Z&&Z.m(i,null),A(c,u),A(c,h),A(h,d),A(d,f),A(h,p),X&&X.m(h,null),A(h,x),A(h,P),A(P,O),A(h,R),ee&&ee.m(h,null),A(h,I),te&&te.m(h,null),A(n,N),ne&&ne.m(n,null),k(t,D,m),re&&re.m(t,m),k(t,U,m),L=!0,q||(F=W(n,"click",e[18]),q=!0)},p(e,[t]){var o;e[12]?Y?Y.p(e,t):(Y=ro(e),Y.c(),Y.m(n,r)):Y&&(Y.d(1),Y=null),(!L||1&t)&&B!==(B=("this"==e[0].providerTag?"":e[0].providerTag)+"")&&S(s,B),J===(J=Q(e))&&G?G.p(e,t):(G&&G.d(1),G=J&&J(e),G&&(G.c(),G.m(i,l))),e[10]?Z?(Z.p(e,t),1024&t&&M(Z,1)):(Z=io(e),Z.c(),M(Z,1),Z.m(i,null)):Z&&(V(),j(Z,1,1,(()=>{Z=null})),z()),(!L||4&t)&&K!==(K=(e[2]||"")+"")&&S(f,K),e[7]?X?X.p(e,t):(X=lo(e),X.c(),X.m(h,x)):X&&(X.d(1),X=null),(!L||2&t)&&H!==(H=e[1].replace(/^https?:\/\//,"").replace(/\/$/,"")+"")&&S(O,H),(null==(o=e[11])?void 0:o.description)?ee?ee.p(e,t):(ee=uo(e),ee.c(),ee.m(h,I)):ee&&(ee.d(1),ee=null),e[3]?te?te.p(e,t):(te=ho(e),te.c(),te.m(h,null)):te&&(te.d(1),te=null),e[13]?ne&&(V(),j(ne,1,1,(()=>{ne=null})),z()):ne?(ne.p(e,t),8192&t&&M(ne,1)):(ne=mo(e),ne.c(),M(ne,1),ne.m(n,null)),(!L||2&t)&&_(n,"href",e[1]),(!L||16384&t&&C!==(C=e[14]+1))&&_(n,"tabindex",C),ln||e[15]?re?re.p(e,t):(re=go(e),re.c(),re.m(U.parentNode,U)):re&&(re.d(1),re=null)},i(e){L||(M(Z),M(ne),L=!0)},o(e){j(Z),j(ne),L=!1},d(e){e&&$(n),Y&&Y.d(),G&&G.d(),Z&&Z.d(),X&&X.d(),ee&&ee.d(),te&&te.d(),ne&&ne.d(),e&&$(D),re&&re.d(e),e&&$(U),q=!1,F()}}}let wo=!1;function bo(e,t,n){let r,o,s;I(e,sn,(e=>n(24,r=e))),I(e,an,(e=>n(16,o=e))),I(e,Un,(e=>n(17,s=e)));let a,{connector:c}=t,{meta:i}=t,{url:l}=t,{title:u}=t,{tags:h}=t,{mediaType:d}=t,{linkIndexName:f}=t,{boost:p}=t,{context:m}=t,{score:g}=t,{scoreExplain:v}=t,{siteTag:y}=t,{preview:w}=t,{favicon:b}=t,{tagcloud:$}=t,{newsfeed:E}=t,{i:_}=t;const k=Kr();return e.$$set=e=>{"connector"in e&&n(21,c=e.connector),"meta"in e&&n(0,i=e.meta),"url"in e&&n(1,l=e.url),"title"in e&&n(2,u=e.title),"tags"in e&&n(3,h=e.tags),"mediaType"in e&&n(4,d=e.mediaType),"linkIndexName"in e&&n(5,f=e.linkIndexName),"boost"in e&&n(6,p=e.boost),"context"in e&&n(7,m=e.context),"score"in e&&n(8,g=e.score),"scoreExplain"in e&&n(9,v=e.scoreExplain),"siteTag"in e&&n(10,y=e.siteTag),"preview"in e&&n(11,w=e.preview),"favicon"in e&&n(12,b=e.favicon),"tagcloud"in e&&n(22,$=e.tagcloud),"newsfeed"in e&&n(13,E=e.newsfeed),"i"in e&&n(14,_=e.i)},[i,l,u,h,d,f,p,m,g,v,y,w,b,E,_,a,o,s,function(){const{host:e}=window.location,t={ethAccount:r,host:e};try{c.remoteObject("GUISearchObject").call("trackLinkClick",{url:l,title:u,siteTag:y,providerTag:i.providerTag,timezone:k,clickMetadata:t}).then((()=>{console.log("TRACKER RETURNED")}))}catch(n){console.log(n)}},function(){n(15,a=!a)},function(e){return $&&$.find((({tag:t,impliedTag:n})=>t==e&&n))},c,$,function(e){a=e,n(15,a)}]}class $o extends d{constructor(e){super(),f(this,e,bo,yo,p,{connector:21,meta:0,url:1,title:2,tags:3,mediaType:4,linkIndexName:5,boost:6,context:7,score:8,scoreExplain:9,siteTag:10,preview:11,favicon:12,tagcloud:22,newsfeed:13,i:14})}}const Eo=window.location.host;function _o(){return{ethAccount:h(sn),searchOriginHost:Eo,isLAN:false}}function ko(e,t){On.set(null),In.set(e),console.log(`Browse place: ${e}`);t.remoteObject("GUISearchObject").call("browsePlace",{place:e,searchMetadata:_o()}).then((e=>{console.log("browsePlace RESULTS:"),console.dir(e),Cn.set({searchResults:e})})).catch((e=>{Cn.set({searchError:e})}))}function Ao(e){let t;function n(e,t){return e[10]?xo:So}let r=n(e),o=r(e);return{c(){o.c(),t=T()},l(e){o.l(e),t=T()},m(e,n){o.m(e,n),k(e,t,n)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&$(t)}}}function So(e){let t,n,r,o,s;return{c(){t=m("span"),n=m("span"),r=g("ðŸ“"),o=v(),s=g(e[4]),this.h()},l(a){t=y(a,"SPAN",{class:!0});var c=w(t);n=y(c,"SPAN",{class:!0});var i=w(n);r=b(i,"ðŸ“"),i.forEach($),o=E(c),s=b(c,e[4]),c.forEach($),this.h()},h(){_(n,"class","icon"),_(t,"class","directory svelte-iu72us")},m(e,a){k(e,t,a),A(t,n),A(n,r),A(t,o),A(t,s)},p(e,t){16&t&&S(s,e[4])},d(e){e&&$(t)}}}function xo(e){let t,n,r,o,s,a,c,i;return{c(){t=m("a"),n=m("span"),r=g("ðŸ“"),o=v(),s=g(e[4]),this.h()},l(a){t=y(a,"A",{class:!0,href:!0});var c=w(t);n=y(c,"SPAN",{class:!0});var i=w(n);r=b(i,"ðŸ“"),i.forEach($),o=E(c),s=b(c,e[4]),c.forEach($),this.h()},h(){_(n,"class","icon svelte-iu72us"),_(t,"class","directory svelte-iu72us"),_(t,"href",a=`/?place=${e[6]}`)},m(a,l){k(a,t,l),A(t,n),A(n,r),A(t,o),A(t,s),c||(i=W(t,"click",X(e[20])),c=!0)},p(e,n){16&n&&S(s,e[4]),64&n&&a!==(a=`/?place=${e[6]}`)&&_(t,"href",a)},d(e){e&&$(t),c=!1,i()}}}function To(e){let t,n;return{c(){t=m("div"),n=g(e[8]),this.h()},l(r){t=y(r,"DIV",{class:!0});var o=w(t);n=b(o,e[8]),o.forEach($),this.h()},h(){_(t,"class","file_size svelte-iu72us")},m(e,r){k(e,t,r),A(t,n)},p(e,t){256&t&&S(n,e[8])},d(e){e&&$(t)}}}function Po(e){let t,n,r,o;return{c(){t=m("div"),n=g("â±ï¸ "),r=m("span"),o=g(e[9]),this.h()},l(s){t=y(s,"DIV",{class:!0});var a=w(t);n=b(a,"â±ï¸ "),r=y(a,"SPAN",{});var c=w(r);o=b(c,e[9]),c.forEach($),a.forEach($),this.h()},h(){_(t,"class","file_updated_at svelte-iu72us")},m(e,s){k(e,t,s),A(t,n),A(t,r),A(r,o)},p(e,t){512&t&&S(o,e[9])},d(e){e&&$(t)}}}function Oo(e){let t,n,r,o,s,a,c,i,l,u,h,d,f,p,T,O,R,I,N,C,D,M=("this"==e[1].providerTag?"":e[1].providerTag)+"",j=(e[3]||"")+"",U=e[4]!=e[11]&&Ao(e),V=e[8]&&To(e),z=e[9]&&Po(e);return{c(){U&&U.c(),t=v(),n=m("a"),r=m("div"),o=g(M),s=v(),a=m("div"),c=m("div"),i=m("div"),l=g(e[12]),u=v(),h=m("div"),d=m("div"),f=g(e[5]),p=v(),T=m("div"),O=g(j),R=v(),V&&V.c(),I=v(),z&&z.c(),this.h()},l(m){U&&U.l(m),t=E(m),n=y(m,"A",{class:!0,href:!0,tabindex:!0,role:!0});var g=w(n);r=y(g,"DIV",{class:!0});var v=w(r);o=b(v,M),v.forEach($),s=E(g),a=y(g,"DIV",{class:!0});var _=w(a);c=y(_,"DIV",{class:!0});var k=w(c);i=y(k,"DIV",{class:!0});var A=w(i);l=b(A,e[12]),A.forEach($),k.forEach($),u=E(_),h=y(_,"DIV",{class:!0});var S=w(h);d=y(S,"DIV",{class:!0});var x=w(d);f=b(x,e[5]),x.forEach($),p=E(S),T=y(S,"DIV",{class:!0});var P=w(T);O=b(P,j),P.forEach($),R=E(S),V&&V.l(S),I=E(S),z&&z.l(S),S.forEach($),_.forEach($),g.forEach($),this.h()},h(){_(r,"class","provider_tag svelte-iu72us"),_(i,"class","file_type "+e[12]+" svelte-iu72us"),P(i,"small",e[12].length>3),_(c,"class","preview svelte-iu72us"),_(d,"class","basedir svelte-iu72us"),_(T,"class","title "+e[12]+" svelte-iu72us"),_(h,"class","content svelte-iu72us"),_(a,"class","entry svelte-iu72us"),_(n,"class","container svelte-iu72us"),_(n,"href",e[7]),_(n,"tabindex",N=e[2]+1),_(n,"role","link")},m(m,g){U&&U.m(m,g),k(m,t,g),k(m,n,g),A(n,r),A(r,o),A(n,s),A(n,a),A(a,c),A(c,i),A(i,l),A(a,u),A(a,h),A(h,d),A(d,f),A(h,p),A(h,T),A(T,O),A(h,R),V&&V.m(h,null),A(h,I),z&&z.m(h,null),C||(D=W(n,"click",e[21]),C=!0)},p(e,[r]){e[4]!=e[11]?U?U.p(e,r):(U=Ao(e),U.c(),U.m(t.parentNode,t)):U&&(U.d(1),U=null),2&r&&M!==(M=("this"==e[1].providerTag?"":e[1].providerTag)+"")&&S(o,M),32&r&&S(f,e[5]),8&r&&j!==(j=(e[3]||"")+"")&&S(O,j),e[8]?V?V.p(e,r):(V=To(e),V.c(),V.m(h,I)):V&&(V.d(1),V=null),e[9]?z?z.p(e,r):(z=Po(e),z.c(),z.m(h,null)):z&&(z.d(1),z=null),128&r&&_(n,"href",e[7]),4&r&&N!==(N=e[2]+1)&&_(n,"tabindex",N)},i:x,o:x,d(e){U&&U.d(e),e&&$(t),e&&$(n),V&&V.d(),z&&z.d(),C=!1,D()}}}function Ro(e,t,n){let r,o;I(e,sn,(e=>n(23,o=e)));let{connector:s}=t,{meta:a}=t,{allResults:c}=t,{i:i}=t,{fileName:l}=t,{directory:u}=t,{basedir:h}=t,{directoryHandle:d}=t,{place:f}=t,{playableUrl:p}=t,{mediaType:m}=t,{extname:g}=t,{fileSizePretty:v}=t,{fileUpdatedAtRelativePretty:y}=t,{fileNote:w}=t,{hasPlayer:b}=t,{localResult:$}=t,E=m||g;const _=Kr();function k({fileName:e}){const{host:t}=window.location,n={displayName:"",ethAccount:o,host:t};try{s.remoteObject("GUISearchObject").call("trackFileClick",{fileName:e,providerTag:a.providerTag,timezone:_,clickMetadata:n}).then((()=>{console.log("TRACKER RETURNED")}))}catch(r){console.log(r)}}return e.$$set=e=>{"connector"in e&&n(0,s=e.connector),"meta"in e&&n(1,a=e.meta),"allResults"in e&&n(14,c=e.allResults),"i"in e&&n(2,i=e.i),"fileName"in e&&n(3,l=e.fileName),"directory"in e&&n(4,u=e.directory),"basedir"in e&&n(5,h=e.basedir),"directoryHandle"in e&&n(6,d=e.directoryHandle),"place"in e&&n(15,f=e.place),"playableUrl"in e&&n(7,p=e.playableUrl),"mediaType"in e&&n(16,m=e.mediaType),"extname"in e&&n(17,g=e.extname),"fileSizePretty"in e&&n(8,v=e.fileSizePretty),"fileUpdatedAtRelativePretty"in e&&n(9,y=e.fileUpdatedAtRelativePretty),"fileNote"in e&&n(18,w=e.fileNote),"hasPlayer"in e&&n(19,b=e.hasPlayer),"localResult"in e&&n(10,$=e.localResult)},e.$$.update=()=>{16388&e.$$.dirty&&n(11,r=i>0?c[i-1].directory:null)},[s,a,i,l,u,h,d,p,v,y,$,r,E,k,c,f,m,g,w,b,()=>ko(d,s),()=>k({fileName:l})]}class Io extends d{constructor(e){super(),f(this,e,Ro,Oo,p,{connector:0,meta:1,allResults:14,i:2,fileName:3,directory:4,basedir:5,directoryHandle:6,place:15,playableUrl:7,mediaType:16,extname:17,fileSizePretty:8,fileUpdatedAtRelativePretty:9,fileNote:18,hasPlayer:19,localResult:10})}}function No(e){let t,n;return{c(){t=m("div"),n=g("Unsupported search results format."),this.h()},l(e){t=y(e,"DIV",{class:!0});var r=w(t);n=b(r,"Unsupported search results format."),r.forEach($),this.h()},h(){_(t,"class","resultError svelte-1qotnfz")},m(e,r){k(e,t,r),A(t,n)},p:x,i:x,o:x,d(e){e&&$(t)}}}function Co(e){let t,n;const r=[e[1],{connector:e[2]},{hasPlayer:e[3]},{meta:e[4]},{allResults:e[5]},{i:e[0]}];let o={};for(let s=0;s<r.length;s+=1)o=q(o,r[s]);return t=new Io({props:o}),{c(){N(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){D(t,e,r),n=!0},p(e,n){const o=63&n?F(r,[2&n&&B(e[1]),4&n&&{connector:e[2]},8&n&&{hasPlayer:e[3]},16&n&&{meta:e[4]},32&n&&{allResults:e[5]},1&n&&{i:e[0]}]):{};t.$set(o)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Do(e){let t,n;const r=[e[1],{connector:e[2]},{meta:e[4]},{newsfeed:e[7]},{tagcloud:e[6]},{i:e[0]}];let o={};for(let s=0;s<r.length;s+=1)o=q(o,r[s]);return t=new $o({props:o}),{c(){N(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){D(t,e,r),n=!0},p(e,n){const o=215&n?F(r,[2&n&&B(e[1]),4&n&&{connector:e[2]},16&n&&{meta:e[4]},128&n&&{newsfeed:e[7]},64&n&&{tagcloud:e[6]},1&n&&{i:e[0]}]):{};t.$set(o)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Mo(e){let t,n,r,o,s;const a=[Do,Co,No],c=[];function i(e,t){return e[1].url?0:e[1].filePath?1:2}return r=i(e),o=c[r]=a[r](e),{c(){t=m("div"),n=m("div"),o.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var r=w(t);n=y(r,"DIV",{class:!0});var s=w(n);o.l(s),s.forEach($),r.forEach($),this.h()},h(){_(n,"class","result"),P(n,"url_result",e[1].url),_(t,"class","inner")},m(e,o){k(e,t,o),A(t,n),c[r].m(n,null),s=!0},p(e,[t]){let s=r;r=i(e),r===s?c[r].p(e,t):(V(),j(c[s],1,1,(()=>{c[s]=null})),z(),o=c[r],o?o.p(e,t):(o=c[r]=a[r](e),o.c()),M(o,1),o.m(n,null)),2&t&&P(n,"url_result",e[1].url)},i(e){s||(M(o),s=!0)},o(e){j(o),s=!1},d(e){e&&$(t),c[r].d()}}}function jo(e,t,n){let{i:r}=t,{result:o}=t,{connector:s}=t,{hasPlayer:a}=t,{meta:c}=t,{allResults:i}=t,{tagcloud:l}=t,{newsfeed:u}=t;return e.$$set=e=>{"i"in e&&n(0,r=e.i),"result"in e&&n(1,o=e.result),"connector"in e&&n(2,s=e.connector),"hasPlayer"in e&&n(3,a=e.hasPlayer),"meta"in e&&n(4,c=e.meta),"allResults"in e&&n(5,i=e.allResults),"tagcloud"in e&&n(6,l=e.tagcloud),"newsfeed"in e&&n(7,u=e.newsfeed)},[r,o,s,a,c,i,l,u]}class Uo extends d{constructor(e){super(),f(this,e,jo,Mo,p,{i:0,result:1,connector:2,hasPlayer:3,meta:4,allResults:5,tagcloud:6,newsfeed:7})}}function Vo(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function zo(e){let t,n,r,o,s,a;return n=new Uo({props:{result:e[7],connector:e[2],hasPlayer:e[4],meta:e[1],allResults:e[0],i:e[9],tagcloud:e[3]}}),{c(){t=m("div"),N(n.$$.fragment),r=v(),this.h()},l(e){t=y(e,"DIV",{class:!0});var o=w(t);C(n.$$.fragment,o),r=E(o),o.forEach($),this.h()},h(){_(t,"class","result")},m(e,o){k(e,t,o),D(n,t,null),A(t,r),a=!0},p(t,r){e=t;const o={};97&r&&(o.result=e[7]),4&r&&(o.connector=e[2]),16&r&&(o.hasPlayer=e[4]),2&r&&(o.meta=e[1]),1&r&&(o.allResults=e[0]),8&r&&(o.tagcloud=e[3]),n.$set(o)},i(r){a||(M(n.$$.fragment,r),Y((()=>{s&&s.end(1),o||(o=Q(t,J,{y:50,duration:e[7].filePath?50:750,delay:e[7].filePath?0:100*e[9]})),o.start()})),a=!0)},o(e){j(n.$$.fragment,e),o&&o.invalidate(),s=G(t,J,{y:50}),a=!1},d(e){e&&$(t),U(n),e&&s&&s.end()}}}function Lo(e){let t,n,r=e[0].slice(e[5],e[6]?e[5]+e[6]:e[6]),o=[];for(let a=0;a<r.length;a+=1)o[a]=zo(Vo(e,r,a));const s=e=>j(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=T()},l(e){for(let t=0;t<o.length;t+=1)o[t].l(e);t=T()},m(e,r){for(let t=0;t<o.length;t+=1)o[t].m(e,r);k(e,t,r),n=!0},p(e,[n]){if(127&n){let a;for(r=e[0].slice(e[5],e[6]?e[5]+e[6]:e[6]),a=0;a<r.length;a+=1){const s=Vo(e,r,a);o[a]?(o[a].p(s,n),M(o[a],1)):(o[a]=zo(s),o[a].c(),M(o[a],1),o[a].m(t.parentNode,t))}for(V(),a=r.length;a<o.length;a+=1)s(a);z()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)M(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)j(o[t]);n=!1},d(e){O(o,e),e&&$(t)}}}function qo(e,t,n){let{results:r}=t,{meta:o}=t,{connector:s}=t,{tagcloud:a}=t,{hasPlayer:c}=t,{startFrom:i=0}=t,{count:l}=t;return e.$$set=e=>{"results"in e&&n(0,r=e.results),"meta"in e&&n(1,o=e.meta),"connector"in e&&n(2,s=e.connector),"tagcloud"in e&&n(3,a=e.tagcloud),"hasPlayer"in e&&n(4,c=e.hasPlayer),"startFrom"in e&&n(5,i=e.startFrom),"count"in e&&n(6,l=e.count)},[r,o,s,a,c,i,l]}class Fo extends d{constructor(e){super(),f(this,e,qo,Lo,p,{results:0,meta:1,connector:2,tagcloud:3,hasPlayer:4,startFrom:5,count:6})}}function Bo(e){let t,n=e[1](e[0])+"";return{c(){t=m("div"),this.h()},l(e){t=y(e,"DIV",{class:!0}),w(t).forEach($),this.h()},h(){_(t,"class","results_meta svelte-3vss1y")},m(e,r){k(e,t,r),t.innerHTML=n},p(e,[r]){1&r&&n!==(n=e[1](e[0])+"")&&(t.innerHTML=n)},i:x,o:x,d(e){e&&$(t)}}}function Ko(e,t,n){const r=yn;let{providerResponse:o}=t;return e.$$set=e=>{"providerResponse"in e&&n(0,o=e.providerResponse)},[o,function(e){if(e.error)return r.red(`âš ï¸  Error: ${e.error}`);const{meta:t}=e,{page:n,noMorePages:o,resultCount:s,resultsFrom:a,resultsTo:c,searchTimePretty:i,networkTimePretty:l}=t;let u="";if(i&&(u+=r.gray(` Â· ${r.gray("fs")} ${r.white(i)}`)),l&&(u+=r.gray(` Â· ${r.gray("network")} ${r.white(l)}`)),s>0){if(1==n&&o)return r.white(`${s} ${1==s?"result":"results"}${u}`);const e=o?r.gray(" [ last ]"):"",t=`${r.white(`Results ${a} ${r.gray("to")} ${c}`)}`;return r.gray(`${r.white(`Page ${n}`)}${e} â†’ ${t}${u}`)}return r.gray(`No ${n>1?"more ":""}results${u}`)}]}class Ho extends d{constructor(e){super(),f(this,e,Ko,Bo,p,{providerResponse:0})}}function Wo(e){let t;return{c(){t=g("â€” NO RESULTS â€”")},l(e){t=b(e,"â€” NO RESULTS â€”")},m(e,n){k(e,t,n)},d(e){e&&$(t)}}}function Yo(e){let t;return{c(){t=g("â€” NO MORE RESULTS â€”")},l(e){t=b(e,"â€” NO MORE RESULTS â€”")},m(e,n){k(e,t,n)},d(e){e&&$(t)}}}function Qo(e){let t;function n(e,t){return e[1]>1?Yo:Wo}let r=n(e),o=r(e);return{c(){t=m("div"),o.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var n=w(t);o.l(n),n.forEach($),this.h()},h(){_(t,"class","no_results svelte-qqdxfj"),P(t,"visible",e[0])},m(e,n){k(e,t,n),o.m(t,null)},p(e,[s]){r!==(r=n(e))&&(o.d(1),o=r(e),o&&(o.c(),o.m(t,null))),1&s&&P(t,"visible",e[0])},i:x,o:x,d(e){e&&$(t),o.d()}}}function Jo(e,t,n){let r,o;return I(e,Mn,(e=>n(0,r=e))),I(e,Rn,(e=>n(1,o=e))),[r,o]}class Go extends d{constructor(e){super(),f(this,e,Jo,Qo,p,{})}}function Zo(e){let t,n,r=e[0].contentId+"";return{c(){t=g("/"),n=g(r)},l(e){t=b(e,"/"),n=b(e,r)},m(e,r){k(e,t,r),k(e,n,r)},p(e,t){1&t&&r!==(r=e[0].contentId+"")&&S(n,r)},d(e){e&&$(t),e&&$(n)}}}function Xo(e){let t,n;return{c(){t=m("span"),n=g("[ File System ]"),this.h()},l(e){t=y(e,"SPAN",{class:!0});var r=w(t);n=b(r,"[ File System ]"),r.forEach($),this.h()},h(){_(t,"class","file_system_tag svelte-114odhp")},m(e,r){k(e,t,r),A(t,n)},d(e){e&&$(t)}}}function es(e){let t,n,r,o,s,a,c=e[0].providerTag+"",i=e[0].contentId&&Zo(e),l=!e[0].contentId&&Xo();return{c(){t=m("div"),n=m("span"),r=g("ðŸ–¥ï¸ @"),o=g(c),s=m("span"),i&&i.c(),a=v(),l&&l.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var u=w(t);n=y(u,"SPAN",{class:!0});var h=w(n);r=b(h,"ðŸ–¥ï¸ @"),o=b(h,c),h.forEach($),s=y(u,"SPAN",{class:!0});var d=w(s);i&&i.l(d),d.forEach($),a=E(u),l&&l.l(u),u.forEach($),this.h()},h(){_(n,"class","host svelte-114odhp"),_(s,"class","contentId svelte-114odhp"),_(t,"class","provider_host svelte-114odhp"),P(t,"this",e[0].thisMachine)},m(e,c){k(e,t,c),A(t,n),A(n,r),A(n,o),A(t,s),i&&i.m(s,null),A(t,a),l&&l.m(t,null)},p(e,[n]){1&n&&c!==(c=e[0].providerTag+"")&&S(o,c),e[0].contentId?i?i.p(e,n):(i=Zo(e),i.c(),i.m(s,null)):i&&(i.d(1),i=null),e[0].contentId?l&&(l.d(1),l=null):l||(l=Xo(),l.c(),l.m(t,null)),1&n&&P(t,"this",e[0].thisMachine)},i:x,o:x,d(e){e&&$(t),i&&i.d(),l&&l.d()}}}function ts(e,t,n){let{meta:r}=t;return e.$$set=e=>{"meta"in e&&n(0,r=e.meta)},[r]}class ns extends d{constructor(e){super(),f(this,e,ts,es,p,{meta:0})}}function rs(e){let t,n,r,o,s,a,c,i,l,u,h,d,f;return{c(){t=m("button"),n=g("Prev"),o=v(),s=m("span"),a=g("Page "),c=g(e[2]),i=v(),l=m("button"),u=g("Next"),this.h()},l(r){t=y(r,"BUTTON",{disabled:!0,class:!0});var h=w(t);n=b(h,"Prev"),h.forEach($),o=E(r),s=y(r,"SPAN",{class:!0});var d=w(s);a=b(d,"Page "),c=b(d,e[2]),d.forEach($),i=E(r),l=y(r,"BUTTON",{disabled:!0,class:!0});var f=w(l);u=b(f,"Next"),f.forEach($),this.h()},h(){t.disabled=r=1==e[2],_(t,"class","svelte-celm3m"),P(t,"disconnected",!e[1]),_(s,"class","svelte-celm3m"),l.disabled=h=e[3]||e[5]||e[6],_(l,"class","svelte-celm3m"),P(l,"disconnected",!e[1])},m(r,h){k(r,t,h),A(t,n),k(r,o,h),k(r,s,h),A(s,a),A(s,c),k(r,i,h),k(r,l,h),A(l,u),d||(f=[W(t,"click",e[7]),W(l,"click",e[8])],d=!0)},p(e,n){4&n&&r!==(r=1==e[2])&&(t.disabled=r),2&n&&P(t,"disconnected",!e[1]),4&n&&S(c,e[2]),104&n&&h!==(h=e[3]||e[5]||e[6])&&(l.disabled=h),2&n&&P(l,"disconnected",!e[1])},d(e){e&&$(t),e&&$(o),e&&$(s),e&&$(i),e&&$(l),d=!1,ee(f)}}}function os(e){let t,n=e[4]&&(!e[3]||e[3]&&e[2]>1)&&rs(e);return{c(){t=m("div"),n&&n.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var r=w(t);n&&n.l(r),r.forEach($),this.h()},h(){_(t,"class","pagination svelte-celm3m")},m(e,r){k(e,t,r),n&&n.m(t,null)},p(e,[r]){e[4]&&(!e[3]||e[3]&&e[2]>1)?n?n.p(e,r):(n=rs(e),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i:x,o:x,d(e){e&&$(t),n&&n.d()}}}function ss(e,t,n){let r,o,s,a,c,i,l=x,u=()=>(l(),l=R(d,(e=>n(1,r=e))),d);I(e,Rn,(e=>n(2,o=e))),I(e,Mn,(e=>n(3,s=e))),I(e,On,(e=>n(4,a=e))),I(e,jn,(e=>n(5,c=e))),I(e,Dn,(e=>n(6,i=e))),e.$$.on_destroy.push((()=>l()));let{zetaSearch:h}=t,{connected:d}=t;return u(),e.$$set=e=>{"zetaSearch"in e&&n(9,h=e.zetaSearch),"connected"in e&&u(n(0,d=e.connected))},[d,r,o,s,a,c,i,function(){r&&o>1&&h({searchPage:o-1})},function(){r&&!s&&h({searchPage:o+1})},h]}class as extends d{constructor(e){super(),f(this,e,ss,os,p,{zetaSearch:9,connected:0})}}function cs(e){Un.update((t=>(t[e]?delete t[e]:t[e]=!0,t)))}function is(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function ls(e){let t,n,r=e[6],o=[];for(let a=0;a<r.length;a+=1)o[a]=ps(is(e,r,a));const s=e=>j(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=T()},l(e){for(let t=0;t<o.length;t+=1)o[t].l(e);t=T()},m(e,r){for(let t=0;t<o.length;t+=1)o[t].m(e,r);k(e,t,r),n=!0},p(e,n){if(199&n){let a;for(r=e[6],a=0;a<r.length;a+=1){const s=is(e,r,a);o[a]?(o[a].p(s,n),M(o[a],1)):(o[a]=ps(s),o[a].c(),M(o[a],1),o[a].m(t.parentNode,t))}for(V(),a=r.length;a<o.length;a+=1)s(a);z()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)M(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)j(o[t]);n=!1},d(e){O(o,e),e&&$(t)}}}function us(e){let t,n,r,o,s,a,c,i,l=e[5].message+"",u=e[5].stack.split("\n").join("<br>")+"";return{c(){t=m("div"),n=m("p"),r=g("Search Error in Frontend Code:"),o=v(),s=m("span"),a=g(l),c=v(),i=m("span"),this.h()},l(e){t=y(e,"DIV",{class:!0});var u=w(t);n=y(u,"P",{});var h=w(n);r=b(h,"Search Error in Frontend Code:"),h.forEach($),o=E(u),s=y(u,"SPAN",{class:!0});var d=w(s);a=b(d,l),d.forEach($),c=E(u),i=y(u,"SPAN",{class:!0}),w(i).forEach($),u.forEach($),this.h()},h(){_(s,"class","svelte-16lf2yn"),_(i,"class","svelte-16lf2yn"),_(t,"class","search_error svelte-16lf2yn")},m(e,l){k(e,t,l),A(t,n),A(n,r),A(t,o),A(t,s),A(s,a),A(t,c),A(t,i),i.innerHTML=u},p(e,t){32&t&&l!==(l=e[5].message+"")&&S(a,l),32&t&&u!==(u=e[5].stack.split("\n").join("<br>")+"")&&(i.innerHTML=u)},i:x,o:x,d(e){e&&$(t)}}}function hs(e){let t,n,r,o,s,a,c,i,l,u=e[11].error+"";return n=new ns({props:{meta:e[11].meta}}),{c(){t=m("div"),N(n.$$.fragment),r=v(),o=m("div"),s=m("span"),a=g("âš ï¸"),c=v(),i=g(u),this.h()},l(e){t=y(e,"DIV",{class:!0});var l=w(t);C(n.$$.fragment,l),r=E(l),o=y(l,"DIV",{class:!0});var h=w(o);s=y(h,"SPAN",{class:!0});var d=w(s);a=b(d,"âš ï¸"),d.forEach($),c=E(h),i=b(h,u),h.forEach($),l.forEach($),this.h()},h(){_(s,"class","svelte-16lf2yn"),_(o,"class","result_error svelte-16lf2yn"),_(t,"class","results svelte-16lf2yn")},m(e,u){k(e,t,u),D(n,t,null),A(t,r),A(t,o),A(o,s),A(s,a),A(o,c),A(o,i),l=!0},p(e,t){const r={};64&t&&(r.meta=e[11].meta),n.$set(r),(!l||64&t)&&u!==(u=e[11].error+"")&&S(i,u)},i(e){l||(M(n.$$.fragment,e),l=!0)},o(e){j(n.$$.fragment,e),l=!1},d(e){e&&$(t),U(n)}}}function ds(e){let t,n,r,o,s,a,c,i,l,u,h;n=new ns({props:{meta:e[11].meta}});let d=e[11].tagcloud&&fs(e);return s=new Ho({props:{providerResponse:e[11]}}),c=new Fo({props:{connector:e[0],hasPlayer:e[2],results:e[11].results,meta:e[11].meta,tagcloud:e[11].tagcloud}}),l=new Ho({props:{providerResponse:e[11]}}),{c(){t=m("div"),N(n.$$.fragment),r=v(),d&&d.c(),o=v(),N(s.$$.fragment),a=v(),N(c.$$.fragment),i=v(),N(l.$$.fragment),u=v(),this.h()},l(e){t=y(e,"DIV",{class:!0});var h=w(t);C(n.$$.fragment,h),r=E(h),d&&d.l(h),o=E(h),C(s.$$.fragment,h),a=E(h),C(c.$$.fragment,h),i=E(h),C(l.$$.fragment,h),u=E(h),h.forEach($),this.h()},h(){_(t,"class","results svelte-16lf2yn")},m(e,f){k(e,t,f),D(n,t,null),A(t,r),d&&d.m(t,null),A(t,o),D(s,t,null),A(t,a),D(c,t,null),A(t,i),D(l,t,null),A(t,u),h=!0},p(e,r){const a={};64&r&&(a.meta=e[11].meta),n.$set(a),e[11].tagcloud?d?(d.p(e,r),64&r&&M(d,1)):(d=fs(e),d.c(),M(d,1),d.m(t,o)):d&&(V(),j(d,1,1,(()=>{d=null})),z());const i={};64&r&&(i.providerResponse=e[11]),s.$set(i);const u={};1&r&&(u.connector=e[0]),4&r&&(u.hasPlayer=e[2]),64&r&&(u.results=e[11].results),64&r&&(u.meta=e[11].meta),64&r&&(u.tagcloud=e[11].tagcloud),c.$set(u);const h={};64&r&&(h.providerResponse=e[11]),l.$set(h)},i(e){h||(M(n.$$.fragment,e),M(d),M(s.$$.fragment,e),M(c.$$.fragment,e),M(l.$$.fragment,e),h=!0)},o(e){j(n.$$.fragment,e),j(d),j(s.$$.fragment,e),j(c.$$.fragment,e),j(l.$$.fragment,e),h=!1},d(e){e&&$(t),U(n),d&&d.d(),U(s),U(c),U(l)}}}function fs(e){let t,n;return t=new Br({props:{tagcloud:e[11].tagcloud,onTagClick:e[7],connected:e[1]}}),{c(){N(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){D(t,e,r),n=!0},p(e,n){const r={};64&n&&(r.tagcloud=e[11].tagcloud),2&n&&(r.connected=e[1]),t.$set(r)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function ps(e){let t,n,r,o=ln&&e[11].error&&hs(e),s=e[11].results&&e[11].results.length>0&&ds(e);return{c(){o&&o.c(),t=v(),s&&s.c(),n=T()},l(e){o&&o.l(e),t=E(e),s&&s.l(e),n=T()},m(e,a){o&&o.m(e,a),k(e,t,a),s&&s.m(e,a),k(e,n,a),r=!0},p(e,r){ln&&e[11].error?o?(o.p(e,r),64&r&&M(o,1)):(o=hs(e),o.c(),M(o,1),o.m(t.parentNode,t)):o&&(V(),j(o,1,1,(()=>{o=null})),z()),e[11].results&&e[11].results.length>0?s?(s.p(e,r),64&r&&M(s,1)):(s=ds(e),s.c(),M(s,1),s.m(n.parentNode,n)):s&&(V(),j(s,1,1,(()=>{s=null})),z())},i(e){r||(M(o),M(s),r=!0)},o(e){j(o),j(s),r=!1},d(e){o&&o.d(e),e&&$(t),s&&s.d(e),e&&$(n)}}}function ms(e){let t,n,r,o,s,a,c,i;t=new as({props:{zetaSearch:e[4],connected:e[1]}}),r=new Go({});const l=[us,ls],u=[];function h(e,t){return e[5]?0:e[6]?1:-1}return~(s=h(e))&&(a=u[s]=l[s](e)),{c(){N(t.$$.fragment),n=v(),N(r.$$.fragment),o=v(),a&&a.c(),c=T()},l(e){C(t.$$.fragment,e),n=E(e),C(r.$$.fragment,e),o=E(e),a&&a.l(e),c=T()},m(e,a){D(t,e,a),k(e,n,a),D(r,e,a),k(e,o,a),~s&&u[s].m(e,a),k(e,c,a),i=!0},p(e,[n]){const r={};16&n&&(r.zetaSearch=e[4]),2&n&&(r.connected=e[1]),t.$set(r);let o=s;s=h(e),s===o?~s&&u[s].p(e,n):(a&&(V(),j(u[o],1,1,(()=>{u[o]=null})),z()),~s?(a=u[s],a?a.p(e,n):(a=u[s]=l[s](e),a.c()),M(a,1),a.m(c.parentNode,c)):a=null)},i(e){i||(M(t.$$.fragment,e),M(r.$$.fragment,e),M(a),i=!0)},o(e){j(t.$$.fragment,e),j(r.$$.fragment,e),j(a),i=!1},d(e){U(t,e),e&&$(n),U(r,e),e&&$(o),~s&&u[s].d(e),e&&$(c)}}}function gs(e,t,n){let r,o,s,a,c,i=x,l=()=>(i(),i=R(m,(e=>n(8,s=e))),m),u=x,h=()=>(u(),u=R(f,(e=>n(9,a=e))),f);I(e,Dn,(e=>n(10,c=e))),e.$$.on_destroy.push((()=>i())),e.$$.on_destroy.push((()=>u()));let{connector:d}=t,{connected:f}=t,{hasPlayer:p}=t,{searchResponse:m}=t,{zetaSearch:g}=t;return l(),h(),e.$$set=e=>{"connector"in e&&n(0,d=e.connector),"connected"in e&&h(n(1,f=e.connected)),"hasPlayer"in e&&n(2,p=e.hasPlayer),"searchResponse"in e&&l(n(3,m=e.searchResponse)),"zetaSearch"in e&&n(4,g=e.zetaSearch)},e.$$.update=()=>{256&e.$$.dirty&&n(5,r=s.searchError),256&e.$$.dirty&&n(6,o=s.searchResults)},[d,f,p,m,g,r,o,function(e){a&&!c&&(cs(e),g())},s]}class vs extends d{constructor(e){super(),f(this,e,gs,ms,p,{connector:0,connected:1,hasPlayer:2,searchResponse:3,zetaSearch:4})}}function ys(e){let t,n;const r=[e[1],{backend:e[2]},{meta:e[3]},{newsfeed:e[5]},{tagcloud:e[4]},{i:e[0]}];let o={};for(let s=0;s<r.length;s+=1)o=q(o,r[s]);return t=new $o({props:o}),{c(){N(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,r){D(t,e,r),n=!0},p(e,n){const o=63&n?F(r,[2&n&&B(e[1]),4&n&&{backend:e[2]},8&n&&{meta:e[3]},32&n&&{newsfeed:e[5]},16&n&&{tagcloud:e[4]},1&n&&{i:e[0]}]):{};t.$set(o)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function ws(e){let t,n,r,o=e[1].url&&ys(e);return{c(){t=m("div"),n=m("div"),o&&o.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var r=w(t);n=y(r,"DIV",{class:!0});var s=w(n);o&&o.l(s),s.forEach($),r.forEach($),this.h()},h(){_(n,"class","result"),P(n,"url_result",e[1].url),_(t,"class","inner")},m(e,s){k(e,t,s),A(t,n),o&&o.m(n,null),r=!0},p(e,[t]){e[1].url?o?(o.p(e,t),2&t&&M(o,1)):(o=ys(e),o.c(),M(o,1),o.m(n,null)):o&&(V(),j(o,1,1,(()=>{o=null})),z()),2&t&&P(n,"url_result",e[1].url)},i(e){r||(M(o),r=!0)},o(e){j(o),r=!1},d(e){e&&$(t),o&&o.d()}}}function bs(e,t,n){let{i:r}=t,{result:o}=t,{backend:s}=t,{hasPlayer:a}=t,{meta:c}=t,{allResults:i}=t,{tagcloud:l}=t,{newsfeed:u}=t;return e.$$set=e=>{"i"in e&&n(0,r=e.i),"result"in e&&n(1,o=e.result),"backend"in e&&n(2,s=e.backend),"hasPlayer"in e&&n(6,a=e.hasPlayer),"meta"in e&&n(3,c=e.meta),"allResults"in e&&n(7,i=e.allResults),"tagcloud"in e&&n(4,l=e.tagcloud),"newsfeed"in e&&n(5,u=e.newsfeed)},[r,o,s,c,l,u,a,i]}class $s extends d{constructor(e){super(),f(this,e,bs,ws,p,{i:0,result:1,backend:2,hasPlayer:6,meta:3,allResults:7,tagcloud:4,newsfeed:5})}}function Es(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function _s(e){let t,n,r,o=e[1]&&ks(e),s=e[5].slice(e[3],e[4]?e[3]+e[4]:e[4]),a=[];for(let i=0;i<s.length;i+=1)a[i]=Ps(Es(e,s,i));const c=e=>j(a[e],1,1,(()=>{a[e]=null}));return{c(){o&&o.c(),t=v();for(let e=0;e<a.length;e+=1)a[e].c();n=T()},l(e){o&&o.l(e),t=E(e);for(let t=0;t<a.length;t+=1)a[t].l(e);n=T()},m(e,s){o&&o.m(e,s),k(e,t,s);for(let t=0;t<a.length;t+=1)a[t].m(e,s);k(e,n,s),r=!0},p(e,r){if(e[1]?o?o.p(e,r):(o=ks(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),125&r){let t;for(s=e[5].slice(e[3],e[4]?e[3]+e[4]:e[4]),t=0;t<s.length;t+=1){const o=Es(e,s,t);a[t]?(a[t].p(o,r),M(a[t],1)):(a[t]=Ps(o),a[t].c(),M(a[t],1),a[t].m(n.parentNode,n))}for(V(),t=s.length;t<a.length;t+=1)c(t);z()}},i(e){if(!r){for(let e=0;e<s.length;e+=1)M(a[e]);r=!0}},o(e){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)j(a[t]);r=!1},d(e){o&&o.d(e),e&&$(t),O(a,e),e&&$(n)}}}function ks(e){let t;function n(e,t){return 0==e[3]?Ss:As}let r=n(e),o=r(e);return{c(){o.c(),t=T()},l(e){o.l(e),t=T()},m(e,n){o.m(e,n),k(e,t,n)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&$(t)}}}function As(e){let t,n,r,o,s;return{c(){t=m("h2"),n=m("span"),r=g("continue"),o=v(),s=g(e[1]),this.h()},l(a){t=y(a,"H2",{class:!0});var c=w(t);n=y(c,"SPAN",{class:!0});var i=w(n);r=b(i,"continue"),i.forEach($),o=E(c),s=b(c,e[1]),c.forEach($),this.h()},h(){_(n,"class","svelte-ece0r8"),_(t,"class","continue svelte-ece0r8")},m(e,a){k(e,t,a),A(t,n),A(n,r),A(t,o),A(t,s)},p(e,t){2&t&&S(s,e[1])},d(e){e&&$(t)}}}function Ss(e){let t,n;return{c(){t=m("h2"),n=g(e[1])},l(r){t=y(r,"H2",{});var o=w(t);n=b(o,e[1]),o.forEach($)},m(e,r){k(e,t,r),A(t,n)},p(e,t){2&t&&S(n,e[1])},d(e){e&&$(t)}}}function xs(e){let t,n,r,o;return n=new $s({props:{result:e[9],meta:e[6],newsfeed:"true",backend:e[0],i:e[11]}}),{c(){t=m("div"),N(n.$$.fragment),r=v(),this.h()},l(e){t=y(e,"DIV",{class:!0});var o=w(t);C(n.$$.fragment,o),r=E(o),o.forEach($),this.h()},h(){_(t,"class","result")},m(e,s){k(e,t,s),D(n,t,null),A(t,r),o=!0},p(e,t){const r={};56&t&&(r.result=e[9]),1&t&&(r.backend=e[0]),n.$set(r)},i(e){o||(M(n.$$.fragment,e),o=!0)},o(e){j(n.$$.fragment,e),o=!1},d(e){e&&$(t),U(n)}}}function Ts(e){let t,n,r,o,s,a;return n=new $s({props:{result:e[9],meta:e[6],newsfeed:"true",backend:e[0],i:e[11]}}),{c(){t=m("div"),N(n.$$.fragment),r=v(),this.h()},l(e){t=y(e,"DIV",{class:!0});var o=w(t);C(n.$$.fragment,o),r=E(o),o.forEach($),this.h()},h(){_(t,"class","result")},m(e,o){k(e,t,o),D(n,t,null),A(t,r),a=!0},p(e,t){const r={};56&t&&(r.result=e[9]),1&t&&(r.backend=e[0]),n.$set(r)},i(r){a||(M(n.$$.fragment,r),Y((()=>{s&&s.end(1),o||(o=Q(t,J,{y:50,duration:750,delay:100*e[11]})),o.start()})),a=!0)},o(e){j(n.$$.fragment,e),o&&o.invalidate(),s=G(t,J,{y:50}),a=!1},d(e){e&&$(t),U(n),e&&s&&s.end()}}}function Ps(e){let t,n,r,o;const s=[Ts,xs],a=[];function c(e,t){return e[2]?0:1}return t=c(e),n=a[t]=s[t](e),{c(){n.c(),r=T()},l(e){n.l(e),r=T()},m(e,n){a[t].m(e,n),k(e,r,n),o=!0},p(e,o){let i=t;t=c(e),t===i?a[t].p(e,o):(V(),j(a[i],1,1,(()=>{a[i]=null})),z(),n=a[t],n?n.p(e,o):(n=a[t]=s[t](e),n.c()),M(n,1),n.m(r.parentNode,r))},i(e){o||(M(n),o=!0)},o(e){j(n),o=!1},d(e){a[t].d(e),e&&$(r)}}}function Os(e){let t,n,r=e[5]&&e[5].length&&_s(e);return{c(){r&&r.c(),t=T()},l(e){r&&r.l(e),t=T()},m(e,o){r&&r.m(e,o),k(e,t,o),n=!0},p(e,[n]){e[5]&&e[5].length?r?(r.p(e,n),32&n&&M(r,1)):(r=_s(e),r.c(),M(r,1),r.m(t.parentNode,t)):r&&(V(),j(r,1,1,(()=>{r=null})),z())},i(e){n||(M(r),n=!0)},o(e){j(r),n=!1},d(e){r&&r.d(e),e&&$(t)}}}function Rs(e,t,n){let r,o,s=x,a=()=>(s(),s=R(c,(e=>n(7,o=e))),c);e.$$.on_destroy.push((()=>s()));let{backend:c}=t;a();let{title:i}=t,{animate:l=!0}=t,{startFrom:u=0}=t,{count:h}=t;return e.$$set=e=>{"backend"in e&&a(n(0,c=e.backend)),"title"in e&&n(1,i=e.title),"animate"in e&&n(2,l=e.animate),"startFrom"in e&&n(3,u=e.startFrom),"count"in e&&n(4,h=e.count)},e.$$.update=()=>{128&e.$$.dirty&&n(5,r=o.recentWeblinks),128&e.$$.dirty&&o.entireLinkIndexCloud},[c,i,l,u,h,r,{providerTag:"this"},o]}class Is extends d{constructor(e){super(),f(this,e,Rs,Os,p,{backend:0,title:1,animate:2,startFrom:3,count:4})}}function Ns(e){return h(e)?h(e):void 0}function Cs(){ae.updateSearchParam("q",Ns(On));const e=Ns(Rn);ae.updateSearchParam("page",1==e?void 0:e),ae.updateSearchParam("place",Ns(In)),ae.updateSearchParam("mode",Ns(Nn));const t=Ns(Un);ae.updateSearchParam("tags",t&&Object.keys(t).length?Object.keys(t).join(","):void 0)}function Ds(e){let t,n;return{c(){t=m("h1"),n=g("My Zeta Node")},l(e){t=y(e,"H1",{});var r=w(t);n=b(r,"My Zeta Node"),r.forEach($)},m(e,r){k(e,t,r),A(t,n)},d(e){e&&$(t)}}}function Ms(e){let t,n;return{c(){t=m("img"),this.h()},l(e){t=y(e,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){t.src!==(n="img/zetaseek_logo.svg?v=2")&&_(t,"src","img/zetaseek_logo.svg?v=2"),_(t,"alt","zeta logo"),_(t,"class","svelte-1tdly8a")},m(e,n){k(e,t,n)},d(e){e&&$(t)}}}function js(e){let t,n;return{c(){t=m("h1"),n=g("My Computer")},l(e){t=y(e,"H1",{});var r=w(t);n=b(r,"My Computer"),r.forEach($)},m(e,r){k(e,t,r),A(t,n)},d(e){e&&$(t)}}}function Us(e){let t,n,r,o,s;return{c(){t=m("p"),n=g("âš ï¸ Please start the "),r=m("span"),o=g("dmt-proc"),s=g(" ..."),this.h()},l(e){t=y(e,"P",{class:!0});var a=w(t);n=b(a,"âš ï¸ Please start the "),r=y(a,"SPAN",{class:!0});var c=w(r);o=b(c,"dmt-proc"),c.forEach($),s=b(a," ..."),a.forEach($),this.h()},h(){_(r,"class","svelte-1tdly8a"),_(t,"class","connection_status_help svelte-1tdly8a")},m(e,a){k(e,t,a),A(t,n),A(t,r),A(r,o),A(t,s)},d(e){e&&$(t)}}}function Vs(e){let t,n,r,o,s=!e[14]&&zs();return{c(){t=m("br"),n=v(),r=m("div"),o=g("âš ï¸ Requested file was renamed or moved "),s&&s.c(),this.h()},l(e){t=y(e,"BR",{}),n=E(e),r=y(e,"DIV",{class:!0});var a=w(r);o=b(a,"âš ï¸ Requested file was renamed or moved "),s&&s.l(a),a.forEach($),this.h()},h(){_(r,"class","error svelte-1tdly8a")},m(e,a){k(e,t,a),k(e,n,a),k(e,r,a),A(r,o),s&&s.m(r,null)},p(e,t){e[14]?s&&(s.d(1),s=null):s||(s=zs(),s.c(),s.m(r,null))},d(e){e&&$(t),e&&$(n),e&&$(r),s&&s.d()}}}function zs(e){let t;return{c(){t=g("but perhaps one of the following results matches:")},l(e){t=b(e,"but perhaps one of the following results matches:")},m(e,n){k(e,t,n)},d(e){e&&$(t)}}}function Ls(e){let t,n,r,o,s,a,c,i,l,u;t=new Is({props:{backend:e[2],title:"",count:Ks}});let h=e[8]&&qs();s=new Br({props:{tagcloud:e[8],onTagClick:e[18],connected:e[0],maxWidth:"800px"}}),c=new Is({props:{backend:e[2],startFrom:Ks}});let d=e[4].entireLinkIndexCount&&Fs(e);return{c(){N(t.$$.fragment),n=v(),h&&h.c(),r=v(),o=m("div"),N(s.$$.fragment),a=v(),N(c.$$.fragment),i=v(),d&&d.c(),l=T(),this.h()},l(e){C(t.$$.fragment,e),n=E(e),h&&h.l(e),r=E(e),o=y(e,"DIV",{class:!0});var u=w(o);C(s.$$.fragment,u),u.forEach($),a=E(e),C(c.$$.fragment,e),i=E(e),d&&d.l(e),l=T(),this.h()},h(){_(o,"class","tagcloud svelte-1tdly8a")},m(e,f){D(t,e,f),k(e,n,f),h&&h.m(e,f),k(e,r,f),k(e,o,f),D(s,o,null),k(e,a,f),D(c,e,f),k(e,i,f),d&&d.m(e,f),k(e,l,f),u=!0},p(e,n){const o={};4&n[0]&&(o.backend=e[2]),t.$set(o),e[8]?h||(h=qs(),h.c(),h.m(r.parentNode,r)):h&&(h.d(1),h=null);const a={};256&n[0]&&(a.tagcloud=e[8]),1&n[0]&&(a.connected=e[0]),s.$set(a);const i={};4&n[0]&&(i.backend=e[2]),c.$set(i),e[4].entireLinkIndexCount?d?(d.p(e,n),16&n[0]&&M(d,1)):(d=Fs(e),d.c(),M(d,1),d.m(l.parentNode,l)):d&&(V(),j(d,1,1,(()=>{d=null})),z())},i(e){u||(M(t.$$.fragment,e),M(s.$$.fragment,e),M(c.$$.fragment,e),M(d),u=!0)},o(e){j(t.$$.fragment,e),j(s.$$.fragment,e),j(c.$$.fragment,e),j(d),u=!1},d(e){U(t,e),e&&$(n),h&&h.d(e),e&&$(r),e&&$(o),U(s),e&&$(a),U(c,e),e&&$(i),d&&d.d(e),e&&$(l)}}}function qs(e){let t,n,r,o,s;return{c(){t=m("h2"),n=g("â€” "),r=m("span"),o=g("Explore"),s=g(" â€”"),this.h()},l(e){t=y(e,"H2",{class:!0});var a=w(t);n=b(a,"â€” "),r=y(a,"SPAN",{class:!0});var c=w(r);o=b(c,"Explore"),c.forEach($),s=b(a," â€”"),a.forEach($),this.h()},h(){_(r,"class","svelte-1tdly8a"),_(t,"class","explore svelte-1tdly8a")},m(e,a){k(e,t,a),A(t,n),A(t,r),A(r,o),A(t,s)},d(e){e&&$(t)}}}function Fs(e){let t,n,r,o,s,a,c,i=e[4].entireLinkIndexCount+"";return{c(){t=m("div"),n=g("Total links in local webindex: "),r=m("span"),o=g(i),this.h()},l(e){t=y(e,"DIV",{class:!0});var s=w(t);n=b(s,"Total links in local webindex: "),r=y(s,"SPAN",{class:!0});var a=w(r);o=b(a,i),a.forEach($),s.forEach($),this.h()},h(){_(r,"class","svelte-1tdly8a"),_(t,"class","link_count svelte-1tdly8a")},m(e,s){k(e,t,s),A(t,n),A(t,r),A(r,o),c=!0},p(e,t){(!c||16&t[0])&&i!==(i=e[4].entireLinkIndexCount+"")&&S(o,i)},i(e){c||(Y((()=>{a&&a.end(1),s||(s=Q(t,J,{duration:300,delay:100})),s.start()})),c=!0)},o(e){s&&s.invalidate(),a=G(t,J,{}),c=!1},d(e){e&&$(t),e&&a&&a.end()}}}function Bs(e){let t,n,r,o,s,a,c,i,l,u,h,d,f,p,g,b,S,x,T,O,R,I,L,q,F;function B(e,t){return ln?js:e[13]?Ms:Ds}let K=B(e),H=K(e);o=new Nr({props:{connected:e[0]}}),a=new jr({});let Y=!e[5]&&ln&&Us(),Q="file_not_found"==e[6]&&Vs(e);R=new vs({props:{connector:e[1],zetaSearch:e[15],connected:e[0],searchResponse:Cn,hasPlayer:e[3]&&null!=e[3].volume}});let J=!e[11]&&!e[10]&&Ls(e);return{c(){t=m("div"),n=m("a"),H.c(),r=v(),N(o.$$.fragment),s=v(),N(a.$$.fragment),c=v(),i=m("div"),l=m("div"),u=m("input"),d=v(),f=m("img"),g=v(),b=m("img"),x=v(),Y&&Y.c(),T=v(),Q&&Q.c(),O=v(),N(R.$$.fragment),I=v(),J&&J.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var h=w(t);n=y(h,"A",{href:!0,"tinro-ignore":!0,class:!0});var p=w(n);H.l(p),p.forEach($),h.forEach($),r=E(e),C(o.$$.fragment,e),s=E(e),C(a.$$.fragment,e),c=E(e),i=y(e,"DIV",{class:!0});var m=w(i);l=y(m,"DIV",{class:!0});var v=w(l);u=y(v,"INPUT",{id:!0,placeholder:!0,disabled:!0,class:!0}),d=E(v),f=y(v,"IMG",{class:!0,src:!0}),g=E(v),b=y(v,"IMG",{class:!0,src:!0}),v.forEach($),x=E(m),Y&&Y.l(m),T=E(m),Q&&Q.l(m),O=E(m),C(R.$$.fragment,m),I=E(m),J&&J.l(m),m.forEach($),this.h()},h(){_(n,"href","#"),_(n,"tinro-ignore",""),_(n,"class","svelte-1tdly8a"),_(t,"class","logo svelte-1tdly8a"),_(u,"id","search_input"),_(u,"placeholder",e[9]),u.disabled=h=!e[5],_(u,"class","svelte-1tdly8a"),P(u,"public_search",0==e[12]),P(u,"this_node_search",1==e[12]),_(f,"class","loupe svelte-1tdly8a"),f.src!==(p="img/redesign/zetaseek_icon-search.svg")&&_(f,"src","img/redesign/zetaseek_icon-search.svg"),_(b,"class","reset svelte-1tdly8a"),b.src!==(S="img/close.png")&&_(b,"src","img/close.png"),P(b,"invisible",!e[11]),_(l,"class","search_input_wrapper svelte-1tdly8a"),_(i,"class","search svelte-1tdly8a")},m(h,p){k(h,t,p),A(t,n),H.m(n,null),k(h,r,p),D(o,h,p),k(h,s,p),D(a,h,p),k(h,c,p),k(h,i,p),A(i,l),A(l,u),ce(u,e[11]),e[24](u),A(l,d),A(l,f),A(l,g),A(l,b),A(i,x),Y&&Y.m(i,null),A(i,T),Q&&Q.m(i,null),A(i,O),D(R,i,null),A(i,I),J&&J.m(i,null),L=!0,q||(F=[W(n,"click",X(e[22])),W(u,"input",e[23]),W(u,"keyup",e[16]),W(u,"paste",e[16]),W(b,"click",e[25])],q=!0)},p(e,t){K!==(K=B(e))&&(H.d(1),H=K(e),H&&(H.c(),H.m(n,null)));const r={};1&t[0]&&(r.connected=e[0]),o.$set(r),(!L||512&t[0])&&_(u,"placeholder",e[9]),(!L||32&t[0]&&h!==(h=!e[5]))&&(u.disabled=h),2048&t[0]&&u.value!==e[11]&&ce(u,e[11]),4096&t[0]&&P(u,"public_search",0==e[12]),4096&t[0]&&P(u,"this_node_search",1==e[12]),2048&t[0]&&P(b,"invisible",!e[11]),!e[5]&&ln?Y||(Y=Us(),Y.c(),Y.m(i,T)):Y&&(Y.d(1),Y=null),"file_not_found"==e[6]?Q?Q.p(e,t):(Q=Vs(e),Q.c(),Q.m(i,O)):Q&&(Q.d(1),Q=null);const s={};2&t[0]&&(s.connector=e[1]),1&t[0]&&(s.connected=e[0]),8&t[0]&&(s.hasPlayer=e[3]&&null!=e[3].volume),R.$set(s),e[11]||e[10]?J&&(V(),j(J,1,1,(()=>{J=null})),z()):J?(J.p(e,t),3072&t[0]&&M(J,1)):(J=Ls(e),J.c(),M(J,1),J.m(i,null))},i(e){L||(M(o.$$.fragment,e),M(a.$$.fragment,e),M(R.$$.fragment,e),M(J),L=!0)},o(e){j(o.$$.fragment,e),j(a.$$.fragment,e),j(R.$$.fragment,e),j(J),L=!1},d(n){n&&$(t),H.d(),n&&$(r),U(o,n),n&&$(s),U(a,n),n&&$(c),n&&$(i),e[24](null),Y&&Y.d(),Q&&Q.d(),U(R),J&&J.d(),q=!1,ee(F)}}}const Ks=3;function Hs(e,t,n){let r,o,s,a,c,i,l,u,h,d,f,p,m=x,g=()=>(m(),m=R($,(e=>n(4,s=e))),$),v=x,y=()=>(v(),v=R(w,(e=>n(5,a=e))),w);I(e,In,(e=>n(10,c=e))),I(e,Rn,(e=>n(27,i=e))),I(e,gn,(e=>n(28,l=e))),I(e,On,(e=>n(11,u=e))),I(e,fn,(e=>n(29,h=e))),I(e,Nn,(e=>n(12,d=e))),I(e,mn,(e=>n(13,f=e))),I(e,Mn,(e=>n(14,p=e))),e.$$.on_destroy.push((()=>m())),e.$$.on_destroy.push((()=>v()));let{connected:w}=t;y();let{connector:b}=t,{backend:$}=t;g();let{backend2:E}=t,{concurrency:_}=t,{displayName:k}=t,{player:A}=t;const S=Kr(),{q:T,page:P,tags:O,place:N,error:C,mode:D}=ae.parseQuery();let M=C;if(T&&On.set(decodeURIComponent(T)),O)for(const x of decodeURIComponent(O).split(","))cs(x);P&&Rn.set(parseInt(P)),N&&In.set(decodeURIComponent(N)),In.subscribe((()=>{}));const j=_.requireConditions(2,(()=>{console.log("âœ“ FIRST STORE CONNECT after MOUNTING the APP ..."),c?ko(c,$):z({force:!0,searchPage:i,keepSelectedTags:!0})}));let U,V;function z({force:e=!1,searchPage:t=1,userActivated:r=!1,keepSelectedTags:o=!1}={}){In.set(null),Rn.set(t),u?(document.title=h?`${u} â€” zetaseek`:`${u} â€” dmt search`,window.screen.width>768&&document.body.classList.add("darken")):(document.body.classList.remove("darken"),document.title="ZetaSeek Search & Discovery"),console.log(`triggerSearch: ${u}`);const s=b.remoteObject("GUISearchObject");r&&M&&(n(6,M=void 0),ae.updateSearchParam("error")),null==u&&console.log("Warning: null SEARCH QUERY !!! Should not hapen. There is a bug probably in GUI code"),Cs(),Pn({searchQuery:u,page:t,searchMode:d,keepSelectedTags:o,selectedTags:Un,remoteObject:s,remoteMethod:"search",searchStatusCallback:({searching:e,noHits:t,noMorePages:n})=>{Dn.set(e),Mn.set(t),jn.set(n)},searchDelay:300,force:e,searchMetadata:_o(),timezone:S}).then((e=>{Cs(),Cn.set({searchResults:e,searchQuery:u})})).catch((e=>{Cs(),Cn.set({searchError:e})}))}function q(e=!1){On.set(""),z(),l&&!e||U.focus()}b.on("ready",(()=>{j.oneConditionFulfilled()})),L((()=>{l||setTimeout((()=>{U.focus()}),1e3),j.oneConditionFulfilled()}));return e.$$set=e=>{"connected"in e&&y(n(0,w=e.connected)),"connector"in e&&n(1,b=e.connector),"backend"in e&&g(n(2,$=e.backend)),"backend2"in e&&n(19,E=e.backend2),"concurrency"in e&&n(20,_=e.concurrency),"displayName"in e&&n(21,k=e.displayName),"player"in e&&n(3,A=e.player)},e.$$.update=()=>{16&e.$$.dirty[0]&&n(8,r=s.entireLinkIndexCloud),32&e.$$.dirty[0]&&n(9,o=a?"Search terms":"Search is currently not available")},[w,b,$,A,s,a,M,U,r,o,c,u,d,f,p,function({searchPage:e=1}={}){z({searchPage:e,userActivated:!0,force:!0,keepSelectedTags:!0})},function(){clearTimeout(V),V=setTimeout((()=>{console.log("searchInputChanged event received, triggering search ..."),z({userActivated:!0})}),""==(null==u?void 0:u.trim())?0:400)},q,function(e){window.scrollTo(0,0),function(e,{mode:t,searchPage:n,force:r=!1}={}){On.set(e),t&&Nn.set(t),setTimeout((()=>{z({userActivated:!0,searchPage:n,force:r})}),50)}(e)},E,_,k,()=>{q()},function(){u=this.value,On.set(u)},function(e){oe[e?"unshift":"push"]((()=>{U=e,n(7,U)}))},()=>q(!0)]}class Ws extends d{constructor(e){super(),f(this,e,Hs,Bs,p,{connected:0,connector:1,backend:2,backend2:19,concurrency:20,displayName:21,player:3},[-1,-1])}}function Ys(e){let t,n,r,o,s,a,c,i,l,u,h;return Y(e[12]),n=new rr({props:{backend:e[7],backend2:e[1],connected:e[8]}}),o=new Ln({props:{dmtVersion:e[5]}}),a=new Ar({props:{metamaskConnect:e[3],backend:e[7]}}),i=new Ws({props:{connected:e[8],connector:e[0],backend:e[7],backend2:e[1],concurrency:e[2],metamaskConnect:e[3],player:e[4],displayName:e[9]}}),{c(){t=m("main"),N(n.$$.fragment),r=v(),N(o.$$.fragment),s=v(),N(a.$$.fragment),c=v(),N(i.$$.fragment),this.h()},l(e){t=y(e,"MAIN",{class:!0});var l=w(t);C(n.$$.fragment,l),r=E(l),C(o.$$.fragment,l),s=E(l),C(a.$$.fragment,l),c=E(l),C(i.$$.fragment,l),l.forEach($),this.h()},h(){_(t,"class","svelte-14z86uw")},m(d,f){k(d,t,f),D(n,t,null),A(t,r),D(o,t,null),A(t,s),D(a,t,null),A(t,c),D(i,t,null),l=!0,u||(h=W(window,"resize",e[12]),u=!0)},p(e,[t]){const r={};2&t&&(r.backend2=e[1]),n.$set(r);const s={};32&t&&(s.dmtVersion=e[5]),o.$set(s);const c={};8&t&&(c.metamaskConnect=e[3]),a.$set(c);const l={};1&t&&(l.connector=e[0]),2&t&&(l.backend2=e[1]),4&t&&(l.concurrency=e[2]),8&t&&(l.metamaskConnect=e[3]),16&t&&(l.player=e[4]),i.$set(l)},i(e){l||(M(n.$$.fragment,e),M(o.$$.fragment,e),M(a.$$.fragment,e),M(i.$$.fragment,e),l=!0)},o(e){j(n.$$.fragment,e),j(o.$$.fragment,e),j(a.$$.fragment,e),j(i.$$.fragment,e),l=!1},d(e){e&&$(t),U(n),U(o),U(a),U(i),u=!1,h()}}}function Qs(e,t,n){let r,o,s,a,c;I(e,on,(e=>n(6,c=e)));let{connector:i}=t;const{state:l,connected:u}=i;I(e,l,(e=>n(11,a=e)));let h,{backend2:d}=t,{concurrency:f}=t,{metamaskConnect:p}=t;return l.subscribe((({device:e})=>{an.set(e?e.deviceName:null),cn.set(e?e.tagline:null)})),e.$$set=e=>{"connector"in e&&n(0,i=e.connector),"backend2"in e&&n(1,d=e.backend2),"concurrency"in e&&n(2,f=e.concurrency),"metamaskConnect"in e&&n(3,p=e.metamaskConnect)},e.$$.update=()=>{2048&e.$$.dirty&&n(10,r=a.device),2048&e.$$.dirty&&n(4,o=a.player),2048&e.$$.dirty&&a.peerlist,1024&e.$$.dirty&&n(5,s=r?r.dmtVersion:null)},[i,d,f,p,o,s,c,l,u,h,r,a,function(){on.set(c=window.innerWidth)}]}const{metamaskInit:Js}=En,Gs={port:7780},Zs=tn(i(c({},Gs),{protocol:"dmtapp/search",rpcRequestTimeout:5500,verbose:!1}));let Xs;if(h(fn)||ln){const{state:e}=tn(i(c({},Gs),{protocol:"dmt/system"}));Xs=e}const ea=Js((e=>{console.log(`Connected ethereum address: ${e}`),sn.set(e)}));new class extends d{constructor(e){super(),f(this,e,Qs,Ys,p,{connector:0,backend2:1,concurrency:2,metamaskConnect:3})}}({target:document.body,props:{connector:Zs,backend2:Xs,concurrency:rn,metamaskConnect:ea}});
