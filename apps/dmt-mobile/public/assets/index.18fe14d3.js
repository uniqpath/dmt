import{S as e,i as t,s as n,e as c,t as a,a as r,c as s,b as i,d as l,f as o,g as d,h as u,j as f,k as p,l as h,m,n as v,o as $,p as y,q as b,r as g,u as D,v as N,w as T,x as E,y as M,z as _,A as w,B as k,C as A,D as B,M as O}from"./vendor.e4c79578.js";function S(e){let t,n,v,$,y=0!=e[2]?"":"✖";return{c(){t=c("h2"),n=a(e[1]),v=r(),$=a(y),this.h()},l(c){t=s(c,"H2",{class:!0});var a=i(t);n=l(a,e[1]),v=o(a),$=l(a,y),a.forEach(d),this.h()},h(){u(t,"class","svelte-7e76nl"),f(t,"faded",0==e[2])},m(e,c){p(e,t,c),h(t,n),h(t,v),h(t,$)},p(e,c){2&c&&m(n,e[1]),4&c&&y!==(y=0!=e[2]?"":"✖")&&m($,y),4&c&&f(t,"faded",0==e[2])},d(e){e&&d(t)}}}function U(e){let t,n=e[1]&&S(e);return{c(){n&&n.c(),t=v()},l(e){n&&n.l(e),t=v()},m(e,c){n&&n.m(e,c),p(e,t,c)},p(e,[c]){e[1]?n?n.p(e,c):(n=S(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:$,o:$,d(e){n&&n.d(e),e&&d(t)}}}function x(e,t,n){let c,a=$,r=()=>(a(),a=y(s,(e=>n(2,c=e))),s);e.$$.on_destroy.push((()=>a()));let{connected:s}=t;r();let{deviceName:i}=t;return e.$$set=e=>{"connected"in e&&r(n(0,s=e.connected)),"deviceName"in e&&n(1,i=e.deviceName)},[s,i,c]}class K extends e{constructor(e){super(),t(this,e,x,U,n,{connected:0,deviceName:1})}}function P(e,t=2){return Array(Math.max(t-String(e).length+1,0)).join(0)+e}function V(e){e=Math.round(e);const t=Math.floor(e/3600),n=e%3600,c=Math.floor(n/60);return e=n%60,t?`${t}h ${P(c)}min ${P(e)}s`:`${c}:${P(e)}`}function I(e){let t,n,r;return{c(){t=c("p"),n=c("b"),r=a("No media loaded")},l(e){t=s(e,"P",{});var c=i(t);n=s(c,"B",{});var a=i(n);r=l(a,"No media loaded"),a.forEach(d),c.forEach(d)},m(e,c){p(e,t,c),h(t,n),h(n,r)},p:$,d(e){e&&d(t)}}}function j(e){let t,n,v,$,y,b,g=e[1].paused?" ":"video"==e[1].currentMedia.mediaType?"▶":"♫",D=(e[1].currentMedia.artist?`${e[1].currentMedia.artist} - ${e[1].currentMedia.song}`:e[1].currentMedia.song)+"";function N(e,t){return e[1].isStream?W:e[1].timeposition?C:e[1].duration?R:void 0}let T=N(e),E=T&&T(e);return{c(){t=c("p"),n=a(g),v=r(),$=a(D),y=r(),b=c("p"),E&&E.c(),this.h()},l(e){t=s(e,"P",{class:!0});var c=i(t);n=l(c,g),v=o(c),$=l(c,D),c.forEach(d),y=o(e),b=s(e,"P",{class:!0});var a=i(b);E&&E.l(a),a.forEach(d),this.h()},h(){u(t,"class","current_media svelte-10b1536"),f(t,"faded",e[1].paused),u(b,"class","svelte-10b1536"),f(b,"faded",e[1].paused)},m(e,c){p(e,t,c),h(t,n),h(t,v),h(t,$),p(e,y,c),p(e,b,c),E&&E.m(b,null)},p(e,c){2&c&&g!==(g=e[1].paused?" ":"video"==e[1].currentMedia.mediaType?"▶":"♫")&&m(n,g),2&c&&D!==(D=(e[1].currentMedia.artist?`${e[1].currentMedia.artist} - ${e[1].currentMedia.song}`:e[1].currentMedia.song)+"")&&m($,D),2&c&&f(t,"faded",e[1].paused),T===(T=N(e))&&E?E.p(e,c):(E&&E.d(1),E=T&&T(e),E&&(E.c(),E.m(b,null))),2&c&&f(b,"faded",e[1].paused)},d(e){e&&d(t),e&&d(y),e&&d(b),E&&E.d()}}}function R(e){let t,n=V(e[1].currentMedia.duration)+"";return{c(){t=a(n)},l(e){t=l(e,n)},m(e,n){p(e,t,n)},p(e,c){2&c&&n!==(n=V(e[1].currentMedia.duration)+"")&&m(t,n)},d(e){e&&d(t)}}}function C(e){let t,n,c,r,s,i,o=V(Math.floor(e[1].timeposition))+"",u=V(e[1].currentMedia.duration)+"",f=Math.round(e[1].percentposition)+"";return{c(){t=a(o),n=a(" / "),c=a(u),r=a(" — "),s=a(f),i=a("%")},l(e){t=l(e,o),n=l(e," / "),c=l(e,u),r=l(e," — "),s=l(e,f),i=l(e,"%")},m(e,a){p(e,t,a),p(e,n,a),p(e,c,a),p(e,r,a),p(e,s,a),p(e,i,a)},p(e,n){2&n&&o!==(o=V(Math.floor(e[1].timeposition))+"")&&m(t,o),2&n&&u!==(u=V(e[1].currentMedia.duration)+"")&&m(c,u),2&n&&f!==(f=Math.round(e[1].percentposition)+"")&&m(s,f)},d(e){e&&d(t),e&&d(n),e&&d(c),e&&d(r),e&&d(s),e&&d(i)}}}function W(e){let t;return{c(){t=a("(radio)")},l(e){t=l(e,"(radio)")},m(e,n){p(e,t,n)},p:$,d(e){e&&d(t)}}}function F(e){let t,n,r,o=e[1].volume+"";return{c(){t=c("p"),n=a("Volume: "),r=a(o),this.h()},l(e){t=s(e,"P",{class:!0});var c=i(t);n=l(c,"Volume: "),r=l(c,o),c.forEach(d),this.h()},h(){u(t,"class","svelte-10b1536"),f(t,"faded",e[1].paused)},m(e,c){p(e,t,c),h(t,n),h(t,r)},p(e,n){2&n&&o!==(o=e[1].volume+"")&&m(r,o),2&n&&f(t,"faded",e[1].paused)},d(e){e&&d(t)}}}function L(e){let t,n;function a(e,t){return e[1].currentMedia&&e[1].currentMedia.song&&e[2]?j:e[2]?I:void 0}let l=a(e),f=l&&l(e),m=e[2]&&F(e);return{c(){t=c("div"),f&&f.c(),n=r(),m&&m.c(),this.h()},l(e){t=s(e,"DIV",{class:!0});var c=i(t);f&&f.l(c),n=o(c),m&&m.l(c),c.forEach(d),this.h()},h(){u(t,"class","player_media svelte-10b1536")},m(e,c){p(e,t,c),f&&f.m(t,null),h(t,n),m&&m.m(t,null)},p(e,[c]){l===(l=a(e))&&f?f.p(e,c):(f&&f.d(1),f=l&&l(e),f&&(f.c(),f.m(t,n))),e[2]?m?m.p(e,c):(m=F(e),m.c(),m.m(t,null)):m&&(m.d(1),m=null)},i:$,o:$,d(e){e&&d(t),f&&f.d(),m&&m.d()}}}function q(e,t,n){let c,a=$,r=()=>(a(),a=y(s,(e=>n(2,c=e))),s);e.$$.on_destroy.push((()=>a()));let{connected:s}=t;r();let{player:i}=t;return e.$$set=e=>{"connected"in e&&r(n(0,s=e.connected)),"player"in e&&n(1,i=e.player)},[s,i,c]}class z extends e{constructor(e){super(),t(this,e,q,L,n,{connected:0,player:1})}}function G(e){let t,n,r,o,f;return{c(){t=c("button"),n=a("● Pause"),this.h()},l(e){t=s(e,"BUTTON",{class:!0});var c=i(t);n=l(c,"● Pause"),c.forEach(d),this.h()},h(){u(t,"class","pause"),t.disabled=r=!e[3]},m(c,a){p(c,t,a),h(t,n),o||(f=b(t,"click",e[5]),o=!0)},p(e,n){8&n&&r!==(r=!e[3])&&(t.disabled=r)},d(e){e&&d(t),o=!1,f()}}}function H(e){let t,n,r,o,f;return{c(){t=c("button"),n=a("▶ Play"),this.h()},l(e){t=s(e,"BUTTON",{class:!0});var c=i(t);n=l(c,"▶ Play"),c.forEach(d),this.h()},h(){u(t,"class","play"),t.disabled=r=!e[3]},m(c,a){p(c,t,a),h(t,n),o||(f=b(t,"click",e[4]),o=!0)},p(e,n){8&n&&r!==(r=!e[3])&&(t.disabled=r)},d(e){e&&d(t),o=!1,f()}}}function J(e){let t,n,r,o,f;return{c(){t=c("button"),n=a("Remove"),this.h()},l(e){t=s(e,"BUTTON",{class:!0});var c=i(t);n=l(c,"Remove"),c.forEach(d),this.h()},h(){u(t,"class","remove_limit svelte-1gu81f9"),t.disabled=r=!e[3]},m(c,a){p(c,t,a),h(t,n),o||(f=b(t,"click",e[9]),o=!0)},p(e,n){8&n&&r!==(r=!e[3])&&(t.disabled=r)},d(e){e&&d(t),o=!1,f()}}}function Q(e){let t,n,f,v,y,D,N,T,E,M,_,w,k,A,B,O,S,U,x,K,P,V,I,j,R,C,W,F,L,q,z,Q,X,Y,Z,ee,te,ne,ce,ae,re=(e[1].limit||"")+"",se=(e[1].repeatCount||"")+"";function ie(e,t){return e[1].paused?H:G}let le=ie(e),oe=le(e),de=e[1].limit>0&&J(e);return{c(){t=c("div"),oe.c(),n=r(),f=c("button"),v=a("Vol ↓"),D=r(),N=c("button"),T=a("Vol ↑"),M=r(),_=c("div"),w=c("button"),k=a("Limit "),A=a(re),O=r(),de&&de.c(),S=r(),U=c("button"),x=a("→ Next"),P=r(),V=c("div"),I=c("button"),j=a("Shuffle"),C=r(),W=c("button"),F=a("Repeat "),L=a(se),z=r(),Q=c("button"),X=a("↞ RWD"),Z=r(),ee=c("button"),te=a("↠ FWD"),this.h()},l(e){t=s(e,"DIV",{class:!0});var c=i(t);oe.l(c),n=o(c),f=s(c,"BUTTON",{class:!0});var a=i(f);v=l(a,"Vol ↓"),a.forEach(d),D=o(c),N=s(c,"BUTTON",{class:!0});var r=i(N);T=l(r,"Vol ↑"),r.forEach(d),c.forEach(d),M=o(e),_=s(e,"DIV",{});var u=i(_);w=s(u,"BUTTON",{class:!0});var p=i(w);k=l(p,"Limit "),A=l(p,re),p.forEach(d),O=o(u),de&&de.l(u),S=o(u),U=s(u,"BUTTON",{class:!0});var h=i(U);x=l(h,"→ Next"),h.forEach(d),u.forEach(d),P=o(e),V=s(e,"DIV",{});var m=i(V);I=s(m,"BUTTON",{class:!0});var $=i(I);j=l($,"Shuffle"),$.forEach(d),C=o(m),W=s(m,"BUTTON",{class:!0});var y=i(W);F=l(y,"Repeat "),L=l(y,se),y.forEach(d),z=o(m),Q=s(m,"BUTTON",{class:!0});var b=i(Q);X=l(b,"↞ RWD"),b.forEach(d),Z=o(m),ee=s(m,"BUTTON",{class:!0});var g=i(ee);te=l(g,"↠ FWD"),g.forEach(d),m.forEach(d),this.h()},h(){u(f,"class","volume"),f.disabled=y=!e[3],u(N,"class","volume"),N.disabled=E=!e[3],u(t,"class","player_controls section"),u(w,"class","limit"),w.disabled=B=!e[3],u(U,"class","next"),U.disabled=K=!e[3],u(I,"class","shuffle"),I.disabled=R=!e[3],u(W,"class","repeat"),W.disabled=q=!e[3],u(Q,"class","backward"),Q.disabled=Y=!e[3],u(ee,"class","forward"),ee.disabled=ne=!e[3]},m(c,a){p(c,t,a),oe.m(t,null),h(t,n),h(t,f),h(f,v),h(t,D),h(t,N),h(N,T),p(c,M,a),p(c,_,a),h(_,w),h(w,k),h(w,A),h(_,O),de&&de.m(_,null),h(_,S),h(_,U),h(U,x),p(c,P,a),p(c,V,a),h(V,I),h(I,j),h(V,C),h(V,W),h(W,F),h(W,L),h(V,z),h(V,Q),h(Q,X),h(V,Z),h(V,ee),h(ee,te),ce||(ae=[b(f,"click",e[6]),b(N,"click",e[7]),b(w,"click",e[8]),b(U,"click",e[10]),b(I,"click",e[11]),b(W,"click",e[12]),b(Q,"click",e[13]),b(ee,"click",e[14])],ce=!0)},p(e,[c]){le===(le=ie(e))&&oe?oe.p(e,c):(oe.d(1),oe=le(e),oe&&(oe.c(),oe.m(t,n))),8&c&&y!==(y=!e[3])&&(f.disabled=y),8&c&&E!==(E=!e[3])&&(N.disabled=E),2&c&&re!==(re=(e[1].limit||"")+"")&&m(A,re),8&c&&B!==(B=!e[3])&&(w.disabled=B),e[1].limit>0?de?de.p(e,c):(de=J(e),de.c(),de.m(_,S)):de&&(de.d(1),de=null),8&c&&K!==(K=!e[3])&&(U.disabled=K),8&c&&R!==(R=!e[3])&&(I.disabled=R),2&c&&se!==(se=(e[1].repeatCount||"")+"")&&m(L,se),8&c&&q!==(q=!e[3])&&(W.disabled=q),8&c&&Y!==(Y=!e[3])&&(Q.disabled=Y),8&c&&ne!==(ne=!e[3])&&(ee.disabled=ne)},i:$,o:$,d(e){e&&d(t),oe.d(),e&&d(M),e&&d(_),de&&de.d(),e&&d(P),e&&d(V),ce=!1,g(ae)}}}function X(e,t,n){let c,a=$,r=()=>(a(),a=y(s,(e=>n(3,c=e))),s);e.$$.on_destroy.push((()=>a()));let{connected:s}=t;r();let{player:i}=t,{fnAction:l}=t;return e.$$set=e=>{"connected"in e&&r(n(0,s=e.connected)),"player"in e&&n(1,i=e.player),"fnAction"in e&&n(2,l=e.fnAction)},[s,i,l,c,()=>l("play"),()=>l("pause"),()=>l("volume_down"),()=>l("volume_up"),()=>l("limit"),()=>l("remove_limit"),()=>l("next"),()=>l("shuffle"),()=>l("repeat"),()=>l("backward"),()=>l("forward")]}class Y extends e{constructor(e){super(),t(this,e,X,Q,n,{connected:0,player:1,fnAction:2})}}function Z(e){let t,n;return t=new z({props:{connected:e[0],player:e[1],fnAction:e[2]}}),{c(){D(t.$$.fragment)},l(e){N(t.$$.fragment,e)},m(e,c){T(t,e,c),n=!0},p(e,n){const c={};1&n&&(c.connected=e[0]),2&n&&(c.player=e[1]),4&n&&(c.fnAction=e[2]),t.$set(c)},i(e){n||(E(t.$$.fragment,e),n=!0)},o(e){M(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function ee(e){let t,n,c,a=e[1]&&Z(e);return n=new Y({props:{connected:e[0],player:e[1]||{},fnAction:e[2]}}),{c(){a&&a.c(),t=r(),D(n.$$.fragment)},l(e){a&&a.l(e),t=o(e),N(n.$$.fragment,e)},m(e,r){a&&a.m(e,r),p(e,t,r),T(n,e,r),c=!0},p(e,[c]){e[1]?a?(a.p(e,c),2&c&&E(a,1)):(a=Z(e),a.c(),E(a,1),a.m(t.parentNode,t)):a&&(w(),M(a,1,1,(()=>{a=null})),k());const r={};1&c&&(r.connected=e[0]),2&c&&(r.player=e[1]||{}),4&c&&(r.fnAction=e[2]),n.$set(r)},i(e){c||(E(a),E(n.$$.fragment,e),c=!0)},o(e){M(a),M(n.$$.fragment,e),c=!1},d(e){a&&a.d(e),e&&d(t),_(n,e)}}}function te(e,t,n){let{connected:c}=t,{player:a}=t,{fnAction:r}=t;return e.$$set=e=>{"connected"in e&&n(0,c=e.connected),"player"in e&&n(1,a=e.player),"fnAction"in e&&n(2,r=e.fnAction)},[c,a,r]}class ne extends e{constructor(e){super(),t(this,e,te,ee,n,{connected:0,player:1,fnAction:2})}}function ce(e,t,n){const c=e.slice();return c[3]=t[n],c}function ae(e){let t,n;return{c(){t=c("span"),n=a("!"),this.h()},l(e){t=s(e,"SPAN",{class:!0});var c=i(t);n=l(c,"!"),c.forEach(d),this.h()},h(){u(t,"class","error svelte-rrjapp")},m(e,c){p(e,t,c),h(t,n)},d(e){e&&d(t)}}}function re(e){let t,n="music"==e[3].mediaType?"♫":"▶";return{c(){t=a(n)},l(e){t=l(e,n)},m(e,n){p(e,t,n)},p(e,c){1&c&&n!==(n="music"==e[3].mediaType?"♫":"▶")&&m(t,n)},d(e){e&&d(t)}}}function se(e){let t,n,v,$,y,g,D,N=e[3].deviceName+"",T=e[3].hasErrors&&ae(),E=e[3].playing&&re(e);return{c(){t=c("button"),T&&T.c(),n=r(),E&&E.c(),v=r(),$=a(N),y=r(),this.h()},l(e){t=s(e,"BUTTON",{class:!0});var c=i(t);T&&T.l(c),n=o(c),E&&E.l(c),v=o(c),$=l(c,N),y=o(c),c.forEach(d),this.h()},h(){u(t,"class","svelte-rrjapp"),f(t,"active",e[3].deviceKey==e[1])},m(c,a){p(c,t,a),T&&T.m(t,null),h(t,n),E&&E.m(t,null),h(t,v),h(t,$),h(t,y),g||(D=b(t,"click",(function(){B(e[2](e[3]))&&e[2](e[3]).apply(this,arguments)})),g=!0)},p(c,a){(e=c)[3].hasErrors?T||(T=ae(),T.c(),T.m(t,n)):T&&(T.d(1),T=null),e[3].playing?E?E.p(e,a):(E=re(e),E.c(),E.m(t,v)):E&&(E.d(1),E=null),1&a&&N!==(N=e[3].deviceName+"")&&m($,N),3&a&&f(t,"active",e[3].deviceKey==e[1])},d(e){e&&d(t),T&&T.d(),E&&E.d(),g=!1,D()}}}function ie(e){let t,n=e[0],a=[];for(let c=0;c<n.length;c+=1)a[c]=se(ce(e,n,c));return{c(){t=c("div");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=s(e,"DIV",{class:!0});var n=i(t);for(let t=0;t<a.length;t+=1)a[t].l(n);n.forEach(d),this.h()},h(){u(t,"class","nearby_devices svelte-rrjapp")},m(e,n){p(e,t,n);for(let c=0;c<a.length;c+=1)a[c].m(t,null)},p(e,[c]){if(7&c){let r;for(n=e[0],r=0;r<n.length;r+=1){const s=ce(e,n,r);a[r]?a[r].p(s,c):(a[r]=se(s),a[r].c(),a[r].m(t,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=n.length}},i:$,o:$,d(e){e&&d(t),A(a,e)}}}function le(e,t,n){let{nearbyDevices:c}=t,{activeDeviceKey:a}=t,{fnSwitchDevice:r}=t;return e.$$set=e=>{"nearbyDevices"in e&&n(0,c=e.nearbyDevices),"activeDeviceKey"in e&&n(1,a=e.activeDeviceKey),"fnSwitchDevice"in e&&n(2,r=e.fnSwitchDevice)},[c,a,r]}class oe extends e{constructor(e){super(),t(this,e,le,ie,n,{nearbyDevices:0,activeDeviceKey:1,fnSwitchDevice:2})}}function de(e){let t,n,a,l,f,m,v;return n=new K({props:{connected:e[5],deviceName:e[1]}}),l=new ne({props:{connected:e[5],player:e[2],fnAction:e[7]}}),m=new oe({props:{nearbyDevices:e[3],activeDeviceKey:e[4],fnSwitchDevice:e[6]}}),{c(){t=c("main"),D(n.$$.fragment),a=r(),D(l.$$.fragment),f=r(),D(m.$$.fragment),this.h()},l(e){t=s(e,"MAIN",{class:!0});var c=i(t);N(n.$$.fragment,c),a=o(c),N(l.$$.fragment,c),f=o(c),N(m.$$.fragment,c),c.forEach(d),this.h()},h(){u(t,"class","svelte-ing9ii")},m(e,c){p(e,t,c),T(n,t,null),h(t,a),T(l,t,null),h(t,f),T(m,t,null),v=!0},p(e,[t]){const c={};2&t&&(c.deviceName=e[1]),n.$set(c);const a={};4&t&&(a.player=e[2]),l.$set(a);const r={};8&t&&(r.nearbyDevices=e[3]),16&t&&(r.activeDeviceKey=e[4]),m.$set(r)},i(e){v||(E(n.$$.fragment,e),E(l.$$.fragment,e),E(m.$$.fragment,e),v=!0)},o(e){M(n.$$.fragment,e),M(l.$$.fragment,e),M(m.$$.fragment,e),v=!1},d(e){e&&d(t),_(n),_(l),_(m)}}}function ue(e,t,n){let c,a,r,s,i,l,o=$,d=()=>(o(),o=y(u,(e=>n(9,l=e))),u);e.$$.on_destroy.push((()=>o()));let{store:u}=t;d();const{connected:f}=u;return e.$$set=e=>{"store"in e&&d(n(0,u=e.store))},e.$$.update=()=>{512&e.$$.dirty&&n(8,c=l.device),512&e.$$.dirty&&n(1,a=l.optimisticDeviceName),512&e.$$.dirty&&n(2,r=l.player),512&e.$$.dirty&&n(3,s=l.nearbyDevices?l.nearbyDevices.filter((e=>e.hasGui)).sort(function(e,t="asc"){return function(n,c){if(!n.hasOwnProperty(e)||!c.hasOwnProperty(e))return 0;const a="string"==typeof n[e]?n[e].toUpperCase():n[e],r="string"==typeof c[e]?c[e].toUpperCase():c[e];let s=0;return a>r?s=1:a<r&&(s=-1),"desc"===t?-1*s:s}}("deviceName")):[]),512&e.$$.dirty&&n(4,i=l.activeDeviceKey)},[u,a,r,s,i,f,function(e){!function({store:e,device:t}){localStorage.setItem("current_device_key",t.deviceKey),e.switch(t)}({store:u,device:e})},function(e,t){!function({store:e,action:t,payload:n}){console.log(`Action: ${t}`),e.signal("action",{action:t,namespace:"player",payload:n})}({store:u,action:e,payload:t})},c,l]}const fe=localStorage.getItem("current_device_key");console.log(`connectToDeviceKey: ${fe}`);const pe=new O({port:7780,protocol:"dmt",lane:"gui",connectToDeviceKey:fe});pe.on("connect_to_device_key_failed",(()=>{console.log("connect_to_device_key_failed FAILED"),localStorage.removeItem("current_device_key")})),new class extends e{constructor(e){super(),t(this,e,ue,de,n,{store:0})}}({target:document.body,props:{store:pe}});
