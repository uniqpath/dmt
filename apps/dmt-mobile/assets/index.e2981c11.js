const js=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};js();function te(){}const Ur=t=>t;function $s(t,e){for(const n in e)t[n]=e[n];return t}function jr(t){return t()}function gi(){return Object.create(null)}function Xe(t){t.forEach(jr)}function Tn(t){return typeof t=="function"}function Ue(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let _n;function yi(t,e){return _n||(_n=document.createElement("a")),_n.href=e,t===_n.href}function Ks(t){return Object.keys(t).length===0}function nt(t,...e){if(t==null)return te;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Bs(t){let e;return nt(t,n=>e=n)(),e}function Je(t,e,n){t.$$.on_destroy.push(nt(e,n))}function $r(t,e,n,i){if(t){const r=Kr(t,e,n,i);return t[0](r)}}function Kr(t,e,n,i){return t[1]&&i?$s(n.ctx.slice(),t[1](i(e))):n.ctx}function Br(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],f=Math.max(e.dirty.length,r.length);for(let l=0;l<f;l+=1)s[l]=e.dirty[l]|r[l];return s}return e.dirty|r}return e.dirty}function zr(t,e,n,i,r,s){if(r){const f=Kr(e,n,i,s);t.p(f,r)}}function qr(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}const Fr=typeof window<"u";let Yr=Fr?()=>window.performance.now():()=>Date.now(),ri=Fr?t=>requestAnimationFrame(t):te;const Bt=new Set;function Hr(t){Bt.forEach(e=>{e.c(t)||(Bt.delete(e),e.f())}),Bt.size!==0&&ri(Hr)}function Wr(t){let e;return Bt.size===0&&ri(Hr),{promise:new Promise(n=>{Bt.add(e={c:t,f:n})}),abort(){Bt.delete(e)}}}function k(t,e){t.appendChild(e)}function Jr(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function zs(t){const e=O("style");return qs(Jr(t),e),e.sheet}function qs(t,e){k(t.head||t,e)}function E(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode.removeChild(t)}function qt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function O(t){return document.createElement(t)}function B(t){return document.createTextNode(t)}function L(){return B(" ")}function et(){return B("")}function oe(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Gr(t){return function(e){return e.preventDefault(),t.call(this,e)}}function wi(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function D(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Fs(t){return Array.from(t.childNodes)}function ce(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ki(t,e){t.value=e==null?"":e}function hn(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function G(t,e,n){t.classList[n?"add":"remove"](e)}function Ys(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}const vn=new Map;let gn=0;function Hs(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ws(t,e){const n={stylesheet:zs(e),rules:{}};return vn.set(t,n),n}function Zr(t,e,n,i,r,s,f,l=0){const c=16.666/i;let a=`{
`;for(let C=0;C<=1;C+=c){const x=e+(n-e)*s(C);a+=C*100+`%{${f(x,1-x)}}
`}const d=a+`100% {${f(n,1-n)}}
}`,_=`__svelte_${Hs(d)}_${l}`,m=Jr(t),{stylesheet:g,rules:w}=vn.get(m)||Ws(m,t);w[_]||(w[_]=!0,g.insertRule(`@keyframes ${_} ${d}`,g.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${_} ${i}ms linear ${r}ms 1 both`,gn+=1,_}function Gn(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),gn-=r,gn||Js())}function Js(){ri(()=>{gn||(vn.forEach(t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}}),vn.clear())})}let nn;function tn(t){nn=t}function Gs(){if(!nn)throw new Error("Function called outside component initialization");return nn}function Zs(t){Gs().$$.on_mount.push(t)}const Xt=[],xi=[],pn=[],Ai=[],Vs=Promise.resolve();let Zn=!1;function Qs(){Zn||(Zn=!0,Vs.then(Vr))}function at(t){pn.push(t)}const Bn=new Set;let mn=0;function Vr(){const t=nn;do{for(;mn<Xt.length;){const e=Xt[mn];mn++,tn(e),Xs(e.$$)}for(tn(null),Xt.length=0,mn=0;xi.length;)xi.pop()();for(let e=0;e<pn.length;e+=1){const n=pn[e];Bn.has(n)||(Bn.add(n),n())}pn.length=0}while(Xt.length);for(;Ai.length;)Ai.pop()();Zn=!1,Bn.clear(),tn(t)}function Xs(t){if(t.fragment!==null){t.update(),Xe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(at)}}let Qt;function Qr(){return Qt||(Qt=Promise.resolve(),Qt.then(()=>{Qt=null})),Qt}function yn(t,e,n){t.dispatchEvent(Ys(`${e?"intro":"outro"}${n}`))}const bn=new Set;let At;function He(){At={r:0,c:[],p:At}}function We(){At.r||Xe(At.c),At=At.p}function F(t,e){t&&t.i&&(bn.delete(t),t.i(e))}function Z(t,e,n,i){if(t&&t.o){if(bn.has(t))return;bn.add(t),At.c.push(()=>{bn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Xr={duration:0};function Dt(t,e,n){let i=e(t,n),r=!1,s,f,l=0;function c(){s&&Gn(t,s)}function a(){const{delay:_=0,duration:m=300,easing:g=Ur,tick:w=te,css:v}=i||Xr;v&&(s=Zr(t,0,1,m,_,g,v,l++)),w(0,1);const C=Yr()+_,x=C+m;f&&f.abort(),r=!0,at(()=>yn(t,!0,"start")),f=Wr(M=>{if(r){if(M>=x)return w(1,0),yn(t,!0,"end"),c(),r=!1;if(M>=C){const K=g((M-C)/m);w(K,1-K)}}return r})}let d=!1;return{start(){d||(d=!0,Gn(t),Tn(i)?(i=i(),Qr().then(a)):a())},invalidate(){d=!1},end(){r&&(c(),r=!1)}}}function ef(t,e,n){let i=e(t,n),r=!0,s;const f=At;f.r+=1;function l(){const{delay:c=0,duration:a=300,easing:d=Ur,tick:_=te,css:m}=i||Xr;m&&(s=Zr(t,1,0,a,c,d,m));const g=Yr()+c,w=g+a;at(()=>yn(t,!1,"start")),Wr(v=>{if(r){if(v>=w)return _(0,1),yn(t,!1,"end"),--f.r||Xe(f.c),!1;if(v>=g){const C=d((v-g)/a);_(1-C,C)}}return r})}return Tn(i)?Qr().then(()=>{i=i(),l()}):l(),{end(c){c&&i.tick&&i.tick(1,0),r&&(s&&Gn(t,s),r=!1)}}}function Se(t){t&&t.c()}function ke(t,e,n,i){const{fragment:r,on_mount:s,on_destroy:f,after_update:l}=t.$$;r&&r.m(e,n),i||at(()=>{const c=s.map(jr).filter(Tn);f?f.push(...c):Xe(c),t.$$.on_mount=[]}),l.forEach(at)}function xe(t,e){const n=t.$$;n.fragment!==null&&(Xe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tf(t,e){t.$$.dirty[0]===-1&&(Xt.push(t),Qs(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function je(t,e,n,i,r,s,f,l=[-1]){const c=nn;tn(t);const a=t.$$={fragment:null,ctx:null,props:s,update:te,not_equal:r,bound:gi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:gi(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};f&&f(a.root);let d=!1;if(a.ctx=n?n(t,e.props||{},(_,m,...g)=>{const w=g.length?g[0]:m;return a.ctx&&r(a.ctx[_],a.ctx[_]=w)&&(!a.skip_bound&&a.bound[_]&&a.bound[_](w),d&&tf(t,_)),m}):[],a.update(),d=!0,Xe(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const _=Fs(e.target);a.fragment&&a.fragment.l(_),_.forEach(S)}else a.fragment&&a.fragment.c();e.intro&&F(t.$$.fragment),ke(t,e.target,e.anchor,e.customElement),Vr()}tn(c)}class $e{$destroy(){xe(this,1),this.$destroy=te}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Ks(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ut=[];function _t(t,e=te){let n;const i=new Set;function r(l){if(Ue(t,l)&&(t=l,n)){const c=!Ut.length;for(const a of i)a[1](),Ut.push(a,t);if(c){for(let a=0;a<Ut.length;a+=2)Ut[a][0](Ut[a+1]);Ut.length=0}}}function s(l){r(l(t))}function f(l,c=te){const a=[l,c];return i.add(a),i.size===1&&(n=e(r)||te),l(t),()=>{i.delete(a),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:f}}function nf(t){const e=t-1;return e*e*e+1}function St(t,{delay:e=0,duration:n=400,easing:i=nf,x:r=0,y:s=0,opacity:f=0}={}){const l=getComputedStyle(t),c=+l.opacity,a=l.transform==="none"?"":l.transform,d=c*(1-f);return{delay:e,duration:n,easing:i,css:(_,m)=>`
			transform: ${a} translate(${(1-_)*r}px, ${(1-_)*s}px);
			opacity: ${c-d*m}`}}function rf(t){function e(i,...r){const s=i.subscribe(...r);return s.unsubscribe?()=>s.unsubscribe():s}function n(i){let r;return e(i,s=>r=s)(),r}return(i,r,s,f,l)=>{const{errors:c}=n(t),a=new Date,d=`${a.getHours()}:${`0${a.getMinutes()}`.slice(-2)}`;l&&l.stack?c.push({msg:i,stacktrace:l.stack,time:d}):c.push({msg:`"${i}" (No more info because of CORS, fix: 1) check for the same error on device where gui runs on :80... 2) if more possible errors from this source, then rethrow - see example in dmt-connect/browser/connect around JSON.parse(msg))`,corsProblem:!0,time:d}),t.set({errors:c})}}function sf(t,e="asc"){return function(i,r){if(!i.hasOwnProperty(t)||!r.hasOwnProperty(t))return 0;const s=typeof i[t]=="string"?i[t].toUpperCase():i[t],f=typeof r[t]=="string"?r[t].toUpperCase():r[t];let l=0;return s>f?l=1:s<f&&(l=-1),e==="desc"?l*-1:l}}function ff(t,e){localStorage.getItem(e)=="true"&&t.set(!0),localStorage.getItem(e)=="false"&&t.set(!1),t.subscribe(n=>{localStorage.setItem(e,n.toString())})}function Si(t){console.log(`${new Date().toLocaleString()} \u2192 ${t}`)}Si.write=Si;const es=_t(!0);ff(es,"show_all_nearby_devices");const ts=_t({errors:[]}),ns=_t(!1);function wn(t,{defaultSymbol:e="",showTimeLimitIndicator:n=!1}={}){return!t||!t.currentMedia||t.paused?e:n&&t.timeLimit>0?"\u23F1\uFE0F":t.currentMedia.mediaType=="video"?"\u25B6":"\u266B"}function of(t){let e;return{c(){e=B("disconnected")},m(n,i){E(n,e,i)},p:te,d(n){n&&S(e)}}}function lf(t){let e,n=wn(t[2])+"",i,r,s,f,l,c=t[4]==!1&&Ei();return{c(){e=O("span"),i=B(n),r=L(),s=O("h2"),f=B(t[1]),l=L(),c&&c.c(),D(e,"class","play_symbol svelte-5h63c7"),D(s,"class","svelte-5h63c7"),G(s,"disconnected",t[4]==!1)},m(a,d){E(a,e,d),k(e,i),E(a,r,d),E(a,s,d),k(s,f),k(s,l),c&&c.m(s,null)},p(a,d){d&4&&n!==(n=wn(a[2])+"")&&ce(i,n),d&2&&ce(f,a[1]),a[4]==!1?c||(c=Ei(),c.c(),c.m(s,null)):c&&(c.d(1),c=null),d&16&&G(s,"disconnected",a[4]==!1)},d(a){a&&S(e),a&&S(r),a&&S(s),c&&c.d()}}}function Ei(t){let e;return{c(){e=O("span"),D(e,"class","disconnected svelte-5h63c7")},m(n,i){E(n,e,i)},d(n){n&&S(e)}}}function Ci(t){let e,n,i,r=t[3].ip+"",s;return{c(){e=O("div"),n=O("span"),n.textContent="IP Address",i=L(),s=B(r),D(n,"class","svelte-5h63c7"),D(e,"class","device_stat svelte-5h63c7")},m(f,l){E(f,e,l),k(e,n),k(e,i),k(e,s)},p(f,l){l&8&&r!==(r=f[3].ip+"")&&ce(s,r)},d(f){f&&S(e)}}}function Ti(t){let e,n,i,r=t[3].cpuUsage+"",s,f;return{c(){var l,c,a;e=O("div"),n=O("span"),n.textContent="CPU Usage",i=L(),s=B(r),f=B("%"),D(n,"class","svelte-5h63c7"),D(e,"class","device_stat cpu_usage svelte-5h63c7"),G(e,"warn1",((l=t[3])==null?void 0:l.cpuUsage)>=50),G(e,"warn2",((c=t[3])==null?void 0:c.cpuUsage)>=70),G(e,"warn3",((a=t[3])==null?void 0:a.cpuUsage)>=80)},m(l,c){E(l,e,c),k(e,n),k(e,i),k(e,s),k(e,f)},p(l,c){var a,d,_;c&8&&r!==(r=l[3].cpuUsage+"")&&ce(s,r),c&8&&G(e,"warn1",((a=l[3])==null?void 0:a.cpuUsage)>=50),c&8&&G(e,"warn2",((d=l[3])==null?void 0:d.cpuUsage)>=70),c&8&&G(e,"warn3",((_=l[3])==null?void 0:_.cpuUsage)>=80)},d(l){l&&S(e)}}}function Oi(t){let e,n,i,r=t[3].cpuTemp+"",s,f;return{c(){e=O("div"),n=O("span"),n.textContent="CPU Temperature",i=L(),s=B(r),f=B("\xB0C"),D(n,"class","svelte-5h63c7"),D(e,"class","device_stat svelte-5h63c7")},m(l,c){E(l,e,c),k(e,n),k(e,i),k(e,s),k(e,f)},p(l,c){c&8&&r!==(r=l[3].cpuTemp+"")&&ce(s,r)},d(l){l&&S(e)}}}function Ni(t){var f,l;let e,n,i,r=(((f=t[3])==null?void 0:f.wifiAP)||((l=t[3])==null?void 0:l.apssid))+"",s;return{c(){e=O("div"),n=O("span"),n.textContent="Wifi",i=L(),s=B(r),D(n,"class","svelte-5h63c7"),D(e,"class","wifi_ap svelte-5h63c7")},m(c,a){E(c,e,a),k(e,n),k(e,i),k(e,s)},p(c,a){var d,_;a&8&&r!==(r=(((d=c[3])==null?void 0:d.wifiAP)||((_=c[3])==null?void 0:_.apssid))+"")&&ce(s,r)},d(c){c&&S(e)}}}function cf(t){var v,C,x,M,K;let e,n,i,r,s,f,l;function c(N,I){if(N[1])return lf;if(N[4]!=null)return of}let a=c(t),d=a&&a(t),_=((v=t[3])==null?void 0:v.ip)&&Ci(t),m=((C=t[3])==null?void 0:C.cpuUsage)&&Ti(t),g=((x=t[3])==null?void 0:x.cpuTemp)&&Oi(t),w=(((M=t[3])==null?void 0:M.wifiAP)||((K=t[3])==null?void 0:K.apssid))&&Ni(t);return{c(){e=O("div"),d&&d.c(),i=L(),_&&_.c(),r=L(),m&&m.c(),s=L(),g&&g.c(),f=L(),w&&w.c(),l=et(),D(e,"class","device_title svelte-5h63c7")},m(N,I){E(N,e,I),d&&d.m(e,null),E(N,i,I),_&&_.m(N,I),E(N,r,I),m&&m.m(N,I),E(N,s,I),g&&g.m(N,I),E(N,f,I),w&&w.m(N,I),E(N,l,I)},p(N,[I]){var W,ue,Y,J,Te;a===(a=c(N))&&d?d.p(N,I):(d&&d.d(1),d=a&&a(N),d&&(d.c(),d.m(e,null))),(W=N[3])!=null&&W.ip?_?_.p(N,I):(_=Ci(N),_.c(),_.m(r.parentNode,r)):_&&(_.d(1),_=null),(ue=N[3])!=null&&ue.cpuUsage?m?m.p(N,I):(m=Ti(N),m.c(),m.m(s.parentNode,s)):m&&(m.d(1),m=null),(Y=N[3])!=null&&Y.cpuTemp?g?g.p(N,I):(g=Oi(N),g.c(),g.m(f.parentNode,f)):g&&(g.d(1),g=null),((J=N[3])==null?void 0:J.wifiAP)||((Te=N[3])==null?void 0:Te.apssid)?w?w.p(N,I):(w=Ni(N),w.c(),w.m(l.parentNode,l)):w&&(w.d(1),w=null)},i(N){n||at(()=>{n=Dt(e,St,{}),n.start()})},o:te,d(N){N&&S(e),d&&d.d(),N&&S(i),_&&_.d(N),N&&S(r),m&&m.d(N),N&&S(s),g&&g.d(N),N&&S(f),w&&w.d(N),N&&S(l)}}}function af(t,e,n){let i,r,s=te,f=()=>(s(),s=nt(l,m=>n(4,r=m)),l);t.$$.on_destroy.push(()=>s());let{connected:l}=e;f();let{nearbyDevices:c}=e,{deviceName:a}=e,{device:d}=e,{player:_}=e;return t.$$set=m=>{"connected"in m&&f(n(0,l=m.connected)),"nearbyDevices"in m&&n(5,c=m.nearbyDevices),"deviceName"in m&&n(1,a=m.deviceName),"device"in m&&n(6,d=m.device),"player"in m&&n(2,_=m.player)},t.$$.update=()=>{t.$$.dirty&96&&n(3,i=c.find(m=>m.deviceKey==(d==null?void 0:d.deviceKey)))},[l,a,_,i,r,c,d]}class uf extends $e{constructor(e){super(),je(this,e,af,cf,Ue,{connected:0,nearbyDevices:5,deviceName:1,device:6,player:2})}}function zn(t,e=2){return Array(Math.max(e-String(t).length+1,0)).join(0)+t}function jt(t){t=Math.round(t);const e=Math.floor(t/3600),n=t%3600,i=Math.floor(n/60);return t=n%60,e?`${e}h ${zn(i)}min ${zn(t)}s`:`${i}:${zn(t)}`}function df(t){let e=jt(t[0].currentMedia.duration)+"",n;return{c(){n=B(e)},m(i,r){E(i,n,r)},p(i,r){r&1&&e!==(e=jt(i[0].currentMedia.duration)+"")&&ce(n,e)},d(i){i&&S(n)}}}function _f(t){let e=jt(Math.floor(t[0].timeposition))+"",n,i,r=jt(t[0].currentMedia.duration)+"",s,f,l,c=Math.round(t[0].percentposition)+"",a,d;return{c(){n=B(e),i=B(" / "),s=B(r),f=B(" \u2014 "),l=O("span"),a=B(c),d=B("%"),D(l,"class","svelte-b6jwnj")},m(_,m){E(_,n,m),E(_,i,m),E(_,s,m),E(_,f,m),E(_,l,m),k(l,a),k(l,d)},p(_,m){m&1&&e!==(e=jt(Math.floor(_[0].timeposition))+"")&&ce(n,e),m&1&&r!==(r=jt(_[0].currentMedia.duration)+"")&&ce(s,r),m&1&&c!==(c=Math.round(_[0].percentposition)+"")&&ce(a,c)},d(_){_&&S(n),_&&S(i),_&&S(s),_&&S(f),_&&S(l)}}}function hf(t){let e;return{c(){e=B("(radio)")},m(n,i){E(n,e,i)},p:te,d(n){n&&S(e)}}}function mf(t){let e;function n(s,f){if(s[0].isStream)return hf;if(s[0].timeposition)return _f;if(s[0].duration)return df}let i=n(t),r=i&&i(t);return{c(){e=O("section"),r&&r.c(),D(e,"class","progress svelte-b6jwnj"),G(e,"faded",t[0].paused)},m(s,f){E(s,e,f),r&&r.m(e,null)},p(s,[f]){i===(i=n(s))&&r?r.p(s,f):(r&&r.d(1),r=i&&i(s),r&&(r.c(),r.m(e,null))),f&1&&G(e,"faded",s[0].paused)},i:te,o:te,d(s){s&&S(e),r&&r.d()}}}function pf(t,e,n){let{player:i}=e;return t.$$set=r=>{"player"in r&&n(0,i=r.player)},[i]}class bf extends $e{constructor(e){super(),je(this,e,pf,mf,Ue,{player:0})}}function Di(t){let e,n,i,r;function s(c,a){if(c[2]&&c[6])return gf;if(c[6])return vf}let f=s(t),l=f&&f(t);return i=new bf({props:{player:t[0]}}),{c(){e=O("div"),l&&l.c(),n=L(),Se(i.$$.fragment),D(e,"class","wrapper svelte-18z3wq5")},m(c,a){E(c,e,a),l&&l.m(e,null),k(e,n),ke(i,e,null),r=!0},p(c,a){f===(f=s(c))&&l?l.p(c,a):(l&&l.d(1),l=f&&f(c),l&&(l.c(),F(l,1),l.m(e,n)));const d={};a&1&&(d.player=c[0]),i.$set(d)},i(c){r||(F(l),F(i.$$.fragment,c),r=!0)},o(c){Z(i.$$.fragment,c),r=!1},d(c){c&&S(e),l&&l.d(),xe(i)}}}function vf(t){let e,n;return{c(){e=O("section"),e.textContent="[ No media loaded ]",D(e,"class","no_media svelte-18z3wq5")},m(i,r){E(i,e,r)},p:te,i(i){n||at(()=>{n=Dt(e,St,{}),n.start()})},o:te,d(i){i&&S(e)}}}function gf(t){let e,n,i=wn(t[0],{showTimeLimitIndicator:!0})+"",r,s,f,l,c,a,d=t[3]&&Ri(t);return{c(){var _;e=O("section"),n=O("span"),r=B(i),s=L(),f=B(t[2]),l=L(),c=O("div"),d&&d.c(),D(n,"class","play_symbol svelte-18z3wq5"),D(c,"class","file_path svelte-18z3wq5"),D(e,"class","current_media svelte-18z3wq5"),G(e,"playing",!t[0].paused),G(e,"within_limit",!t[0].isStream&&t[0].limit),G(e,"error",t[5]==t[3]&&((_=t[4])==null?void 0:_.error))},m(_,m){E(_,e,m),k(e,n),k(n,r),k(e,s),k(e,f),k(e,l),k(e,c),d&&d.m(c,null)},p(_,m){var g;m&1&&i!==(i=wn(_[0],{showTimeLimitIndicator:!0})+"")&&ce(r,i),m&4&&ce(f,_[2]),_[3]?d?d.p(_,m):(d=Ri(_),d.c(),d.m(c,null)):d&&(d.d(1),d=null),m&1&&G(e,"playing",!_[0].paused),m&1&&G(e,"within_limit",!_[0].isStream&&_[0].limit),m&56&&G(e,"error",_[5]==_[3]&&((g=_[4])==null?void 0:g.error))},i(_){a||at(()=>{a=Dt(e,St,{}),a.start()})},o:te,d(_){_&&S(e),d&&d.d()}}}function Ri(t){let e=Pi(t[3])+"",n;return{c(){n=B(e)},m(i,r){E(i,n,r)},p(i,r){r&8&&e!==(e=Pi(i[3])+"")&&ce(n,e)},d(i){i&&S(n)}}}function yf(t){let e,n,i=t[0]&&Di(t);return{c(){i&&i.c(),e=et()},m(r,s){i&&i.m(r,s),E(r,e,s),n=!0},p(r,[s]){r[0]?i?(i.p(r,s),s&1&&F(i,1)):(i=Di(r),i.c(),F(i,1),i.m(e.parentNode,e)):i&&(He(),Z(i,1,1,()=>{i=null}),We())},i(r){n||(F(i),n=!0)},o(r){Z(i),n=!1},d(r){i&&i.d(r),r&&S(e)}}}function Pi(t){return t.replace("/root/DMTMountedMedia","")}function wf(t,e,n){let i,r=te,s=()=>(r(),r=nt(l,g=>n(6,i=g)),l);t.$$.on_destroy.push(()=>r());let{player:f}=e,{connected:l}=e;s();let{store:c}=e,{songTitle:a}=e,{songPath:d}=e,{playlistCurrentMedia:_}=e,{playlistSongPath:m}=e;return t.$$set=g=>{"player"in g&&n(0,f=g.player),"connected"in g&&s(n(1,l=g.connected)),"store"in g&&n(7,c=g.store),"songTitle"in g&&n(2,a=g.songTitle),"songPath"in g&&n(3,d=g.songPath),"playlistCurrentMedia"in g&&n(4,_=g.playlistCurrentMedia),"playlistSongPath"in g&&n(5,m=g.playlistSongPath)},[f,l,a,d,_,m,i,c]}class kf extends $e{constructor(e){super(),je(this,e,wf,yf,Ue,{player:0,connected:1,store:7,songTitle:2,songPath:3,playlistCurrentMedia:4,playlistSongPath:5})}}function Ii(t){let e;function n(s,f){return s[1].paused?Af:xf}let i=n(t),r=i(t);return{c(){r.c(),e=et()},m(s,f){r.m(s,f),E(s,e,f)},p(s,f){i===(i=n(s))&&r?r.p(s,f):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&S(e)}}}function xf(t){let e,n,i,r=(t[2]||"")+"",s,f,l,c;return{c(){e=O("button"),n=B("\u25CF Pause "),i=O("span"),s=B(r),D(i,"class","svelte-hr0u6m"),D(e,"class","pause svelte-hr0u6m"),e.disabled=f=!t[5]},m(a,d){E(a,e,d),k(e,n),k(e,i),k(i,s),l||(c=oe(e,"click",t[8]),l=!0)},p(a,d){d&4&&r!==(r=(a[2]||"")+"")&&ce(s,r),d&32&&f!==(f=!a[5])&&(e.disabled=f)},d(a){a&&S(e),l=!1,c()}}}function Af(t){let e,n,i,r=(t[2]||"")+"",s,f,l,c;return{c(){e=O("button"),n=B("\u25B6 Play "),i=O("span"),s=B(r),D(i,"class","svelte-hr0u6m"),D(e,"class","play svelte-hr0u6m"),e.disabled=f=!t[5]},m(a,d){E(a,e,d),k(e,n),k(e,i),k(i,s),l||(c=oe(e,"click",t[7]),l=!0)},p(a,d){d&4&&r!==(r=(a[2]||"")+"")&&ce(s,r),d&32&&f!==(f=!a[5])&&(e.disabled=f)},d(a){a&&S(e),l=!1,c()}}}function Mi(t){let e,n=t[1].volume+"",i;return{c(){e=O("div"),i=B(n),D(e,"class","volume_level svelte-hr0u6m"),G(e,"faded",t[1].paused)},m(r,s){E(r,e,s),k(e,i)},p(r,s){s&2&&n!==(n=r[1].volume+"")&&ce(i,n),s&2&&G(e,"faded",r[1].paused)},d(r){r&&S(e)}}}function Li(t){let e,n,i=t[1].isStream?"Close radio":"Stop",r,s,f,l;return{c(){e=O("button"),n=B("\u25A0 "),r=B(i),D(e,"class","stop svelte-hr0u6m"),e.disabled=s=!t[5],G(e,"radio",t[1].isStream)},m(c,a){E(c,e,a),k(e,n),k(e,r),f||(l=oe(e,"click",t[11]),f=!0)},p(c,a){a&2&&i!==(i=c[1].isStream?"Close radio":"Stop")&&ce(r,i),a&32&&s!==(s=!c[5])&&(e.disabled=s),a&2&&G(e,"radio",c[1].isStream)},d(c){c&&S(e),f=!1,l()}}}function Ui(t){let e,n,i,r,s,f,l,c,a,d,_=(t[1].repeatCount||"")+"",m,g,w,v;return{c(){e=O("button"),n=B("Shuffle"),r=L(),s=O("button"),f=B("Similar"),c=L(),a=O("button"),d=B("Repeat "),m=B(_),D(e,"class","shuffle svelte-hr0u6m"),e.disabled=i=!t[5],D(s,"class","similar svelte-hr0u6m"),s.disabled=l=!t[5],D(a,"class","repeat svelte-hr0u6m"),a.disabled=g=!t[5],G(a,"repeat_set",t[1].repeatCount>0)},m(C,x){E(C,e,x),k(e,n),E(C,r,x),E(C,s,x),k(s,f),E(C,c,x),E(C,a,x),k(a,d),k(a,m),w||(v=[oe(e,"click",t[12]),oe(s,"click",t[13]),oe(a,"click",t[14])],w=!0)},p(C,x){x&32&&i!==(i=!C[5])&&(e.disabled=i),x&32&&l!==(l=!C[5])&&(s.disabled=l),x&2&&_!==(_=(C[1].repeatCount||"")+"")&&ce(m,_),x&32&&g!==(g=!C[5])&&(a.disabled=g),x&2&&G(a,"repeat_set",C[1].repeatCount>0)},d(C){C&&S(e),C&&S(r),C&&S(s),C&&S(c),C&&S(a),w=!1,Xe(v)}}}function ji(t){let e,n,i,r,s,f,l,c,a;return{c(){e=O("button"),n=B("\xAB 20s"),r=L(),s=O("button"),f=B("20s \xBB"),D(e,"class","backward svelte-hr0u6m"),e.disabled=i=!t[5],D(s,"class","forward svelte-hr0u6m"),s.disabled=l=!t[5]},m(d,_){E(d,e,_),k(e,n),E(d,r,_),E(d,s,_),k(s,f),c||(a=[oe(e,"click",t[15]),oe(s,"click",t[16])],c=!0)},p(d,_){_&32&&i!==(i=!d[5])&&(e.disabled=i),_&32&&l!==(l=!d[5])&&(s.disabled=l)},d(d){d&&S(e),d&&S(r),d&&S(s),c=!1,Xe(a)}}}function $i(t){let e;function n(s,f){return s[1].isStream?Ef:Sf}let i=n(t),r=i(t);return{c(){r.c(),e=et()},m(s,f){r.m(s,f),E(s,e,f)},p(s,f){i===(i=n(s))&&r?r.p(s,f):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&S(e)}}}function Sf(t){let e,n,i,r,s,f,l=(t[1].limit>0||t[1].timeLimit>0)&&Ki(t),c=t[1].limit>0&&Bi(t);function a(m,g){return m[1].timeLimit>0?Tf:Cf}let d=a(t),_=d(t);return{c(){l&&l.c(),e=L(),c&&c.c(),n=L(),i=O("button"),_.c(),D(i,"class","limit svelte-hr0u6m"),i.disabled=r=!t[5],G(i,"limit_set",t[1].limit>0),G(i,"time_limit_set",t[1].timeLimit>0)},m(m,g){l&&l.m(m,g),E(m,e,g),c&&c.m(m,g),E(m,n,g),E(m,i,g),_.m(i,null),s||(f=oe(i,"click",t[6]),s=!0)},p(m,g){m[1].limit>0||m[1].timeLimit>0?l?l.p(m,g):(l=Ki(m),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),m[1].limit>0?c?c.p(m,g):(c=Bi(m),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null),d===(d=a(m))&&_?_.p(m,g):(_.d(1),_=d(m),_&&(_.c(),_.m(i,null))),g&32&&r!==(r=!m[5])&&(i.disabled=r),g&2&&G(i,"limit_set",m[1].limit>0),g&2&&G(i,"time_limit_set",m[1].timeLimit>0)},d(m){l&&l.d(m),m&&S(e),c&&c.d(m),m&&S(n),m&&S(i),_.d(),s=!1,f()}}}function Ef(t){let e,n,i,r,s,f=t[1].timeLimit>0&&zi(t);function l(d,_){return d[1].timeLimit>0?Nf:Of}let c=l(t),a=c(t);return{c(){f&&f.c(),e=L(),n=O("button"),a.c(),D(n,"class","limit svelte-hr0u6m"),n.disabled=i=!t[5],G(n,"time_limit_set",t[1].timeLimit>0)},m(d,_){f&&f.m(d,_),E(d,e,_),E(d,n,_),a.m(n,null),r||(s=oe(n,"click",t[6]),r=!0)},p(d,_){d[1].timeLimit>0?f?f.p(d,_):(f=zi(d),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null),c===(c=l(d))&&a?a.p(d,_):(a.d(1),a=c(d),a&&(a.c(),a.m(n,null))),_&32&&i!==(i=!d[5])&&(n.disabled=i),_&2&&G(n,"time_limit_set",d[1].timeLimit>0)},d(d){f&&f.d(d),d&&S(e),d&&S(n),a.d(),r=!1,s()}}}function Ki(t){let e,n,i,r,s;return{c(){e=O("button"),n=B("\u{1F5D1}\uFE0F Cancel"),D(e,"class","remove_limit svelte-hr0u6m"),e.disabled=i=!t[5],G(e,"remove_time_limit",t[1].timeLimit>0)},m(f,l){E(f,e,l),k(e,n),r||(s=oe(e,"click",t[18]),r=!0)},p(f,l){l&32&&i!==(i=!f[5])&&(e.disabled=i),l&2&&G(e,"remove_time_limit",f[1].timeLimit>0)},d(f){f&&S(e),r=!1,s()}}}function Bi(t){let e,n,i,r,s;return{c(){e=O("button"),n=B("\u23F1\uFE0F Limit"),D(e,"class","set_time_limit svelte-hr0u6m"),e.disabled=i=!t[5]},m(f,l){E(f,e,l),k(e,n),r||(s=oe(e,"click",t[19]),r=!0)},p(f,l){l&32&&i!==(i=!f[5])&&(e.disabled=i)},d(f){f&&S(e),r=!1,s()}}}function Cf(t){let e,n=(t[1].limit||"")+"",i;return{c(){e=B("Limit "),i=B(n)},m(r,s){E(r,e,s),E(r,i,s)},p(r,s){s&2&&n!==(n=(r[1].limit||"")+"")&&ce(i,n)},d(r){r&&S(e),r&&S(i)}}}function Tf(t){let e,n,i=kn(t[1])+"",r;return{c(){e=O("span"),n=B("\u23F1\uFE0F "),r=B(i)},m(s,f){E(s,e,f),k(e,n),k(e,r)},p(s,f){f&2&&i!==(i=kn(s[1])+"")&&ce(r,i)},d(s){s&&S(e)}}}function zi(t){let e,n,i,r,s;return{c(){e=O("button"),n=B("\u{1F5D1}\uFE0F Cancel"),D(e,"class","remove_limit svelte-hr0u6m"),e.disabled=i=!t[5],G(e,"remove_time_limit",t[1].timeLimit>0)},m(f,l){E(f,e,l),k(e,n),r||(s=oe(e,"click",t[17]),r=!0)},p(f,l){l&32&&i!==(i=!f[5])&&(e.disabled=i),l&2&&G(e,"remove_time_limit",f[1].timeLimit>0)},d(f){f&&S(e),r=!1,s()}}}function Of(t){let e;return{c(){e=O("span"),e.textContent="\u23F1\uFE0F Limit"},m(n,i){E(n,e,i)},p:te,d(n){n&&S(e)}}}function Nf(t){let e,n,i=kn(t[1])+"",r;return{c(){e=O("span"),n=B("\u23F1\uFE0F "),r=B(i)},m(s,f){E(s,e,f),k(e,n),k(e,r)},p(s,f){f&2&&i!==(i=kn(s[1])+"")&&ce(r,i)},d(s){s&&S(e)}}}function Df(t){let e,n,i,r,s,f,l,c,a,d,_,m,g,w,v,C,x,M,K=t[3]&&Ii(t),N=t[5]&&t[1].volume!=null&&Mi(t),I=t[3]&&Li(t),W=!t[1].isStream&&t[3]&&Ui(t),ue=!t[1].isStream&&t[3]&&ji(t),Y=t[3]&&$i(t);return{c(){e=O("section"),K&&K.c(),n=L(),i=O("button"),r=B("Vol \u2193"),f=L(),l=O("button"),c=B("Vol \u2191"),d=L(),N&&N.c(),_=L(),m=O("section"),I&&I.c(),g=L(),W&&W.c(),w=L(),v=O("section"),ue&&ue.c(),C=L(),Y&&Y.c(),D(i,"class","volume svelte-hr0u6m"),i.disabled=s=!t[5],D(l,"class","volume svelte-hr0u6m"),l.disabled=a=!t[5],D(e,"class","main svelte-hr0u6m"),D(m,"class","svelte-hr0u6m"),D(v,"class","svelte-hr0u6m")},m(J,Te){E(J,e,Te),K&&K.m(e,null),k(e,n),k(e,i),k(i,r),k(e,f),k(e,l),k(l,c),k(e,d),N&&N.m(e,null),E(J,_,Te),E(J,m,Te),I&&I.m(m,null),k(m,g),W&&W.m(m,null),E(J,w,Te),E(J,v,Te),ue&&ue.m(v,null),k(v,C),Y&&Y.m(v,null),x||(M=[oe(i,"click",t[9]),oe(l,"click",t[10])],x=!0)},p(J,[Te]){J[3]?K?K.p(J,Te):(K=Ii(J),K.c(),K.m(e,n)):K&&(K.d(1),K=null),Te&32&&s!==(s=!J[5])&&(i.disabled=s),Te&32&&a!==(a=!J[5])&&(l.disabled=a),J[5]&&J[1].volume!=null?N?N.p(J,Te):(N=Mi(J),N.c(),N.m(e,null)):N&&(N.d(1),N=null),J[3]?I?I.p(J,Te):(I=Li(J),I.c(),I.m(m,g)):I&&(I.d(1),I=null),!J[1].isStream&&J[3]?W?W.p(J,Te):(W=Ui(J),W.c(),W.m(m,null)):W&&(W.d(1),W=null),!J[1].isStream&&J[3]?ue?ue.p(J,Te):(ue=ji(J),ue.c(),ue.m(v,C)):ue&&(ue.d(1),ue=null),J[3]?Y?Y.p(J,Te):(Y=$i(J),Y.c(),Y.m(v,null)):Y&&(Y.d(1),Y=null)},i:te,o:te,d(J){J&&S(e),K&&K.d(),N&&N.d(),J&&S(_),J&&S(m),I&&I.d(),W&&W.d(),J&&S(w),J&&S(v),ue&&ue.d(),Y&&Y.d(),x=!1,Xe(M)}}}function kn(t){return t.timeLimit>2?`${Math.round(t.timeLimit)} min`:`${Math.round(t.timeLimit*60)} s`}function Rf(t,e,n){let i,r=te,s=()=>(r(),r=nt(f,J=>n(5,i=J)),f);t.$$.on_destroy.push(()=>r());let{connected:f}=e;s();let{player:l}=e,{deviceName:c}=e,{songTitle:a}=e,{fnAction:d}=e;function _(){l.isStream||l.timeLimit>0?d("time_limit"):d("limit")}const m=()=>d("play"),g=()=>d("pause"),w=()=>d("volume_down"),v=()=>d("volume_up"),C=()=>d("stop"),x=()=>d("shuffle"),M=()=>d("similar"),K=()=>d("repeat"),N=()=>d("backward"),I=()=>d("forward"),W=()=>d("remove_time_limit"),ue=()=>d("remove_limit"),Y=()=>d("time_limit");return t.$$set=J=>{"connected"in J&&s(n(0,f=J.connected)),"player"in J&&n(1,l=J.player),"deviceName"in J&&n(2,c=J.deviceName),"songTitle"in J&&n(3,a=J.songTitle),"fnAction"in J&&n(4,d=J.fnAction)},[f,l,c,a,d,i,_,m,g,w,v,C,x,M,K,N,I,W,ue,Y]}class Pf extends $e{constructor(e){super(),je(this,e,Rf,Df,Ue,{connected:0,player:1,deviceName:2,songTitle:3,fnAction:4})}}const xn=_t(),wt=_t();function is(){xn.set(""),wt.set(null)}const en=_t();function rs(){en.set(null)}const If=""+new URL("close.28a6104f.png",import.meta.url).href,Mf=""+new URL("magnifying_glass.a4a7aab7.svg",import.meta.url).href;function qi(t){let e,n,i,r,s,f;return{c(){e=O("button"),n=B("\u25BC SET NEXT"),e.disabled=i=!t[2],D(e,"class","svelte-11smw5j")},m(l,c){E(l,e,c),k(e,n),s||(f=oe(e,"click",Gr(t[5])),s=!0)},p(l,c){c&4&&i!==(i=!l[2])&&(e.disabled=i)},i(l){r||at(()=>{r=Dt(e,St,{}),r.start()})},o:te,d(l){l&&S(e),s=!1,f()}}}function Lf(t){var C,x;let e,n,i,r,s,f,l,c,a,d,_,m=((C=t[1])==null?void 0:C.trim())&&((x=t[3])==null?void 0:x.length),g,w,v=m&&qi(t);return{c(){var M;e=O("form"),n=O("div"),i=O("input"),s=L(),f=O("img"),c=L(),a=O("img"),_=L(),v&&v.c(),D(i,"id","search"),D(i,"placeholder","Playlist Search"),D(i,"type","text"),i.disabled=r=!t[2],D(i,"class","svelte-11smw5j"),D(f,"class","magnifying_glass svelte-11smw5j"),yi(f.src,l=Mf)||D(f,"src",l),D(a,"class","clear_search svelte-11smw5j"),yi(a.src,d=If)||D(a,"src",d),G(a,"invisible",!((M=t[1])!=null&&M.trim())),D(n,"class","input_wrapper svelte-11smw5j"),D(e,"class","svelte-11smw5j")},m(M,K){E(M,e,K),k(e,n),k(n,i),ki(i,t[1]),k(n,s),k(n,f),k(n,c),k(n,a),k(e,_),v&&v.m(e,null),g||(w=[oe(i,"input",t[8]),oe(i,"keyup",t[4]),oe(a,"click",is)],g=!0)},p(M,[K]){var N,I,W;K&4&&r!==(r=!M[2])&&(i.disabled=r),K&2&&i.value!==M[1]&&ki(i,M[1]),K&2&&G(a,"invisible",!((N=M[1])!=null&&N.trim())),K&10&&(m=((I=M[1])==null?void 0:I.trim())&&((W=M[3])==null?void 0:W.length)),m?v?(v.p(M,K),K&10&&F(v,1)):(v=qi(M),v.c(),F(v,1),v.m(e,null)):v&&(v.d(1),v=null)},i(M){F(v)},o:te,d(M){M&&S(e),v&&v.d(),g=!1,Xe(w)}}}function Uf(t,e,n){let i,r,s=te,f=()=>(s(),s=nt(c,x=>n(2,r=x)),c),l;Je(t,xn,x=>n(1,i=x)),Je(t,wt,x=>n(3,l=x)),t.$$.on_destroy.push(()=>s());let{connected:c}=e;f();let{store:a}=e,{fnAction:d}=e,_;function m(x){a.remoteObject("player").call("playlistSearch",{query:i}).then(M=>{M?x==_&&wt.set(M):wt.set(null)}).catch(console.log)}let g;function w(){rs(),clearTimeout(g),i!=null&&i.trim()?(_=Math.random(),g=setTimeout(()=>{m(_)},300)):(_=null,wt.set(null))}function v(){a.remoteObject("player").call("bump",{query:i}).then(()=>{wt.set(null)}).catch(console.log)}function C(){i=this.value,xn.set(i)}return t.$$set=x=>{"connected"in x&&f(n(0,c=x.connected)),"store"in x&&n(6,a=x.store),"fnAction"in x&&n(7,d=x.fnAction)},[c,i,r,l,w,v,a,d,C]}class jf extends $e{constructor(e){super(),je(this,e,Uf,Lf,Ue,{connected:0,store:6,fnAction:7})}}function $f(t){let e,n,i,r,s,f;return{c(){e=O("div"),n=O("button"),n.textContent="Play",i=L(),r=O("button"),r.textContent="Bump",D(n,"class","svelte-27xey9"),D(r,"class","svelte-27xey9"),D(e,"class","controls svelte-27xey9")},m(l,c){E(l,e,c),k(e,n),k(e,i),k(e,r),s||(f=[oe(n,"click",wi(t[4])),oe(r,"click",wi(t[5]))],s=!0)},p:te,i:te,o:te,d(l){l&&S(e),s=!1,Xe(f)}}}function Kf(t,e,n){let{fnAction:i}=e,{entry:r}=e;function s(a){window.scrollTo({top:0,behavior:"smooth"}),is(),i("next",{songId:a})}function f(a){i("bump",{args:a})}const l=()=>{s(r.id)},c=()=>{f(r.id)};return t.$$set=a=>{"fnAction"in a&&n(3,i=a.fnAction),"entry"in a&&n(0,r=a.entry)},[r,s,f,i,l,c]}class Bf extends $e{constructor(e){super(),je(this,e,Kf,$f,Ue,{fnAction:3,entry:0})}}function Fi(t){let e,n,i=t[0].metadata.duration+"",r,s;return{c(){e=O("span"),n=B("["),r=B(i),s=B("]"),D(e,"class","duration svelte-1q3qkhq")},m(f,l){E(f,e,l),k(e,n),k(e,r),k(e,s)},p(f,l){l&1&&i!==(i=f[0].metadata.duration+"")&&ce(r,i)},d(f){f&&S(e)}}}function zf(t){var M,K;let e,n,i,r=t[0].title+"",s,f,l,c=Yi(t[0].path)+"",a,d,_,m,g,w,v,C,x=((K=(M=t[0])==null?void 0:M.metadata)==null?void 0:K.duration)&&Fi(t);return m=new Bf({props:{entry:t[0],fnAction:t[1]}}),{c(){e=O("div"),n=O("div"),x&&x.c(),i=L(),s=B(r),f=L(),l=O("div"),a=B(c),d=L(),_=O("div"),Se(m.$$.fragment),D(l,"class","file_path svelte-1q3qkhq"),D(_,"class","controls svelte-1q3qkhq"),D(n,"class","entry svelte-1q3qkhq"),G(n,"selected",t[0].id==t[3]),G(n,"just_bumped",!t[2]&&t[0].justBumped),G(n,"within_limit",!t[2]&&t[0].withinLimit),G(n,"is_search_result",t[2]),G(n,"error",t[0].error),D(e,"class","entry_wrapper svelte-1q3qkhq")},m(N,I){E(N,e,I),k(e,n),x&&x.m(n,null),k(n,i),k(n,s),k(n,f),k(n,l),k(l,a),k(n,d),k(n,_),ke(m,_,null),w=!0,v||(C=oe(n,"click",t[5]),v=!0)},p(N,[I]){var ue,Y;(Y=(ue=N[0])==null?void 0:ue.metadata)!=null&&Y.duration?x?x.p(N,I):(x=Fi(N),x.c(),x.m(n,i)):x&&(x.d(1),x=null),(!w||I&1)&&r!==(r=N[0].title+"")&&ce(s,r),(!w||I&1)&&c!==(c=Yi(N[0].path)+"")&&ce(a,c);const W={};I&1&&(W.entry=N[0]),I&2&&(W.fnAction=N[1]),m.$set(W),I&9&&G(n,"selected",N[0].id==N[3]),I&5&&G(n,"just_bumped",!N[2]&&N[0].justBumped),I&5&&G(n,"within_limit",!N[2]&&N[0].withinLimit),I&4&&G(n,"is_search_result",N[2]),I&1&&G(n,"error",N[0].error)},i(N){w||(F(m.$$.fragment,N),g||at(()=>{g=Dt(n,St,{}),g.start()}),w=!0)},o(N){Z(m.$$.fragment,N),w=!1},d(N){N&&S(e),x&&x.d(),xe(m),v=!1,C()}}}function Yi(t){return t.replace("/root/DMTMountedMedia","")}function qf(t,e,n){let i;Je(t,en,a=>n(3,i=a));let{entry:r}=e,{fnAction:s}=e,{isSearchResult:f}=e;function l(a){a==Bs(en)?en.set(null):en.set(a)}const c=()=>{l(r.id)};return t.$$set=a=>{"entry"in a&&n(0,r=a.entry),"fnAction"in a&&n(1,s=a.fnAction),"isSearchResult"in a&&n(2,f=a.isSearchResult)},[r,s,f,i,l,c]}class ss extends $e{constructor(e){super(),je(this,e,qf,zf,Ue,{entry:0,fnAction:1,isSearchResult:2})}}function Hi(t,e,n){const i=t.slice();return i[7]=e[n],i}function Wi(t){let e,n,i,r;const s=[Yf,Ff],f=[];function l(c,a){return c[2].length?0:1}return e=l(t),n=f[e]=s[e](t),{c(){n.c(),i=et()},m(c,a){f[e].m(c,a),E(c,i,a),r=!0},p(c,a){let d=e;e=l(c),e===d?f[e].p(c,a):(He(),Z(f[d],1,1,()=>{f[d]=null}),We(),n=f[e],n?n.p(c,a):(n=f[e]=s[e](c),n.c()),F(n,1),n.m(i.parentNode,i))},i(c){r||(F(n),r=!0)},o(c){Z(n),r=!1},d(c){f[e].d(c),c&&S(i)}}}function Ff(t){let e,n;return{c(){e=O("h3"),e.textContent="[ No matches ]",D(e,"class","no_matches svelte-11vb31n")},m(i,r){E(i,e,r)},p:te,i(i){n||at(()=>{n=Dt(e,St,{}),n.start()})},o:te,d(i){i&&S(e)}}}function Yf(t){let e,n,i,r,s,f,l;function c(v,C){return v[2].length>xt?Wf:Hf}let a=c(t),d=a(t),_=t[2].slice(0,xt),m=[];for(let v=0;v<_.length;v+=1)m[v]=Ji(Hi(t,_,v));const g=v=>Z(m[v],1,1,()=>{m[v]=null});let w=t[2].length>xt&&Gi(t);return{c(){e=O("h3"),d.c(),n=L();for(let v=0;v<m.length;v+=1)m[v].c();i=L(),r=O("div"),w&&w.c(),s=L(),f=O("span"),f.textContent="\u{1F4A1} Use comma (,) to separate multiple additive search terms.",D(e,"class","svelte-11vb31n"),D(f,"class","deemph svelte-11vb31n"),D(r,"class","result_count svelte-11vb31n")},m(v,C){E(v,e,C),d.m(e,null),E(v,n,C);for(let x=0;x<m.length;x+=1)m[x].m(v,C);E(v,i,C),E(v,r,C),w&&w.m(r,null),k(r,s),k(r,f),l=!0},p(v,C){if(a===(a=c(v))&&d?d.p(v,C):(d.d(1),d=a(v),d&&(d.c(),d.m(e,null))),C&6){_=v[2].slice(0,xt);let x;for(x=0;x<_.length;x+=1){const M=Hi(v,_,x);m[x]?(m[x].p(M,C),F(m[x],1)):(m[x]=Ji(M),m[x].c(),F(m[x],1),m[x].m(i.parentNode,i))}for(He(),x=_.length;x<m.length;x+=1)g(x);We()}v[2].length>xt?w?w.p(v,C):(w=Gi(v),w.c(),w.m(r,s)):w&&(w.d(1),w=null)},i(v){if(!l){for(let C=0;C<_.length;C+=1)F(m[C]);l=!0}},o(v){m=m.filter(Boolean);for(let C=0;C<m.length;C+=1)Z(m[C]);l=!1},d(v){v&&S(e),d.d(),v&&S(n),qt(m,v),v&&S(i),v&&S(r),w&&w.d()}}}function Hf(t){let e=t[2].length+"",n,i,r=t[2].length==1?"match":"matches",s;return{c(){n=B(e),i=L(),s=B(r)},m(f,l){E(f,n,l),E(f,i,l),E(f,s,l)},p(f,l){l&4&&e!==(e=f[2].length+"")&&ce(n,e),l&4&&r!==(r=f[2].length==1?"match":"matches")&&ce(s,r)},d(f){f&&S(n),f&&S(i),f&&S(s)}}}function Wf(t){let e,n,i;return{c(){e=B("First "),n=B(xt),i=B(" matches")},m(r,s){E(r,e,s),E(r,n,s),E(r,i,s)},p:te,d(r){r&&S(e),r&&S(n),r&&S(i)}}}function Ji(t){let e,n;return e=new ss({props:{entry:t[7],fnAction:t[1],isSearchResult:"true"}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p(i,r){const s={};r&4&&(s.entry=i[7]),r&2&&(s.fnAction=i[1]),e.$set(s)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function Gi(t){let e,n,i=t[2].length-xt+"",r,s;return{c(){e=O("div"),n=B("\u2026 there are "),r=B(i),s=B(" more matches")},m(f,l){E(f,e,l),k(e,n),k(e,r),k(e,s)},p(f,l){l&4&&i!==(i=f[2].length-xt+"")&&ce(r,i)},d(f){f&&S(e)}}}function Jf(t){let e,n,i=t[2]&&Wi(t);return{c(){i&&i.c(),e=et()},m(r,s){i&&i.m(r,s),E(r,e,s),n=!0},p(r,[s]){r[2]?i?(i.p(r,s),s&4&&F(i,1)):(i=Wi(r),i.c(),F(i,1),i.m(e.parentNode,e)):i&&(He(),Z(i,1,1,()=>{i=null}),We())},i(r){n||(F(i),n=!0)},o(r){Z(i),n=!1},d(r){i&&i.d(r),r&&S(e)}}}const xt=20;function Gf(t,e,n){let i,r=te,s=()=>(r(),r=nt(l,d=>n(4,i=d)),l),f;Je(t,wt,d=>n(2,f=d)),t.$$.on_destroy.push(()=>r());let{store:l}=e;s();let{connected:c}=e,{fnAction:a}=e;return t.$$set=d=>{"store"in d&&s(n(0,l=d.store)),"connected"in d&&n(3,c=d.connected),"fnAction"in d&&n(1,a=d.fnAction)},t.$$.update=()=>{t.$$.dirty&16&&i.playlist,t.$$.dirty&16&&i.playlistMetadata},[l,a,f,c,i]}class Zf extends $e{constructor(e){super(),je(this,e,Gf,Jf,Ue,{store:0,connected:3,fnAction:1})}}function Zi(t){let e,n;function i(f,l){if(l&2&&(e=null),e==null&&(e=!!["balkon","dnevna","spalnica"].includes(f[1])),e)return Qf;if(f[1]=="televizija"||f[1]=="tv-ap2")return Vf}let r=i(t,-1),s=r&&r(t);return{c(){s&&s.c(),n=et()},m(f,l){s&&s.m(f,l),E(f,n,l)},p(f,l){r===(r=i(f,l))&&s?s.p(f,l):(s&&s.d(1),s=r&&r(f),s&&(s.c(),s.m(n.parentNode,n)))},d(f){s&&s.d(f),f&&S(n)}}}function Vf(t){let e,n,i,r,s,f,l,c,a,d,_,m,g,w,v,C,x,M,K,N=t[1]=="televizija"&&Vi(t);return{c(){e=O("div"),n=O("button"),n.textContent="Celove\u010Derne risanke",i=L(),r=O("button"),r.textContent="Heidi",s=L(),f=O("button"),f.textContent="Kingdom Force",l=L(),c=O("button"),c.textContent="Rusty Rivets",a=L(),d=O("button"),d.textContent="Top Wing",_=L(),m=O("button"),m.textContent="Blaze in megakolesniki",g=L(),w=O("button"),w.textContent="Simsala Grim",v=L(),C=O("button"),C.textContent="Medvedek Uhec",x=L(),N&&N.c(),D(n,"class","svelte-84hcn8"),D(r,"class","svelte-84hcn8"),D(f,"class","svelte-84hcn8"),D(c,"class","svelte-84hcn8"),D(d,"class","svelte-84hcn8"),D(m,"class","svelte-84hcn8"),D(w,"class","svelte-84hcn8"),D(C,"class","svelte-84hcn8"),D(e,"class","sublist svelte-84hcn8")},m(I,W){E(I,e,W),k(e,n),k(e,i),k(e,r),k(e,s),k(e,f),k(e,l),k(e,c),k(e,a),k(e,d),k(e,_),k(e,m),k(e,g),k(e,w),k(e,v),k(e,C),k(e,x),N&&N.m(e,null),M||(K=[oe(n,"click",t[10]),oe(r,"click",t[11]),oe(f,"click",t[12]),oe(c,"click",t[13]),oe(d,"click",t[14]),oe(m,"click",t[15]),oe(w,"click",t[16]),oe(C,"click",t[17])],M=!0)},p(I,W){I[1]=="televizija"?N?N.p(I,W):(N=Vi(I),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},d(I){I&&S(e),N&&N.d(),M=!1,Xe(K)}}}function Qf(t){let e,n,i,r,s,f,l,c,a,d;return{c(){e=O("div"),n=O("button"),n.textContent="Andreja",i=L(),r=O("button"),r.textContent="David",s=L(),f=O("button"),f.textContent="Irma",l=L(),c=O("button"),c.textContent="Otroci",D(n,"class","svelte-84hcn8"),D(r,"class","svelte-84hcn8"),D(f,"class","svelte-84hcn8"),D(c,"class","svelte-84hcn8"),D(e,"class","sublist svelte-84hcn8")},m(_,m){E(_,e,m),k(e,n),k(e,i),k(e,r),k(e,s),k(e,f),k(e,l),k(e,c),a||(d=[oe(n,"click",t[6]),oe(r,"click",t[7]),oe(f,"click",t[8]),oe(c,"click",t[9])],a=!0)},p:te,d(_){_&&S(e),a=!1,Xe(d)}}}function Vi(t){let e,n,i,r,s,f,l,c,a,d,_,m,g,w,v,C,x;return{c(){e=O("button"),e.textContent="Wolfoo",n=L(),i=O("button"),i.textContent="BabyZoo",r=L(),s=O("button"),s.textContent="PearVlogs",f=L(),l=O("button"),l.textContent="Booba",c=L(),a=O("button"),a.textContent="Simsala",d=L(),_=O("button"),_.textContent="Mickey Mouse",m=L(),g=O("button"),g.textContent="Looloo",w=L(),v=O("button"),v.textContent="Sunny Bunnies",D(e,"class","svelte-84hcn8"),D(i,"class","svelte-84hcn8"),D(s,"class","svelte-84hcn8"),D(l,"class","svelte-84hcn8"),D(a,"class","svelte-84hcn8"),D(_,"class","svelte-84hcn8"),D(g,"class","svelte-84hcn8"),D(v,"class","svelte-84hcn8")},m(M,K){E(M,e,K),E(M,n,K),E(M,i,K),E(M,r,K),E(M,s,K),E(M,f,K),E(M,l,K),E(M,c,K),E(M,a,K),E(M,d,K),E(M,_,K),E(M,m,K),E(M,g,K),E(M,w,K),E(M,v,K),C||(x=[oe(e,"click",t[18]),oe(i,"click",t[19]),oe(s,"click",t[20]),oe(l,"click",t[21]),oe(a,"click",t[22]),oe(_,"click",t[23]),oe(g,"click",t[24]),oe(v,"click",t[25])],C=!0)},p:te,d(M){M&&S(e),M&&S(n),M&&S(i),M&&S(r),M&&S(s),M&&S(f),M&&S(l),M&&S(c),M&&S(a),M&&S(d),M&&S(_),M&&S(m),M&&S(g),M&&S(w),M&&S(v),C=!1,Xe(x)}}}function Xf(t){let e,n=t[2]&&t[3]&&Zi(t);return{c(){n&&n.c(),e=et()},m(i,r){n&&n.m(i,r),E(i,e,r)},p(i,[r]){i[2]&&i[3]?n?n.p(i,r):(n=Zi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(i){n&&n.d(i),i&&S(e)}}}function eo(t,e,n){let i,r,s=te,f=()=>(s(),s=nt(c,Ie=>n(3,r=Ie)),c);Je(t,ns,Ie=>n(2,i=Ie)),t.$$.on_destroy.push(()=>s());function l(Ie){a("sublist",{tag:Ie})}let{connected:c}=e;f();let{fnAction:a}=e,{deviceName:d}=e;const _=()=>{l("andreja")},m=()=>{l("david")},g=()=>{l("irma")},w=()=>{l("otroci")},v=()=>{l("slosinh CartoonsLong")},C=()=>{l("heidi series")},x=()=>{l("Kingdom Force series")},M=()=>{l("Rusty Rivets")},K=()=>{l("Top Wing")},N=()=>{l("Blaze and The Monster Machines")},I=()=>{l("simsala")},W=()=>{l("Medvedek Uhec")},ue=()=>{l("wolfoo")},Y=()=>{l("babyzoo")},J=()=>{l("pearvlogs")},Te=()=>{l("booba")},ht=()=>{l("simsala")},st=()=>{l("mickey mouse")},mt=()=>{l("looloo")},ae=()=>{l("sunny bunnies")};return t.$$set=Ie=>{"connected"in Ie&&f(n(0,c=Ie.connected)),"fnAction"in Ie&&n(5,a=Ie.fnAction),"deviceName"in Ie&&n(1,d=Ie.deviceName)},[c,d,i,r,l,a,_,m,g,w,v,C,x,M,K,N,I,W,ue,Y,J,Te,ht,st,mt,ae]}class to extends $e{constructor(e){super(),je(this,e,eo,Xf,Ue,{connected:0,fnAction:5,deviceName:1})}}function Qi(t,e,n){const i=t.slice();return i[10]=e[n],i}function Xi(t){let e,n,i,r,s,f,l=t[4].playlistLength+"",c,a,d,_,m,g,w,v,C,x=t[7]&&er(t);m=new to({props:{connected:t[1],deviceName:t[3],fnAction:t[2]}});let M=t[5].filter(ir).slice(0,1.5*nr),K=[];for(let I=0;I<M.length;I+=1)K[I]=tr(Qi(t,M,I));const N=I=>Z(K[I],1,1,()=>{K[I]=null});return{c(){e=O("h3"),n=B("Playlist @ "),i=B(t[3]),r=L(),s=O("span"),f=B("("),c=B(l),a=B(")"),d=L(),x&&x.c(),_=L(),Se(m.$$.fragment),g=L();for(let I=0;I<K.length;I+=1)K[I].c();w=L(),v=O("div"),v.textContent="...",D(s,"class","svelte-146wfrf"),D(e,"class","svelte-146wfrf")},m(I,W){E(I,e,W),k(e,n),k(e,i),k(e,r),k(e,s),k(s,f),k(s,c),k(s,a),k(e,d),x&&x.m(e,null),E(I,_,W),ke(m,I,W),E(I,g,W);for(let ue=0;ue<K.length;ue+=1)K[ue].m(I,W);E(I,w,W),E(I,v,W),C=!0},p(I,W){(!C||W&8)&&ce(i,I[3]),(!C||W&16)&&l!==(l=I[4].playlistLength+"")&&ce(c,l),I[7]?x?x.p(I,W):(x=er(I),x.c(),x.m(e,null)):x&&(x.d(1),x=null);const ue={};if(W&2&&(ue.connected=I[1]),W&8&&(ue.deviceName=I[3]),W&4&&(ue.fnAction=I[2]),m.$set(ue),W&36){M=I[5].filter(ir).slice(0,1.5*nr);let Y;for(Y=0;Y<M.length;Y+=1){const J=Qi(I,M,Y);K[Y]?(K[Y].p(J,W),F(K[Y],1)):(K[Y]=tr(J),K[Y].c(),F(K[Y],1),K[Y].m(w.parentNode,w))}for(He(),Y=M.length;Y<K.length;Y+=1)N(Y);We()}},i(I){if(!C){F(m.$$.fragment,I);for(let W=0;W<M.length;W+=1)F(K[W]);C=!0}},o(I){Z(m.$$.fragment,I),K=K.filter(Boolean);for(let W=0;W<K.length;W+=1)Z(K[W]);C=!1},d(I){I&&S(e),x&&x.d(),I&&S(_),xe(m,I),I&&S(g),qt(K,I),I&&S(w),I&&S(v)}}}function er(t){let e,n,i,r,s,f;return{c(){e=B("| "),n=O("a"),i=B("\u25B6 Next"),D(n,"href","#"),D(n,"class","next svelte-146wfrf"),D(n,"disabled",r=!t[7])},m(l,c){E(l,e,c),E(l,n,c),k(n,i),s||(f=oe(n,"click",Gr(t[8])),s=!0)},p(l,c){c&128&&r!==(r=!l[7])&&D(n,"disabled",r)},d(l){l&&S(e),l&&S(n),s=!1,f()}}}function tr(t){let e,n;return e=new ss({props:{entry:t[10],fnAction:t[2]}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p(i,r){const s={};r&32&&(s.entry=i[10]),r&4&&(s.fnAction=i[2]),e.$set(s)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function no(t){var r;let e,n,i=!t[6]&&((r=t[5])==null?void 0:r.length)&&Xi(t);return{c(){i&&i.c(),e=et()},m(s,f){i&&i.m(s,f),E(s,e,f),n=!0},p(s,[f]){var l;!s[6]&&((l=s[5])==null?void 0:l.length)?i?(i.p(s,f),f&96&&F(i,1)):(i=Xi(s),i.c(),F(i,1),i.m(e.parentNode,e)):i&&(He(),Z(i,1,1,()=>{i=null}),We())},i(s){n||(F(i),n=!0)},o(s){Z(i),n=!1},d(s){i&&i.d(s),s&&S(e)}}}const nr=20,ir=({current:t,past:e})=>!t&&!e;function io(t,e,n){let i,r,s,f=te,l=()=>(f(),f=nt(m,x=>n(9,s=x)),m),c,a,d=te,_=()=>(d(),d=nt(g,x=>n(7,a=x)),g);Je(t,wt,x=>n(6,c=x)),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>d());let{store:m}=e;l();let{connected:g}=e;_();let{fnAction:w}=e,{deviceName:v}=e;function C(){window.scrollTo({top:0,behavior:"smooth"}),w("next")}return t.$$set=x=>{"store"in x&&l(n(0,m=x.store)),"connected"in x&&_(n(1,g=x.connected)),"fnAction"in x&&n(2,w=x.fnAction),"deviceName"in x&&n(3,v=x.deviceName)},t.$$.update=()=>{t.$$.dirty&512&&n(5,i=s.playlist),t.$$.dirty&512&&n(4,r=s.playlistMetadata)},[m,g,w,v,r,i,c,a,C,s]}class ro extends $e{constructor(e){super(),je(this,e,io,no,Ue,{store:0,connected:1,fnAction:2,deviceName:3})}}function so(t){let e,n,i,r,s,f,l;return n=new jf({props:{connected:t[1],store:t[0],fnAction:t[2]}}),r=new Zf({props:{connected:t[1],store:t[0],fnAction:t[2]}}),f=new ro({props:{connected:t[1],store:t[0],fnAction:t[2],deviceName:t[3]}}),{c(){e=O("div"),Se(n.$$.fragment),i=L(),Se(r.$$.fragment),s=L(),Se(f.$$.fragment),D(e,"class","searchable_playlist svelte-1op3n77")},m(c,a){E(c,e,a),ke(n,e,null),k(e,i),ke(r,e,null),k(e,s),ke(f,e,null),l=!0},p(c,[a]){const d={};a&2&&(d.connected=c[1]),a&1&&(d.store=c[0]),a&4&&(d.fnAction=c[2]),n.$set(d);const _={};a&2&&(_.connected=c[1]),a&1&&(_.store=c[0]),a&4&&(_.fnAction=c[2]),r.$set(_);const m={};a&2&&(m.connected=c[1]),a&1&&(m.store=c[0]),a&4&&(m.fnAction=c[2]),a&8&&(m.deviceName=c[3]),f.$set(m)},i(c){l||(F(n.$$.fragment,c),F(r.$$.fragment,c),F(f.$$.fragment,c),l=!0)},o(c){Z(n.$$.fragment,c),Z(r.$$.fragment,c),Z(f.$$.fragment,c),l=!1},d(c){c&&S(e),xe(n),xe(r),xe(f)}}}function fo(t,e,n){let{store:i}=e,{connected:r}=e,{fnAction:s}=e,{deviceName:f}=e;return t.$$set=l=>{"store"in l&&n(0,i=l.store),"connected"in l&&n(1,r=l.connected),"fnAction"in l&&n(2,s=l.fnAction),"deviceName"in l&&n(3,f=l.deviceName)},[i,r,s,f]}class oo extends $e{constructor(e){super(),je(this,e,fo,so,Ue,{store:0,connected:1,fnAction:2,deviceName:3})}}function rr(t){let e,n,i,r,s,f,l,c,a,d,_,m,g,w;return{c(){e=O("h3"),n=B("Play internet radio @ "),i=B(t[2]),r=L(),s=O("div"),f=O("button"),f.textContent="Rock",l=L(),c=O("button"),c.textContent="Jazz",a=L(),d=O("button"),d.textContent="Psytrance",_=L(),m=O("button"),m.textContent="Goatrance",D(f,"class","svelte-tpf42f"),D(c,"class","svelte-tpf42f"),D(d,"class","svelte-tpf42f"),D(m,"class","svelte-tpf42f"),D(s,"class","radios svelte-tpf42f")},m(v,C){E(v,e,C),k(e,n),k(e,i),E(v,r,C),E(v,s,C),k(s,f),k(s,l),k(s,c),k(s,a),k(s,d),k(s,_),k(s,m),g||(w=[oe(f,"click",t[4]),oe(c,"click",t[5]),oe(d,"click",t[6]),oe(m,"click",t[7])],g=!0)},p(v,C){C&4&&ce(i,v[2])},d(v){v&&S(e),v&&S(r),v&&S(s),g=!1,Xe(w)}}}function lo(t){let e,n=t[3]&&rr(t);return{c(){n&&n.c(),e=et()},m(i,r){n&&n.m(i,r),E(i,e,r)},p(i,[r]){i[3]?n?n.p(i,r):(n=rr(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(i){n&&n.d(i),i&&S(e)}}}function co(t,e,n){let i,r=te,s=()=>(r(),r=nt(f,g=>n(3,i=g)),f);t.$$.on_destroy.push(()=>r());let{connected:f}=e;s();let{fnAction:l}=e,{deviceName:c}=e;const a=()=>{l("play_radio",{radioId:"rock"})},d=()=>{l("play_radio",{radioId:"jazz"})},_=()=>{l("play_radio",{radioId:"progressive-trance"})},m=()=>{l("play_radio",{radioId:"goa-trance"})};return t.$$set=g=>{"connected"in g&&s(n(0,f=g.connected)),"fnAction"in g&&n(1,l=g.fnAction),"deviceName"in g&&n(2,c=g.deviceName)},[f,l,c,i,a,d,_,m]}class ao extends $e{constructor(e){super(),je(this,e,co,lo,Ue,{connected:0,fnAction:1,deviceName:2})}}function sr(t){let e,n;return e=new ao({props:{connected:t[0],fnAction:t[4],deviceName:t[1]}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p(i,r){const s={};r&1&&(s.connected=i[0]),r&16&&(s.fnAction=i[4]),r&2&&(s.deviceName=i[1]),e.$set(s)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function fr(t){let e,n;return e=new oo({props:{connected:t[0],store:t[3],fnAction:t[4],deviceName:t[1]}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p(i,r){const s={};r&1&&(s.connected=i[0]),r&8&&(s.store=i[3]),r&16&&(s.fnAction=i[4]),r&2&&(s.deviceName=i[1]),e.$set(s)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function uo(t){var d;let e,n,i,r,s,f,l;e=new kf({props:{connected:t[0],store:t[3],player:t[2],songTitle:t[9],songPath:t[8],playlistCurrentMedia:t[6],playlistSongPath:t[5],fnAction:t[4]}}),i=new Pf({props:{connected:t[0],player:t[2],fnAction:t[4],songTitle:t[9],deviceName:t[1]}});let c=t[1]!="tv-ap2"&&sr(t),a=!t[2].isStream&&((d=t[7])==null?void 0:d.length)&&fr(t);return{c(){Se(e.$$.fragment),n=L(),Se(i.$$.fragment),r=L(),c&&c.c(),s=L(),a&&a.c(),f=et()},m(_,m){ke(e,_,m),E(_,n,m),ke(i,_,m),E(_,r,m),c&&c.m(_,m),E(_,s,m),a&&a.m(_,m),E(_,f,m),l=!0},p(_,[m]){var v;const g={};m&1&&(g.connected=_[0]),m&8&&(g.store=_[3]),m&4&&(g.player=_[2]),m&512&&(g.songTitle=_[9]),m&256&&(g.songPath=_[8]),m&64&&(g.playlistCurrentMedia=_[6]),m&32&&(g.playlistSongPath=_[5]),m&16&&(g.fnAction=_[4]),e.$set(g);const w={};m&1&&(w.connected=_[0]),m&4&&(w.player=_[2]),m&16&&(w.fnAction=_[4]),m&512&&(w.songTitle=_[9]),m&2&&(w.deviceName=_[1]),i.$set(w),_[1]!="tv-ap2"?c?(c.p(_,m),m&2&&F(c,1)):(c=sr(_),c.c(),F(c,1),c.m(s.parentNode,s)):c&&(He(),Z(c,1,1,()=>{c=null}),We()),!_[2].isStream&&((v=_[7])==null?void 0:v.length)?a?(a.p(_,m),m&132&&F(a,1)):(a=fr(_),a.c(),F(a,1),a.m(f.parentNode,f)):a&&(He(),Z(a,1,1,()=>{a=null}),We())},i(_){l||(F(e.$$.fragment,_),F(i.$$.fragment,_),F(c),F(a),l=!0)},o(_){Z(e.$$.fragment,_),Z(i.$$.fragment,_),Z(c),Z(a),l=!1},d(_){xe(e,_),_&&S(n),xe(i,_),_&&S(r),c&&c.d(_),_&&S(s),a&&a.d(_),_&&S(f)}}}function _o(t,e,n){let i,r,s,f,l,c,a,d,_,m,g=te,w=()=>(g(),g=nt(M,N=>n(14,m=N)),M);t.$$.on_destroy.push(()=>g());let{connected:v}=e,{deviceName:C}=e,{player:x}=e,{store:M}=e;w();let{fnAction:K}=e;return t.$$set=N=>{"connected"in N&&n(0,v=N.connected),"deviceName"in N&&n(1,C=N.deviceName),"player"in N&&n(2,x=N.player),"store"in N&&w(n(3,M=N.store)),"fnAction"in N&&n(4,K=N.fnAction)},t.$$.update=()=>{t.$$.dirty&4&&n(13,i=x.currentMedia||{}),t.$$.dirty&8192&&n(12,r=i.artist&&i.song?`${i.artist} - ${i.song}`:i.song),t.$$.dirty&8192&&n(10,s=i.songPath),t.$$.dirty&16384&&n(7,f=m.playlist),t.$$.dirty&128&&n(6,l=(f||[]).find(({current:N})=>N)),t.$$.dirty&64&&n(11,c=l==null?void 0:l.title),t.$$.dirty&64&&n(5,a=l==null?void 0:l.path),t.$$.dirty&6144&&n(9,d=r||c),t.$$.dirty&1056&&n(8,_=s||a)},[v,C,x,M,K,a,l,f,_,d,s,c,r,i,m]}class ho extends $e{constructor(e){super(),je(this,e,_o,uo,Ue,{connected:0,deviceName:1,player:2,store:3,fnAction:4})}}function or(t,e,n){const i=t.slice();return i[15]=e[n],i}function lr(t){let e,n=t[3],i=[];for(let r=0;r<n.length;r+=1)i[r]=ur(or(t,n,r));return{c(){e=O("div");for(let r=0;r<i.length;r+=1)i[r].c();D(e,"class","nearby_devices svelte-f8wsgm")},m(r,s){E(r,e,s);for(let f=0;f<i.length;f+=1)i[f].m(e,null)},p(r,s){if(s&251){n=r[3];let f;for(f=0;f<n.length;f+=1){const l=or(r,n,f);i[f]?i[f].p(l,s):(i[f]=ur(l),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=n.length}},d(r){r&&S(e),qt(i,r)}}}function cr(t){let e;return{c(){e=O("span"),e.textContent="!",D(e,"class","error svelte-f8wsgm")},m(n,i){E(n,e,i)},d(n){n&&S(e)}}}function ar(t){let e,n=t[15].mediaType=="music"?"\u266B":"\u25B6",i;return{c(){e=O("span"),i=B(n),D(e,"class","play_symbol svelte-f8wsgm")},m(r,s){E(r,e,s),k(e,i)},p(r,s){s&8&&n!==(n=r[15].mediaType=="music"?"\u266B":"\u25B6")&&ce(i,n)},d(r){r&&S(e)}}}function ur(t){let e,n,i,r=t[15].deviceName+"",s,f,l,c,a=t[15].hasErrors&&cr(),d=t[15].playing&&ar(t);return{c(){e=O("button"),a&&a.c(),n=L(),d&&d.c(),i=L(),s=B(r),f=L(),D(e,"class","svelte-f8wsgm"),G(e,"active",t[15].deviceKey==t[0]),G(e,"local_device",t[15].thisDevice),G(e,"playing",t[15].playing),G(e,"late_pong1",t[4]-t[5][t[15].deviceKey]>2e3),G(e,"late_pong2",t[4]-t[5][t[15].deviceKey]>2500),G(e,"late_pong3",t[4]-t[5][t[15].deviceKey]>3500),G(e,"connected",t[6][t[15].deviceKey]),G(e,"disconnected",t[6][t[15].deviceKey]==!1),G(e,"cpu_usage_warn1",t[15].cpuUsage>50),G(e,"cpu_usage_warn2",t[15].cpuUsage>70),G(e,"cpu_usage_warn3",t[15].cpuUsage>80)},m(_,m){E(_,e,m),a&&a.m(e,null),k(e,n),d&&d.m(e,null),k(e,i),k(e,s),k(e,f),l||(c=oe(e,"click",function(){Tn(t[7]({store:t[1],device:t[15]}))&&t[7]({store:t[1],device:t[15]}).apply(this,arguments)}),l=!0)},p(_,m){t=_,t[15].hasErrors?a||(a=cr(),a.c(),a.m(e,n)):a&&(a.d(1),a=null),t[15].playing?d?d.p(t,m):(d=ar(t),d.c(),d.m(e,i)):d&&(d.d(1),d=null),m&8&&r!==(r=t[15].deviceName+"")&&ce(s,r),m&9&&G(e,"active",t[15].deviceKey==t[0]),m&8&&G(e,"local_device",t[15].thisDevice),m&8&&G(e,"playing",t[15].playing),m&56&&G(e,"late_pong1",t[4]-t[5][t[15].deviceKey]>2e3),m&56&&G(e,"late_pong2",t[4]-t[5][t[15].deviceKey]>2500),m&56&&G(e,"late_pong3",t[4]-t[5][t[15].deviceKey]>3500),m&72&&G(e,"connected",t[6][t[15].deviceKey]),m&72&&G(e,"disconnected",t[6][t[15].deviceKey]==!1),m&8&&G(e,"cpu_usage_warn1",t[15].cpuUsage>50),m&8&&G(e,"cpu_usage_warn2",t[15].cpuUsage>70),m&8&&G(e,"cpu_usage_warn3",t[15].cpuUsage>80)},d(_){_&&S(e),a&&a.d(),d&&d.d(),l=!1,c()}}}function mo(t){let e,n=t[3].length&&lr(t);return{c(){n&&n.c(),e=et()},m(i,r){n&&n.m(i,r),E(i,e,r)},p(i,[r]){i[3].length?n?n.p(i,r):(n=lr(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(i){n&&n.d(i),i&&S(e)}}}function po(t,e,n){let i,r,s,f,l;Je(t,es,x=>n(12,r=x));let{nearbyDevices:c}=e,{activeDeviceKey:a}=e,{store:d}=e,{log:_}=e;function m({store:x,device:M}){xn.set(null),wt.set(null),localStorage.setItem("current_device_key",M.deviceKey),x.switch(M)}const g=_t({});Je(t,g,x=>n(5,f=x)),d.on("pong",({deviceKey:x})=>{g.update(M=>(M[x]=Date.now(),M))});const w=_t({});Je(t,w,x=>n(6,l=x)),w.alreadyDone={};const v=_t(Date.now());Je(t,v,x=>n(4,s=x));function C(){v.set(Date.now()),setTimeout(C,300)}return C(),t.$$set=x=>{"nearbyDevices"in x&&n(10,c=x.nearbyDevices),"activeDeviceKey"in x&&n(0,a=x.activeDeviceKey),"store"in x&&n(1,d=x.store),"log"in x&&n(11,_=x.log)},t.$$.update=()=>{t.$$.dirty&7175&&n(3,i=c.filter(({deviceName:x,playing:M,deviceKey:K,thisDevice:N,ip:I})=>K==a||M||r).map(x=>{const{ip:M,deviceKey:K,deviceName:N,thisDevice:I,playing:W}=x;if(!w.alreadyDone[K]){n(2,w.alreadyDone[K]=!0,w);const ue=W?0:100+Math.round(500*Math.random());setTimeout(()=>{_(`${M} Preconnecting ${N}`);const Y=d.preconnect({host:M,deviceKey:K,thisDevice:I});Y.__prevSubUnsubscribe?Y.__prevSubUnsubscribe():Y.on("decommission",()=>{_(`dmt-mobile: Decommissioned connector ${N} @ ${M}`),n(2,w.alreadyDone[K]=!1,w),Y.__prevSubUnsubscribe&&Y.__prevSubUnsubscribe()}),Y.__prevSubUnsubscribe=Y.connected.subscribe(J=>{w.update(Te=>(Te[K]=J,Te))})},ue)}return x}))},[a,d,w,i,s,f,l,m,g,v,c,_,r]}class bo extends $e{constructor(e){super(),je(this,e,po,mo,Ue,{nearbyDevices:10,activeDeviceKey:0,store:1,log:11})}}function vo(t){let e,n,i=(t[0].network||"")+"",r,s,f;return{c(){e=O("button"),n=B("Ve\u010D mo\u017Enosti - "),r=B(i),D(e,"class","svelte-7klnzk")},m(l,c){E(l,e,c),k(e,n),k(e,r),s||(f=oe(e,"click",t[10]),s=!0)},p(l,c){c&1&&i!==(i=(l[0].network||"")+"")&&ce(r,i)},d(l){l&&S(e),s=!1,f()}}}function go(t){let e,n,i,r,s,f,l,c,a,d,_,m,g,w,v,C,x,M,K,N,I,W,ue;return{c(){e=O("h3"),e.textContent="Vhod",n=L(),i=O("button"),r=B("ODPRI VHODNA VRATA"),f=L(),l=O("h3"),l.textContent="Parkiri\u0161\u010De",c=L(),a=O("button"),d=B("PREMIKANJE VRAT"),m=L(),g=O("h3"),g.textContent="Alarm",w=L(),v=O("button"),C=B("VKLOPI"),M=L(),K=O("button"),N=B("IZKLOPI"),D(i,"class"," svelte-7klnzk"),i.disabled=s=!t[2],D(a,"class"," svelte-7klnzk"),a.disabled=_=!t[2],D(v,"class"," svelte-7klnzk"),v.disabled=x=!t[2],D(K,"class"," svelte-7klnzk"),K.disabled=I=!t[2]},m(Y,J){E(Y,e,J),E(Y,n,J),E(Y,i,J),k(i,r),E(Y,f,J),E(Y,l,J),E(Y,c,J),E(Y,a,J),k(a,d),E(Y,m,J),E(Y,g,J),E(Y,w,J),E(Y,v,J),k(v,C),E(Y,M,J),E(Y,K,J),k(K,N),W||(ue=[oe(i,"click",t[6]),oe(a,"click",t[7]),oe(v,"click",t[8]),oe(K,"click",t[9])],W=!0)},p(Y,J){J&4&&s!==(s=!Y[2])&&(i.disabled=s),J&4&&_!==(_=!Y[2])&&(a.disabled=_),J&4&&x!==(x=!Y[2])&&(v.disabled=x),J&4&&I!==(I=!Y[2])&&(K.disabled=I)},d(Y){Y&&S(e),Y&&S(n),Y&&S(i),Y&&S(f),Y&&S(l),Y&&S(c),Y&&S(a),Y&&S(m),Y&&S(g),Y&&S(w),Y&&S(v),Y&&S(M),Y&&S(K),W=!1,Xe(ue)}}}function yo(t){let e;function n(s,f){return s[1]?go:vo}let i=n(t),r=i(t);return{c(){e=O("div"),r.c(),D(e,"class","options svelte-7klnzk"),G(e,"closed",!t[1])},m(s,f){E(s,e,f),r.m(e,null)},p(s,[f]){i===(i=n(s))&&r?r.p(s,f):(r.d(1),r=i(s),r&&(r.c(),r.m(e,null))),f&2&&G(e,"closed",!s[1])},i:te,o:te,d(s){s&&S(e),r.d()}}}function wo(t,e,n){let i,{connector:r}=e,{localDevice:s}=e;const{connected:f,state:l}=r;Je(t,f,v=>n(2,i=v));function c(v){r.signal("action",{action:v,namespace:"iot"})}let a;const d=()=>{c("entry-door-open")},_=()=>{c("fence-door-move")},m=()=>{c("alarm-enable")},g=()=>{c("alarm-disable")},w=()=>{n(1,a=!0)};return t.$$set=v=>{"connector"in v&&n(5,r=v.connector),"localDevice"in v&&n(0,s=v.localDevice)},[s,a,i,f,c,r,d,_,m,g,w]}class ko extends $e{constructor(e){super(),je(this,e,wo,yo,Ue,{connector:5,localDevice:0})}}function xo(t){let e,n=dr(t[2])+"",i,r,s=t[1].replace("blinds","")+"",f,l,c,a;return{c(){e=O("button"),i=B(n),r=L(),f=B(s),e.disabled=l=t[4]==!1,D(e,"class","svelte-fh8ilh"),G(e,"moving",t[3]&&t[3][kt(t[0],t[1],t[2])]&&t[3][kt(t[0],t[1],t[2])].blindsStatus=="moving"),G(e,"present",t[3]&&t[3][kt(t[0],t[1],t[2])]&&t[3][kt(t[0],t[1],t[2])].present)},m(d,_){E(d,e,_),k(e,i),k(e,r),k(e,f),c||(a=oe(e,"click",t[10]),c=!0)},p(d,[_]){_&4&&n!==(n=dr(d[2])+"")&&ce(i,n),_&2&&s!==(s=d[1].replace("blinds","")+"")&&ce(f,s),_&16&&l!==(l=d[4]==!1)&&(e.disabled=l),_&15&&G(e,"moving",d[3]&&d[3][kt(d[0],d[1],d[2])]&&d[3][kt(d[0],d[1],d[2])].blindsStatus=="moving"),_&15&&G(e,"present",d[3]&&d[3][kt(d[0],d[1],d[2])]&&d[3][kt(d[0],d[1],d[2])].present)},i:te,o:te,d(d){d&&S(e),c=!1,a()}}}function dr(t){return t=="up"?"\u25B2":"\u25BC"}function kt(t,e,n){return`${t}-${e}-${n}`}function Ao(t,e,n){let i,r,s,{connector:f}=e,{placeId:l}=e,{blindsId:c}=e,{blindsDirection:a}=e;const{state:d,connected:_}=f;Je(t,d,v=>n(9,r=v)),Je(t,_,v=>n(4,s=v));function m(v,C){f.signal("action",{action:v,namespace:"iot",payload:C})}function g(v,C,x){m("blinds",{placeId:v,blindsId:C,blindsDirection:x,blindsAction:"move"})}const w=()=>g(l,c,a);return t.$$set=v=>{"connector"in v&&n(8,f=v.connector),"placeId"in v&&n(0,l=v.placeId),"blindsId"in v&&n(1,c=v.blindsId),"blindsDirection"in v&&n(2,a=v.blindsDirection)},t.$$.update=()=>{t.$$.dirty&512&&n(3,i=r.blinds)},[l,c,a,i,s,d,_,g,f,r,w]}class Qe extends $e{constructor(e){super(),je(this,e,Ao,xo,Ue,{connector:8,placeId:0,blindsId:1,blindsDirection:2})}}function So(t){let e,n,i,r,s,f,l,c,a,d,_,m,g;return s=new Qe({props:{placeId:"ap1",blindsId:"blinds2",blindsDirection:"up",connector:t[0]}}),l=new Qe({props:{placeId:"ap1",blindsId:"blinds1",blindsDirection:"up",connector:t[0]}}),d=new Qe({props:{placeId:"ap1",blindsId:"blinds2",blindsDirection:"down",connector:t[0]}}),m=new Qe({props:{placeId:"ap1",blindsId:"blinds1",blindsDirection:"down",connector:t[0]}}),{c(){e=O("div"),n=O("h2"),n.textContent="Rolete",i=L(),r=O("div"),Se(s.$$.fragment),f=L(),Se(l.$$.fragment),c=L(),a=O("div"),Se(d.$$.fragment),_=L(),Se(m.$$.fragment),D(r,"class","iot section svelte-1kxggon"),D(a,"class","iot section svelte-1kxggon"),D(e,"class","blinds_ap1")},m(w,v){E(w,e,v),k(e,n),k(e,i),k(e,r),ke(s,r,null),k(r,f),ke(l,r,null),k(e,c),k(e,a),ke(d,a,null),k(a,_),ke(m,a,null),g=!0},p(w,v){const C={};v&1&&(C.connector=w[0]),s.$set(C);const x={};v&1&&(x.connector=w[0]),l.$set(x);const M={};v&1&&(M.connector=w[0]),d.$set(M);const K={};v&1&&(K.connector=w[0]),m.$set(K)},i(w){g||(F(s.$$.fragment,w),F(l.$$.fragment,w),F(d.$$.fragment,w),F(m.$$.fragment,w),g=!0)},o(w){Z(s.$$.fragment,w),Z(l.$$.fragment,w),Z(d.$$.fragment,w),Z(m.$$.fragment,w),g=!1},d(w){w&&S(e),xe(s),xe(l),xe(d),xe(m)}}}function Eo(t){let e,n,i,r,s,f,l,c,a,d,_,m,g,w,v,C,x,M,K,N,I,W,ue,Y,J,Te,ht,st,mt;return s=new Qe({props:{placeId:"ap2",blindsId:"blinds6",blindsDirection:"up",connector:t[0]}}),l=new Qe({props:{placeId:"ap2",blindsId:"blinds5",blindsDirection:"up",connector:t[0]}}),a=new Qe({props:{placeId:"ap2",blindsId:"blinds4",blindsDirection:"up",connector:t[0]}}),_=new Qe({props:{placeId:"ap2",blindsId:"blinds3",blindsDirection:"up",connector:t[0]}}),g=new Qe({props:{placeId:"ap2",blindsId:"blinds2",blindsDirection:"up",connector:t[0]}}),v=new Qe({props:{placeId:"ap2",blindsId:"blinds1",blindsDirection:"up",connector:t[0]}}),M=new Qe({props:{placeId:"ap2",blindsId:"blinds6",blindsDirection:"down",connector:t[0]}}),N=new Qe({props:{placeId:"ap2",blindsId:"blinds5",blindsDirection:"down",connector:t[0]}}),W=new Qe({props:{placeId:"ap2",blindsId:"blinds4",blindsDirection:"down",connector:t[0]}}),Y=new Qe({props:{placeId:"ap2",blindsId:"blinds3",blindsDirection:"down",connector:t[0]}}),Te=new Qe({props:{placeId:"ap2",blindsId:"blinds2",blindsDirection:"down",connector:t[0]}}),st=new Qe({props:{placeId:"ap2",blindsId:"blinds1",blindsDirection:"down",connector:t[0]}}),{c(){e=O("div"),n=O("h2"),n.textContent="Rolete",i=L(),r=O("div"),Se(s.$$.fragment),f=L(),Se(l.$$.fragment),c=B(`
        \u2014
        `),Se(a.$$.fragment),d=L(),Se(_.$$.fragment),m=B(`
        \u2014
        `),Se(g.$$.fragment),w=L(),Se(v.$$.fragment),C=L(),x=O("div"),Se(M.$$.fragment),K=L(),Se(N.$$.fragment),I=B(`
        \u2014
        `),Se(W.$$.fragment),ue=L(),Se(Y.$$.fragment),J=B(`
        \u2014
        `),Se(Te.$$.fragment),ht=L(),Se(st.$$.fragment),D(r,"class","iot section svelte-1kxggon"),D(x,"class","iot section svelte-1kxggon"),D(e,"class","blinds_ap2 svelte-1kxggon"),G(e,"visible",To)},m(ae,Ie){E(ae,e,Ie),k(e,n),k(e,i),k(e,r),ke(s,r,null),k(r,f),ke(l,r,null),k(r,c),ke(a,r,null),k(r,d),ke(_,r,null),k(r,m),ke(g,r,null),k(r,w),ke(v,r,null),k(e,C),k(e,x),ke(M,x,null),k(x,K),ke(N,x,null),k(x,I),ke(W,x,null),k(x,ue),ke(Y,x,null),k(x,J),ke(Te,x,null),k(x,ht),ke(st,x,null),mt=!0},p(ae,Ie){const lt={};Ie&1&&(lt.connector=ae[0]),s.$set(lt);const Pt={};Ie&1&&(Pt.connector=ae[0]),l.$set(Pt);const pt={};Ie&1&&(pt.connector=ae[0]),a.$set(pt);const bt={};Ie&1&&(bt.connector=ae[0]),_.$set(bt);const Yt={};Ie&1&&(Yt.connector=ae[0]),g.$set(Yt);const Ht={};Ie&1&&(Ht.connector=ae[0]),v.$set(Ht);const It={};Ie&1&&(It.connector=ae[0]),M.$set(It);const it={};Ie&1&&(it.connector=ae[0]),N.$set(it);const rt={};Ie&1&&(rt.connector=ae[0]),W.$set(rt);const Ce={};Ie&1&&(Ce.connector=ae[0]),Y.$set(Ce);const tt={};Ie&1&&(tt.connector=ae[0]),Te.$set(tt);const Wt={};Ie&1&&(Wt.connector=ae[0]),st.$set(Wt)},i(ae){mt||(F(s.$$.fragment,ae),F(l.$$.fragment,ae),F(a.$$.fragment,ae),F(_.$$.fragment,ae),F(g.$$.fragment,ae),F(v.$$.fragment,ae),F(M.$$.fragment,ae),F(N.$$.fragment,ae),F(W.$$.fragment,ae),F(Y.$$.fragment,ae),F(Te.$$.fragment,ae),F(st.$$.fragment,ae),mt=!0)},o(ae){Z(s.$$.fragment,ae),Z(l.$$.fragment,ae),Z(a.$$.fragment,ae),Z(_.$$.fragment,ae),Z(g.$$.fragment,ae),Z(v.$$.fragment,ae),Z(M.$$.fragment,ae),Z(N.$$.fragment,ae),Z(W.$$.fragment,ae),Z(Y.$$.fragment,ae),Z(Te.$$.fragment,ae),Z(st.$$.fragment,ae),mt=!1},d(ae){ae&&S(e),xe(s),xe(l),xe(a),xe(_),xe(g),xe(v),xe(M),xe(N),xe(W),xe(Y),xe(Te),xe(st)}}}function Co(t){let e,n,i,r;const s=[Eo,So],f=[];function l(c,a){return c[1].deviceName=="tv-ap2"?0:1}return n=l(t),i=f[n]=s[n](t),{c(){e=O("main"),i.c(),D(e,"class","svelte-1kxggon")},m(c,a){E(c,e,a),f[n].m(e,null),r=!0},p(c,[a]){let d=n;n=l(c),n===d?f[n].p(c,a):(He(),Z(f[d],1,1,()=>{f[d]=null}),We(),i=f[n],i?i.p(c,a):(i=f[n]=s[n](c),i.c()),F(i,1),i.m(e,null))},i(c){r||(F(i),r=!0)},o(c){Z(i),r=!1},d(c){c&&S(e),f[n].d()}}}let To=!1;function Oo(t,e,n){let i,r,{connector:s}=e;const{state:f,connected:l}=s;return Je(t,f,c=>n(3,r=c)),t.$$set=c=>{"connector"in c&&n(0,s=c.connector)},t.$$.update=()=>{t.$$.dirty&8&&n(1,i=r.device)},[s,i,f,r]}class No extends $e{constructor(e){super(),je(this,e,Oo,Co,Ue,{connector:0})}}function _r(t,e,n){const i=t.slice();return i[3]=e[n],i}function hr(t){let e,n=t[1].slice(0,4),i=[];for(let r=0;r<n.length;r+=1)i[r]=pr(_r(t,n,r));return{c(){e=O("div");for(let r=0;r<i.length;r+=1)i[r].c();D(e,"class","notifications svelte-xhxgtm")},m(r,s){E(r,e,s);for(let f=0;f<i.length;f+=1)i[f].m(e,null)},p(r,s){if(s&2){n=r[1].slice(0,4);let f;for(f=0;f<n.length;f+=1){const l=_r(r,n,f);i[f]?i[f].p(l,s):(i[f]=pr(l),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=n.length}},d(r){r&&S(e),qt(i,r)}}}function mr(t){let e,n=t[3].title+"",i;return{c(){e=O("div"),i=B(n),D(e,"class","title svelte-xhxgtm")},m(r,s){E(r,e,s),k(e,i)},p(r,s){s&2&&n!==(n=r[3].title+"")&&ce(i,n)},d(r){r&&S(e)}}}function pr(t){let e,n,i=t[3].msg+"",r,s,f,l=t[3].relativeTimeAdded+"",c,a,d=t[3].title&&mr(t);return{c(){e=O("div"),d&&d.c(),n=L(),r=B(i),s=L(),f=O("div"),c=B(l),a=L(),D(f,"class","time svelte-xhxgtm"),D(e,"class","notification svelte-xhxgtm"),hn(e,"color",t[3].color),hn(e,"background-color",t[3].bgColor)},m(_,m){E(_,e,m),d&&d.m(e,null),k(e,n),k(e,r),k(e,s),k(e,f),k(f,c),k(e,a)},p(_,m){_[3].title?d?d.p(_,m):(d=mr(_),d.c(),d.m(e,n)):d&&(d.d(1),d=null),m&2&&i!==(i=_[3].msg+"")&&ce(r,i),m&2&&l!==(l=_[3].relativeTimeAdded+"")&&ce(c,l),m&2&&hn(e,"color",_[3].color),m&2&&hn(e,"background-color",_[3].bgColor)},d(_){_&&S(e),d&&d.d()}}}function Do(t){let e,n=t[1]&&t[1].length&&hr(t);return{c(){n&&n.c(),e=et()},m(i,r){n&&n.m(i,r),E(i,e,r)},p(i,[r]){i[1]&&i[1].length?n?n.p(i,r):(n=hr(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(i){n&&n.d(i),i&&S(e)}}}function Ro(t,e,n){let i,r,s=te,f=()=>(s(),s=nt(l,c=>n(2,r=c)),l);t.$$.on_destroy.push(()=>s());let{store:l}=e;return f(),t.$$set=c=>{"store"in c&&f(n(0,l=c.store))},t.$$.update=()=>{t.$$.dirty&4&&n(1,i=r.notifications.slice().reverse())},[l,i,r]}class Po extends $e{constructor(e){super(),je(this,e,Ro,Do,Ue,{store:0})}}function br(t){let e,n,i,r,s,f,l;return{c(){e=O("h2"),e.textContent="Dru\u017Einski ra\u010Dunalnik",n=L(),i=O("button"),r=B("Ugasni"),i.disabled=s=t[2]==!1,D(i,"class","svelte-jomoi4")},m(c,a){E(c,e,a),E(c,n,a),E(c,i,a),k(i,r),f||(l=oe(i,"click",t[5]),f=!0)},p(c,a){a&4&&s!==(s=c[2]==!1)&&(i.disabled=s)},d(c){c&&S(e),c&&S(n),c&&S(i),f=!1,l()}}}function Io(t){var r;let e,n=(r=t[1])==null?void 0:r.find(t[4]),i=n&&br(t);return{c(){e=O("main"),i&&i.c()},m(s,f){E(s,e,f),i&&i.m(e,null)},p(s,[f]){var l;f&2&&(n=(l=s[1])==null?void 0:l.find(s[4])),n?i?i.p(s,f):(i=br(s),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:te,o:te,d(s){s&&S(e),i&&i.d()}}}const vr="eclipse";function Mo(t,e,n){let i,{connector:r}=e,{nearbyDevices:s}=e;const{connected:f}=r;Je(t,f,a=>n(2,i=a));const l=({deviceName:a})=>a==vr,c=()=>{r.signal("action",{action:"sleep",namespace:"iot",payload:vr})};return t.$$set=a=>{"connector"in a&&n(0,r=a.connector),"nearbyDevices"in a&&n(1,s=a.nearbyDevices)},[r,s,i,f,l,c]}class Lo extends $e{constructor(e){super(),je(this,e,Mo,Io,Ue,{connector:0,nearbyDevices:1})}}const ct=_t([]);ct.LIMIT=300;ct.log=(t,{dedup:e=!1}={})=>{ct.update(n=>(e&&n.length>0&&n[n.length-1].entry==t&&n.pop(),n.push({entry:t,createdDate:new Date,createdAt:Date.now(),isRecent:!0,isVeryRecent:!0}),n.slice(-ct.LIMIT)))};function fs(){const t=Date.now();ct.update(e=>{for(const n of e)n.isRecent=t-n.createdAt<6e4,n.isVeryRecent=t-n.createdAt<5e3;return e}),setTimeout(fs,1e3)}fs();function gr(t,e,n){const i=t.slice();return i[11]=e[n].time,i[12]=e[n].entry,i[13]=e[n].isRecent,i[14]=e[n].isVeryRecent,i[15]=e[n].createdAt,i[17]=n,i}function yr(t){let e,n;return{c(){e=O("h2"),n=B(t[0]),D(e,"class","title svelte-19k2gjn")},m(i,r){E(i,e,r),k(e,n)},p(i,r){r&1&&ce(n,i[0])},d(i){i&&S(e)}}}function Uo(t){let e,n,i;return{c(){e=O("button"),e.textContent="Show Log",D(e,"class","svelte-19k2gjn")},m(r,s){E(r,e,s),n||(i=oe(e,"click",t[8]),n=!0)},p:te,i:te,o:te,d(r){r&&S(e),n=!1,i()}}}function jo(t){let e,n,i;const r=t[7].default,s=$r(r,t,t[6],null);let f=t[2].map(kr),l=[];for(let c=0;c<f.length;c+=1)l[c]=wr(gr(t,f,c));return{c(){s&&s.c(),e=L();for(let c=0;c<l.length;c+=1)l[c].c();n=et()},m(c,a){s&&s.m(c,a),E(c,e,a);for(let d=0;d<l.length;d+=1)l[d].m(c,a);E(c,n,a),i=!0},p(c,a){if(s&&s.p&&(!i||a&64)&&zr(s,r,c,c[6],i?Br(r,c[6],a,null):qr(c[6]),null),a&4){f=c[2].map(kr);let d;for(d=0;d<f.length;d+=1){const _=gr(c,f,d);l[d]?l[d].p(_,a):(l[d]=wr(_),l[d].c(),l[d].m(n.parentNode,n))}for(;d<l.length;d+=1)l[d].d(1);l.length=f.length}},i(c){i||(F(s,c),i=!0)},o(c){Z(s,c),i=!1},d(c){s&&s.d(c),c&&S(e),qt(l,c),c&&S(n)}}}function $o(t){let e=t[11]+"",n;return{c(){n=B(e)},m(i,r){E(i,n,r)},p(i,r){r&4&&e!==(e=i[11]+"")&&ce(n,e)},d(i){i&&S(n)}}}function Ko(t){let e;function n(s,f){return s[15]-s[2][s[17]+1].createdAt<1e4?zo:Bo}let i=n(t),r=i(t);return{c(){r.c(),e=et()},m(s,f){r.m(s,f),E(s,e,f)},p(s,f){i===(i=n(s))&&r?r.p(s,f):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&S(e)}}}function Bo(t){let e=t[11]+"",n;return{c(){n=B(e)},m(i,r){E(i,n,r)},p(i,r){r&4&&e!==(e=i[11]+"")&&ce(n,e)},d(i){i&&S(n)}}}function zo(t){let e,n,i=t[15]-t[2][t[17]+1].createdAt+"",r,s;return{c(){e=O("span"),n=B("+"),r=B(i),s=B("ms"),D(e,"class","diff svelte-19k2gjn")},m(f,l){E(f,e,l),k(e,n),k(e,r),k(e,s)},p(f,l){l&4&&i!==(i=f[15]-f[2][f[17]+1].createdAt+"")&&ce(r,i)},d(f){f&&S(e)}}}function wr(t){let e,n,i,r=t[12]+"",s,f;function l(d,_){return d[17]<d[2].length-1?Ko:$o}let c=l(t),a=c(t);return{c(){e=O("div"),n=O("span"),a.c(),i=L(),s=B(r),f=L(),D(n,"class","time svelte-19k2gjn"),D(e,"class","log_entry svelte-19k2gjn"),G(e,"recent",t[13]),G(e,"very_recent",t[14])},m(d,_){E(d,e,_),k(e,n),a.m(n,null),k(e,i),k(e,s),k(e,f)},p(d,_){c===(c=l(d))&&a?a.p(d,_):(a.d(1),a=c(d),a&&(a.c(),a.m(n,null))),_&4&&r!==(r=d[12]+"")&&ce(s,r),_&4&&G(e,"recent",d[13]),_&4&&G(e,"very_recent",d[14])},d(d){d&&S(e),a.d()}}}function qo(t){let e,n,i,r,s,f=t[0]&&yr(t);const l=[jo,Uo],c=[];function a(d,_){return d[1]?0:1}return i=a(t),r=c[i]=l[i](t),{c(){e=O("div"),f&&f.c(),n=L(),r.c(),D(e,"class","logview svelte-19k2gjn")},m(d,_){E(d,e,_),f&&f.m(e,null),k(e,n),c[i].m(e,null),s=!0},p(d,[_]){d[0]?f?f.p(d,_):(f=yr(d),f.c(),f.m(e,n)):f&&(f.d(1),f=null);let m=i;i=a(d),i===m?c[i].p(d,_):(He(),Z(c[m],1,1,()=>{c[m]=null}),We(),r=c[i],r?r.p(d,_):(r=c[i]=l[i](d),r.c()),F(r,1),r.m(e,null))},i(d){s||(F(r),s=!0)},o(d){Z(r),s=!1},d(d){d&&S(e),f&&f.d(),c[i].d()}}}const kr=t=>{const e=t.createdDate.toLocaleString().split(",")[1];return{...t,time:e}};function Fo(t,e,n){let i,r;Je(t,ct,w=>n(5,r=w));let{$$slots:s={},$$scope:f}=e,{showLogInitially:l=!0}=e,{title:c}=e,{limit:a=0}=e;a>ct.LIMIT&&(console.log(`Warning: provided LogView line limit (${a}) is larger than logStore limit  (${ct.LIMIT})`),console.log("Utilizing the lower value ..."),a=ct.LIMIT);let d=l,_;function m(){const w=Date.now();_&&w-_>500&&ct.log("\u2014\u2014\u2014 Context switch / App wake \u2014\u2014\u2014",{dedup:!0}),_=w,setTimeout(m,300)}m();const g=()=>{n(1,d=!0)};return t.$$set=w=>{"showLogInitially"in w&&n(4,l=w.showLogInitially),"title"in w&&n(0,c=w.title),"limit"in w&&n(3,a=w.limit),"$$scope"in w&&n(6,f=w.$$scope)},t.$$.update=()=>{t.$$.dirty&40&&n(2,i=r.slice(-a).reverse())},[c,d,i,a,l,r,f,s,g]}class os extends $e{constructor(e){super(),je(this,e,Fo,qo,Ue,{showLogInitially:4,title:0,limit:3})}}function Yo(t){let e,n,i,r,s;return{c(){e=O("div"),n=O("span"),n.textContent="DMT",i=L(),r=O("span"),s=B(t[0]),D(n,"class","dmt svelte-c00wah"),D(r,"class","app svelte-c00wah")},m(f,l){E(f,e,l),k(e,n),k(e,i),k(e,r),k(r,s)},p(f,[l]){l&1&&ce(s,f[0])},i:te,o:te,d(f){f&&S(e)}}}function Ho(t,e,n){let{dmtApp:i}=e;return t.$$set=r=>{"dmtApp"in r&&n(0,i=r.dmtApp)},[i]}class Wo extends $e{constructor(e){super(),je(this,e,Ho,Yo,Ue,{dmtApp:0})}}function Jo(t){let e,n,i,r,s,f,l=".".repeat(t[1])+"",c,a,d,_,m;n=new Wo({props:{dmtApp:t[0]}});const g=t[3].default,w=$r(g,t,t[2],null);return{c(){e=O("div"),Se(n.$$.fragment),i=L(),r=O("p"),s=B("Connecting "),f=O("span"),c=B(l),a=L(),w&&w.c(),D(f,"class","svelte-1afk0eu"),D(r,"class","svelte-1afk0eu"),D(e,"class","wrapper svelte-1afk0eu")},m(v,C){E(v,e,C),ke(n,e,null),k(e,i),k(e,r),k(r,s),k(r,f),k(f,c),k(e,a),w&&w.m(e,null),m=!0},p(v,[C]){const x={};C&1&&(x.dmtApp=v[0]),n.$set(x),(!m||C&2)&&l!==(l=".".repeat(v[1])+"")&&ce(c,l),w&&w.p&&(!m||C&4)&&zr(w,g,v,v[2],m?Br(g,v[2],C,null):qr(v[2]),null)},i(v){m||(F(n.$$.fragment,v),F(w,v),at(()=>{_&&_.end(1),d=Dt(e,St,{}),d.start()}),m=!0)},o(v){Z(n.$$.fragment,v),Z(w,v),d&&d.invalidate(),_=ef(e,St,{}),m=!1},d(v){v&&S(e),xe(n),w&&w.d(v),v&&_&&_.end()}}}const Go=5;function Zo(t,e,n){let{$$slots:i={},$$scope:r}=e,{dmtApp:s}=e,f=1,l=!0;return Zs(()=>{const c=setInterval(()=>{n(1,f=f+(l?1:-1)),f==Go&&(l=!1),f==1&&(l=!0)},500);return()=>clearInterval(c)}),t.$$set=c=>{"dmtApp"in c&&n(0,s=c.dmtApp),"$$scope"in c&&n(2,r=c.$$scope)},[s,f,r,i]}class Vo extends $e{constructor(e){super(),je(this,e,Zo,Jo,Ue,{dmtApp:0})}}function xr(t,e,n){const i=t.slice();return i[2]=e[n],i}function Ar(t){let e,n=t[1].errors.slice(0,3),i=[];for(let r=0;r<n.length;r+=1)i[r]=Er(xr(t,n,r));return{c(){e=O("div");for(let r=0;r<i.length;r+=1)i[r].c();D(e,"class","errors svelte-173xjbh")},m(r,s){E(r,e,s);for(let f=0;f<i.length;f+=1)i[f].m(e,null)},p(r,s){if(s&2){n=r[1].errors.slice(0,3);let f;for(f=0;f<n.length;f+=1){const l=xr(r,n,f);i[f]?i[f].p(l,s):(i[f]=Er(l),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=n.length}},d(r){r&&S(e),qt(i,r)}}}function Sr(t){let e=t[2].stacktrace+"",n;return{c(){n=B(e)},m(i,r){E(i,n,r)},p(i,r){r&2&&e!==(e=i[2].stacktrace+"")&&ce(n,e)},d(i){i&&S(n)}}}function Er(t){let e,n,i,r,s,f=t[2].time+"",l,c,a,d=t[2].msg+"",_,m,g,w=t[2].stacktrace&&Sr(t);return{c(){e=O("div"),n=O("div"),i=O("span"),r=B("\u26A0\uFE0F Error at "),s=O("span"),l=B(f),c=L(),a=O("span"),_=B(d),m=L(),w&&w.c(),g=L(),D(s,"class","time svelte-173xjbh"),D(i,"class","title svelte-173xjbh"),D(a,"class","msg svelte-173xjbh"),D(n,"class","header svelte-173xjbh"),D(e,"class","error svelte-173xjbh"),G(e,"cors_problem",t[2].corsProblem)},m(v,C){E(v,e,C),k(e,n),k(n,i),k(i,r),k(i,s),k(s,l),k(n,c),k(n,a),k(a,_),k(e,m),w&&w.m(e,null),k(e,g)},p(v,C){C&2&&f!==(f=v[2].time+"")&&ce(l,f),C&2&&d!==(d=v[2].msg+"")&&ce(_,d),v[2].stacktrace?w?w.p(v,C):(w=Sr(v),w.c(),w.m(e,g)):w&&(w.d(1),w=null),C&2&&G(e,"cors_problem",v[2].corsProblem)},d(v){v&&S(e),w&&w.d()}}}function Qo(t){var i;let e,n=((i=t[1])==null?void 0:i.errors.length)&&Ar(t);return{c(){n&&n.c(),e=et()},m(r,s){n&&n.m(r,s),E(r,e,s)},p(r,[s]){var f;(f=r[1])!=null&&f.errors.length?n?n.p(r,s):(n=Ar(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(r){n&&n.d(r),r&&S(e)}}}function Xo(t,e,n){let i,r=te,s=()=>(r(),r=nt(f,l=>n(1,i=l)),f);t.$$.on_destroy.push(()=>r());let{errorStore:f}=e;return s(),t.$$set=l=>{"errorStore"in l&&s(n(0,f=l.errorStore))},[f,i]}class el extends $e{constructor(e){super(),je(this,e,Xo,Qo,Ue,{errorStore:0})}}function tl({store:t,action:e,payload:n}){console.log(`Action: ${e}`),t.signal("action",{action:e,namespace:"player",payload:n})}function nl(t){let e,n;return e=new Vo({props:{dmtApp:"Mobile",$$slots:{default:[rl]},$$scope:{ctx:t}}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p(i,r){const s={};r&131072&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function il(t){let e,n,i,r,s,f,l,c,a,d=t[2].deviceKey=="ed4f0a8f470b3024f25c60a54cf832584c2c16081f364fabebc77186ae11d626"&&Cr(t),_=t[2].network=="zaboric"&&Tr(t),m=t[2].deviceName!="tv-ap2"&&Or(t),g=t[2].deviceName!="tv-ap2"&&Nr(t);s=new uf({props:{connected:t[9],nearbyDevices:t[6],deviceName:t[8],device:t[3],player:t[7]}});let w=t[2].deviceName!="tv-ap2"&&Dr(t);return c=new ho({props:{connected:t[9],player:t[7],deviceName:t[8],store:t[0],fnAction:t[12]}}),{c(){d&&d.c(),e=L(),_&&_.c(),n=L(),m&&m.c(),i=L(),g&&g.c(),r=L(),Se(s.$$.fragment),f=L(),w&&w.c(),l=L(),Se(c.$$.fragment)},m(v,C){d&&d.m(v,C),E(v,e,C),_&&_.m(v,C),E(v,n,C),m&&m.m(v,C),E(v,i,C),g&&g.m(v,C),E(v,r,C),ke(s,v,C),E(v,f,C),w&&w.m(v,C),E(v,l,C),ke(c,v,C),a=!0},p(v,C){v[2].deviceKey=="ed4f0a8f470b3024f25c60a54cf832584c2c16081f364fabebc77186ae11d626"?d?(d.p(v,C),C&4&&F(d,1)):(d=Cr(v),d.c(),F(d,1),d.m(e.parentNode,e)):d&&(He(),Z(d,1,1,()=>{d=null}),We()),v[2].network=="zaboric"?_?(_.p(v,C),C&4&&F(_,1)):(_=Tr(v),_.c(),F(_,1),_.m(n.parentNode,n)):_&&(He(),Z(_,1,1,()=>{_=null}),We()),v[2].deviceName!="tv-ap2"?m?(m.p(v,C),C&4&&F(m,1)):(m=Or(v),m.c(),F(m,1),m.m(i.parentNode,i)):m&&(He(),Z(m,1,1,()=>{m=null}),We()),v[2].deviceName!="tv-ap2"?g?(g.p(v,C),C&4&&F(g,1)):(g=Nr(v),g.c(),F(g,1),g.m(r.parentNode,r)):g&&(He(),Z(g,1,1,()=>{g=null}),We());const x={};C&64&&(x.nearbyDevices=v[6]),C&256&&(x.deviceName=v[8]),C&8&&(x.device=v[3]),C&128&&(x.player=v[7]),s.$set(x),v[2].deviceName!="tv-ap2"?w?(w.p(v,C),C&4&&F(w,1)):(w=Dr(v),w.c(),F(w,1),w.m(l.parentNode,l)):w&&(He(),Z(w,1,1,()=>{w=null}),We());const M={};C&128&&(M.player=v[7]),C&256&&(M.deviceName=v[8]),C&1&&(M.store=v[0]),c.$set(M)},i(v){a||(F(d),F(_),F(m),F(g),F(s.$$.fragment,v),F(w),F(c.$$.fragment,v),a=!0)},o(v){Z(d),Z(_),Z(m),Z(g),Z(s.$$.fragment,v),Z(w),Z(c.$$.fragment,v),a=!1},d(v){d&&d.d(v),v&&S(e),_&&_.d(v),v&&S(n),m&&m.d(v),v&&S(i),g&&g.d(v),v&&S(r),xe(s,v),v&&S(f),w&&w.d(v),v&&S(l),xe(c,v)}}}function rl(t){let e,n;return e=new os({props:{showLogInitially:!0,limit:20}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p:te,i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function Cr(t){let e,n;return e=new ko({props:{connector:t[10],localDevice:t[2]}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p(i,r){const s={};r&4&&(s.localDevice=i[2]),e.$set(s)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function Tr(t){let e,n;return e=new No({props:{connector:t[10]}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p:te,i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function Or(t){let e,n;return e=new Lo({props:{connector:t[10],nearbyDevices:t[6]}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p(i,r){const s={};r&64&&(s.nearbyDevices=i[6]),e.$set(s)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function Nr(t){let e,n;return e=new Po({props:{store:t[0]}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p(i,r){const s={};r&1&&(s.store=i[0]),e.$set(s)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function Dr(t){let e,n;return e=new bo({props:{nearbyDevices:t[6],activeDeviceKey:t[5],store:t[0],log:t[1]}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p(i,r){const s={};r&64&&(s.nearbyDevices=i[6]),r&32&&(s.activeDeviceKey=i[5]),r&1&&(s.store=i[0]),r&2&&(s.log=i[1]),e.$set(s)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function Rr(t){let e,n;return e=new os({props:{title:"Connectivity log",limit:200,showLogInitially:!1,$$slots:{default:[sl]},$$scope:{ctx:t}}}),{c(){Se(e.$$.fragment)},m(i,r){ke(e,i,r),n=!0},p(i,r){const s={};r&131088&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){xe(e,i)}}}function sl(t){let e,n,i,r,s,f,l;return{c(){e=O("p"),n=B("Gui active: "),i=O("span"),r=B(t[4]),s=B("s"),f=L(),l=O("span"),l.textContent="[ also indicates that this app is processing events ]",D(i,"class","svelte-gx051d"),D(l,"class","small svelte-gx051d"),D(e,"class","logview_counter svelte-gx051d")},m(c,a){E(c,e,a),k(e,n),k(e,i),k(i,r),k(i,s),k(e,f),k(e,l)},p(c,a){a&16&&ce(r,c[4])},d(c){c&&S(e)}}}function fl(t){let e,n,i,r,s,f,l;n=new el({props:{errorStore:ts}});const c=[il,nl],a=[];function d(m,g){return m[2]?0:1}r=d(t),s=a[r]=c[r](t);let _=t[2]&&Rr(t);return{c(){e=O("main"),Se(n.$$.fragment),i=L(),s.c(),f=L(),_&&_.c(),D(e,"class","svelte-gx051d")},m(m,g){E(m,e,g),ke(n,e,null),k(e,i),a[r].m(e,null),k(e,f),_&&_.m(e,null),l=!0},p(m,[g]){let w=r;r=d(m),r===w?a[r].p(m,g):(He(),Z(a[w],1,1,()=>{a[w]=null}),We(),s=a[r],s?s.p(m,g):(s=a[r]=c[r](m),s.c()),F(s,1),s.m(e,f)),m[2]?_?(_.p(m,g),g&4&&F(_,1)):(_=Rr(m),_.c(),F(_,1),_.m(e,null)):_&&(He(),Z(_,1,1,()=>{_=null}),We())},i(m){l||(F(n.$$.fragment,m),F(s),F(_),l=!0)},o(m){Z(n.$$.fragment,m),Z(s),Z(_),l=!1},d(m){m&&S(e),xe(n),a[r].d(),_&&_.d()}}}function ol(t,e,n){let i,r,s,f,l,c,a,d=te,_=()=>(d(),d=nt(g,I=>n(13,a=I)),g),m;t.$$.on_destroy.push(()=>d());let{store:g}=e;_();let{log:w}=e;const{connected:v,localConnector:C}=g,{state:x}=C;Je(t,x,I=>n(14,m=I));function M(I,W){rs(),tl({store:g,action:I,payload:W})}x.subscribe(I=>{var ue;const W=(ue=I==null?void 0:I.device)==null?void 0:ue.network;ns.set(["zaboric","borovnjakova"].includes(W))});let K=0;function N(){n(4,K+=1),setTimeout(N,1e3)}return N(),t.$$set=I=>{"store"in I&&_(n(0,g=I.store)),"log"in I&&n(1,w=I.log)},t.$$.update=()=>{t.$$.dirty&8192&&n(3,i=a.device),t.$$.dirty&8192&&n(8,r=a.optimisticDeviceName),t.$$.dirty&16384&&n(2,s=m.device),t.$$.dirty&4&&(s==null||s.devMachine),t.$$.dirty&8192&&n(7,f=a.player||{}),t.$$.dirty&8192&&n(6,l=a.nearbyDevices?a.nearbyDevices.filter(I=>I.hasGui).sort(sf("deviceName")):[]),t.$$.dirty&8192&&n(5,c=a.activeDeviceKey)},[g,w,s,i,K,c,l,f,r,v,C,x,M,a,m]}class ll extends $e{constructor(e){super(),je(this,e,ol,fl,Ue,{store:0,log:1})}}function cl(){}class qn{constructor(e,n,i){this.prev=e,this.next=n,this.fn=i||cl}run(e){this.fn(e),this.next&&this.next.run(e)}}class al{constructor(e){this.head=new qn,this.tail=new qn(this.head),this.head.next=this.tail,this.linkConstructor=e,this.reg={}}insert(e){const n=new qn(this.tail.prev,this.tail,e);return n.next.prev=n,n.prev.next=n,n}remove(e){e.prev.next=e.next,e.next.prev=e.prev}}let ul=0;class On{constructor(){this.__events_list={}}on(e,n){const i=this.__events_list[e]||(this.__events_list[e]=new al),r=n._eev||(n._eev=++ul);i.reg[r]||(i.reg[r]=i.insert(n))}off(e,n){if(n){const i=this.__events_list[e];if(!i)return;const r=i.reg[n._eev];i.reg[n._eev]=void 0,i&&r&&i.remove(r)}}removeListener(...e){this.off(...e)}emit(e,n){const i=this.__events_list[e];i&&i.head.run(n)}}class dl extends On{constructor(e){super(),this.state=e,this.subscriptions=[]}get(){return this.state}subscribe(e){return this.subscriptions.push(e),e(this.state),()=>{this.subscriptions=this.subscriptions.filter(n=>n!==e)}}announceStateChange(){this.subscriptions.forEach(e=>e(this.state))}}class zt extends dl{set(e){this.state=e,this.announceStateChange()}}class _l extends zt{constructor(e={}){super(e)}set(e,{ignore:n=[]}={}){const i={};for(const r of n)i[r]=this.state[r];super.set({...e,...i})}setMerge(e){super.set({...this.state,...e})}clearState({except:e=[]}={}){for(const n of Object.keys(this.state))e.includes(n)||delete this.state[n]}}var hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ls(t,e,n){return n={path:e,exports:{},require:function(i,r){return cs(i,r==null?n.path:r)}},t(n,n.exports),n.exports}function ml(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),e}function cs(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var pl={},bl=Object.freeze({__proto__:null,default:pl}),vl=ml(bl),ut=ls(function(t){(function(e){var n=function(u){var p,h=new Float64Array(16);if(u)for(p=0;p<u.length;p++)h[p]=u[p];return h},i=function(){throw new Error("no PRNG")},r=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var f=n(),l=n([1]),c=n([56129,1]),a=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),g=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(u,p,h,o){u[p]=h>>24&255,u[p+1]=h>>16&255,u[p+2]=h>>8&255,u[p+3]=h&255,u[p+4]=o>>24&255,u[p+5]=o>>16&255,u[p+6]=o>>8&255,u[p+7]=o&255}function v(u,p,h,o,b){var A,T=0;for(A=0;A<b;A++)T|=u[p+A]^h[o+A];return(1&T-1>>>8)-1}function C(u,p,h,o){return v(u,p,h,o,16)}function x(u,p,h,o){return v(u,p,h,o,32)}function M(u,p,h,o){for(var b=o[0]&255|(o[1]&255)<<8|(o[2]&255)<<16|(o[3]&255)<<24,A=h[0]&255|(h[1]&255)<<8|(h[2]&255)<<16|(h[3]&255)<<24,T=h[4]&255|(h[5]&255)<<8|(h[6]&255)<<16|(h[7]&255)<<24,j=h[8]&255|(h[9]&255)<<8|(h[10]&255)<<16|(h[11]&255)<<24,H=h[12]&255|(h[13]&255)<<8|(h[14]&255)<<16|(h[15]&255)<<24,se=o[4]&255|(o[5]&255)<<8|(o[6]&255)<<16|(o[7]&255)<<24,Q=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,De=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,ee=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,de=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,_e=o[8]&255|(o[9]&255)<<8|(o[10]&255)<<16|(o[11]&255)<<24,ve=h[16]&255|(h[17]&255)<<8|(h[18]&255)<<16|(h[19]&255)<<24,be=h[20]&255|(h[21]&255)<<8|(h[22]&255)<<16|(h[23]&255)<<24,he=h[24]&255|(h[25]&255)<<8|(h[26]&255)<<16|(h[27]&255)<<24,pe=h[28]&255|(h[29]&255)<<8|(h[30]&255)<<16|(h[31]&255)<<24,me=o[12]&255|(o[13]&255)<<8|(o[14]&255)<<16|(o[15]&255)<<24,ne=b,fe=A,X=T,ie=j,re=H,V=se,R=Q,P=De,z=ee,U=de,$=_e,q=ve,le=be,ge=he,we=pe,ye=me,y,Ee=0;Ee<20;Ee+=2)y=ne+le|0,re^=y<<7|y>>>32-7,y=re+ne|0,z^=y<<9|y>>>32-9,y=z+re|0,le^=y<<13|y>>>32-13,y=le+z|0,ne^=y<<18|y>>>32-18,y=V+fe|0,U^=y<<7|y>>>32-7,y=U+V|0,ge^=y<<9|y>>>32-9,y=ge+U|0,fe^=y<<13|y>>>32-13,y=fe+ge|0,V^=y<<18|y>>>32-18,y=$+R|0,we^=y<<7|y>>>32-7,y=we+$|0,X^=y<<9|y>>>32-9,y=X+we|0,R^=y<<13|y>>>32-13,y=R+X|0,$^=y<<18|y>>>32-18,y=ye+q|0,ie^=y<<7|y>>>32-7,y=ie+ye|0,P^=y<<9|y>>>32-9,y=P+ie|0,q^=y<<13|y>>>32-13,y=q+P|0,ye^=y<<18|y>>>32-18,y=ne+ie|0,fe^=y<<7|y>>>32-7,y=fe+ne|0,X^=y<<9|y>>>32-9,y=X+fe|0,ie^=y<<13|y>>>32-13,y=ie+X|0,ne^=y<<18|y>>>32-18,y=V+re|0,R^=y<<7|y>>>32-7,y=R+V|0,P^=y<<9|y>>>32-9,y=P+R|0,re^=y<<13|y>>>32-13,y=re+P|0,V^=y<<18|y>>>32-18,y=$+U|0,q^=y<<7|y>>>32-7,y=q+$|0,z^=y<<9|y>>>32-9,y=z+q|0,U^=y<<13|y>>>32-13,y=U+z|0,$^=y<<18|y>>>32-18,y=ye+we|0,le^=y<<7|y>>>32-7,y=le+ye|0,ge^=y<<9|y>>>32-9,y=ge+le|0,we^=y<<13|y>>>32-13,y=we+ge|0,ye^=y<<18|y>>>32-18;ne=ne+b|0,fe=fe+A|0,X=X+T|0,ie=ie+j|0,re=re+H|0,V=V+se|0,R=R+Q|0,P=P+De|0,z=z+ee|0,U=U+de|0,$=$+_e|0,q=q+ve|0,le=le+be|0,ge=ge+he|0,we=we+pe|0,ye=ye+me|0,u[0]=ne>>>0&255,u[1]=ne>>>8&255,u[2]=ne>>>16&255,u[3]=ne>>>24&255,u[4]=fe>>>0&255,u[5]=fe>>>8&255,u[6]=fe>>>16&255,u[7]=fe>>>24&255,u[8]=X>>>0&255,u[9]=X>>>8&255,u[10]=X>>>16&255,u[11]=X>>>24&255,u[12]=ie>>>0&255,u[13]=ie>>>8&255,u[14]=ie>>>16&255,u[15]=ie>>>24&255,u[16]=re>>>0&255,u[17]=re>>>8&255,u[18]=re>>>16&255,u[19]=re>>>24&255,u[20]=V>>>0&255,u[21]=V>>>8&255,u[22]=V>>>16&255,u[23]=V>>>24&255,u[24]=R>>>0&255,u[25]=R>>>8&255,u[26]=R>>>16&255,u[27]=R>>>24&255,u[28]=P>>>0&255,u[29]=P>>>8&255,u[30]=P>>>16&255,u[31]=P>>>24&255,u[32]=z>>>0&255,u[33]=z>>>8&255,u[34]=z>>>16&255,u[35]=z>>>24&255,u[36]=U>>>0&255,u[37]=U>>>8&255,u[38]=U>>>16&255,u[39]=U>>>24&255,u[40]=$>>>0&255,u[41]=$>>>8&255,u[42]=$>>>16&255,u[43]=$>>>24&255,u[44]=q>>>0&255,u[45]=q>>>8&255,u[46]=q>>>16&255,u[47]=q>>>24&255,u[48]=le>>>0&255,u[49]=le>>>8&255,u[50]=le>>>16&255,u[51]=le>>>24&255,u[52]=ge>>>0&255,u[53]=ge>>>8&255,u[54]=ge>>>16&255,u[55]=ge>>>24&255,u[56]=we>>>0&255,u[57]=we>>>8&255,u[58]=we>>>16&255,u[59]=we>>>24&255,u[60]=ye>>>0&255,u[61]=ye>>>8&255,u[62]=ye>>>16&255,u[63]=ye>>>24&255}function K(u,p,h,o){for(var b=o[0]&255|(o[1]&255)<<8|(o[2]&255)<<16|(o[3]&255)<<24,A=h[0]&255|(h[1]&255)<<8|(h[2]&255)<<16|(h[3]&255)<<24,T=h[4]&255|(h[5]&255)<<8|(h[6]&255)<<16|(h[7]&255)<<24,j=h[8]&255|(h[9]&255)<<8|(h[10]&255)<<16|(h[11]&255)<<24,H=h[12]&255|(h[13]&255)<<8|(h[14]&255)<<16|(h[15]&255)<<24,se=o[4]&255|(o[5]&255)<<8|(o[6]&255)<<16|(o[7]&255)<<24,Q=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,De=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,ee=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,de=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,_e=o[8]&255|(o[9]&255)<<8|(o[10]&255)<<16|(o[11]&255)<<24,ve=h[16]&255|(h[17]&255)<<8|(h[18]&255)<<16|(h[19]&255)<<24,be=h[20]&255|(h[21]&255)<<8|(h[22]&255)<<16|(h[23]&255)<<24,he=h[24]&255|(h[25]&255)<<8|(h[26]&255)<<16|(h[27]&255)<<24,pe=h[28]&255|(h[29]&255)<<8|(h[30]&255)<<16|(h[31]&255)<<24,me=o[12]&255|(o[13]&255)<<8|(o[14]&255)<<16|(o[15]&255)<<24,ne=b,fe=A,X=T,ie=j,re=H,V=se,R=Q,P=De,z=ee,U=de,$=_e,q=ve,le=be,ge=he,we=pe,ye=me,y,Ee=0;Ee<20;Ee+=2)y=ne+le|0,re^=y<<7|y>>>32-7,y=re+ne|0,z^=y<<9|y>>>32-9,y=z+re|0,le^=y<<13|y>>>32-13,y=le+z|0,ne^=y<<18|y>>>32-18,y=V+fe|0,U^=y<<7|y>>>32-7,y=U+V|0,ge^=y<<9|y>>>32-9,y=ge+U|0,fe^=y<<13|y>>>32-13,y=fe+ge|0,V^=y<<18|y>>>32-18,y=$+R|0,we^=y<<7|y>>>32-7,y=we+$|0,X^=y<<9|y>>>32-9,y=X+we|0,R^=y<<13|y>>>32-13,y=R+X|0,$^=y<<18|y>>>32-18,y=ye+q|0,ie^=y<<7|y>>>32-7,y=ie+ye|0,P^=y<<9|y>>>32-9,y=P+ie|0,q^=y<<13|y>>>32-13,y=q+P|0,ye^=y<<18|y>>>32-18,y=ne+ie|0,fe^=y<<7|y>>>32-7,y=fe+ne|0,X^=y<<9|y>>>32-9,y=X+fe|0,ie^=y<<13|y>>>32-13,y=ie+X|0,ne^=y<<18|y>>>32-18,y=V+re|0,R^=y<<7|y>>>32-7,y=R+V|0,P^=y<<9|y>>>32-9,y=P+R|0,re^=y<<13|y>>>32-13,y=re+P|0,V^=y<<18|y>>>32-18,y=$+U|0,q^=y<<7|y>>>32-7,y=q+$|0,z^=y<<9|y>>>32-9,y=z+q|0,U^=y<<13|y>>>32-13,y=U+z|0,$^=y<<18|y>>>32-18,y=ye+we|0,le^=y<<7|y>>>32-7,y=le+ye|0,ge^=y<<9|y>>>32-9,y=ge+le|0,we^=y<<13|y>>>32-13,y=we+ge|0,ye^=y<<18|y>>>32-18;u[0]=ne>>>0&255,u[1]=ne>>>8&255,u[2]=ne>>>16&255,u[3]=ne>>>24&255,u[4]=V>>>0&255,u[5]=V>>>8&255,u[6]=V>>>16&255,u[7]=V>>>24&255,u[8]=$>>>0&255,u[9]=$>>>8&255,u[10]=$>>>16&255,u[11]=$>>>24&255,u[12]=ye>>>0&255,u[13]=ye>>>8&255,u[14]=ye>>>16&255,u[15]=ye>>>24&255,u[16]=R>>>0&255,u[17]=R>>>8&255,u[18]=R>>>16&255,u[19]=R>>>24&255,u[20]=P>>>0&255,u[21]=P>>>8&255,u[22]=P>>>16&255,u[23]=P>>>24&255,u[24]=z>>>0&255,u[25]=z>>>8&255,u[26]=z>>>16&255,u[27]=z>>>24&255,u[28]=U>>>0&255,u[29]=U>>>8&255,u[30]=U>>>16&255,u[31]=U>>>24&255}function N(u,p,h,o){M(u,p,h,o)}function I(u,p,h,o){K(u,p,h,o)}var W=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function ue(u,p,h,o,b,A,T){var j=new Uint8Array(16),H=new Uint8Array(64),se,Q;for(Q=0;Q<16;Q++)j[Q]=0;for(Q=0;Q<8;Q++)j[Q]=A[Q];for(;b>=64;){for(N(H,j,T,W),Q=0;Q<64;Q++)u[p+Q]=h[o+Q]^H[Q];for(se=1,Q=8;Q<16;Q++)se=se+(j[Q]&255)|0,j[Q]=se&255,se>>>=8;b-=64,p+=64,o+=64}if(b>0)for(N(H,j,T,W),Q=0;Q<b;Q++)u[p+Q]=h[o+Q]^H[Q];return 0}function Y(u,p,h,o,b){var A=new Uint8Array(16),T=new Uint8Array(64),j,H;for(H=0;H<16;H++)A[H]=0;for(H=0;H<8;H++)A[H]=o[H];for(;h>=64;){for(N(T,A,b,W),H=0;H<64;H++)u[p+H]=T[H];for(j=1,H=8;H<16;H++)j=j+(A[H]&255)|0,A[H]=j&255,j>>>=8;h-=64,p+=64}if(h>0)for(N(T,A,b,W),H=0;H<h;H++)u[p+H]=T[H];return 0}function J(u,p,h,o,b){var A=new Uint8Array(32);I(A,o,b,W);for(var T=new Uint8Array(8),j=0;j<8;j++)T[j]=o[j+16];return Y(u,p,h,T,A)}function Te(u,p,h,o,b,A,T){var j=new Uint8Array(32);I(j,A,T,W);for(var H=new Uint8Array(8),se=0;se<8;se++)H[se]=A[se+16];return ue(u,p,h,o,b,H,j)}var ht=function(u){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var p,h,o,b,A,T,j,H;p=u[0]&255|(u[1]&255)<<8,this.r[0]=p&8191,h=u[2]&255|(u[3]&255)<<8,this.r[1]=(p>>>13|h<<3)&8191,o=u[4]&255|(u[5]&255)<<8,this.r[2]=(h>>>10|o<<6)&7939,b=u[6]&255|(u[7]&255)<<8,this.r[3]=(o>>>7|b<<9)&8191,A=u[8]&255|(u[9]&255)<<8,this.r[4]=(b>>>4|A<<12)&255,this.r[5]=A>>>1&8190,T=u[10]&255|(u[11]&255)<<8,this.r[6]=(A>>>14|T<<2)&8191,j=u[12]&255|(u[13]&255)<<8,this.r[7]=(T>>>11|j<<5)&8065,H=u[14]&255|(u[15]&255)<<8,this.r[8]=(j>>>8|H<<8)&8191,this.r[9]=H>>>5&127,this.pad[0]=u[16]&255|(u[17]&255)<<8,this.pad[1]=u[18]&255|(u[19]&255)<<8,this.pad[2]=u[20]&255|(u[21]&255)<<8,this.pad[3]=u[22]&255|(u[23]&255)<<8,this.pad[4]=u[24]&255|(u[25]&255)<<8,this.pad[5]=u[26]&255|(u[27]&255)<<8,this.pad[6]=u[28]&255|(u[29]&255)<<8,this.pad[7]=u[30]&255|(u[31]&255)<<8};ht.prototype.blocks=function(u,p,h){for(var o=this.fin?0:2048,b,A,T,j,H,se,Q,De,ee,de,_e,ve,be,he,pe,me,ne,fe,X,ie=this.h[0],re=this.h[1],V=this.h[2],R=this.h[3],P=this.h[4],z=this.h[5],U=this.h[6],$=this.h[7],q=this.h[8],le=this.h[9],ge=this.r[0],we=this.r[1],ye=this.r[2],y=this.r[3],Ee=this.r[4],Re=this.r[5],Pe=this.r[6],Ae=this.r[7],Oe=this.r[8],Ne=this.r[9];h>=16;)b=u[p+0]&255|(u[p+1]&255)<<8,ie+=b&8191,A=u[p+2]&255|(u[p+3]&255)<<8,re+=(b>>>13|A<<3)&8191,T=u[p+4]&255|(u[p+5]&255)<<8,V+=(A>>>10|T<<6)&8191,j=u[p+6]&255|(u[p+7]&255)<<8,R+=(T>>>7|j<<9)&8191,H=u[p+8]&255|(u[p+9]&255)<<8,P+=(j>>>4|H<<12)&8191,z+=H>>>1&8191,se=u[p+10]&255|(u[p+11]&255)<<8,U+=(H>>>14|se<<2)&8191,Q=u[p+12]&255|(u[p+13]&255)<<8,$+=(se>>>11|Q<<5)&8191,De=u[p+14]&255|(u[p+15]&255)<<8,q+=(Q>>>8|De<<8)&8191,le+=De>>>5|o,ee=0,de=ee,de+=ie*ge,de+=re*(5*Ne),de+=V*(5*Oe),de+=R*(5*Ae),de+=P*(5*Pe),ee=de>>>13,de&=8191,de+=z*(5*Re),de+=U*(5*Ee),de+=$*(5*y),de+=q*(5*ye),de+=le*(5*we),ee+=de>>>13,de&=8191,_e=ee,_e+=ie*we,_e+=re*ge,_e+=V*(5*Ne),_e+=R*(5*Oe),_e+=P*(5*Ae),ee=_e>>>13,_e&=8191,_e+=z*(5*Pe),_e+=U*(5*Re),_e+=$*(5*Ee),_e+=q*(5*y),_e+=le*(5*ye),ee+=_e>>>13,_e&=8191,ve=ee,ve+=ie*ye,ve+=re*we,ve+=V*ge,ve+=R*(5*Ne),ve+=P*(5*Oe),ee=ve>>>13,ve&=8191,ve+=z*(5*Ae),ve+=U*(5*Pe),ve+=$*(5*Re),ve+=q*(5*Ee),ve+=le*(5*y),ee+=ve>>>13,ve&=8191,be=ee,be+=ie*y,be+=re*ye,be+=V*we,be+=R*ge,be+=P*(5*Ne),ee=be>>>13,be&=8191,be+=z*(5*Oe),be+=U*(5*Ae),be+=$*(5*Pe),be+=q*(5*Re),be+=le*(5*Ee),ee+=be>>>13,be&=8191,he=ee,he+=ie*Ee,he+=re*y,he+=V*ye,he+=R*we,he+=P*ge,ee=he>>>13,he&=8191,he+=z*(5*Ne),he+=U*(5*Oe),he+=$*(5*Ae),he+=q*(5*Pe),he+=le*(5*Re),ee+=he>>>13,he&=8191,pe=ee,pe+=ie*Re,pe+=re*Ee,pe+=V*y,pe+=R*ye,pe+=P*we,ee=pe>>>13,pe&=8191,pe+=z*ge,pe+=U*(5*Ne),pe+=$*(5*Oe),pe+=q*(5*Ae),pe+=le*(5*Pe),ee+=pe>>>13,pe&=8191,me=ee,me+=ie*Pe,me+=re*Re,me+=V*Ee,me+=R*y,me+=P*ye,ee=me>>>13,me&=8191,me+=z*we,me+=U*ge,me+=$*(5*Ne),me+=q*(5*Oe),me+=le*(5*Ae),ee+=me>>>13,me&=8191,ne=ee,ne+=ie*Ae,ne+=re*Pe,ne+=V*Re,ne+=R*Ee,ne+=P*y,ee=ne>>>13,ne&=8191,ne+=z*ye,ne+=U*we,ne+=$*ge,ne+=q*(5*Ne),ne+=le*(5*Oe),ee+=ne>>>13,ne&=8191,fe=ee,fe+=ie*Oe,fe+=re*Ae,fe+=V*Pe,fe+=R*Re,fe+=P*Ee,ee=fe>>>13,fe&=8191,fe+=z*y,fe+=U*ye,fe+=$*we,fe+=q*ge,fe+=le*(5*Ne),ee+=fe>>>13,fe&=8191,X=ee,X+=ie*Ne,X+=re*Oe,X+=V*Ae,X+=R*Pe,X+=P*Re,ee=X>>>13,X&=8191,X+=z*Ee,X+=U*y,X+=$*ye,X+=q*we,X+=le*ge,ee+=X>>>13,X&=8191,ee=(ee<<2)+ee|0,ee=ee+de|0,de=ee&8191,ee=ee>>>13,_e+=ee,ie=de,re=_e,V=ve,R=be,P=he,z=pe,U=me,$=ne,q=fe,le=X,p+=16,h-=16;this.h[0]=ie,this.h[1]=re,this.h[2]=V,this.h[3]=R,this.h[4]=P,this.h[5]=z,this.h[6]=U,this.h[7]=$,this.h[8]=q,this.h[9]=le},ht.prototype.finish=function(u,p){var h=new Uint16Array(10),o,b,A,T;if(this.leftover){for(T=this.leftover,this.buffer[T++]=1;T<16;T++)this.buffer[T]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(o=this.h[1]>>>13,this.h[1]&=8191,T=2;T<10;T++)this.h[T]+=o,o=this.h[T]>>>13,this.h[T]&=8191;for(this.h[0]+=o*5,o=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=o,o=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=o,h[0]=this.h[0]+5,o=h[0]>>>13,h[0]&=8191,T=1;T<10;T++)h[T]=this.h[T]+o,o=h[T]>>>13,h[T]&=8191;for(h[9]-=1<<13,b=(o^1)-1,T=0;T<10;T++)h[T]&=b;for(b=~b,T=0;T<10;T++)this.h[T]=this.h[T]&b|h[T];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,A=this.h[0]+this.pad[0],this.h[0]=A&65535,T=1;T<8;T++)A=(this.h[T]+this.pad[T]|0)+(A>>>16)|0,this.h[T]=A&65535;u[p+0]=this.h[0]>>>0&255,u[p+1]=this.h[0]>>>8&255,u[p+2]=this.h[1]>>>0&255,u[p+3]=this.h[1]>>>8&255,u[p+4]=this.h[2]>>>0&255,u[p+5]=this.h[2]>>>8&255,u[p+6]=this.h[3]>>>0&255,u[p+7]=this.h[3]>>>8&255,u[p+8]=this.h[4]>>>0&255,u[p+9]=this.h[4]>>>8&255,u[p+10]=this.h[5]>>>0&255,u[p+11]=this.h[5]>>>8&255,u[p+12]=this.h[6]>>>0&255,u[p+13]=this.h[6]>>>8&255,u[p+14]=this.h[7]>>>0&255,u[p+15]=this.h[7]>>>8&255},ht.prototype.update=function(u,p,h){var o,b;if(this.leftover){for(b=16-this.leftover,b>h&&(b=h),o=0;o<b;o++)this.buffer[this.leftover+o]=u[p+o];if(h-=b,p+=b,this.leftover+=b,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(h>=16&&(b=h-h%16,this.blocks(u,p,b),p+=b,h-=b),h){for(o=0;o<h;o++)this.buffer[this.leftover+o]=u[p+o];this.leftover+=h}};function st(u,p,h,o,b,A){var T=new ht(A);return T.update(h,o,b),T.finish(u,p),0}function mt(u,p,h,o,b,A){var T=new Uint8Array(16);return st(T,0,h,o,b,A),C(u,p,T,0)}function ae(u,p,h,o,b){var A;if(h<32)return-1;for(Te(u,0,p,0,h,o,b),st(u,16,u,32,h-32,u),A=0;A<16;A++)u[A]=0;return 0}function Ie(u,p,h,o,b){var A,T=new Uint8Array(32);if(h<32||(J(T,0,32,o,b),mt(p,16,p,32,h-32,T)!==0))return-1;for(Te(u,0,p,0,h,o,b),A=0;A<32;A++)u[A]=0;return 0}function lt(u,p){var h;for(h=0;h<16;h++)u[h]=p[h]|0}function Pt(u){var p,h,o=1;for(p=0;p<16;p++)h=u[p]+o+65535,o=Math.floor(h/65536),u[p]=h-o*65536;u[0]+=o-1+37*(o-1)}function pt(u,p,h){for(var o,b=~(h-1),A=0;A<16;A++)o=b&(u[A]^p[A]),u[A]^=o,p[A]^=o}function bt(u,p){var h,o,b,A=n(),T=n();for(h=0;h<16;h++)T[h]=p[h];for(Pt(T),Pt(T),Pt(T),o=0;o<2;o++){for(A[0]=T[0]-65517,h=1;h<15;h++)A[h]=T[h]-65535-(A[h-1]>>16&1),A[h-1]&=65535;A[15]=T[15]-32767-(A[14]>>16&1),b=A[15]>>16&1,A[14]&=65535,pt(T,A,1-b)}for(h=0;h<16;h++)u[2*h]=T[h]&255,u[2*h+1]=T[h]>>8}function Yt(u,p){var h=new Uint8Array(32),o=new Uint8Array(32);return bt(h,u),bt(o,p),x(h,0,o,0)}function Ht(u){var p=new Uint8Array(32);return bt(p,u),p[0]&1}function It(u,p){var h;for(h=0;h<16;h++)u[h]=p[2*h]+(p[2*h+1]<<8);u[15]&=32767}function it(u,p,h){for(var o=0;o<16;o++)u[o]=p[o]+h[o]}function rt(u,p,h){for(var o=0;o<16;o++)u[o]=p[o]-h[o]}function Ce(u,p,h){var o,b,A=0,T=0,j=0,H=0,se=0,Q=0,De=0,ee=0,de=0,_e=0,ve=0,be=0,he=0,pe=0,me=0,ne=0,fe=0,X=0,ie=0,re=0,V=0,R=0,P=0,z=0,U=0,$=0,q=0,le=0,ge=0,we=0,ye=0,y=h[0],Ee=h[1],Re=h[2],Pe=h[3],Ae=h[4],Oe=h[5],Ne=h[6],qe=h[7],Le=h[8],Ke=h[9],Be=h[10],ze=h[11],Ye=h[12],Ge=h[13],Ze=h[14],Ve=h[15];o=p[0],A+=o*y,T+=o*Ee,j+=o*Re,H+=o*Pe,se+=o*Ae,Q+=o*Oe,De+=o*Ne,ee+=o*qe,de+=o*Le,_e+=o*Ke,ve+=o*Be,be+=o*ze,he+=o*Ye,pe+=o*Ge,me+=o*Ze,ne+=o*Ve,o=p[1],T+=o*y,j+=o*Ee,H+=o*Re,se+=o*Pe,Q+=o*Ae,De+=o*Oe,ee+=o*Ne,de+=o*qe,_e+=o*Le,ve+=o*Ke,be+=o*Be,he+=o*ze,pe+=o*Ye,me+=o*Ge,ne+=o*Ze,fe+=o*Ve,o=p[2],j+=o*y,H+=o*Ee,se+=o*Re,Q+=o*Pe,De+=o*Ae,ee+=o*Oe,de+=o*Ne,_e+=o*qe,ve+=o*Le,be+=o*Ke,he+=o*Be,pe+=o*ze,me+=o*Ye,ne+=o*Ge,fe+=o*Ze,X+=o*Ve,o=p[3],H+=o*y,se+=o*Ee,Q+=o*Re,De+=o*Pe,ee+=o*Ae,de+=o*Oe,_e+=o*Ne,ve+=o*qe,be+=o*Le,he+=o*Ke,pe+=o*Be,me+=o*ze,ne+=o*Ye,fe+=o*Ge,X+=o*Ze,ie+=o*Ve,o=p[4],se+=o*y,Q+=o*Ee,De+=o*Re,ee+=o*Pe,de+=o*Ae,_e+=o*Oe,ve+=o*Ne,be+=o*qe,he+=o*Le,pe+=o*Ke,me+=o*Be,ne+=o*ze,fe+=o*Ye,X+=o*Ge,ie+=o*Ze,re+=o*Ve,o=p[5],Q+=o*y,De+=o*Ee,ee+=o*Re,de+=o*Pe,_e+=o*Ae,ve+=o*Oe,be+=o*Ne,he+=o*qe,pe+=o*Le,me+=o*Ke,ne+=o*Be,fe+=o*ze,X+=o*Ye,ie+=o*Ge,re+=o*Ze,V+=o*Ve,o=p[6],De+=o*y,ee+=o*Ee,de+=o*Re,_e+=o*Pe,ve+=o*Ae,be+=o*Oe,he+=o*Ne,pe+=o*qe,me+=o*Le,ne+=o*Ke,fe+=o*Be,X+=o*ze,ie+=o*Ye,re+=o*Ge,V+=o*Ze,R+=o*Ve,o=p[7],ee+=o*y,de+=o*Ee,_e+=o*Re,ve+=o*Pe,be+=o*Ae,he+=o*Oe,pe+=o*Ne,me+=o*qe,ne+=o*Le,fe+=o*Ke,X+=o*Be,ie+=o*ze,re+=o*Ye,V+=o*Ge,R+=o*Ze,P+=o*Ve,o=p[8],de+=o*y,_e+=o*Ee,ve+=o*Re,be+=o*Pe,he+=o*Ae,pe+=o*Oe,me+=o*Ne,ne+=o*qe,fe+=o*Le,X+=o*Ke,ie+=o*Be,re+=o*ze,V+=o*Ye,R+=o*Ge,P+=o*Ze,z+=o*Ve,o=p[9],_e+=o*y,ve+=o*Ee,be+=o*Re,he+=o*Pe,pe+=o*Ae,me+=o*Oe,ne+=o*Ne,fe+=o*qe,X+=o*Le,ie+=o*Ke,re+=o*Be,V+=o*ze,R+=o*Ye,P+=o*Ge,z+=o*Ze,U+=o*Ve,o=p[10],ve+=o*y,be+=o*Ee,he+=o*Re,pe+=o*Pe,me+=o*Ae,ne+=o*Oe,fe+=o*Ne,X+=o*qe,ie+=o*Le,re+=o*Ke,V+=o*Be,R+=o*ze,P+=o*Ye,z+=o*Ge,U+=o*Ze,$+=o*Ve,o=p[11],be+=o*y,he+=o*Ee,pe+=o*Re,me+=o*Pe,ne+=o*Ae,fe+=o*Oe,X+=o*Ne,ie+=o*qe,re+=o*Le,V+=o*Ke,R+=o*Be,P+=o*ze,z+=o*Ye,U+=o*Ge,$+=o*Ze,q+=o*Ve,o=p[12],he+=o*y,pe+=o*Ee,me+=o*Re,ne+=o*Pe,fe+=o*Ae,X+=o*Oe,ie+=o*Ne,re+=o*qe,V+=o*Le,R+=o*Ke,P+=o*Be,z+=o*ze,U+=o*Ye,$+=o*Ge,q+=o*Ze,le+=o*Ve,o=p[13],pe+=o*y,me+=o*Ee,ne+=o*Re,fe+=o*Pe,X+=o*Ae,ie+=o*Oe,re+=o*Ne,V+=o*qe,R+=o*Le,P+=o*Ke,z+=o*Be,U+=o*ze,$+=o*Ye,q+=o*Ge,le+=o*Ze,ge+=o*Ve,o=p[14],me+=o*y,ne+=o*Ee,fe+=o*Re,X+=o*Pe,ie+=o*Ae,re+=o*Oe,V+=o*Ne,R+=o*qe,P+=o*Le,z+=o*Ke,U+=o*Be,$+=o*ze,q+=o*Ye,le+=o*Ge,ge+=o*Ze,we+=o*Ve,o=p[15],ne+=o*y,fe+=o*Ee,X+=o*Re,ie+=o*Pe,re+=o*Ae,V+=o*Oe,R+=o*Ne,P+=o*qe,z+=o*Le,U+=o*Ke,$+=o*Be,q+=o*ze,le+=o*Ye,ge+=o*Ge,we+=o*Ze,ye+=o*Ve,A+=38*fe,T+=38*X,j+=38*ie,H+=38*re,se+=38*V,Q+=38*R,De+=38*P,ee+=38*z,de+=38*U,_e+=38*$,ve+=38*q,be+=38*le,he+=38*ge,pe+=38*we,me+=38*ye,b=1,o=A+b+65535,b=Math.floor(o/65536),A=o-b*65536,o=T+b+65535,b=Math.floor(o/65536),T=o-b*65536,o=j+b+65535,b=Math.floor(o/65536),j=o-b*65536,o=H+b+65535,b=Math.floor(o/65536),H=o-b*65536,o=se+b+65535,b=Math.floor(o/65536),se=o-b*65536,o=Q+b+65535,b=Math.floor(o/65536),Q=o-b*65536,o=De+b+65535,b=Math.floor(o/65536),De=o-b*65536,o=ee+b+65535,b=Math.floor(o/65536),ee=o-b*65536,o=de+b+65535,b=Math.floor(o/65536),de=o-b*65536,o=_e+b+65535,b=Math.floor(o/65536),_e=o-b*65536,o=ve+b+65535,b=Math.floor(o/65536),ve=o-b*65536,o=be+b+65535,b=Math.floor(o/65536),be=o-b*65536,o=he+b+65535,b=Math.floor(o/65536),he=o-b*65536,o=pe+b+65535,b=Math.floor(o/65536),pe=o-b*65536,o=me+b+65535,b=Math.floor(o/65536),me=o-b*65536,o=ne+b+65535,b=Math.floor(o/65536),ne=o-b*65536,A+=b-1+37*(b-1),b=1,o=A+b+65535,b=Math.floor(o/65536),A=o-b*65536,o=T+b+65535,b=Math.floor(o/65536),T=o-b*65536,o=j+b+65535,b=Math.floor(o/65536),j=o-b*65536,o=H+b+65535,b=Math.floor(o/65536),H=o-b*65536,o=se+b+65535,b=Math.floor(o/65536),se=o-b*65536,o=Q+b+65535,b=Math.floor(o/65536),Q=o-b*65536,o=De+b+65535,b=Math.floor(o/65536),De=o-b*65536,o=ee+b+65535,b=Math.floor(o/65536),ee=o-b*65536,o=de+b+65535,b=Math.floor(o/65536),de=o-b*65536,o=_e+b+65535,b=Math.floor(o/65536),_e=o-b*65536,o=ve+b+65535,b=Math.floor(o/65536),ve=o-b*65536,o=be+b+65535,b=Math.floor(o/65536),be=o-b*65536,o=he+b+65535,b=Math.floor(o/65536),he=o-b*65536,o=pe+b+65535,b=Math.floor(o/65536),pe=o-b*65536,o=me+b+65535,b=Math.floor(o/65536),me=o-b*65536,o=ne+b+65535,b=Math.floor(o/65536),ne=o-b*65536,A+=b-1+37*(b-1),u[0]=A,u[1]=T,u[2]=j,u[3]=H,u[4]=se,u[5]=Q,u[6]=De,u[7]=ee,u[8]=de,u[9]=_e,u[10]=ve,u[11]=be,u[12]=he,u[13]=pe,u[14]=me,u[15]=ne}function tt(u,p){Ce(u,p,p)}function Wt(u,p){var h=n(),o;for(o=0;o<16;o++)h[o]=p[o];for(o=253;o>=0;o--)tt(h,h),o!==2&&o!==4&&Ce(h,h,p);for(o=0;o<16;o++)u[o]=h[o]}function ci(u,p){var h=n(),o;for(o=0;o<16;o++)h[o]=p[o];for(o=250;o>=0;o--)tt(h,h),o!==1&&Ce(h,h,p);for(o=0;o<16;o++)u[o]=h[o]}function sn(u,p,h){var o=new Uint8Array(32),b=new Float64Array(80),A,T,j=n(),H=n(),se=n(),Q=n(),De=n(),ee=n();for(T=0;T<31;T++)o[T]=p[T];for(o[31]=p[31]&127|64,o[0]&=248,It(b,h),T=0;T<16;T++)H[T]=b[T],Q[T]=j[T]=se[T]=0;for(j[0]=Q[0]=1,T=254;T>=0;--T)A=o[T>>>3]>>>(T&7)&1,pt(j,H,A),pt(se,Q,A),it(De,j,se),rt(j,j,se),it(se,H,Q),rt(H,H,Q),tt(Q,De),tt(ee,j),Ce(j,se,j),Ce(se,H,De),it(De,j,se),rt(j,j,se),tt(H,j),rt(se,Q,ee),Ce(j,se,c),it(j,j,Q),Ce(se,se,j),Ce(j,Q,ee),Ce(Q,H,b),tt(H,De),pt(j,H,A),pt(se,Q,A);for(T=0;T<16;T++)b[T+16]=j[T],b[T+32]=se[T],b[T+48]=H[T],b[T+64]=Q[T];var de=b.subarray(32),_e=b.subarray(16);return Wt(de,de),Ce(_e,_e,de),bt(u,_e),0}function fn(u,p){return sn(u,p,s)}function ai(u,p){return i(p,32),fn(u,p)}function on(u,p,h){var o=new Uint8Array(32);return sn(o,h,p),I(u,r,o,W)}var ui=ae,Ds=Ie;function Rs(u,p,h,o,b,A){var T=new Uint8Array(32);return on(T,b,A),ui(u,p,h,o,T)}function Ps(u,p,h,o,b,A){var T=new Uint8Array(32);return on(T,b,A),Ds(u,p,h,o,T)}var di=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _i(u,p,h,o){for(var b=new Int32Array(16),A=new Int32Array(16),T,j,H,se,Q,De,ee,de,_e,ve,be,he,pe,me,ne,fe,X,ie,re,V,R,P,z,U,$,q,le=u[0],ge=u[1],we=u[2],ye=u[3],y=u[4],Ee=u[5],Re=u[6],Pe=u[7],Ae=p[0],Oe=p[1],Ne=p[2],qe=p[3],Le=p[4],Ke=p[5],Be=p[6],ze=p[7],Ye=0;o>=128;){for(re=0;re<16;re++)V=8*re+Ye,b[re]=h[V+0]<<24|h[V+1]<<16|h[V+2]<<8|h[V+3],A[re]=h[V+4]<<24|h[V+5]<<16|h[V+6]<<8|h[V+7];for(re=0;re<80;re++)if(T=le,j=ge,H=we,se=ye,Q=y,De=Ee,ee=Re,de=Pe,_e=Ae,ve=Oe,be=Ne,he=qe,pe=Le,me=Ke,ne=Be,fe=ze,R=Pe,P=ze,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=(y>>>14|Le<<32-14)^(y>>>18|Le<<32-18)^(Le>>>41-32|y<<32-(41-32)),P=(Le>>>14|y<<32-14)^(Le>>>18|y<<32-18)^(y>>>41-32|Le<<32-(41-32)),z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,R=y&Ee^~y&Re,P=Le&Ke^~Le&Be,z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,R=di[re*2],P=di[re*2+1],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,R=b[re%16],P=A[re%16],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,X=$&65535|q<<16,ie=z&65535|U<<16,R=X,P=ie,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=(le>>>28|Ae<<32-28)^(Ae>>>34-32|le<<32-(34-32))^(Ae>>>39-32|le<<32-(39-32)),P=(Ae>>>28|le<<32-28)^(le>>>34-32|Ae<<32-(34-32))^(le>>>39-32|Ae<<32-(39-32)),z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,R=le&ge^le&we^ge&we,P=Ae&Oe^Ae&Ne^Oe&Ne,z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,de=$&65535|q<<16,fe=z&65535|U<<16,R=se,P=he,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=X,P=ie,z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,se=$&65535|q<<16,he=z&65535|U<<16,ge=T,we=j,ye=H,y=se,Ee=Q,Re=De,Pe=ee,le=de,Oe=_e,Ne=ve,qe=be,Le=he,Ke=pe,Be=me,ze=ne,Ae=fe,re%16===15)for(V=0;V<16;V++)R=b[V],P=A[V],z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=b[(V+9)%16],P=A[(V+9)%16],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,X=b[(V+1)%16],ie=A[(V+1)%16],R=(X>>>1|ie<<32-1)^(X>>>8|ie<<32-8)^X>>>7,P=(ie>>>1|X<<32-1)^(ie>>>8|X<<32-8)^(ie>>>7|X<<32-7),z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,X=b[(V+14)%16],ie=A[(V+14)%16],R=(X>>>19|ie<<32-19)^(ie>>>61-32|X<<32-(61-32))^X>>>6,P=(ie>>>19|X<<32-19)^(X>>>61-32|ie<<32-(61-32))^(ie>>>6|X<<32-6),z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,b[V]=$&65535|q<<16,A[V]=z&65535|U<<16;R=le,P=Ae,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=u[0],P=p[0],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,u[0]=le=$&65535|q<<16,p[0]=Ae=z&65535|U<<16,R=ge,P=Oe,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=u[1],P=p[1],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,u[1]=ge=$&65535|q<<16,p[1]=Oe=z&65535|U<<16,R=we,P=Ne,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=u[2],P=p[2],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,u[2]=we=$&65535|q<<16,p[2]=Ne=z&65535|U<<16,R=ye,P=qe,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=u[3],P=p[3],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,u[3]=ye=$&65535|q<<16,p[3]=qe=z&65535|U<<16,R=y,P=Le,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=u[4],P=p[4],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,u[4]=y=$&65535|q<<16,p[4]=Le=z&65535|U<<16,R=Ee,P=Ke,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=u[5],P=p[5],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,u[5]=Ee=$&65535|q<<16,p[5]=Ke=z&65535|U<<16,R=Re,P=Be,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=u[6],P=p[6],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,u[6]=Re=$&65535|q<<16,p[6]=Be=z&65535|U<<16,R=Pe,P=ze,z=P&65535,U=P>>>16,$=R&65535,q=R>>>16,R=u[7],P=p[7],z+=P&65535,U+=P>>>16,$+=R&65535,q+=R>>>16,U+=z>>>16,$+=U>>>16,q+=$>>>16,u[7]=Pe=$&65535|q<<16,p[7]=ze=z&65535|U<<16,Ye+=128,o-=128}return o}function Et(u,p,h){var o=new Int32Array(8),b=new Int32Array(8),A=new Uint8Array(256),T,j=h;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,b[0]=4089235720,b[1]=2227873595,b[2]=4271175723,b[3]=1595750129,b[4]=2917565137,b[5]=725511199,b[6]=4215389547,b[7]=327033209,_i(o,b,p,h),h%=128,T=0;T<h;T++)A[T]=p[j-h+T];for(A[h]=128,h=256-128*(h<112?1:0),A[h-9]=0,w(A,h-8,j/536870912|0,j<<3),_i(o,b,A,h),T=0;T<8;T++)w(u,8*T,o[T],b[T]);return 0}function ln(u,p){var h=n(),o=n(),b=n(),A=n(),T=n(),j=n(),H=n(),se=n(),Q=n();rt(h,u[1],u[0]),rt(Q,p[1],p[0]),Ce(h,h,Q),it(o,u[0],u[1]),it(Q,p[0],p[1]),Ce(o,o,Q),Ce(b,u[3],p[3]),Ce(b,b,d),Ce(A,u[2],p[2]),it(A,A,A),rt(T,o,h),rt(j,A,b),it(H,A,b),it(se,o,h),Ce(u[0],T,j),Ce(u[1],se,H),Ce(u[2],H,j),Ce(u[3],T,se)}function hi(u,p,h){var o;for(o=0;o<4;o++)pt(u[o],p[o],h)}function Dn(u,p){var h=n(),o=n(),b=n();Wt(b,p[2]),Ce(h,p[0],b),Ce(o,p[1],b),bt(u,o),u[31]^=Ht(h)<<7}function Rn(u,p,h){var o,b;for(lt(u[0],f),lt(u[1],l),lt(u[2],l),lt(u[3],f),b=255;b>=0;--b)o=h[b/8|0]>>(b&7)&1,hi(u,p,o),ln(p,u),ln(u,u),hi(u,p,o)}function cn(u,p){var h=[n(),n(),n(),n()];lt(h[0],_),lt(h[1],m),lt(h[2],l),Ce(h[3],_,m),Rn(u,h,p)}function Pn(u,p,h){var o=new Uint8Array(64),b=[n(),n(),n(),n()],A;for(h||i(p,32),Et(o,p,32),o[0]&=248,o[31]&=127,o[31]|=64,cn(b,o),Dn(u,b),A=0;A<32;A++)p[A+32]=u[A];return 0}var an=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function In(u,p){var h,o,b,A;for(o=63;o>=32;--o){for(h=0,b=o-32,A=o-12;b<A;++b)p[b]+=h-16*p[o]*an[b-(o-32)],h=Math.floor((p[b]+128)/256),p[b]-=h*256;p[b]+=h,p[o]=0}for(h=0,b=0;b<32;b++)p[b]+=h-(p[31]>>4)*an[b],h=p[b]>>8,p[b]&=255;for(b=0;b<32;b++)p[b]-=h*an[b];for(o=0;o<32;o++)p[o+1]+=p[o]>>8,u[o]=p[o]&255}function Mn(u){var p=new Float64Array(64),h;for(h=0;h<64;h++)p[h]=u[h];for(h=0;h<64;h++)u[h]=0;In(u,p)}function mi(u,p,h,o){var b=new Uint8Array(64),A=new Uint8Array(64),T=new Uint8Array(64),j,H,se=new Float64Array(64),Q=[n(),n(),n(),n()];Et(b,o,32),b[0]&=248,b[31]&=127,b[31]|=64;var De=h+64;for(j=0;j<h;j++)u[64+j]=p[j];for(j=0;j<32;j++)u[32+j]=b[32+j];for(Et(T,u.subarray(32),h+32),Mn(T),cn(Q,T),Dn(u,Q),j=32;j<64;j++)u[j]=o[j];for(Et(A,u,h+64),Mn(A),j=0;j<64;j++)se[j]=0;for(j=0;j<32;j++)se[j]=T[j];for(j=0;j<32;j++)for(H=0;H<32;H++)se[j+H]+=A[j]*b[H];return In(u.subarray(32),se),De}function Is(u,p){var h=n(),o=n(),b=n(),A=n(),T=n(),j=n(),H=n();return lt(u[2],l),It(u[1],p),tt(b,u[1]),Ce(A,b,a),rt(b,b,u[2]),it(A,u[2],A),tt(T,A),tt(j,T),Ce(H,j,T),Ce(h,H,b),Ce(h,h,A),ci(h,h),Ce(h,h,b),Ce(h,h,A),Ce(h,h,A),Ce(u[0],h,A),tt(o,u[0]),Ce(o,o,A),Yt(o,b)&&Ce(u[0],u[0],g),tt(o,u[0]),Ce(o,o,A),Yt(o,b)?-1:(Ht(u[0])===p[31]>>7&&rt(u[0],f,u[0]),Ce(u[3],u[0],u[1]),0)}function Ln(u,p,h,o){var b,A=new Uint8Array(32),T=new Uint8Array(64),j=[n(),n(),n(),n()],H=[n(),n(),n(),n()];if(h<64||Is(H,o))return-1;for(b=0;b<h;b++)u[b]=p[b];for(b=0;b<32;b++)u[b+32]=o[b];if(Et(T,u,h),Mn(T),Rn(j,H,T),cn(H,p.subarray(32)),ln(j,H),Dn(A,j),h-=64,x(p,0,A,0)){for(b=0;b<h;b++)u[b]=0;return-1}for(b=0;b<h;b++)u[b]=p[b+64];return h}var Un=32,un=24,Jt=32,Mt=16,Gt=32,dn=32,Zt=32,Vt=32,jn=32,pi=un,Ms=Jt,Ls=Mt,vt=64,Ct=32,Lt=64,$n=32,Kn=64;e.lowlevel={crypto_core_hsalsa20:I,crypto_stream_xor:Te,crypto_stream:J,crypto_stream_salsa20_xor:ue,crypto_stream_salsa20:Y,crypto_onetimeauth:st,crypto_onetimeauth_verify:mt,crypto_verify_16:C,crypto_verify_32:x,crypto_secretbox:ae,crypto_secretbox_open:Ie,crypto_scalarmult:sn,crypto_scalarmult_base:fn,crypto_box_beforenm:on,crypto_box_afternm:ui,crypto_box:Rs,crypto_box_open:Ps,crypto_box_keypair:ai,crypto_hash:Et,crypto_sign:mi,crypto_sign_keypair:Pn,crypto_sign_open:Ln,crypto_secretbox_KEYBYTES:Un,crypto_secretbox_NONCEBYTES:un,crypto_secretbox_ZEROBYTES:Jt,crypto_secretbox_BOXZEROBYTES:Mt,crypto_scalarmult_BYTES:Gt,crypto_scalarmult_SCALARBYTES:dn,crypto_box_PUBLICKEYBYTES:Zt,crypto_box_SECRETKEYBYTES:Vt,crypto_box_BEFORENMBYTES:jn,crypto_box_NONCEBYTES:pi,crypto_box_ZEROBYTES:Ms,crypto_box_BOXZEROBYTES:Ls,crypto_sign_BYTES:vt,crypto_sign_PUBLICKEYBYTES:Ct,crypto_sign_SECRETKEYBYTES:Lt,crypto_sign_SEEDBYTES:$n,crypto_hash_BYTES:Kn,gf:n,D:a,L:an,pack25519:bt,unpack25519:It,M:Ce,A:it,S:tt,Z:rt,pow2523:ci,add:ln,set25519:lt,modL:In,scalarmult:Rn,scalarbase:cn};function bi(u,p){if(u.length!==Un)throw new Error("bad key size");if(p.length!==un)throw new Error("bad nonce size")}function Us(u,p){if(u.length!==Zt)throw new Error("bad public key size");if(p.length!==Vt)throw new Error("bad secret key size")}function ft(){for(var u=0;u<arguments.length;u++)if(!(arguments[u]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function vi(u){for(var p=0;p<u.length;p++)u[p]=0}e.randomBytes=function(u){var p=new Uint8Array(u);return i(p,u),p},e.secretbox=function(u,p,h){ft(u,p,h),bi(h,p);for(var o=new Uint8Array(Jt+u.length),b=new Uint8Array(o.length),A=0;A<u.length;A++)o[A+Jt]=u[A];return ae(b,o,o.length,p,h),b.subarray(Mt)},e.secretbox.open=function(u,p,h){ft(u,p,h),bi(h,p);for(var o=new Uint8Array(Mt+u.length),b=new Uint8Array(o.length),A=0;A<u.length;A++)o[A+Mt]=u[A];return o.length<32||Ie(b,o,o.length,p,h)!==0?null:b.subarray(Jt)},e.secretbox.keyLength=Un,e.secretbox.nonceLength=un,e.secretbox.overheadLength=Mt,e.scalarMult=function(u,p){if(ft(u,p),u.length!==dn)throw new Error("bad n size");if(p.length!==Gt)throw new Error("bad p size");var h=new Uint8Array(Gt);return sn(h,u,p),h},e.scalarMult.base=function(u){if(ft(u),u.length!==dn)throw new Error("bad n size");var p=new Uint8Array(Gt);return fn(p,u),p},e.scalarMult.scalarLength=dn,e.scalarMult.groupElementLength=Gt,e.box=function(u,p,h,o){var b=e.box.before(h,o);return e.secretbox(u,p,b)},e.box.before=function(u,p){ft(u,p),Us(u,p);var h=new Uint8Array(jn);return on(h,u,p),h},e.box.after=e.secretbox,e.box.open=function(u,p,h,o){var b=e.box.before(h,o);return e.secretbox.open(u,p,b)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var u=new Uint8Array(Zt),p=new Uint8Array(Vt);return ai(u,p),{publicKey:u,secretKey:p}},e.box.keyPair.fromSecretKey=function(u){if(ft(u),u.length!==Vt)throw new Error("bad secret key size");var p=new Uint8Array(Zt);return fn(p,u),{publicKey:p,secretKey:new Uint8Array(u)}},e.box.publicKeyLength=Zt,e.box.secretKeyLength=Vt,e.box.sharedKeyLength=jn,e.box.nonceLength=pi,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(u,p){if(ft(u,p),p.length!==Lt)throw new Error("bad secret key size");var h=new Uint8Array(vt+u.length);return mi(h,u,u.length,p),h},e.sign.open=function(u,p){if(ft(u,p),p.length!==Ct)throw new Error("bad public key size");var h=new Uint8Array(u.length),o=Ln(h,u,u.length,p);if(o<0)return null;for(var b=new Uint8Array(o),A=0;A<b.length;A++)b[A]=h[A];return b},e.sign.detached=function(u,p){for(var h=e.sign(u,p),o=new Uint8Array(vt),b=0;b<o.length;b++)o[b]=h[b];return o},e.sign.detached.verify=function(u,p,h){if(ft(u,p,h),p.length!==vt)throw new Error("bad signature size");if(h.length!==Ct)throw new Error("bad public key size");var o=new Uint8Array(vt+u.length),b=new Uint8Array(vt+u.length),A;for(A=0;A<vt;A++)o[A]=p[A];for(A=0;A<u.length;A++)o[A+vt]=u[A];return Ln(b,o,o.length,h)>=0},e.sign.keyPair=function(){var u=new Uint8Array(Ct),p=new Uint8Array(Lt);return Pn(u,p),{publicKey:u,secretKey:p}},e.sign.keyPair.fromSecretKey=function(u){if(ft(u),u.length!==Lt)throw new Error("bad secret key size");for(var p=new Uint8Array(Ct),h=0;h<p.length;h++)p[h]=u[32+h];return{publicKey:p,secretKey:new Uint8Array(u)}},e.sign.keyPair.fromSeed=function(u){if(ft(u),u.length!==$n)throw new Error("bad seed size");for(var p=new Uint8Array(Ct),h=new Uint8Array(Lt),o=0;o<32;o++)h[o]=u[o];return Pn(p,h,!0),{publicKey:p,secretKey:h}},e.sign.publicKeyLength=Ct,e.sign.secretKeyLength=Lt,e.sign.seedLength=$n,e.sign.signatureLength=vt,e.hash=function(u){ft(u);var p=new Uint8Array(Kn);return Et(p,u,u.length),p},e.hash.hashLength=Kn,e.verify=function(u,p){return ft(u,p),u.length===0||p.length===0||u.length!==p.length?!1:v(u,0,p,0,u.length)===0},e.setPRNG=function(u){i=u},function(){var u=typeof self<"u"?self.crypto||self.msCrypto:null;if(u&&u.getRandomValues){var p=65536;e.setPRNG(function(h,o){var b,A=new Uint8Array(o);for(b=0;b<o;b+=p)u.getRandomValues(A.subarray(b,b+Math.min(o-b,p)));for(b=0;b<o;b++)h[b]=A[b];vi(A)})}else typeof cs<"u"&&(u=vl,u&&u.randomBytes&&e.setPRNG(function(h,o){var b,A=u.randomBytes(o);for(b=0;b<o;b++)h[b]=A[b];vi(A)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})}),Ft=ls(function(t){(function(e,n){t.exports?t.exports=n():(e.nacl||(e.nacl={}),e.nacl.util=n())})(hl,function(){var e={};function n(i){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(i))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(i){if(typeof i!="string")throw new TypeError("expected string");var r,s=unescape(encodeURIComponent(i)),f=new Uint8Array(s.length);for(r=0;r<s.length;r++)f[r]=s.charCodeAt(r);return f},e.encodeUTF8=function(i){var r,s=[];for(r=0;r<i.length;r++)s.push(String.fromCharCode(i[r]));return decodeURIComponent(escape(s.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(i){return Buffer.from(i).toString("base64")},e.decodeBase64=function(i){return n(i),new Uint8Array(Array.prototype.slice.call(Buffer.from(i,"base64"),0))}):(e.encodeBase64=function(i){return new Buffer(i).toString("base64")},e.decodeBase64=function(i){return n(i),new Uint8Array(Array.prototype.slice.call(new Buffer(i,"base64"),0))}):(e.encodeBase64=function(i){var r,s=[],f=i.length;for(r=0;r<f;r++)s.push(String.fromCharCode(i[r]));return btoa(s.join(""))},e.decodeBase64=function(i){n(i);var r,s=atob(i),f=new Uint8Array(s.length);for(r=0;r<s.length;r++)f[r]=s.charCodeAt(r);return f}),e})});function gl(t){return typeof t>"u"||t==null?[]:Array.isArray(t)?t:[t]}function An(t){return Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("")}function Vn(t){const e=t.match(/.{1,2}(?=(.{2})+(?!.))|.{1,2}$/g);return new Uint8Array(e.map(n=>parseInt(n,16)))}function as(t,e=8){const n=new Array(e).fill(0);for(let i=0;i<n.length;i++){const r=t&255;n[i]=r,t=(t-r)/256}return n}ut.util=Ft;function us(){const t=ut.box.keyPair(),e=An(t.publicKey),n=An(t.secretKey);return{privateKey:t.secretKey,publicKey:t.publicKey,privateKeyHex:n,publicKeyHex:e}}ut.util=Ft;function ds(t){return t.publicKeyHex&&!t.publicKey&&(t.publicKey=Vn(t.publicKeyHex)),t.privateKeyHex&&!t.privateKey&&(t.privateKey=Vn(t.privateKeyHex)),t}function yl(t){return t!=null&&t.constructor==Object}function wl(t,e){const n=new Uint8Array(t.length+1),i=new Uint8Array(1);return i[0]=e,n.set(i),n.set(t,i.length),n}var kl=Ot;/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 * @license MIT ( Joyent)
 */function Ot(t,e){var n={seen:[],stylize:xl};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_s(e)?n.showHidden=e:e&&Nl(n,e),$t(n.showHidden)&&(n.showHidden=!1),$t(n.depth)&&(n.depth=2),$t(n.colors)&&(n.colors=!1),$t(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Al),Sn(n,t,n.depth)}Ot.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Ot.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function xl(t,e){return t}function _s(t){return typeof t=="boolean"}function $t(t){return t===void 0}function Al(t,e){var n=Ot.styles[e];return n?"\x1B["+Ot.colors[n][0]+"m"+t+"\x1B["+Ot.colors[n][1]+"m":t}function Fn(t){return typeof t=="function"}function hs(t){return typeof t=="string"}function Sl(t){return typeof t=="number"}function ms(t){return t===null}function ps(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yn(t){return Nn(t)&&si(t)==="[object RegExp]"}function Nn(t){return typeof t=="object"&&t!==null}function Hn(t){return Nn(t)&&(si(t)==="[object Error]"||t instanceof Error)}function Pr(t){return Nn(t)&&si(t)==="[object Date]"}function si(t){return Object.prototype.toString.call(t)}function El(t){var e={};return t.forEach(function(n,i){e[n]=!0}),e}function Cl(t,e,n,i,r){for(var s=[],f=0,l=e.length;f<l;++f)ps(e,String(f))?s.push(Qn(t,e,n,i,String(f),!0)):s.push("");return r.forEach(function(c){c.match(/^\d+$/)||s.push(Qn(t,e,n,i,c,!0))}),s}function Wn(t){return"["+Error.prototype.toString.call(t)+"]"}function Sn(t,e,n){if(t.customInspect&&e&&Fn(e.inspect)&&e.inspect!==Ot&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(n,t);return hs(i)||(i=Sn(t,i,n)),i}var r=Tl(t,e);if(r)return r;var s=Object.keys(e),f=El(s);try{t.showHidden&&Object.getOwnPropertyNames&&(s=Object.getOwnPropertyNames(e))}catch{}if(Hn(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Wn(e);if(s.length===0){if(Fn(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(Yn(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Pr(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Hn(e))return Wn(e)}var c="",a=!1,d=["{","}"];if(Array.isArray(e)&&(a=!0,d=["[","]"]),Fn(e)){var _=e.name?": "+e.name:"";c=" [Function"+_+"]"}if(Yn(e)&&(c=" "+RegExp.prototype.toString.call(e)),Pr(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Hn(e)&&(c=" "+Wn(e)),s.length===0&&(!a||e.length==0))return d[0]+c+d[1];if(n<0)return Yn(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var m;return a?m=Cl(t,e,n,f,s):m=s.map(function(g){return Qn(t,e,n,f,g,a)}),t.seen.pop(),Ol(m,c,d)}function Qn(t,e,n,i,r,s){var f,l,c;c={value:void 0};try{c.value=e[r]}catch{}try{Object.getOwnPropertyDescriptor&&(c=Object.getOwnPropertyDescriptor(e,r)||c)}catch{}if(c.get?c.set?l=t.stylize("[Getter/Setter]","special"):l=t.stylize("[Getter]","special"):c.set&&(l=t.stylize("[Setter]","special")),ps(i,r)||(f="["+r+"]"),l||(t.seen.indexOf(c.value)<0?(ms(n)?l=Sn(t,c.value,null):l=Sn(t,c.value,n-1),l.indexOf(`
`)>-1&&(s?l=l.split(`
`).map(function(a){return"  "+a}).join(`
`).substr(2):l=`
`+l.split(`
`).map(function(a){return"   "+a}).join(`
`))):l=t.stylize("[Circular]","special")),$t(f)){if(s&&r.match(/^\d+$/))return l;f=JSON.stringify(""+r),f.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-2),f=t.stylize(f,"name")):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=t.stylize(f,"string"))}return f+": "+l}function Tl(t,e){if($t(e))return t.stylize("undefined","undefined");if(hs(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(Sl(e))return t.stylize(""+e,"number");if(_s(e))return t.stylize(""+e,"boolean");if(ms(e))return t.stylize("null","null")}function Ol(t,e,n){var i=t.reduce(function(r,s){return s.indexOf(`
`)>=0,r+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function Nl(t,e){if(!e||!Nn(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}function gt(t,e,...n){try{e==console.log?e(`${new Date().toLocaleString()} \u2192 ${kl(...n).replace(/^'/,"").replace(/'$/,"")}`):typeof e=="function"?e(...n):e&&e.logOutput(t,{source:"connectome"},...n)}catch(i){console.log(i)}}class Dl{write(e,...n){gt(void 0,e,...n)}red(e,...n){gt("red",e,...n)}green(e,...n){gt("green",e,...n)}yellow(e,...n){gt("yellow",e,...n)}blue(e,...n){gt("blue",e,...n)}cyan(e,...n){gt("cyan",e,...n)}magenta(e,...n){gt("magenta",e,...n)}gray(e,...n){gt("gray",e,...n)}white(e,...n){gt("white",e,...n)}}var Me=new Dl;ut.util=Ft;function Rl({data:t,connector:e}){const{log:n}=e;yl(t)&&(t=JSON.stringify(t));const i=new Uint8Array(as(2*e.sentCount,24));if(e.closed())Me.red(n,`\u26A0\uFE0F Warning: "${t}" was not sent because connector is not ready`);else if(e.sentCount>1){let r=0;typeof t=="string"&&(r=1);const s=r==1?ut.util.decodeUTF8(t):t,f=wl(s,r),l=ut.secretbox(f,i,e.sharedSecret);e.verbose&&(Me.green(n,`Connector ${e.endpoint} \u2192 Sending encrypted message #${e.sentCount} \u21B4`),Me.gray(n,t)),e.connection.websocket.send(l)}else e.verbose&&(Me.green(n,`Connector ${e.endpoint} \u2192 Sending message #${e.sentCount} \u21B4`),Me.gray(n,t)),e.connection.websocket.send(t)}ut.util=Ft;function Pl(t){return Object.keys(t).includes("result")||Object.keys(t).includes("error")}function bs({jsonData:t,encryptedData:e,rawMessage:n,wasEncrypted:i,connector:r}){const{log:s}=r;r.lastMessageAt=Date.now();const f=new Uint8Array(as(2*r.receivedCount+1,24));if(r.verbose&&!i&&Me.magenta(s,`Connector ${r.endpoint} \u2192 Received message #${r.receivedCount} \u21B4`),t)t.jsonrpc?Pl(t)?(r.verbose&&!i&&(Me.magenta(s,`Connector ${r.endpoint} received plain-text rpc result \u21B4`),Me.gray(s,t)),r.rpcClient.jsonrpcMsgReceive(n)):r.emit("json_rpc",n):r.emit("receive",{jsonData:t,rawMessage:n});else if(e){r.verbose=="extra"&&(Me.magenta(s,`Connector ${r.endpoint} received bytes \u21B4`),Me.gray(s,e),Me.magenta(s,`Connector ${r.endpoint} decrypting with shared secret ${r.sharedSecret}...`));const l=ut.secretbox.open(e,f,r.sharedSecret),c=l[0],a=l.subarray(1);if(c==1){const d=ut.util.encodeUTF8(a);r.verbose&&Me.write(s,`Received message: ${d}`);try{const _=JSON.parse(d);_.jsonrpc?bs({jsonData:_,rawMessage:d,wasEncrypted:!0,connector:r}):_.state?r.emit("receive_state",_.state):_.diff?r.emit("receive_diff",_.diff):_.signal?r.emit(_.signal,_.data):_.stateField?r.emit("receive_state_field",_.stateField):r.emit("receive",{jsonData:_,rawMessage:d})}catch(_){throw Me.red(s,"Couldn't parse json message although the flag was for string ..."),Me.red(s,d),_}}else r.emit("receive_binary",a)}}ut.util=Ft;function Il({connector:t,afterFirstStep:e=()=>{}}){const{clientPrivateKey:n,clientPublicKey:i,clientPublicKeyHex:r,protocol:s,tag:f,endpoint:l,verbose:c}=t;return new Promise((a,d)=>{t.remoteObject("Auth").call("exchangePubkeys",{pubkey:r}).then(_=>{const m=ut.box.before(Vn(_),n);e({sharedSecret:m,remotePubkeyHex:_}),c&&Me.write(t.log,`Connector ${l} established shared secret through diffie-hellman exchange.`),t.remoteObject("Auth").call("finalizeHandshake",{protocol:s}).then(g=>{if(g&&g.error)console.log(g.error);else{a();const w=f?` (${f})`:"";Me.cyan(t.log,`${l}${w} \u2713 Connection [ ${s||'"no-name"'} ] ready`)}}).catch(d)}).catch(d)})}class Ml extends On{constructor(e){super(),this.connector=e}send(...e){this.connector.send(...e)}}var dt={PARSE_ERROR:-32700,INVALID_REQUEST:-32600,METHOD_NOT_FOUND:-32601,INVALID_PARAMS:-32602,REMOTE_INTERNAL_ERROR:-32603,TIMEOUT:-32701};class vs{constructor({transports:e}){if(!e)throw new Error("TRANSPORT_REQUIRED");this.transportsToRegister=e,this.methods={}}setMethodPrefix(e){this.methodPrefix=e}expose(e){this.methods=e}registerTransport(e){e.onData(this._processRequest.bind(this,e))}async _processRequest(e,n){const i=JSON.parse(n);let r;return Array.isArray(i)?r=await Promise.all(i.map(s=>this._callMethod(s,e))):r=await this._callMethod(i,e),JSON.stringify(r)}async _callMethod(e,n){if(!e.hasOwnProperty("method"))return;const{method:r,params:s=[],id:f}=e;let l=r;if(l.includes("::")){const[d,_]=l.split("::");if(l=_,this.methodPrefix&&d!=this.methodPrefix)return}const c=!this.methods[l]||typeof this.methods[l]!="function"||l==="constructor"||l.startsWith("_")||this.methods[l]===Object.prototype[l];let a={};if(c)a={jsonrpc:"2.0",id:f,error:{code:dt.METHOD_NOT_FOUND,message:`Method [${l}] not found on remote target object`}};else{this.currentTransport=n;try{const d=await this.methods[l].apply(this.methods,s);if(!f)return;a={jsonrpc:"2.0",result:typeof d>"u"?null:d,id:f}}catch(d){console.log(`Exposed RPC method ${r} internal error:`),console.log(d),console.log("Sending this error as a result to calling client ..."),a={jsonrpc:"2.0",error:{code:dt.REMOTE_INTERNAL_ERROR,message:`Method [${r}] internal error: ${d.stack}`},id:f}}}return a}run(){for(const e of this.transportsToRegister)this.registerTransport(e);this.transportsToRegister=[]}}class Rt extends Error{constructor(e={}){if(super(),!e.code)throw new Error("Code required");if(!e.message)throw new Error("Message required");this.code=e.code,this.message=e.message}}class Ll extends Rt{constructor(e){super({code:dt.METHOD_NOT_FOUND,message:e||"Method not found"})}}class Ul extends Rt{constructor(){super({code:dt.INVALID_PARAMS,message:"Invalid params"})}}class jl extends Rt{constructor(e){super({code:dt.REMOTE_INTERNAL_ERROR,message:`Error originating at remote endpoint: ${e}`||"Remote Internal error"})}}class $l extends Rt{constructor(){super({code:dt.PARSE_ERROR,message:"Parse error"})}}class Kl extends Rt{constructor(){super({code:dt.INVALID_REQUEST,message:"Invalid request"})}}class gs extends Rt{}class Bl extends gs{constructor(e,n){super({code:dt.TIMEOUT,message:`Request exceeded maximum execution time (${n}ms): ${e}`})}}var Jn={Base:Rt,MethodNotFound:Ll,InvalidRequest:Kl,InvalidParams:Ul,RemoteInternalError:jl,ServerError:gs,ParseError:$l,RequestTimeout:Bl};class ys{constructor({transport:e,requestTimeout:n=2e4}){if(!e)throw new Error("TRANSPORT_REQUIRED");this.transport=e,this.requestTimeout=n,this.pendingRequest={},this.initialized=!1}setMethodPrefix(e){this.methodPrefix=e}async callMethod(e,n){this._init();const i=this.methodPrefix?`${this.methodPrefix}::${e}`:e,r=this._makeRequestObject({method:i,params:n});return this._sendRequest({object:r,id:r.id})}notify(e,n){this._init();const i=this._makeRequestObject({method:e,params:n,mode:"notify"});return this.transport.sendData(JSON.stringify(i)),!0}async runBatch(e){const n=this._generateId();let i=!0;const r=[];for(const[s,f,l]of e){const c=this._makeRequestObject({method:s,params:f,mode:l,batchId:n});c.id&&(i=!1),r.push(c)}return i?this.transport.sendData(JSON.stringify(r)):this._sendRequest({object:r,id:n})}_init(){this.initialized||(this.transport.onData(this._processResponse.bind(this)),this.initialized=!0)}_sendRequest({object:e,id:n}){const i=JSON.stringify(e);return new Promise((r,s)=>{this.pendingRequest[n]={resolve:r,reject:s,sentObject:e},setTimeout(()=>{this.pendingRequest[n]&&(delete this.pendingRequest[n],s(new Jn.RequestTimeout(i,this.requestTimeout)))},this.requestTimeout);try{this.transport.sendData(i)}catch(f){delete this.pendingRequest[n],s(f)}})}_processResponse(e){const n=JSON.parse(e);Array.isArray(n)?this._processBatchResponse(n):this._processSingleCallResponse(n)}_processSingleCallResponse(e){const n=e.hasOwnProperty("result")||!1,i=e.hasOwnProperty("error");if(!n&&!i)return;const r=this.pendingRequest[e.id];if(delete this.pendingRequest[e.id],!!r){if(n)r.resolve(e.result);else if(i){const s=this._makeErrorObject(e.error);r.reject(s)}}}_processBatchResponse(e){let n;const i={},r=[];for(const a of e)a.id?(n||(n=a.id.split("|")[0]),i[a.id]=a):a.error&&r.push(a.error);if(!this.pendingRequest[n])return;const{sentObject:s,resolve:f}=this.pendingRequest[n];delete this.pendingRequest[n];const l=[];let c=0;for(const a of s){if(!a.id){l.push(null);continue}const d=i[a.id];d?d.hasOwnProperty("result")||!1?l.push({success:!0,result:d.result}):l.push({success:!1,result:this._makeErrorObject(d.error)}):(l.push({success:!1,error:this._makeErrorObject(r[c])}),c++)}f(l)}_makeRequestObject({method:e,params:n,mode:i,batchId:r}){const s={jsonrpc:"2.0",method:e};return n&&n.length&&(s.params=n),i!=="notify"&&(s.id=r?`${r}|${this._generateId()}`:this._generateId()),s}_makeErrorObject(e){const n={[dt.METHOD_NOT_FOUND]:()=>new Jn.MethodNotFound(e.message),[dt.REMOTE_INTERNAL_ERROR]:()=>new Jn.RemoteInternalError(e.message)}[e.code];return n()}_generateId(){const e="bjectSymhasOwnProp-0123456789ABCDEFGHIJKLMNQRTUVWXYZ_dfgiklquvxz";let n=10,i="";for(;0<n--;)i+=e[Math.random()*64|0];return i}}function zl(t){const e=Ir(t.callMethod.bind(t)),n=Ir(t.notify.bind(t));return new Proxy(t,{get(i,r){if(r==="notify")return n;if(r==="callMethod")return e;if(r!=="then")return r==="setMethodPrefix"?(...s)=>t.setMethodPrefix(s):(...s)=>i.callMethod.call(i,r,s)}})}function Ir(t){return new Proxy(t,{get(e,n){return(...i)=>e.call(null,n,i)},apply(e,n,i){return e.apply(null,i)}})}class ql extends ys{constructor(...e){return super(...e),zl(this)}}class Fl{constructor(e){this.channel=e}onData(e){this.channel.on("json_rpc",e)}sendData(e){this.channel.send(e)}}class ws{constructor(e){this.channel=e}onData(e){this.channel.on("json_rpc",async n=>{const i=await e(n);!i||this.channel.send(i)})}}var Yl=Object.freeze({__proto__:null,MoleServer:vs,MoleClient:ys,MoleClientProxified:ql,ClientTransport:Fl,ServerTransport:ws});class Hl extends Error{constructor(e,n){super(e),this.name=this.constructor.name,this.errorCode=n}errorCode(){return this.errorCode}}const{MoleClient:Wl,ClientTransport:Jl}=Yl;class Gl{constructor(e,n,i){this.moleChannel=new Ml(e),this.methodPrefix=n,this.connectorOrServersideChannel=e,this.client=new Wl({requestTimeout:i,transport:new Jl(this.moleChannel)})}jsonrpcMsgReceive(e){this.moleChannel.emit("json_rpc",e)}call(e,n){return this.connectorOrServersideChannel.closed()?new Promise((i,r)=>{r(new Hl(`Method call [${this.methodPrefix}::${e}] on closed channel or connector ignored. Please add a check for closed channel in your code.`,"CLOSED_CHANNEL"))}):this.client.callMethod(`${this.methodPrefix}::${e}`,n)}}const Zl=1e4;class Vl{constructor(e,n){this.connectorOrServersideChannel=e,this.remoteObjects={},this.requestTimeout=n||Zl}remoteObject(e){return this.remoteObjects[e]||(this.remoteObjects[e]=new Gl(this.connectorOrServersideChannel,e,this.requestTimeout)),this.remoteObjects[e]}jsonrpcMsgReceive(e){for(const n of Object.values(this.remoteObjects))n.jsonrpcMsgReceive(e)}}class Ql{constructor({serversideChannel:e,serverMethods:n,methodPrefix:i}){const r=[new ws(e)];this.server=new vs({transports:r}),this.server.expose(n),this.server.setMethodPrefix(i),this.server.run()}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */var Xl=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},t(e,n)};return function(e,n){t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),ec=Object.prototype.hasOwnProperty;function Xn(t,e){return ec.call(t,e)}function ei(t){if(Array.isArray(t)){for(var n=new Array(t.length),e=0;e<n.length;e++)n[e]=""+e;return n}if(Object.keys)return Object.keys(t);var n=[];for(var i in t)Xn(t,i)&&n.push(i);return n}function ot(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function ti(t){for(var e=0,n=t.length,i;e<n;){if(i=t.charCodeAt(e),i>=48&&i<=57){e++;continue}return!1}return!0}function Tt(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function ks(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function ni(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(ni(t[e]))return!0}else if(typeof t=="object"){for(var i=ei(t),r=i.length,e=0;e<r;e++)if(ni(t[i[e]]))return!0}}return!1}function Mr(t,e){var n=[t];for(var i in e){var r=typeof e[i]=="object"?JSON.stringify(e[i],null,2):e[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var xs=function(t){Xl(e,t);function e(n,i,r,s,f){var l=this.constructor,c=t.call(this,Mr(n,{name:i,index:r,operation:s,tree:f}))||this;return c.name=i,c.index=r,c.operation=s,c.tree=f,Object.setPrototypeOf(c,l.prototype),c.message=Mr(n,{name:i,index:r,operation:s,tree:f}),c}return e}(Error),Fe=xs,tc=ot,Kt={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var i=t[e];return delete t[e],{newDocument:n,removed:i}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:function(t,e,n){var i=En(n,this.path);i&&(i=ot(i));var r=Nt(n,{op:"remove",path:this.from}).removed;return Nt(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(t,e,n){var i=En(n,this.from);return Nt(n,{op:"add",path:this.path,value:ot(i)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:rn(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},nc={add:function(t,e,n){return ti(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var i=t.splice(e,1);return{newDocument:n,removed:i[0]}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:Kt.move,copy:Kt.copy,test:Kt.test,_get:Kt._get};function En(t,e){if(e=="")return t;var n={op:"_get",path:e};return Nt(t,n),n.value}function Nt(t,e,n,i,r,s){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(e,0,t,e.path):Cn(e,0)),e.path===""){var f={newDocument:t};if(e.op==="add")return f.newDocument=e.value,f;if(e.op==="replace")return f.newDocument=e.value,f.removed=t,f;if(e.op==="move"||e.op==="copy")return f.newDocument=En(t,e.from),e.op==="move"&&(f.removed=t),f;if(e.op==="test"){if(f.test=rn(t,e.value),f.test===!1)throw new Fe("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return f.newDocument=t,f}else{if(e.op==="remove")return f.removed=t,f.newDocument=null,f;if(e.op==="_get")return e.value=t,f;if(n)throw new Fe("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return f}}else{i||(t=ot(t));var l=e.path||"",c=l.split("/"),a=t,d=1,_=c.length,m=void 0,g=void 0,w=void 0;for(typeof n=="function"?w=n:w=Cn;;){if(g=c[d],r&&g=="__proto__")throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&m===void 0&&(a[g]===void 0?m=c.slice(0,d).join("/"):d==_-1&&(m=e.path),m!==void 0&&w(e,0,t,m)),d++,Array.isArray(a)){if(g==="-")g=a.length;else{if(n&&!ti(g))throw new Fe("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);ti(g)&&(g=~~g)}if(d>=_){if(n&&e.op==="add"&&g>a.length)throw new Fe("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);var f=nc[e.op].call(e,a,g,t);if(f.test===!1)throw new Fe("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return f}}else if(g&&g.indexOf("~")!=-1&&(g=ks(g)),d>=_){var f=Kt[e.op].call(e,a,g,t);if(f.test===!1)throw new Fe("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return f}a=a[g]}}}function fi(t,e,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(e))throw new Fe("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(t=ot(t));for(var s=new Array(e.length),f=0,l=e.length;f<l;f++)s[f]=Nt(t,e[f],n,!0,r,f),t=s[f].newDocument;return s.newDocument=t,s}function ic(t,e,n){var i=Nt(t,e);if(i.test===!1)throw new Fe("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return i.newDocument}function Cn(t,e,n,i){if(typeof t!="object"||t===null||Array.isArray(t))throw new Fe("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Kt[t.op]){if(typeof t.path!="string")throw new Fe("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Fe('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Fe("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Fe("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&ni(t.value))throw new Fe("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var r=t.path.split("/").length,s=i.split("/").length;if(r!==s+1&&r!==s)throw new Fe("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==i)throw new Fe("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var f={op:"_get",path:t.from,value:void 0},l=As([f],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new Fe("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new Fe("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function As(t,e,n){try{if(!Array.isArray(t))throw new Fe("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)fi(ot(e),ot(t),n||!0);else{n=n||Cn;for(var i=0;i<t.length;i++)n(t[i],i,e,void 0)}}catch(r){if(r instanceof Fe)return r;throw r}}function rn(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),i=Array.isArray(e),r,s,f;if(n&&i){if(s=t.length,s!=e.length)return!1;for(r=s;r--!==0;)if(!rn(t[r],e[r]))return!1;return!0}if(n!=i)return!1;var l=Object.keys(t);if(s=l.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!e.hasOwnProperty(l[r]))return!1;for(r=s;r--!==0;)if(f=l[r],!rn(t[f],e[f]))return!1;return!0}return t!==t&&e!==e}var rc=Object.freeze({__proto__:null,JsonPatchError:Fe,deepClone:tc,getValueByPointer:En,applyOperation:Nt,applyPatch:fi,applyReducer:ic,validator:Cn,validate:As,_areEquals:rn});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */var oi=new WeakMap,sc=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),fc=function(){function t(e,n){this.callback=e,this.observer=n}return t}();function oc(t){return oi.get(t)}function lc(t,e){return t.observers.get(e)}function cc(t,e){t.observers.delete(e.callback)}function ac(t,e){e.unobserve()}function uc(t,e){var n=[],i,r=oc(t);if(!r)r=new sc(t),oi.set(t,r);else{var s=lc(r,e);i=s&&s.observer}if(i)return i;if(i={},r.value=ot(t),e){i.callback=e,i.next=null;var f=function(){ii(i)},l=function(){clearTimeout(i.next),i.next=setTimeout(f)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return i.patches=n,i.object=t,i.unobserve=function(){ii(i),clearTimeout(i.next),cc(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},r.observers.set(e,new fc(e,i)),i}function ii(t,e){e===void 0&&(e=!1);var n=oi.get(t.object);li(n.value,t.object,t.patches,"",e),t.patches.length&&fi(n.value,t.patches);var i=t.patches;return i.length>0&&(t.patches=[],t.callback&&t.callback(i)),i}function li(t,e,n,i,r){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=ei(e),f=ei(t),l=!1,c=f.length-1;c>=0;c--){var a=f[c],d=t[a];if(Xn(e,a)&&!(e[a]===void 0&&d!==void 0&&Array.isArray(e)===!1)){var _=e[a];typeof d=="object"&&d!=null&&typeof _=="object"&&_!=null?li(d,_,n,i+"/"+Tt(a),r):d!==_&&(r&&n.push({op:"test",path:i+"/"+Tt(a),value:ot(d)}),n.push({op:"replace",path:i+"/"+Tt(a),value:ot(_)}))}else Array.isArray(t)===Array.isArray(e)?(r&&n.push({op:"test",path:i+"/"+Tt(a),value:ot(d)}),n.push({op:"remove",path:i+"/"+Tt(a)}),l=!0):(r&&n.push({op:"test",path:i,value:t}),n.push({op:"replace",path:i,value:e}))}if(!(!l&&s.length==f.length))for(var c=0;c<s.length;c++){var a=s[c];!Xn(t,a)&&e[a]!==void 0&&n.push({op:"add",path:i+"/"+Tt(a),value:ot(e[a])})}}}function dc(t,e,n){n===void 0&&(n=!1);var i=[];return li(t,e,i,"",n),i}var _c=Object.freeze({__proto__:null,unobserve:ac,observe:uc,generate:ii,compare:dc}),hc=Object.assign({},rc,_c,{JsonPatchError:xs,deepClone:ot,escapePathComponent:Tt,unescapePathComponent:ks});const{applyPatch:mc}=hc;class pc extends zt{constructor(e){super({}),this.connector=e,this.connector.on("receive_state",n=>{this.wireStateReceived=!0,this.set(n)}),this.connector.on("receive_diff",n=>{this.wireStateReceived&&(mc(this.state,n),this.announceStateChange())})}field(e){return this.connector.connectionState.get(e)}}class bc extends zt{constructor(e){super({}),this.fields={},this.connector=e,this.connector.on("receive_state_field",({name:n,state:i})=>{this.get(n).set(i)})}get(e){return this.fields[e]||(this.fields[e]=new zt),this.fields[e]}}ut.util=Ft;const vc=700,gc=6e4,yc=1;class wc extends On{constructor({endpoint:e,protocol:n,keypair:i=us(),rpcRequestTimeout:r,verbose:s=!1,tag:f,log:l=console.log,autoDecommission:c=!1,dummy:a}={}){super(),this.protocol=n,this.log=l;const{privateKey:d,publicKey:_}=ds(i);this.clientPrivateKey=d,this.clientPublicKey=_,this.clientPublicKeyHex=An(_),this.rpcClient=new Vl(this,r),this.endpoint=e,this.verbose=s,this.tag=f,this.autoDecommission=c,this.sentCount=0,this.receivedCount=0,this.successfulConnectsCount=0,a||(this.state=new pc(this),this.connectionState=new bc(this)),this.connected=new zt,this.delayedAdjustConnectionStatus(),s&&Me.green(this.log,`Connector ${this.endpoint} created`),this.decommissionCheckCounter=0,this.lastPongReceivedAt=Date.now(),this.on("pong",()=>{this.lastPongReceivedAt=Date.now()})}delayedAdjustConnectionStatus(){setTimeout(()=>{this.connected.get()==null&&this.connected.set(!1)},vc)}send(e){Rl({data:e,connector:this}),this.sentCount+=1}signal(e,n){this.connected.get()?this.send({signal:e,data:n}):Me.write(this.log,"Warning: trying to send signal over disconnected connector, this should be prevented by GUI")}on(e,n){e=="ready"&&this.isReady()&&n(),super.on(e,n)}getSharedSecret(){return this.sharedSecret?An(this.sharedSecret):void 0}wireReceive({jsonData:e,encryptedData:n,rawMessage:i}){bs({jsonData:e,encryptedData:n,rawMessage:i,connector:this}),this.receivedCount+=1}field(e){return this.connectionState.get(e)}isReady(){return this.ready}closed(){return!this.transportConnected}connectStatus(e){if(e){this.sentCount=0,this.receivedCount=0,this.transportConnected=!0,this.successfulConnectsCount+=1,this.verbose&&Me.green(this.log,`\u2713 Connector ${this.endpoint} connected #${this.successfulConnectsCount}`);const n=this.connection.websocket.__id;Il({connector:this,afterFirstStep:({sharedSecret:r,remotePubkeyHex:s})=>{this.sharedSecret=r,this._remotePubkeyHex=s}}).then(()=>{this.connectedAt=Date.now(),this.connected.set(!0),this.ready=!0,this.emit("ready")}).catch(r=>{this.connection.websocket.__id==n&&this.connection.websocket.readyState==yc&&r.code==dt.TIMEOUT&&(Me.write(this.log,`${this.endpoint} x Connector [ ${this.protocol} ] handshake error: "${r.message}"`),Me.write(this.log,`${this.endpoint} Connector dropping stale websocket after handshake error`),this.connection.terminate()),r.code!=dt.TIMEOUT&&Me.write(this.log,`${this.endpoint} x Connector [ ${this.protocol} ] on:ready error: "${r.stack}" \u2014 (will not try to reconnect, fix the error and reload this gui)`)})}else{let n;this.transportConnected&&(n=!0),this.transportConnected==null&&Me.write(this.log,`${this.endpoint} Connector was not able to connect at first try`),this.transportConnected=!1,this.ready=!1,this.sharedSecret=void 0,delete this.connectedAt,n&&(this.emit("disconnect"),e==null&&this.delayedAdjustConnectionStatus(),this.connected.set(e))}}checkForDecommission(){!this.autoDecommission||(this.decommissionCheckRequestedAt&&Date.now()-this.decommissionCheckRequestedAt>3e3&&(this.decommissionCheckCounter=0),this.decommissionCheckRequestedAt=Date.now(),this.decommissionCheckCounter+=1,this.decommissionCheckCounter>12&&Date.now()-this.lastPongReceivedAt>gc&&(Me.write(this.log,`Decommissioning connector ${this.endpoint} (long inactive)`),this.decommission(),this.emit("decommission")))}decommission(){this.decommissioned=!0}remoteObject(e){return{call:(n,i=[])=>this.rpcClient.remoteObject(e).call(n,gl(i))}}attachObject(e,n){new Ql({serversideChannel:this,serverMethods:n,methodPrefix:e})}clientPubkey(){return this.clientPublicKeyHex}remotePubkeyHex(){return this._remotePubkeyHex}remoteAddress(){return this.endpoint}}const Lr=typeof window<"u";function kc({endpoint:t,host:e,port:n}){if(Lr&&t&&t.startsWith("/")&&(t=`${window.location.protocol.includes("s")?"wss":"ws"}://${window.location.host}${t}`),!t)if(Lr){e=e||window.location.hostname;const i=window.location.protocol.includes("s")?"wss":"ws";t=`${i}://${e}`,i=="wss"?t=`${i}://${e}/ws`:n?t=`${t}:${n}`:window.location.port&&(t=`${t}:${window.location.port}`)}else{if(!n)throw new Error(`Connectome determineEndpoint: No websocket port provided for ${e}`);t=`ws://${e||"localhost"}:${n}`}return t}const yt=typeof window<"u",xc=0,Ac=1,Sc=1e3,Ec=3,Cc=5;function Tc({endpoint:t,host:e,port:n,protocol:i,keypair:r,remotePubkey:s,rpcRequestTimeout:f,autoDecommission:l,log:c,verbose:a,tag:d,dummy:_},{WebSocket:m}){t=kc({endpoint:t,host:e,port:n});const g=new wc({endpoint:t,protocol:i,rpcRequestTimeout:f,keypair:r,verbose:a,tag:d,log:c,autoDecommission:l,dummy:_}),w=()=>{Nc({connector:g,endpoint:t},{WebSocket:m,reconnect:w,log:c,verbose:a})};g.connection={terminate(){this.websocket._removeAllCallbacks(),this.websocket.close(),g.connectStatus(!1),w()},endpoint:t,checkTicker:0};const v=()=>{g.decommissioned||(Oc({connector:g,reconnect:w,log:c}),setTimeout(v,Sc))};return setTimeout(v,10),g}function Oc({connector:t,reconnect:e,log:n}){const i=t.connection;if(Rc(i)||t.decommissioned){t.decommissioned?(Me.yellow(n,`${t.endpoint} Connection decommisioned, closing websocket ${i.websocket.__id}, will not retry again `),Ss(t)):(t.emit("inactive_connection"),Me.yellow(n,`${t.endpoint} \u2716 Terminated inactive connection`)),i.terminate();return}Es(i)?i.websocket.send("ping"):(t.connected==null&&(Me.write(n,`${t.endpoint} Setting connector status to FALSE because connector.connected is undefined`),t.connectStatus(!1)),e()),i.checkTicker+=1}function Nc({connector:t,endpoint:e},{WebSocket:n,reconnect:i,log:r,verbose:s}){const f=t.connection;if(t.checkForDecommission(),t.decommissioned){Ss(t);return}if(f.currentlyTryingWS&&f.currentlyTryingWS.readyState==xc){if(f.currentlyTryingWS._waitForConnectCounter<Cc){f.currentlyTryingWS._waitForConnectCounter+=1;return}(s||yt)&&Me.write(r,`${e} Reconnect timeout, creating new ws`),f.currentlyTryingWS._removeAllCallbacks(),f.currentlyTryingWS.close()}else(s||yt)&&Me.write(r,`${e} Created new websocket`);const l=new n(e);l.__id=Math.random(),f.currentlyTryingWS=l,f.currentlyTryingWS._waitForConnectCounter=0,yt&&(l.binaryType="arraybuffer"),yt||l.on("error",()=>{});const c=()=>{t.decommissioned||((s||yt)&&Me.write(r,`${e} Websocket open`),f.currentlyTryingWS=null,f.checkTicker=0,Dc({ws:l,connector:t,openCallback:c,reconnect:i},{log:r,verbose:s}),f.websocket=l,t.connectStatus(!0))};l._removeAllCallbacks=()=>{l.removeEventListener("open",c)},yt?l.addEventListener("open",c):l.on("open",c)}function Dc({ws:t,connector:e,openCallback:n,reconnect:i},{log:r,verbose:s}){const f=e.connection,l=d=>{const _=`${e.endpoint} Websocket error`;console.log(_),console.log(d)},c=()=>{if(Me.write(r,`${e.endpoint} \u2716 Connection closed`),e.decommissioned){e.connectStatus(!1);return}e.connectStatus(void 0),i()},a=d=>{if(e.decommissioned)return;f.checkTicker=0;const _=yt?d.data:d;if(_=="pong"){e.emit("pong");return}let m;try{m=JSON.parse(_)}catch{}if(m)e.wireReceive({jsonData:m,rawMessage:_});else{const g=yt?new Uint8Array(_):_;e.wireReceive({encryptedData:g})}};t._removeAllCallbacks=()=>{t.removeEventListener("error",l),t.removeEventListener("close",c),t.removeEventListener("message",a),t.removeEventListener("open",n)},yt?(t.addEventListener("error",l),t.addEventListener("close",c),t.addEventListener("message",a)):(t.on("error",l),t.on("close",c),t.on("message",a))}function Ss(t){const e=t.connection;e.currentlyTryingWS&&(e.currentlyTryingWS._removeAllCallbacks(),e.currentlyTryingWS.close(),e.currentlyTryingWS=null),e.ws&&(e.ws._removeAllCallbacks(),e.ws.close(),e.ws=null),t.connectStatus(!1)}function Es(t){return t.websocket&&t.websocket.readyState==Ac}function Rc(t){return Es(t)&&t.checkTicker>Ec}function Pc(t){return t.log=t.log||console.log,Tc(t,{WebSocket})}class Ic{constructor({mcs:e,foreground:n,connectToDeviceKey:i}){this.mcs=e,this.foreground=n,this.connectToDeviceKey=i}createConnector({host:e,autoDecommission:n=!1}){const{port:i,protocol:r,rpcRequestTimeout:s,log:f,verbose:l,keypair:c}=this.mcs;return Pc({host:e,port:i,protocol:r,keypair:c,rpcRequestTimeout:s,autoDecommission:n,log:f,verbose:l})}getDeviceKey(e){var n;return(n=e==null?void 0:e.device)==null?void 0:n.deviceKey}connectThisDevice({host:e}){const n=this.createConnector({host:e});let i=!1;return n.state.subscribe(r=>{var f;r.nearbyDevices||(r.nearbyDevices=[]),r.notifications||(r.notifications=[]);const s=this.getDeviceKey(r);if(s){i||(n.on("pong",()=>{this.mcs.emit("pong",{deviceKey:s})}),i=!0),this.thisDeviceAlreadySetup||(this.mcs.set({activeDeviceKey:s}),this.initNewConnector({deviceKey:s,connector:n}));const l=this.connectToDeviceKey&&this.connectToDeviceKey!=s;if(!l&&this.mcs.activeDeviceKey()==s){const c=(f=r.device)==null?void 0:f.deviceName;this.foreground.set(r,{optimisticDeviceName:c})}this.foreground.setSpecial(r),this.thisDeviceAlreadySetup||(l&&(this.mcs.switch({deviceKey:this.connectToDeviceKey}),delete this.connectToDeviceKey),this.thisDeviceAlreadySetup=!0)}}),n}connectOtherDevice({host:e,deviceKey:n}){if(!this.mcs.connectors[n]){const i=this.createConnector({host:e,autoDecommission:!0});i.on("decommission",()=>{delete this.mcs.connectors[n],i.__removeListeners&&i.__removeListeners()});const r=()=>{this.mcs.emit("pong",{deviceKey:n})};i.on("pong",r),this.initNewConnector({deviceKey:n,connector:i});const s=i.state.subscribe(f=>{if(this.mcs.activeDeviceKey()==n){const l=f.device?f.device.deviceName:null;this.foreground.set(f,{optimisticDeviceName:l})}});i.__removeListeners=()=>{i.off("pong",r),s()}}return this.mcs.connectors[n]}initNewConnector({deviceKey:e,connector:n}){this.mcs.connectors[e]=n,this.setConnectedStore({deviceKey:e,connector:n})}setConnectedStore({deviceKey:e,connector:n}){n.connected.subscribe(i=>{this.mcs.activeDeviceKey()==e&&this.mcs.connected.set(i)})}}function Cs(t,e=0,n={}){const i=["day","h","min","s"],r=[24,60,60,1e3];if(e==i.length)return n.ms=t,n;e==0&&(n.totalSeconds=t/1e3);const s=r.slice(e).reduce((f,l)=>f*l,1);return n[i[e]]=Math.floor(t/s),Cs(t%s,e+1,n)}function Mc(t){const e=["day","h","min","s"];let n="";for(const i of e)t[i]>0&&(i!="s"||i=="s"&&t.totalSeconds<60)&&(n=`${n} ${t[i]} ${i}`);return n.trim()}function Ts(t){if(t){const e=Date.now(),n=3e3;return t.filter(i=>e<i.expireAt).map(i=>({...i,relativeTimeAdded:e-i.addedAt<n?"now":`${Mc(Cs(e-i.addedAt))} ago`}))}return[]}class Lc{constructor({mcs:e,thisDeviceStateKeys:n}){this.mcs=e,this.thisDeviceStateKeys=n}specialStoreKeys(){return this.thisDeviceStateKeys.concat(["activeDeviceKey","optimisticDeviceName"])}clear(){this.mcs.clearState({except:this.specialStoreKeys()})}set(e,{optimisticDeviceName:n=void 0}={}){this.clear();const i={};for(const r of Object.keys(e))this.specialStoreKeys().includes(r)||(i[r]=e[r]);n&&(i.optimisticDeviceName=n),this.mcs.setMerge(i)}setSpecial(e){const n={};for(const i of this.thisDeviceStateKeys)i=="notifications"?n[i]=Ts(e[i]):n[i]=e[i];this.mcs.setMerge(n)}}class Uc extends On{constructor({mcs:e,connectDevice:n,foreground:i}){super(),this.mcs=e,this.connectDevice=n,this.foreground=i}switchState({deviceKey:e,deviceName:n}){this.mcs.setMerge({activeDeviceKey:e});const{state:i,connected:r}=this.mcs.connectors[e];this.foreground.set(i.get(),{optimisticDeviceName:n}),this.mcs.connected.set(r.get())}switch({host:e,deviceKey:n,deviceName:i}){if(this.mcs.connectors[n])this.switchState({deviceKey:n,deviceName:i});else if(e)this.foreground.clear(),this.mcs.setMerge({activeDeviceKey:n,optimisticDeviceName:i}),this.connectDevice.connectOtherDevice({host:e,deviceKey:n});else{const r=this.mcs.localConnector.state.get(),{nearbyDevices:s}=r,f=s.find(l=>l.deviceKey==n&&!l.thisDevice);if(f){const{deviceKey:l,deviceName:c,ip:a}=f;this.switch({host:a,deviceKey:l,deviceName:c})}else this.emit("connect_to_device_key_failed"),this.switchState(r.device)}}}const jc=500;class $c extends _l{constructor({host:e,port:n,protocol:i,keypair:r=us(),connectToDeviceKey:s,rpcRequestTimeout:f=3e3,log:l,verbose:c}){super();const a=["time","environment","nearbyDevices","nearbySensors","notifications"],{publicKey:d,privateKey:_}=ds(r);this.publicKey=d,this.privateKey=_,this.keypair=r,this.port=n,this.protocol=i,this.log=l,this.rpcRequestTimeout=f,this.verbose=c,this.connectors={},this.connected=new zt;const m=new Lc({mcs:this,thisDeviceStateKeys:a}),g=new Ic({mcs:this,foreground:m,connectToDeviceKey:s});this.connectDevice=g,this.switchDevice=new Uc({mcs:this,connectDevice:g,foreground:m}),this.switchDevice.on("connect_to_device_key_failed",()=>{this.emit("connect_to_device_key_failed")}),this.localConnector=g.connectThisDevice({host:e}),this._notificationsExpireAndCalculateRelativeTime()}_notificationsExpireAndCalculateRelativeTime(){const{notifications:e}=this.get();this.setMerge({notifications:Ts(e)}),setTimeout(()=>{this._notificationsExpireAndCalculateRelativeTime()},jc)}signal(e,n){this.activeConnector()?this.activeConnector().signal(e,n):console.log(`MCS: Error emitting remote signal ${e} / ${n}. Debug info: activeDeviceKey=${this.activeDeviceKey()}`)}signalLocalDevice(e,n){this.localConnector.signal(e,n)}remoteObject(e){if(this.activeConnector())return this.activeConnector().remoteObject(e);console.log(`Error obtaining remote object ${e}. Debug info: activeDeviceKey=${this.activeDeviceKey()}`)}preconnect({host:e,deviceKey:n,thisDevice:i}){return i?this.localConnector:this.connectDevice.connectOtherDevice({host:e,deviceKey:n})}switch({host:e,deviceKey:n,deviceName:i}){this.switchDevice.switch({host:e,deviceKey:n,deviceName:i})}activeConnector(){if(this.activeDeviceKey())return this.connectors[this.activeDeviceKey()]}activeDeviceKey(){return this.get().activeDeviceKey}}const Kc=7780,Bc="dmt/gui",Os=localStorage.getItem("current_device_key");console.log(`connectToDeviceKey: ${Os}`);const Ns=new $c({port:Kc,protocol:Bc,connectToDeviceKey:Os,log:ct.log});Ns.on("connect_to_device_key_failed",()=>{console.log("connect_to_device_key_failed FAILED"),localStorage.removeItem("current_device_key")});window.onerror=rf(ts);new ll({target:document.body,props:{store:Ns,log:ct.log}});
