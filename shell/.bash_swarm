#!/bin/bash

function bee_s {
  local bee=''
  dmt_platform_bin_command bee

  if [ ! -f "$bee" ]; then

    printf "${MAGENT}bee client not found${NC}\n"
    return
  fi

  "$bee" start
}

function swarm_upload_single_file() {
  local file="$1"

  if [ -f "$file" ]; then
    printf "Uploading ${YELLOW}$file${NC} to ${MAGENTA}Swarm${NC}\n"
    curl -F file=@"$file" http://localhost:8080/files
  else
    printf "⚠️  Error: file ${YELLOW}${file}${NC} ${RED}does not exist.${NC}\n"
  fi
}

# function swarm_upload_single_file() {
#   local file="$1"

#   if [ -f "$file" ]; then
#     printf "Uploading ${YELLOW}$file${NC} to ${MAGENTA}Swarm${NC}\n"
#     local result=$(swarm up "$file")
#     echo "$result"
#   else
#     printf "⚠️  Error: file ${YELLOW}${file}${NC} ${RED}does not exist.${NC}\n"
#   fi
# }

function swarm_upload {
  if [ -f "$1" ]; then
    swarm_upload_single_file "$1"
  else
    for mp3File in *.mp3; do
      swarm_upload_single_file "$mp3File"
    done
  fi
}

function supload {
  swarm_upload "$@"
}
