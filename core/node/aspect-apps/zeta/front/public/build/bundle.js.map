{"version":3,"file":"bundle.js","sources":["../../../../../dmt-js/node_modules/ansicolor/build/ansicolor.js","../../../../../dmt-js/lib/emitter/runnableLink.js","../../../../../dmt-js/lib/emitter/linkedList.js","../../../../../dmt-js/lib/emitter/index.js","../../../../../dmt-js/lib/stores/simpleStore.js","../../../../../dmt-js/node_modules/fast-json-patch/module/helpers.mjs","../../../../../dmt-js/node_modules/fast-json-patch/module/core.mjs","../../../../../dmt-js/node_modules/fast-json-patch/module/duplex.mjs","../../../../../dmt-js/node_modules/fast-json-patch/index.mjs","../../../../../node_modules/tweetnacl/nacl-fast.js","../../../../../node_modules/tweetnacl-util/nacl-util.js","../../../../../connectome/lib/utils/emitter/runnableLink.js","../../../../../connectome/lib/utils/emitter/linkedList.js","../../../../../connectome/lib/utils/emitter/index.js","../../../../../connectome/lib/utils/index.js","../../../../../connectome/lib/connector/send.js","../../../../../connectome/lib/channel/sendHelpers.js","../../../../../connectome/lib/connector/receive.js","../../../../../connectome/lib/rpc/moleChannel.js","../../../../../connectome/lib/rpc/mole/errorCodes.js","../../../../../connectome/lib/rpc/mole/MoleServer.js","../../../../../connectome/lib/rpc/mole/X.js","../../../../../connectome/lib/rpc/mole/MoleClient.js","../../../../../connectome/lib/rpc/mole/proxify.js","../../../../../connectome/lib/rpc/mole/transportServerChannel.js","../../../../../connectome/lib/rpc/mole/MoleClientProxified.js","../../../../../connectome/lib/rpc/mole/transportClientChannel.js","../../../../../connectome/lib/error/ConnectomeError.js","../../../../../connectome/lib/rpc/specificClient.js","../../../../../connectome/lib/rpc/client.js","../../../../../connectome/lib/rpc/RPCTarget.js","../../../../../connectome/lib/connector/connector.js","../../../../../connectome/lib/connect/establishAndMaintainConnection.js","../../../../../connectome/lib/connect/connectBrowser.js","../../../../../connectome/lib/channel/send.js","../../../../../connectome/lib/channel/receive.js","../../../../../connectome/lib/server/rpcTargets/authTarget.js","../../../../../connectome/index.js","../../../../../dmt-js/lib/stores/connectedStore.js","../../../../../dmt-js/lib/stores/index.js","../../../../../dmt-js/lib/stores/multiConnectedStore.js","../../../../../dmt-js/lib/stores/parallelStore.js","../../../../../dmt-js/lib/stores/sessionStore.js","../../../../../dmt-js/lib/stores/logStore.js","../../../../../dmt-js/lib/colorsHTML.js","../../../../../dmt-js/lib/metamask/metamask.js","../../../../../dmt-js/lib/search/executeSearch.js","../../node_modules/svelte/internal/index.mjs","../../../../../dmt-js/lib/mediaTypeIcon.js","../../src/loginStore.js","../../src/appHelper.js","../../node_modules/urljs/lib/index.js","../../src/components/About.svelte","../../src/components/Login/DisplayLoggedInInfo.svelte","../../src/components/Login/DisplayMetamaskInvite.svelte","../../src/components/Login/Login.svelte","../../src/components/LeftBar/Profile.svelte","../../src/components/SearchResults/ResultTag.svelte","../../src/components/LeftBar/InsideBox.svelte","../../src/components/LeftBar/TeamBox.svelte","../../src/components/LeftBar/LeftBar.svelte","../../node_modules/svelte-spinner/src/index.svelte","../../src/components/ConnectionStatus.svelte","../../src/components/SearchResults/ResultTags.svelte","../../src/components/SearchResults/PlayMedia.svelte","../../src/components/SearchResults/ResultSwarm.svelte","../../src/components/SearchResults/ResultFS.svelte","../../src/components/SearchResults/ResultNote.svelte","../../src/components/SearchResults/ResultsMetaTop.svelte","../../src/components/SearchResults/ResultsMetaBottom.svelte","../../src/components/SearchResults/SearchResults.svelte","../../src/App.svelte","../../src/main.js","../../src/connectedStore.js"],"sourcesContent":["\"use strict\";\n\n/*  ------------------------------------------------------------------------ */\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar O = Object;\n\n/*  See https://misc.flogisoft.com/bash/tip_colors_and_formatting\n    ------------------------------------------------------------------------ */\n\nvar colorCodes = ['black', 'red', 'green', 'yellow', 'blue', 'magenta', 'cyan', 'lightGray', '', 'default'],\n    colorCodesLight = ['darkGray', 'lightRed', 'lightGreen', 'lightYellow', 'lightBlue', 'lightMagenta', 'lightCyan', 'white', ''],\n    styleCodes = ['', 'bright', 'dim', 'italic', 'underline', '', '', 'inverse'],\n    asBright = { 'red': 'lightRed',\n    'green': 'lightGreen',\n    'yellow': 'lightYellow',\n    'blue': 'lightBlue',\n    'magenta': 'lightMagenta',\n    'cyan': 'lightCyan',\n    'black': 'darkGray',\n    'lightGray': 'white' },\n    types = { 0: 'style',\n    2: 'unstyle',\n    3: 'color',\n    9: 'colorLight',\n    4: 'bgColor',\n    10: 'bgColorLight' },\n    subtypes = { color: colorCodes,\n    colorLight: colorCodesLight,\n    bgColor: colorCodes,\n    bgColorLight: colorCodesLight,\n    style: styleCodes,\n    unstyle: styleCodes\n\n    /*  ------------------------------------------------------------------------ */\n\n};var clean = function clean(obj) {\n    for (var k in obj) {\n        if (!obj[k]) {\n            delete obj[k];\n        }\n    }\n    return O.keys(obj).length === 0 ? undefined : obj;\n};\n\n/*  ------------------------------------------------------------------------ */\n\nvar Color = function () {\n    function Color(background, name, brightness) {\n        _classCallCheck(this, Color);\n\n        this.background = background;\n        this.name = name;\n        this.brightness = brightness;\n    }\n\n    _createClass(Color, [{\n        key: 'defaultBrightness',\n        value: function defaultBrightness(value) {\n\n            return new Color(this.background, this.name, this.brightness || value);\n        }\n    }, {\n        key: 'css',\n        value: function css(inverted) {\n\n            var color = inverted ? this.inverse : this;\n\n            var rgbName = color.brightness === Code.bright && asBright[color.name] || color.name;\n\n            var prop = color.background ? 'background:' : 'color:',\n                rgb = Colors.rgb[rgbName],\n                alpha = this.brightness === Code.dim ? 0.5 : 1;\n\n            return rgb ? prop + 'rgba(' + [].concat(_toConsumableArray(rgb), [alpha]).join(',') + ');' : !color.background && alpha < 1 ? 'color:rgba(0,0,0,0.5);' : ''; // Chrome does not support 'opacity' property...\n        }\n    }, {\n        key: 'inverse',\n        get: function get() {\n            return new Color(!this.background, this.name || (this.background ? 'black' : 'white'), this.brightness);\n        }\n    }, {\n        key: 'clean',\n        get: function get() {\n            return clean({ name: this.name === 'default' ? '' : this.name,\n                bright: this.brightness === Code.bright,\n                dim: this.brightness === Code.dim });\n        }\n    }]);\n\n    return Color;\n}();\n\n/*  ------------------------------------------------------------------------ */\n\nvar Code = function () {\n    function Code(n) {\n        _classCallCheck(this, Code);\n\n        if (n !== undefined) {\n            this.value = Number(n);\n        }\n    }\n\n    _createClass(Code, [{\n        key: 'type',\n        get: function get() {\n            return types[Math.floor(this.value / 10)];\n        }\n    }, {\n        key: 'subtype',\n        get: function get() {\n            return subtypes[this.type][this.value % 10];\n        }\n    }, {\n        key: 'str',\n        get: function get() {\n            return this.value ? '\\x1B[' + this.value + 'm' : '';\n        }\n    }, {\n        key: 'isBrightness',\n        get: function get() {\n            return this.value === Code.noBrightness || this.value === Code.bright || this.value === Code.dim;\n        }\n    }], [{\n        key: 'str',\n        value: function str(x) {\n            return new Code(x).str;\n        }\n    }]);\n\n    return Code;\n}();\n\n/*  ------------------------------------------------------------------------ */\n\nO.assign(Code, {\n\n    reset: 0,\n    bright: 1,\n    dim: 2,\n    inverse: 7,\n    noBrightness: 22,\n    noItalic: 23,\n    noUnderline: 24,\n    noInverse: 27,\n    noColor: 39,\n    noBgColor: 49\n});\n\n/*  ------------------------------------------------------------------------ */\n\nvar replaceAll = function replaceAll(str, a, b) {\n    return str.split(a).join(b);\n};\n\n/*  ANSI brightness codes do not overlap, e.g. \"{bright}{dim}foo\" will be rendered bright (not dim).\n    So we fix it by adding brightness canceling before each brightness code, so the former example gets\n    converted to \"{noBrightness}{bright}{noBrightness}{dim}foo\" â€“ this way it gets rendered as expected.\n */\n\nvar denormalizeBrightness = function denormalizeBrightness(s) {\n    return s.replace(/(\\u001b\\[(1|2)m)/g, '\\x1B[22m$1');\n};\nvar normalizeBrightness = function normalizeBrightness(s) {\n    return s.replace(/\\u001b\\[22m(\\u001b\\[(1|2)m)/g, '$1');\n};\n\nvar wrap = function wrap(x, openCode, closeCode) {\n\n    var open = Code.str(openCode),\n        close = Code.str(closeCode);\n\n    return String(x).split('\\n').map(function (line) {\n        return denormalizeBrightness(open + replaceAll(normalizeBrightness(line), close, open) + close);\n    }).join('\\n');\n};\n\n/*  ------------------------------------------------------------------------ */\n\nvar camel = function camel(a, b) {\n    return a + b.charAt(0).toUpperCase() + b.slice(1);\n};\n\nvar stringWrappingMethods = function () {\n    return [].concat(_toConsumableArray(colorCodes.map(function (k, i) {\n        return !k ? [] : [// color methods\n\n        [k, 30 + i, Code.noColor], [camel('bg', k), 40 + i, Code.noBgColor]];\n    })), _toConsumableArray(colorCodesLight.map(function (k, i) {\n        return !k ? [] : [// light color methods\n\n        [k, 90 + i, Code.noColor], [camel('bg', k), 100 + i, Code.noBgColor]];\n    })), _toConsumableArray(['', 'BrightRed', 'BrightGreen', 'BrightYellow', 'BrightBlue', 'BrightMagenta', 'BrightCyan'].map(function (k, i) {\n        return !k ? [] : [['bg' + k, 100 + i, Code.noBgColor]];\n    })), _toConsumableArray(styleCodes.map(function (k, i) {\n        return !k ? [] : [// style methods\n\n        [k, i, k === 'bright' || k === 'dim' ? Code.noBrightness : 20 + i]];\n    }))).reduce(function (a, b) {\n        return a.concat(b);\n    });\n}();\n\n/*  ------------------------------------------------------------------------ */\n\nvar assignStringWrappingAPI = function assignStringWrappingAPI(target) {\n    var wrapBefore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : target;\n    return stringWrappingMethods.reduce(function (memo, _ref) {\n        var _ref2 = _slicedToArray(_ref, 3),\n            k = _ref2[0],\n            open = _ref2[1],\n            close = _ref2[2];\n\n        return O.defineProperty(memo, k, {\n            get: function get() {\n                return assignStringWrappingAPI(function (str) {\n                    return wrapBefore(wrap(str, open, close));\n                });\n            }\n        });\n    }, target);\n};\n\n/*  ------------------------------------------------------------------------ */\n\nvar TEXT = 0,\n    BRACKET = 1,\n    CODE = 2;\n\nfunction rawParse(s) {\n\n    var state = TEXT,\n        buffer = '',\n        text = '',\n        code = '',\n        codes = [];\n    var spans = [];\n\n    for (var i = 0, n = s.length; i < n; i++) {\n\n        var c = s[i];\n\n        buffer += c;\n\n        switch (state) {\n\n            case TEXT:\n                if (c === '\\x1B') {\n                    state = BRACKET;buffer = c;\n                } else {\n                    text += c;\n                }\n                break;\n\n            case BRACKET:\n                if (c === '[') {\n                    state = CODE;code = '';codes = [];\n                } else {\n                    state = TEXT;text += buffer;\n                }\n                break;\n\n            case CODE:\n\n                if (c >= '0' && c <= '9') {\n                    code += c;\n                } else if (c === ';') {\n                    codes.push(new Code(code));code = '';\n                } else if (c === 'm' && code.length) {\n                    codes.push(new Code(code));\n                    var _iteratorNormalCompletion = true;\n                    var _didIteratorError = false;\n                    var _iteratorError = undefined;\n\n                    try {\n                        for (var _iterator = codes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                            var _code = _step.value;\n                            spans.push({ text: text, code: _code });text = '';\n                        }\n                    } catch (err) {\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                    } finally {\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator.return) {\n                                _iterator.return();\n                            }\n                        } finally {\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                    }\n\n                    state = TEXT;\n                } else {\n                    state = TEXT;text += buffer;\n                }\n        }\n    }\n\n    if (state !== TEXT) text += buffer;\n\n    if (text) spans.push({ text: text, code: new Code() });\n\n    return spans;\n}\n\n/*  ------------------------------------------------------------------------ */\n\n/**\n * Represents an ANSI-escaped string.\n */\n\nvar Colors = function () {\n\n    /**\n     * @param {string} s a string containing ANSI escape codes.\n     */\n    function Colors(s) {\n        _classCallCheck(this, Colors);\n\n        this.spans = s ? rawParse(s) : [];\n    }\n\n    _createClass(Colors, [{\n        key: Symbol.iterator,\n\n\n        /**\n         * @example\n         * const spans = [...ansi.parse ('\\u001b[7m\\u001b[7mfoo\\u001b[7mbar\\u001b[27m')]\n         */\n        value: function value() {\n            return this.spans[Symbol.iterator]();\n        }\n\n        /**\n         * @desc This allows an alternative import style, see https://github.com/xpl/ansicolor/issues/7#issuecomment-578923578\n         * @example\n         * import { ansicolor, ParsedSpan } from 'ansicolor'\n         */\n\n    }, {\n        key: 'str',\n        get: function get() {\n            return this.spans.reduce(function (str, p) {\n                return str + p.text + p.code.str;\n            }, '');\n        }\n    }, {\n        key: 'parsed',\n        get: function get() {\n\n            var color = void 0,\n                bgColor = void 0,\n                brightness = void 0,\n                styles = void 0;\n\n            function reset() {\n\n                color = new Color(), bgColor = new Color(true /* background */), brightness = undefined, styles = new Set();\n            }\n\n            reset();\n\n            return O.assign(new Colors(), {\n\n                spans: this.spans.map(function (span) {\n\n                    var c = span.code;\n\n                    var inverted = styles.has('inverse'),\n                        underline = styles.has('underline') ? 'text-decoration: underline;' : '',\n                        italic = styles.has('italic') ? 'font-style: italic;' : '',\n                        bold = brightness === Code.bright ? 'font-weight: bold;' : '';\n\n                    var foreColor = color.defaultBrightness(brightness);\n\n                    var styledSpan = O.assign({ css: bold + italic + underline + foreColor.css(inverted) + bgColor.css(inverted) }, clean({ bold: !!bold, color: foreColor.clean, bgColor: bgColor.clean }), span);\n\n                    var _iteratorNormalCompletion2 = true;\n                    var _didIteratorError2 = false;\n                    var _iteratorError2 = undefined;\n\n                    try {\n                        for (var _iterator2 = styles[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                            var k = _step2.value;\n                            styledSpan[k] = true;\n                        }\n                    } catch (err) {\n                        _didIteratorError2 = true;\n                        _iteratorError2 = err;\n                    } finally {\n                        try {\n                            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                                _iterator2.return();\n                            }\n                        } finally {\n                            if (_didIteratorError2) {\n                                throw _iteratorError2;\n                            }\n                        }\n                    }\n\n                    if (c.isBrightness) {\n\n                        brightness = c.value;\n                    } else if (span.code.value !== undefined) {\n\n                        if (span.code.value === Code.reset) {\n                            reset();\n                        } else {\n\n                            switch (span.code.type) {\n\n                                case 'color':\n                                case 'colorLight':\n                                    color = new Color(false, c.subtype);break;\n\n                                case 'bgColor':\n                                case 'bgColorLight':\n                                    bgColor = new Color(true, c.subtype);break;\n\n                                case 'style':\n                                    styles.add(c.subtype);break;\n                                case 'unstyle':\n                                    styles.delete(c.subtype);break;\n                            }\n                        }\n                    }\n\n                    return styledSpan;\n                }).filter(function (s) {\n                    return s.text.length > 0;\n                })\n            });\n        }\n\n        /*  Outputs with Chrome DevTools-compatible format     */\n\n    }, {\n        key: 'asChromeConsoleLogArguments',\n        get: function get() {\n\n            var spans = this.parsed.spans;\n\n            return [spans.map(function (s) {\n                return '%c' + s.text;\n            }).join('')].concat(_toConsumableArray(spans.map(function (s) {\n                return s.css;\n            })));\n        }\n    }, {\n        key: 'browserConsoleArguments',\n        get: function get() /* LEGACY, DEPRECATED */{\n            return this.asChromeConsoleLogArguments;\n        }\n\n        /**\n         * @desc installs String prototype extensions\n         * @example\n         * require ('ansicolor').nice\n         * console.log ('foo'.bright.red)\n         */\n\n    }], [{\n        key: 'parse',\n\n\n        /**\n         * @desc parses a string containing ANSI escape codes\n         * @return {Colors} parsed representation.\n         */\n        value: function parse(s) {\n            return new Colors(s).parsed;\n        }\n\n        /**\n         * @desc strips ANSI codes from a string\n         * @param {string} s a string containing ANSI escape codes.\n         * @return {string} clean string.\n         */\n\n    }, {\n        key: 'strip',\n        value: function strip(s) {\n            return s.replace(/[\\u001b\\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g, ''); // hope V8 caches the regexp\n        }\n    }, {\n        key: 'nice',\n        get: function get() {\n\n            Colors.names.forEach(function (k) {\n                if (!(k in String.prototype)) {\n                    O.defineProperty(String.prototype, k, { get: function get() {\n                            return Colors[k](this);\n                        } });\n                }\n            });\n\n            return Colors;\n        }\n    }, {\n        key: 'ansicolor',\n        get: function get() {\n            return Colors;\n        }\n    }]);\n\n    return Colors;\n}();\n\n/*  ------------------------------------------------------------------------ */\n\nassignStringWrappingAPI(Colors, function (str) {\n    return str;\n});\n\n/*  ------------------------------------------------------------------------ */\n\nColors.names = stringWrappingMethods.map(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 1),\n        k = _ref4[0];\n\n    return k;\n});\n\n/*  ------------------------------------------------------------------------ */\n\nColors.rgb = {\n\n    black: [0, 0, 0],\n    darkGray: [100, 100, 100],\n    lightGray: [200, 200, 200],\n    white: [255, 255, 255],\n\n    red: [204, 0, 0],\n    lightRed: [255, 51, 0],\n\n    green: [0, 204, 0],\n    lightGreen: [51, 204, 51],\n\n    yellow: [204, 102, 0],\n    lightYellow: [255, 153, 51],\n\n    blue: [0, 0, 255],\n    lightBlue: [26, 140, 255],\n\n    magenta: [204, 0, 204],\n    lightMagenta: [255, 0, 255],\n\n    cyan: [0, 153, 255],\n    lightCyan: [0, 204, 255]\n\n    /*  ------------------------------------------------------------------------ */\n\n};module.exports = Colors;\n\n/*  ------------------------------------------------------------------------ */\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBZ0JULFVBQWMsQ0FBQyxDQUFELEVBQVEsQ0FBUixFQUFXLEdBQVgsQ0FoQkw7QUFpQlQsZUFBYyxDQUFDLEVBQUQsRUFBTSxHQUFOLEVBQVcsR0FBWCxDQWpCTDs7QUFtQlQsYUFBYyxDQUFDLEdBQUQsRUFBUSxDQUFSLEVBQVcsR0FBWCxDQW5CTDtBQW9CVCxrQkFBYyxDQUFDLEdBQUQsRUFBUSxDQUFSLEVBQVcsR0FBWCxDQXBCTDs7QUFzQlQsVUFBYyxDQUFDLENBQUQsRUFBTSxHQUFOLEVBQVcsR0FBWCxDQXRCTDtBQXVCVCxlQUFjLENBQUMsQ0FBRCxFQUFNLEdBQU4sRUFBVyxHQUFYOztBQUdsQjs7QUExQmEsQ0FBYixDQTRCQSxPQUFPLE9BQVAsR0FBaUIsTUFBakI7O0FBRUEiLCJmaWxlIjoiYW5zaWNvbG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgTyA9IE9iamVjdFxuXG4vKiAgU2VlIGh0dHBzOi8vbWlzYy5mbG9naXNvZnQuY29tL2Jhc2gvdGlwX2NvbG9yc19hbmRfZm9ybWF0dGluZ1xuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBjb2xvckNvZGVzICAgICAgPSBbICAgJ2JsYWNrJywgICAgICAncmVkJywgICAgICAnZ3JlZW4nLCAgICAgICd5ZWxsb3cnLCAgICAgICdibHVlJywgICAgICAnbWFnZW50YScsICAgICAgJ2N5YW4nLCAnbGlnaHRHcmF5JywgJycsICdkZWZhdWx0J11cbiAgICAsIGNvbG9yQ29kZXNMaWdodCA9IFsnZGFya0dyYXknLCAnbGlnaHRSZWQnLCAnbGlnaHRHcmVlbicsICdsaWdodFllbGxvdycsICdsaWdodEJsdWUnLCAnbGlnaHRNYWdlbnRhJywgJ2xpZ2h0Q3lhbicsICd3aGl0ZScsICcnXVxuICAgIFxuICAgICwgc3R5bGVDb2RlcyA9IFsnJywgJ2JyaWdodCcsICdkaW0nLCAnaXRhbGljJywgJ3VuZGVybGluZScsICcnLCAnJywgJ2ludmVyc2UnXVxuXG4gICAgLCBhc0JyaWdodCA9IHsgJ3JlZCc6ICAgICAgICdsaWdodFJlZCcsXG4gICAgICAgICAgICAgICAgICAgJ2dyZWVuJzogICAgICdsaWdodEdyZWVuJyxcbiAgICAgICAgICAgICAgICAgICAneWVsbG93JzogICAgJ2xpZ2h0WWVsbG93JyxcbiAgICAgICAgICAgICAgICAgICAnYmx1ZSc6ICAgICAgJ2xpZ2h0Qmx1ZScsXG4gICAgICAgICAgICAgICAgICAgJ21hZ2VudGEnOiAgICdsaWdodE1hZ2VudGEnLFxuICAgICAgICAgICAgICAgICAgICdjeWFuJzogICAgICAnbGlnaHRDeWFuJyxcbiAgICAgICAgICAgICAgICAgICAnYmxhY2snOiAgICAgJ2RhcmtHcmF5JyxcbiAgICAgICAgICAgICAgICAgICAnbGlnaHRHcmF5JzogJ3doaXRlJyB9XG4gICAgXG4gICAgLCB0eXBlcyA9IHsgMDogICdzdHlsZScsXG4gICAgICAgICAgICAgICAgMjogICd1bnN0eWxlJyxcbiAgICAgICAgICAgICAgICAzOiAgJ2NvbG9yJyxcbiAgICAgICAgICAgICAgICA5OiAgJ2NvbG9yTGlnaHQnLFxuICAgICAgICAgICAgICAgIDQ6ICAnYmdDb2xvcicsXG4gICAgICAgICAgICAgICAgMTA6ICdiZ0NvbG9yTGlnaHQnIH1cblxuICAgICwgc3VidHlwZXMgPSB7ICBjb2xvcjogICAgICAgICBjb2xvckNvZGVzLFxuICAgICAgICAgICAgICAgICAgICBjb2xvckxpZ2h0OiAgICBjb2xvckNvZGVzTGlnaHQsXG4gICAgICAgICAgICAgICAgICAgIGJnQ29sb3I6ICAgICAgIGNvbG9yQ29kZXMsXG4gICAgICAgICAgICAgICAgICAgIGJnQ29sb3JMaWdodDogIGNvbG9yQ29kZXNMaWdodCxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICAgICAgICAgc3R5bGVDb2RlcyxcbiAgICAgICAgICAgICAgICAgICAgdW5zdHlsZTogICAgICAgc3R5bGVDb2RlcyAgICB9XG5cbi8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgY2xlYW4gPSBvYmogPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgayBpbiBvYmopIHsgaWYgKCFvYmpba10pIHsgZGVsZXRlIG9ialtrXSB9IH1cbiAgICAgICAgICAgICAgICByZXR1cm4gKE8ua2V5cyAob2JqKS5sZW5ndGggPT09IDApID8gdW5kZWZpbmVkIDogb2JqXG4gICAgICAgICAgICB9XG5cbi8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY2xhc3MgQ29sb3Ige1xuXG4gICAgY29uc3RydWN0b3IgKGJhY2tncm91bmQsIG5hbWUsIGJyaWdodG5lc3MpIHtcblxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBiYWNrZ3JvdW5kXG4gICAgICAgIHRoaXMubmFtZSAgICAgICA9IG5hbWVcbiAgICAgICAgdGhpcy5icmlnaHRuZXNzID0gYnJpZ2h0bmVzc1xuICAgIH1cblxuICAgIGdldCBpbnZlcnNlICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvciAoIXRoaXMuYmFja2dyb3VuZCwgdGhpcy5uYW1lIHx8ICh0aGlzLmJhY2tncm91bmQgPyAnYmxhY2snIDogJ3doaXRlJyksIHRoaXMuYnJpZ2h0bmVzcylcbiAgICB9XG5cbiAgICBnZXQgY2xlYW4gKCkge1xuICAgICAgICByZXR1cm4gY2xlYW4gKHsgbmFtZTogICB0aGlzLm5hbWUgPT09ICdkZWZhdWx0JyA/ICcnIDogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJpZ2h0OiB0aGlzLmJyaWdodG5lc3MgPT09IENvZGUuYnJpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGltOiAgICB0aGlzLmJyaWdodG5lc3MgPT09IENvZGUuZGltIH0pXG4gICAgfVxuXG4gICAgZGVmYXVsdEJyaWdodG5lc3MgKHZhbHVlKSB7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvciAodGhpcy5iYWNrZ3JvdW5kLCB0aGlzLm5hbWUsIHRoaXMuYnJpZ2h0bmVzcyB8fCB2YWx1ZSlcbiAgICB9XG5cbiAgICBjc3MgKGludmVydGVkKSB7XG5cbiAgICAgICAgY29uc3QgY29sb3IgPSBpbnZlcnRlZCA/IHRoaXMuaW52ZXJzZSA6IHRoaXNcblxuICAgICAgICBjb25zdCByZ2JOYW1lID0gKChjb2xvci5icmlnaHRuZXNzID09PSBDb2RlLmJyaWdodCkgJiYgYXNCcmlnaHRbY29sb3IubmFtZV0pIHx8IGNvbG9yLm5hbWVcblxuICAgICAgICBjb25zdCBwcm9wID0gKGNvbG9yLmJhY2tncm91bmQgPyAnYmFja2dyb3VuZDonIDogJ2NvbG9yOicpXG4gICAgICAgICAgICAsIHJnYiAgPSBDb2xvcnMucmdiW3JnYk5hbWVdXG4gICAgICAgICAgICAsIGFscGhhID0gKHRoaXMuYnJpZ2h0bmVzcyA9PT0gQ29kZS5kaW0pID8gMC41IDogMVxuXG4gICAgICAgIHJldHVybiByZ2JcbiAgICAgICAgICAgICAgICA/IChwcm9wICsgJ3JnYmEoJyArIFsuLi5yZ2IsIGFscGhhXS5qb2luICgnLCcpICsgJyk7JylcbiAgICAgICAgICAgICAgICA6ICgoIWNvbG9yLmJhY2tncm91bmQgJiYgKGFscGhhIDwgMSkpID8gJ2NvbG9yOnJnYmEoMCwwLDAsMC41KTsnIDogJycpIC8vIENocm9tZSBkb2VzIG5vdCBzdXBwb3J0ICdvcGFjaXR5JyBwcm9wZXJ0eS4uLlxuICAgIH1cbn1cblxuLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jbGFzcyBDb2RlIHtcblxuICAgIGNvbnN0cnVjdG9yIChuKSB7XG4gICAgICAgIGlmIChuICE9PSB1bmRlZmluZWQpIHsgdGhpcy52YWx1ZSA9IE51bWJlciAobikgfSB9XG5cbiAgICBnZXQgdHlwZSAoKSB7XG4gICAgICAgcmV0dXJuIHR5cGVzW01hdGguZmxvb3IgKHRoaXMudmFsdWUgLyAxMCldIH1cblxuICAgIGdldCBzdWJ0eXBlICgpIHtcbiAgICAgICAgcmV0dXJuIHN1YnR5cGVzW3RoaXMudHlwZV1bdGhpcy52YWx1ZSAlIDEwXSB9XG5cbiAgICBnZXQgc3RyICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlID8gKCdcXHUwMDFiXFxbJyArIHRoaXMudmFsdWUgKyAnbScpIDogJycpIH1cblxuICAgIHN0YXRpYyBzdHIgKHgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2RlICh4KS5zdHIgfVxuXG4gICAgZ2V0IGlzQnJpZ2h0bmVzcyAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy52YWx1ZSA9PT0gQ29kZS5ub0JyaWdodG5lc3MpIHx8ICh0aGlzLnZhbHVlID09PSBDb2RlLmJyaWdodCkgfHwgKHRoaXMudmFsdWUgPT09IENvZGUuZGltKSB9XG59XG5cbi8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuTy5hc3NpZ24gKENvZGUsIHtcblxuICAgIHJlc2V0OiAgICAgICAgMCxcbiAgICBicmlnaHQ6ICAgICAgIDEsXG4gICAgZGltOiAgICAgICAgICAyLFxuICAgIGludmVyc2U6ICAgICAgNyxcbiAgICBub0JyaWdodG5lc3M6IDIyLFxuICAgIG5vSXRhbGljOiAgICAgMjMsXG4gICAgbm9VbmRlcmxpbmU6ICAyNCxcbiAgICBub0ludmVyc2U6ICAgIDI3LFxuICAgIG5vQ29sb3I6ICAgICAgMzksXG4gICAgbm9CZ0NvbG9yOiAgICA0OVxufSlcblxuLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCByZXBsYWNlQWxsID0gKHN0ciwgYSwgYikgPT4gc3RyLnNwbGl0IChhKS5qb2luIChiKVxuXG4vKiAgQU5TSSBicmlnaHRuZXNzIGNvZGVzIGRvIG5vdCBvdmVybGFwLCBlLmcuIFwie2JyaWdodH17ZGltfWZvb1wiIHdpbGwgYmUgcmVuZGVyZWQgYnJpZ2h0IChub3QgZGltKS5cbiAgICBTbyB3ZSBmaXggaXQgYnkgYWRkaW5nIGJyaWdodG5lc3MgY2FuY2VsaW5nIGJlZm9yZSBlYWNoIGJyaWdodG5lc3MgY29kZSwgc28gdGhlIGZvcm1lciBleGFtcGxlIGdldHNcbiAgICBjb252ZXJ0ZWQgdG8gXCJ7bm9CcmlnaHRuZXNzfXticmlnaHR9e25vQnJpZ2h0bmVzc317ZGltfWZvb1wiIOKAkyB0aGlzIHdheSBpdCBnZXRzIHJlbmRlcmVkIGFzIGV4cGVjdGVkLlxuICovXG5cbmNvbnN0IGRlbm9ybWFsaXplQnJpZ2h0bmVzcyA9IHMgPT4gcy5yZXBsYWNlICgvKFxcdTAwMWJcXFsoMXwyKW0pL2csICdcXHUwMDFiWzIybSQxJylcbmNvbnN0IG5vcm1hbGl6ZUJyaWdodG5lc3MgPSBzID0+IHMucmVwbGFjZSAoL1xcdTAwMWJcXFsyMm0oXFx1MDAxYlxcWygxfDIpbSkvZywgJyQxJylcblxuY29uc3Qgd3JhcCA9ICh4LCBvcGVuQ29kZSwgY2xvc2VDb2RlKSA9PiB7XG5cbiAgICBjb25zdCBvcGVuICA9IENvZGUuc3RyIChvcGVuQ29kZSksXG4gICAgICAgICAgY2xvc2UgPSBDb2RlLnN0ciAoY2xvc2VDb2RlKVxuXG4gICAgcmV0dXJuIFN0cmluZyAoeClcbiAgICAgICAgICAgICAgICAuc3BsaXQgKCdcXG4nKVxuICAgICAgICAgICAgICAgIC5tYXAgKGxpbmUgPT4gZGVub3JtYWxpemVCcmlnaHRuZXNzIChvcGVuICsgcmVwbGFjZUFsbCAobm9ybWFsaXplQnJpZ2h0bmVzcyAobGluZSksIGNsb3NlLCBvcGVuKSArIGNsb3NlKSlcbiAgICAgICAgICAgICAgICAuam9pbiAoJ1xcbicpXG59XG5cbi8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgY2FtZWwgPSAoYSwgYikgPT4gYSArIGIuY2hhckF0ICgwKS50b1VwcGVyQ2FzZSAoKSArIGIuc2xpY2UgKDEpXG5cblxuY29uc3Qgc3RyaW5nV3JhcHBpbmdNZXRob2RzID0gKCgpID0+IFtcblxuICAgICAgICAuLi5jb2xvckNvZGVzLm1hcCAoKGssIGkpID0+ICFrID8gW10gOiBbIC8vIGNvbG9yIG1ldGhvZHNcblxuICAgICAgICAgICAgW2ssICAgICAgICAgICAgICAgMzAgKyBpLCBDb2RlLm5vQ29sb3JdLFxuICAgICAgICAgICAgW2NhbWVsICgnYmcnLCBrKSwgNDAgKyBpLCBDb2RlLm5vQmdDb2xvcl0sXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC4uLmNvbG9yQ29kZXNMaWdodC5tYXAgKChrLCBpKSA9PiAhayA/IFtdIDogWyAvLyBsaWdodCBjb2xvciBtZXRob2RzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFtrLCAgICAgICAgICAgICAgICA5MCArIGksIENvZGUubm9Db2xvcl0sXG4gICAgICAgICAgICBbY2FtZWwgKCdiZycsIGspLCAxMDAgKyBpLCBDb2RlLm5vQmdDb2xvcl0sXG4gICAgICAgIF0pLFxuXG4gICAgICAgIC8qIFRISVMgT05FIElTIEZPUiBCQUNLV0FSRFMgQ09NUEFUSUJJTElUWSBXSVRIIFBSRVZJT1VTIFZFUlNJT05TIChoYWQgJ2JyaWdodCcgaW5zdGVhZCBvZiAnbGlnaHQnIGZvciBiYWNrZ3JvdW5kcylcbiAgICAgICAgICovXG4gICAgICAgIC4uLlsnJywgJ0JyaWdodFJlZCcsICdCcmlnaHRHcmVlbicsICdCcmlnaHRZZWxsb3cnLCAnQnJpZ2h0Qmx1ZScsICdCcmlnaHRNYWdlbnRhJywgJ0JyaWdodEN5YW4nXS5tYXAgKChrLCBpKSA9PiAhayA/IFtdIDogW1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBbJ2JnJyArIGssIDEwMCArIGksIENvZGUubm9CZ0NvbG9yXSxcbiAgICAgICAgXSksXG4gICAgICAgIFxuICAgICAgICAuLi5zdHlsZUNvZGVzLm1hcCAoKGssIGkpID0+ICFrID8gW10gOiBbIC8vIHN0eWxlIG1ldGhvZHNcblxuICAgICAgICAgICAgW2ssIGksICgoayA9PT0gJ2JyaWdodCcpIHx8IChrID09PSAnZGltJykpID8gQ29kZS5ub0JyaWdodG5lc3MgOiAoMjAgKyBpKV1cbiAgICAgICAgXSlcbiAgICBdXG4gICAgLnJlZHVjZSAoKGEsIGIpID0+IGEuY29uY2F0IChiKSlcbiAgICBcbikgKCk7XG5cbi8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgYXNzaWduU3RyaW5nV3JhcHBpbmdBUEkgPSAodGFyZ2V0LCB3cmFwQmVmb3JlID0gdGFyZ2V0KSA9PlxuXG4gICAgc3RyaW5nV3JhcHBpbmdNZXRob2RzLnJlZHVjZSAoKG1lbW8sIFtrLCBvcGVuLCBjbG9zZV0pID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5kZWZpbmVQcm9wZXJ0eSAobWVtbywgaywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGFzc2lnblN0cmluZ1dyYXBwaW5nQVBJIChzdHIgPT4gd3JhcEJlZm9yZSAod3JhcCAoc3RyLCBvcGVuLCBjbG9zZSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0KVxuXG4vKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IFRFWFQgICAgPSAwLFxuICAgICAgQlJBQ0tFVCA9IDEsXG4gICAgICBDT0RFICAgID0gMlxuXG5mdW5jdGlvbiByYXdQYXJzZSAocykge1xuICAgIFxuICAgIGxldCBzdGF0ZSA9IFRFWFQsIGJ1ZmZlciA9ICcnLCB0ZXh0ID0gJycsIGNvZGUgPSAnJywgY29kZXMgPSBbXVxuICAgIGxldCBzcGFucyA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG5cbiAgICAgICAgY29uc3QgYyA9IHNbaV1cblxuICAgICAgICBidWZmZXIgKz0gY1xuXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcblxuICAgICAgICAgICAgY2FzZSBURVhUOlxuICAgICAgICAgICAgICAgIGlmIChjID09PSAnXFx1MDAxYicpIHsgc3RhdGUgPSBCUkFDS0VUOyBidWZmZXIgPSBjOyB9XG4gICAgICAgICAgICAgICAgZWxzZSAgICAgICAgICAgICAgICB7IHRleHQgKz0gYyB9XG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgY2FzZSBCUkFDS0VUOlxuICAgICAgICAgICAgICAgIGlmIChjID09PSAnWycpIHsgc3RhdGUgPSBDT0RFOyBjb2RlID0gJyc7IGNvZGVzID0gW10gfVxuICAgICAgICAgICAgICAgIGVsc2UgICAgICAgICAgIHsgc3RhdGUgPSBURVhUOyB0ZXh0ICs9IGJ1ZmZlciB9XG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgY2FzZSBDT0RFOlxuXG4gICAgICAgICAgICAgICAgaWYgKChjID49ICcwJykgJiYgKGMgPD0gJzknKSkgICAgICAgIHsgY29kZSArPSBjIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSAnOycpICAgICAgICAgICAgICAgICAgeyBjb2Rlcy5wdXNoIChuZXcgQ29kZSAoY29kZSkpOyBjb2RlID0gJycgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChjID09PSAnbScpICYmIGNvZGUubGVuZ3RoKSB7IGNvZGVzLnB1c2ggKG5ldyBDb2RlIChjb2RlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgY29kZXMpIHsgc3BhbnMucHVzaCAoeyB0ZXh0LCBjb2RlIH0pOyB0ZXh0ID0gJycgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gVEVYVFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3RhdGUgPSBURVhUOyB0ZXh0ICs9IGJ1ZmZlciB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3RhdGUgIT09IFRFWFQpIHRleHQgKz0gYnVmZmVyXG5cbiAgICBpZiAodGV4dCkgc3BhbnMucHVzaCAoeyB0ZXh0LCBjb2RlOiBuZXcgQ29kZSAoKSB9KVxuXG4gICAgcmV0dXJuIHNwYW5zXG59XG5cbi8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIGFuIEFOU0ktZXNjYXBlZCBzdHJpbmcuXG4gKi9cbmNsYXNzIENvbG9ycyB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcyBhIHN0cmluZyBjb250YWluaW5nIEFOU0kgZXNjYXBlIGNvZGVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yIChzKSB7XG5cbiAgICAgICAgdGhpcy5zcGFucyA9IHMgPyByYXdQYXJzZSAocykgOiBbXVxuICAgIH1cblxuICAgIGdldCBzdHIgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcGFucy5yZWR1Y2UgKChzdHIsIHApID0+IHN0ciArIHAudGV4dCArIHAuY29kZS5zdHIsICcnKVxuICAgIH1cblxuICAgIGdldCBwYXJzZWQgKCkge1xuXG4gICAgICAgIGxldCBjb2xvciwgYmdDb2xvciwgYnJpZ2h0bmVzcywgc3R5bGVzXG5cbiAgICAgICAgZnVuY3Rpb24gcmVzZXQgKCkge1xuXG4gICAgICAgICAgICBjb2xvciAgICAgID0gbmV3IENvbG9yICgpLFxuICAgICAgICAgICAgYmdDb2xvciAgICA9IG5ldyBDb2xvciAodHJ1ZSAvKiBiYWNrZ3JvdW5kICovKSxcbiAgICAgICAgICAgIGJyaWdodG5lc3MgPSB1bmRlZmluZWQsXG4gICAgICAgICAgICBzdHlsZXMgICAgID0gbmV3IFNldCAoKVxuICAgICAgICB9XG5cbiAgICAgICAgcmVzZXQgKClcblxuICAgICAgICByZXR1cm4gTy5hc3NpZ24gKG5ldyBDb2xvcnMgKCksIHtcblxuICAgICAgICAgICAgc3BhbnM6IHRoaXMuc3BhbnMubWFwIChzcGFuID0+IHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBzcGFuLmNvZGVcblxuICAgICAgICAgICAgICAgIGNvbnN0IGludmVydGVkICA9IHN0eWxlcy5oYXMgKCdpbnZlcnNlJyksXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZXJsaW5lID0gc3R5bGVzLmhhcyAoJ3VuZGVybGluZScpICAgPyAndGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7JyA6ICcnLCAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICBpdGFsaWMgICAgPSBzdHlsZXMuaGFzICgnaXRhbGljJykgICAgICA/ICdmb250LXN0eWxlOiBpdGFsaWM7JyA6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgIGJvbGQgICAgICA9IGJyaWdodG5lc3MgPT09IENvZGUuYnJpZ2h0ID8gJ2ZvbnQtd2VpZ2h0OiBib2xkOycgOiAnJ1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZm9yZUNvbG9yID0gY29sb3IuZGVmYXVsdEJyaWdodG5lc3MgKGJyaWdodG5lc3MpXG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZWRTcGFuID0gTy5hc3NpZ24gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY3NzOiBib2xkICsgaXRhbGljICsgdW5kZXJsaW5lICsgZm9yZUNvbG9yLmNzcyAoaW52ZXJ0ZWQpICsgYmdDb2xvci5jc3MgKGludmVydGVkKSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuICh7IGJvbGQ6ICEhYm9sZCwgY29sb3I6IGZvcmVDb2xvci5jbGVhbiwgYmdDb2xvcjogYmdDb2xvci5jbGVhbiB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuKVxuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrIG9mIHN0eWxlcykgeyBzdHlsZWRTcGFuW2tdID0gdHJ1ZSB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYy5pc0JyaWdodG5lc3MpIHtcblxuICAgICAgICAgICAgICAgICAgICBicmlnaHRuZXNzID0gYy52YWx1ZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3Bhbi5jb2RlLnZhbHVlICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc3Bhbi5jb2RlLnZhbHVlID09PSBDb2RlLnJlc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldCAoKVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3Bhbi5jb2RlLnR5cGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbG9yJyAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbG9yTGlnaHQnICAgOiBjb2xvciAgID0gbmV3IENvbG9yIChmYWxzZSwgYy5zdWJ0eXBlKTsgYnJlYWtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JnQ29sb3InICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JnQ29sb3JMaWdodCcgOiBiZ0NvbG9yID0gbmV3IENvbG9yICh0cnVlLCAgYy5zdWJ0eXBlKTsgYnJlYWtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0eWxlJyAgOiBzdHlsZXMuYWRkICAgIChjLnN1YnR5cGUpOyBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Vuc3R5bGUnOiBzdHlsZXMuZGVsZXRlIChjLnN1YnR5cGUpOyBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlZFNwYW5cblxuICAgICAgICAgICAgfSkuZmlsdGVyIChzID0+IHMudGV4dC5sZW5ndGggPiAwKVxuICAgICAgICB9KVxuICAgIH1cblxuLyogIE91dHB1dHMgd2l0aCBDaHJvbWUgRGV2VG9vbHMtY29tcGF0aWJsZSBmb3JtYXQgICAgICovXG5cbiAgICBnZXQgYXNDaHJvbWVDb25zb2xlTG9nQXJndW1lbnRzICgpIHtcblxuICAgICAgICBjb25zdCBzcGFucyA9IHRoaXMucGFyc2VkLnNwYW5zXG5cbiAgICAgICAgcmV0dXJuIFtzcGFucy5tYXAgKHMgPT4gKCclYycgKyBzLnRleHQpKS5qb2luICgnJyksXG4gICAgICAgICAgICAgLi4uc3BhbnMubWFwIChzID0+IHMuY3NzKV1cbiAgICB9XG5cbiAgICBnZXQgYnJvd3NlckNvbnNvbGVBcmd1bWVudHMgKCkgLyogTEVHQUNZLCBERVBSRUNBVEVEICovIHsgcmV0dXJuIHRoaXMuYXNDaHJvbWVDb25zb2xlTG9nQXJndW1lbnRzIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjIGluc3RhbGxzIFN0cmluZyBwcm90b3R5cGUgZXh0ZW5zaW9uc1xuICAgICAqIEBleGFtcGxlXG4gICAgICogcmVxdWlyZSAoJ2Fuc2ljb2xvcicpLm5pY2VcbiAgICAgKiBjb25zb2xlLmxvZyAoJ2ZvbycuYnJpZ2h0LnJlZClcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IG5pY2UgKCkge1xuXG4gICAgICAgIENvbG9ycy5uYW1lcy5mb3JFYWNoIChrID0+IHtcbiAgICAgICAgICAgIGlmICghKGsgaW4gU3RyaW5nLnByb3RvdHlwZSkpIHtcbiAgICAgICAgICAgICAgICBPLmRlZmluZVByb3BlcnR5IChTdHJpbmcucHJvdG90eXBlLCBrLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gQ29sb3JzW2tdICh0aGlzKSB9IH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIENvbG9yc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjIHBhcnNlcyBhIHN0cmluZyBjb250YWluaW5nIEFOU0kgZXNjYXBlIGNvZGVzXG4gICAgICogQHJldHVybiB7Q29sb3JzfSBwYXJzZWQgcmVwcmVzZW50YXRpb24uXG4gICAgICovXG4gICAgc3RhdGljIHBhcnNlIChzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3JzIChzKS5wYXJzZWRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzYyBzdHJpcHMgQU5TSSBjb2RlcyBmcm9tIGEgc3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHMgYSBzdHJpbmcgY29udGFpbmluZyBBTlNJIGVzY2FwZSBjb2Rlcy5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IGNsZWFuIHN0cmluZy5cbiAgICAgKi9cbiAgICBzdGF0aWMgc3RyaXAgKHMpIHtcbiAgICAgICAgcmV0dXJuIHMucmVwbGFjZSAoL1tcXHUwMDFiXFx1MDA5Yl1bWygpIzs/XSooPzpbMC05XXsxLDR9KD86O1swLTldezAsNH0pKik/WzAtOUEtUFJaY2YtbnFyeT0+PF0vZywgJycpIC8vIGhvcGUgVjggY2FjaGVzIHRoZSByZWdleHBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGNvbnN0IHNwYW5zID0gWy4uLmFuc2kucGFyc2UgKCdcXHUwMDFiWzdtXFx1MDAxYls3bWZvb1xcdTAwMWJbN21iYXJcXHUwMDFiWzI3bScpXVxuICAgICAqL1xuICAgIFtTeW1ib2wuaXRlcmF0b3JdICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BhbnNbU3ltYm9sLml0ZXJhdG9yXSAoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjIFRoaXMgYWxsb3dzIGFuIGFsdGVybmF0aXZlIGltcG9ydCBzdHlsZSwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS94cGwvYW5zaWNvbG9yL2lzc3Vlcy83I2lzc3VlY29tbWVudC01Nzg5MjM1NzhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGltcG9ydCB7IGFuc2ljb2xvciwgUGFyc2VkU3BhbiB9IGZyb20gJ2Fuc2ljb2xvcidcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IGFuc2ljb2xvciAoKSB7XG4gICAgICAgIHJldHVybiBDb2xvcnNcbiAgICB9XG59XG5cbi8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuYXNzaWduU3RyaW5nV3JhcHBpbmdBUEkgKENvbG9ycywgc3RyID0+IHN0cilcblxuLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5Db2xvcnMubmFtZXMgPSBzdHJpbmdXcmFwcGluZ01ldGhvZHMubWFwICgoW2tdKSA9PiBrKVxuXG4vKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbkNvbG9ycy5yZ2IgPSB7XG5cbiAgICBibGFjazogICAgICAgIFswLCAgICAgMCwgICAwXSwgICAgXG4gICAgZGFya0dyYXk6ICAgICBbMTAwLCAxMDAsIDEwMF0sXG4gICAgbGlnaHRHcmF5OiAgICBbMjAwLCAyMDAsIDIwMF0sXG4gICAgd2hpdGU6ICAgICAgICBbMjU1LCAyNTUsIDI1NV0sXG5cbiAgICByZWQ6ICAgICAgICAgIFsyMDQsICAgMCwgICAwXSxcbiAgICBsaWdodFJlZDogICAgIFsyNTUsICA1MSwgICAwXSxcbiAgICBcbiAgICBncmVlbjogICAgICAgIFswLCAgIDIwNCwgICAwXSxcbiAgICBsaWdodEdyZWVuOiAgIFs1MSwgIDIwNCwgIDUxXSxcbiAgICBcbiAgICB5ZWxsb3c6ICAgICAgIFsyMDQsIDEwMiwgICAwXSxcbiAgICBsaWdodFllbGxvdzogIFsyNTUsIDE1MywgIDUxXSxcbiAgICBcbiAgICBibHVlOiAgICAgICAgIFswLCAgICAgMCwgMjU1XSxcbiAgICBsaWdodEJsdWU6ICAgIFsyNiwgIDE0MCwgMjU1XSxcbiAgICBcbiAgICBtYWdlbnRhOiAgICAgIFsyMDQsICAgMCwgMjA0XSxcbiAgICBsaWdodE1hZ2VudGE6IFsyNTUsICAgMCwgMjU1XSxcbiAgICBcbiAgICBjeWFuOiAgICAgICAgIFswLCAgIDE1MywgMjU1XSxcbiAgICBsaWdodEN5YW46ICAgIFswLCAgIDIwNCwgMjU1XSxcbn1cblxuLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbG9yc1xuXG4vKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiJdfQ==","function noop() {}\n\nclass RunnableLink {\n  constructor(prev, next, fn) {\n    this.prev = prev;\n    this.next = next;\n    this.fn = fn || noop;\n  }\n\n  run(data) {\n    this.fn(data);\n    this.next && this.next.run(data);\n  }\n}\n\nexport default RunnableLink;\n","import RunnableLink from './runnableLink';\n\n// A relatively generic LinkedList impl\nclass LinkedList {\n  constructor(linkConstructor) {\n    this.head = new RunnableLink();\n    this.tail = new RunnableLink(this.head);\n    this.head.next = this.tail;\n    this.linkConstructor = linkConstructor;\n    this.reg = {};\n  }\n\n  insert(data) {\n    const link = new RunnableLink(this.tail.prev, this.tail, data);\n    link.next.prev = link;\n    link.prev.next = link;\n    return link;\n  }\n\n  remove(link) {\n    link.prev.next = link.next;\n    link.next.prev = link.prev;\n  }\n}\n\nexport default LinkedList;\n","import LinkedList from './linkedList';\n\nlet id = 0;\nconst splitter = /[\\s,]+/g;\n\n// A link in the linked list which allows\n// for efficient execution of the callbacks\n\nclass Eev {\n  constructor() {\n    this.events = {};\n  }\n\n  on(names, fn) {\n    const me = this;\n\n    names.split(splitter).forEach(name => {\n      const list = me.events[name] || (me.events[name] = new LinkedList());\n      const eev = fn._eev || (fn._eev = ++id);\n\n      list.reg[eev] || (list.reg[eev] = list.insert(fn));\n    });\n  }\n\n  off(names, fn) {\n    const me = this;\n    fn &&\n      names.split(splitter).forEach(function(name) {\n        const list = me.events[name];\n\n        if (!list) {\n          return;\n        }\n\n        const link = list.reg[fn._eev];\n\n        list.reg[fn._eev] = undefined;\n\n        list && link && list.remove(link);\n      });\n  }\n\n  removeListener(...args) {\n    this.off(...args);\n  }\n\n  emit(name, data) {\n    const evt = this.events[name];\n    evt && evt.head.run(data);\n  }\n}\n\nexport default Eev;\n","import Emitter from '../emitter';\n\n// not used a lot -- extending Emitter is not crucial, we use it sometimes for custom events on stores (example: logStore when new entry is added... so we can scroll the textarea to bottom)\nclass Store extends Emitter {\n  constructor() {\n    // initState = {}\n    super();\n\n    this.state = {};\n\n    this.subscriptions = [];\n\n    //this.set(initState);\n  }\n\n  set(state) {\n    Object.assign(this.state, state);\n\n    // attach state variables directly to store for easier reference from templates\n    Object.assign(this, this.state);\n\n    this.pushStateToSubscribers();\n  }\n\n  get() {\n    return this.state;\n  }\n\n  subscribe(callback) {\n    // todo check if the same ID already exists ... small chance but still ;)\n    const subscriptionId = Math.random();\n\n    this.subscriptions.push({ subscriptionId, callback });\n\n    callback(this.state);\n\n    // return unsubscribe function\n    return () => {\n      this.subscriptions.forEach((el, index) => {\n        if (el.subscriptionId == subscriptionId) {\n          this.subscriptions.splice(index, 1);\n        }\n      });\n    };\n  }\n\n  pushStateToSubscribers() {\n    this.subscriptions.forEach(sub => sub.callback(this.state));\n  }\n}\n\nexport default Store;\n","/*!\r\n * https://github.com/Starcounter-Jack/JSON-Patch\r\n * (c) 2017 Joachim Wester\r\n * MIT license\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\r\nexport function hasOwnProperty(obj, key) {\r\n    return _hasOwnProperty.call(obj, key);\r\n}\r\nexport function _objectKeys(obj) {\r\n    if (Array.isArray(obj)) {\r\n        var keys = new Array(obj.length);\r\n        for (var k = 0; k < keys.length; k++) {\r\n            keys[k] = \"\" + k;\r\n        }\r\n        return keys;\r\n    }\r\n    if (Object.keys) {\r\n        return Object.keys(obj);\r\n    }\r\n    var keys = [];\r\n    for (var i in obj) {\r\n        if (hasOwnProperty(obj, i)) {\r\n            keys.push(i);\r\n        }\r\n    }\r\n    return keys;\r\n}\r\n;\r\n/**\r\n* Deeply clone the object.\r\n* https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\r\n* @param  {any} obj value to clone\r\n* @return {any} cloned obj\r\n*/\r\nexport function _deepClone(obj) {\r\n    switch (typeof obj) {\r\n        case \"object\":\r\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\r\n        case \"undefined\":\r\n            return null; //this is how JSON.stringify behaves for array items\r\n        default:\r\n            return obj; //no need to clone primitives\r\n    }\r\n}\r\n//3x faster than cached /^\\d+$/.test(str)\r\nexport function isInteger(str) {\r\n    var i = 0;\r\n    var len = str.length;\r\n    var charCode;\r\n    while (i < len) {\r\n        charCode = str.charCodeAt(i);\r\n        if (charCode >= 48 && charCode <= 57) {\r\n            i++;\r\n            continue;\r\n        }\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n* Escapes a json pointer path\r\n* @param path The raw pointer\r\n* @return the Escaped path\r\n*/\r\nexport function escapePathComponent(path) {\r\n    if (path.indexOf('/') === -1 && path.indexOf('~') === -1)\r\n        return path;\r\n    return path.replace(/~/g, '~0').replace(/\\//g, '~1');\r\n}\r\n/**\r\n * Unescapes a json pointer path\r\n * @param path The escaped pointer\r\n * @return The unescaped path\r\n */\r\nexport function unescapePathComponent(path) {\r\n    return path.replace(/~1/g, '/').replace(/~0/g, '~');\r\n}\r\nexport function _getPathRecursive(root, obj) {\r\n    var found;\r\n    for (var key in root) {\r\n        if (hasOwnProperty(root, key)) {\r\n            if (root[key] === obj) {\r\n                return escapePathComponent(key) + '/';\r\n            }\r\n            else if (typeof root[key] === 'object') {\r\n                found = _getPathRecursive(root[key], obj);\r\n                if (found != '') {\r\n                    return escapePathComponent(key) + '/' + found;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return '';\r\n}\r\nexport function getPath(root, obj) {\r\n    if (root === obj) {\r\n        return '/';\r\n    }\r\n    var path = _getPathRecursive(root, obj);\r\n    if (path === '') {\r\n        throw new Error(\"Object not found in root\");\r\n    }\r\n    return '/' + path;\r\n}\r\n/**\r\n* Recursively checks whether an object has any undefined values inside.\r\n*/\r\nexport function hasUndefined(obj) {\r\n    if (obj === undefined) {\r\n        return true;\r\n    }\r\n    if (obj) {\r\n        if (Array.isArray(obj)) {\r\n            for (var i = 0, len = obj.length; i < len; i++) {\r\n                if (hasUndefined(obj[i])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        else if (typeof obj === \"object\") {\r\n            var objKeys = _objectKeys(obj);\r\n            var objKeysLength = objKeys.length;\r\n            for (var i = 0; i < objKeysLength; i++) {\r\n                if (hasUndefined(obj[objKeys[i]])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction patchErrorMessageFormatter(message, args) {\r\n    var messageParts = [message];\r\n    for (var key in args) {\r\n        var value = typeof args[key] === 'object' ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\r\n        if (typeof value !== 'undefined') {\r\n            messageParts.push(key + \": \" + value);\r\n        }\r\n    }\r\n    return messageParts.join('\\n');\r\n}\r\nvar PatchError = /** @class */ (function (_super) {\r\n    __extends(PatchError, _super);\r\n    function PatchError(message, name, index, operation, tree) {\r\n        var _newTarget = this.constructor;\r\n        var _this = _super.call(this, patchErrorMessageFormatter(message, { name: name, index: index, operation: operation, tree: tree })) || this;\r\n        _this.name = name;\r\n        _this.index = index;\r\n        _this.operation = operation;\r\n        _this.tree = tree;\r\n        Object.setPrototypeOf(_this, _newTarget.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\r\n        _this.message = patchErrorMessageFormatter(message, { name: name, index: index, operation: operation, tree: tree });\r\n        return _this;\r\n    }\r\n    return PatchError;\r\n}(Error));\r\nexport { PatchError };\r\n","import { PatchError, _deepClone, isInteger, unescapePathComponent, hasUndefined } from './helpers.mjs';\nexport var JsonPatchError = PatchError;\nexport var deepClone = _deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */\n/* The operations applicable to an object */\nvar objOps = {\n    add: function (obj, key, document) {\n        obj[key] = this.value;\n        return { newDocument: document };\n    },\n    remove: function (obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return { newDocument: document, removed: removed };\n    },\n    replace: function (obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return { newDocument: document, removed: removed };\n    },\n    move: function (obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */\n        var removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = _deepClone(removed);\n        }\n        var originalValue = applyOperation(document, { op: \"remove\", path: this.from }).removed;\n        applyOperation(document, { op: \"add\", path: this.path, value: originalValue });\n        return { newDocument: document, removed: removed };\n    },\n    copy: function (obj, key, document) {\n        var valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, { op: \"add\", path: this.path, value: _deepClone(valueToCopy) });\n        return { newDocument: document };\n    },\n    test: function (obj, key, document) {\n        return { newDocument: document, test: _areEquals(obj[key], this.value) };\n    },\n    _get: function (obj, key, document) {\n        this.value = obj[key];\n        return { newDocument: document };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */\nvar arrOps = {\n    add: function (arr, i, document) {\n        if (isInteger(i)) {\n            arr.splice(i, 0, this.value);\n        }\n        else { // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return { newDocument: document, index: i };\n    },\n    remove: function (arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return { newDocument: document, removed: removedList[0] };\n    },\n    replace: function (arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return { newDocument: document, removed: removed };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */\nexport function getValueByPointer(document, pointer) {\n    if (pointer == '') {\n        return document;\n    }\n    var getOriginalDestination = { op: \"_get\", path: pointer };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */\nexport function applyOperation(document, operation, validateOperation, mutateDocument, banPrototypeModifications, index) {\n    if (validateOperation === void 0) { validateOperation = false; }\n    if (mutateDocument === void 0) { mutateDocument = true; }\n    if (banPrototypeModifications === void 0) { banPrototypeModifications = true; }\n    if (index === void 0) { index = 0; }\n    if (validateOperation) {\n        if (typeof validateOperation == 'function') {\n            validateOperation(operation, 0, document, operation.path);\n        }\n        else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */\n    if (operation.path === \"\") {\n        var returnValue = { newDocument: document };\n        if (operation.op === 'add') {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        }\n        else if (operation.op === 'replace') {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        }\n        else if (operation.op === 'move' || operation.op === 'copy') { // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === 'move') { // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        }\n        else if (operation.op === 'test') {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        }\n        else if (operation.op === 'remove') { // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        }\n        else if (operation.op === '_get') {\n            operation.value = document;\n            return returnValue;\n        }\n        else { /* bad operation */\n            if (validateOperation) {\n                throw new JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902', 'OPERATION_OP_INVALID', index, operation, document);\n            }\n            else {\n                return returnValue;\n            }\n        }\n    } /* END ROOT OPERATIONS */\n    else {\n        if (!mutateDocument) {\n            document = _deepClone(document);\n        }\n        var path = operation.path || \"\";\n        var keys = path.split('/');\n        var obj = document;\n        var t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        var len = keys.length;\n        var existingPathFragment = undefined;\n        var key = void 0;\n        var validateFunction = void 0;\n        if (typeof validateOperation == 'function') {\n            validateFunction = validateOperation;\n        }\n        else {\n            validateFunction = validator;\n        }\n        while (true) {\n            key = keys[t];\n            if (banPrototypeModifications && key == '__proto__') {\n                throw new TypeError('JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README');\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join('/');\n                    }\n                    else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === '-') {\n                    key = obj.length;\n                }\n                else {\n                    if (validateOperation && !isInteger(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } // only parse key when it's an integer for `arr.prop` to work\n                    else if (isInteger(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    var returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            else {\n                if (key && key.indexOf('~') != -1) {\n                    key = unescapePathComponent(key);\n                }\n                if (t >= len) {\n                    var returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */\nexport function applyPatch(document, patch, validateOperation, mutateDocument, banPrototypeModifications) {\n    if (mutateDocument === void 0) { mutateDocument = true; }\n    if (banPrototypeModifications === void 0) { banPrototypeModifications = true; }\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError('Patch sequence must be an array', 'SEQUENCE_NOT_AN_ARRAY');\n        }\n    }\n    if (!mutateDocument) {\n        document = _deepClone(document);\n    }\n    var results = new Array(patch.length);\n    for (var i = 0, length_1 = patch.length; i < length_1; i++) {\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */\nexport function applyReducer(document, operation, index) {\n    var operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) { // failed test\n        throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */\nexport function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== 'object' || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError('Operation is not an object', 'OPERATION_NOT_AN_OBJECT', index, operation, document);\n    }\n    else if (!objOps[operation.op]) {\n        throw new JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902', 'OPERATION_OP_INVALID', index, operation, document);\n    }\n    else if (typeof operation.path !== 'string') {\n        throw new JsonPatchError('Operation `path` property is not a string', 'OPERATION_PATH_INVALID', index, operation, document);\n    }\n    else if (operation.path.indexOf('/') !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', 'OPERATION_PATH_INVALID', index, operation, document);\n    }\n    else if ((operation.op === 'move' || operation.op === 'copy') && typeof operation.from !== 'string') {\n        throw new JsonPatchError('Operation `from` property is not present (applicable in `move` and `copy` operations)', 'OPERATION_FROM_REQUIRED', index, operation, document);\n    }\n    else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && operation.value === undefined) {\n        throw new JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_REQUIRED', index, operation, document);\n    }\n    else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && hasUndefined(operation.value)) {\n        throw new JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED', index, operation, document);\n    }\n    else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError('Cannot perform an `add` operation at the desired path', 'OPERATION_PATH_CANNOT_ADD', index, operation, document);\n            }\n        }\n        else if (operation.op === 'replace' || operation.op === 'remove' || operation.op === '_get') {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError('Cannot perform the operation at a path that does not exist', 'OPERATION_PATH_UNRESOLVABLE', index, operation, document);\n            }\n        }\n        else if (operation.op === 'move' || operation.op === 'copy') {\n            var existingValue = { op: \"_get\", path: operation.from, value: undefined };\n            var error = validate([existingValue], document);\n            if (error && error.name === 'OPERATION_PATH_UNRESOLVABLE') {\n                throw new JsonPatchError('Cannot perform the operation from a path that does not exist', 'OPERATION_FROM_UNRESOLVABLE', index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */\nexport function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError('Patch sequence must be an array', 'SEQUENCE_NOT_AN_ARRAY');\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch(_deepClone(document), _deepClone(sequence), externalValidator || true);\n        }\n        else {\n            externalValidator = externalValidator || validator;\n            for (var i = 0; i < sequence.length; i++) {\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    }\n    catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        }\n        else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nexport function _areEquals(a, b) {\n    if (a === b)\n        return true;\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length)\n                return false;\n            for (i = length; i-- !== 0;)\n                if (!_areEquals(a[i], b[i]))\n                    return false;\n            return true;\n        }\n        if (arrA != arrB)\n            return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length)\n            return false;\n        for (i = length; i-- !== 0;)\n            if (!b.hasOwnProperty(keys[i]))\n                return false;\n        for (i = length; i-- !== 0;) {\n            key = keys[i];\n            if (!_areEquals(a[key], b[key]))\n                return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n;\n","/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017 Joachim Wester\n * MIT license\n */\nimport { _deepClone, _objectKeys, escapePathComponent, hasOwnProperty } from './helpers.mjs';\nimport { applyPatch } from './core.mjs';\nvar beforeDict = new WeakMap();\nvar Mirror = /** @class */ (function () {\n    function Mirror(obj) {\n        this.observers = new Map();\n        this.obj = obj;\n    }\n    return Mirror;\n}());\nvar ObserverInfo = /** @class */ (function () {\n    function ObserverInfo(callback, observer) {\n        this.callback = callback;\n        this.observer = observer;\n    }\n    return ObserverInfo;\n}());\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */\nexport function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */\nexport function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    }\n    else {\n        var observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = _deepClone(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = function () {\n            generate(observer);\n        };\n        var fastCheck = function () {\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (typeof window !== 'undefined') { //not Node\n            window.addEventListener('mouseup', fastCheck);\n            window.addEventListener('keyup', fastCheck);\n            window.addEventListener('mousedown', fastCheck);\n            window.addEventListener('keydown', fastCheck);\n            window.addEventListener('change', fastCheck);\n        }\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = function () {\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (typeof window !== 'undefined') {\n            window.removeEventListener('mouseup', fastCheck);\n            window.removeEventListener('keyup', fastCheck);\n            window.removeEventListener('mousedown', fastCheck);\n            window.removeEventListener('keydown', fastCheck);\n            window.removeEventListener('change', fastCheck);\n        }\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */\nexport function generate(observer, invertible) {\n    if (invertible === void 0) { invertible = false; }\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        applyPatch(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = _objectKeys(obj);\n    var oldKeys = _objectKeys(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for (var t = oldKeys.length - 1; t >= 0; t--) {\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if (hasOwnProperty(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null) {\n                _generate(oldVal, newVal, patches, path + \"/\" + escapePathComponent(key), invertible);\n            }\n            else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({ op: \"test\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(oldVal) });\n                    }\n                    patches.push({ op: \"replace\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(newVal) });\n                }\n            }\n        }\n        else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({ op: \"test\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(oldVal) });\n            }\n            patches.push({ op: \"remove\", path: path + \"/\" + escapePathComponent(key) });\n            deleted = true; // property has been deleted\n        }\n        else {\n            if (invertible) {\n                patches.push({ op: \"test\", path: path, value: mirror });\n            }\n            patches.push({ op: \"replace\", path: path, value: obj });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for (var t = 0; t < newKeys.length; t++) {\n        var key = newKeys[t];\n        if (!hasOwnProperty(mirror, key) && obj[key] !== undefined) {\n            patches.push({ op: \"add\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(obj[key]) });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */\nexport function compare(tree1, tree2, invertible) {\n    if (invertible === void 0) { invertible = false; }\n    var patches = [];\n    _generate(tree1, tree2, patches, '', invertible);\n    return patches;\n}\n","export * from './module/core.mjs';\r\nexport * from './module/duplex.mjs';\r\nexport {\r\n    PatchError as JsonPatchError,\r\n    _deepClone as deepClone,\r\n    escapePathComponent,\r\n    unescapePathComponent\r\n} from './module/helpers.mjs';\r\n\r\n\r\n/**\r\n * Default export for backwards compat\r\n */\r\n\r\nimport * as core from './module/core.mjs';\r\nimport * as duplex from './module/duplex.mjs';\r\nimport {\r\n    PatchError as JsonPatchError,\r\n    _deepClone as deepClone,\r\n    escapePathComponent,\r\n    unescapePathComponent\r\n} from './module/helpers.mjs';\r\n\r\nexport default Object.assign({}, core, duplex, {\r\n    JsonPatchError,\r\n    deepClone,\r\n    escapePathComponent,\r\n    unescapePathComponent\r\n});","(function(nacl) {\n'use strict';\n\n// Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n//\n// Implementation derived from TweetNaCl version 20140427.\n// See for details: http://tweetnacl.cr.yp.to/\n\nvar gf = function(init) {\n  var i, r = new Float64Array(16);\n  if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n  return r;\n};\n\n//  Pluggable, initialized in high-level API below.\nvar randombytes = function(/* x, n */) { throw new Error('no PRNG'); };\n\nvar _0 = new Uint8Array(16);\nvar _9 = new Uint8Array(32); _9[0] = 9;\n\nvar gf0 = gf(),\n    gf1 = gf([1]),\n    _121665 = gf([0xdb41, 1]),\n    D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n    D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n    X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n    Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n    I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\nfunction ts64(x, i, h, l) {\n  x[i]   = (h >> 24) & 0xff;\n  x[i+1] = (h >> 16) & 0xff;\n  x[i+2] = (h >>  8) & 0xff;\n  x[i+3] = h & 0xff;\n  x[i+4] = (l >> 24)  & 0xff;\n  x[i+5] = (l >> 16)  & 0xff;\n  x[i+6] = (l >>  8)  & 0xff;\n  x[i+7] = l & 0xff;\n}\n\nfunction vn(x, xi, y, yi, n) {\n  var i,d = 0;\n  for (i = 0; i < n; i++) d |= x[xi+i]^y[yi+i];\n  return (1 & ((d - 1) >>> 8)) - 1;\n}\n\nfunction crypto_verify_16(x, xi, y, yi) {\n  return vn(x,xi,y,yi,16);\n}\n\nfunction crypto_verify_32(x, xi, y, yi) {\n  return vn(x,xi,y,yi,32);\n}\n\nfunction core_salsa20(o, p, k, c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n   x0 =  x0 +  j0 | 0;\n   x1 =  x1 +  j1 | 0;\n   x2 =  x2 +  j2 | 0;\n   x3 =  x3 +  j3 | 0;\n   x4 =  x4 +  j4 | 0;\n   x5 =  x5 +  j5 | 0;\n   x6 =  x6 +  j6 | 0;\n   x7 =  x7 +  j7 | 0;\n   x8 =  x8 +  j8 | 0;\n   x9 =  x9 +  j9 | 0;\n  x10 = x10 + j10 | 0;\n  x11 = x11 + j11 | 0;\n  x12 = x12 + j12 | 0;\n  x13 = x13 + j13 | 0;\n  x14 = x14 + j14 | 0;\n  x15 = x15 + j15 | 0;\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x1 >>>  0 & 0xff;\n  o[ 5] = x1 >>>  8 & 0xff;\n  o[ 6] = x1 >>> 16 & 0xff;\n  o[ 7] = x1 >>> 24 & 0xff;\n\n  o[ 8] = x2 >>>  0 & 0xff;\n  o[ 9] = x2 >>>  8 & 0xff;\n  o[10] = x2 >>> 16 & 0xff;\n  o[11] = x2 >>> 24 & 0xff;\n\n  o[12] = x3 >>>  0 & 0xff;\n  o[13] = x3 >>>  8 & 0xff;\n  o[14] = x3 >>> 16 & 0xff;\n  o[15] = x3 >>> 24 & 0xff;\n\n  o[16] = x4 >>>  0 & 0xff;\n  o[17] = x4 >>>  8 & 0xff;\n  o[18] = x4 >>> 16 & 0xff;\n  o[19] = x4 >>> 24 & 0xff;\n\n  o[20] = x5 >>>  0 & 0xff;\n  o[21] = x5 >>>  8 & 0xff;\n  o[22] = x5 >>> 16 & 0xff;\n  o[23] = x5 >>> 24 & 0xff;\n\n  o[24] = x6 >>>  0 & 0xff;\n  o[25] = x6 >>>  8 & 0xff;\n  o[26] = x6 >>> 16 & 0xff;\n  o[27] = x6 >>> 24 & 0xff;\n\n  o[28] = x7 >>>  0 & 0xff;\n  o[29] = x7 >>>  8 & 0xff;\n  o[30] = x7 >>> 16 & 0xff;\n  o[31] = x7 >>> 24 & 0xff;\n\n  o[32] = x8 >>>  0 & 0xff;\n  o[33] = x8 >>>  8 & 0xff;\n  o[34] = x8 >>> 16 & 0xff;\n  o[35] = x8 >>> 24 & 0xff;\n\n  o[36] = x9 >>>  0 & 0xff;\n  o[37] = x9 >>>  8 & 0xff;\n  o[38] = x9 >>> 16 & 0xff;\n  o[39] = x9 >>> 24 & 0xff;\n\n  o[40] = x10 >>>  0 & 0xff;\n  o[41] = x10 >>>  8 & 0xff;\n  o[42] = x10 >>> 16 & 0xff;\n  o[43] = x10 >>> 24 & 0xff;\n\n  o[44] = x11 >>>  0 & 0xff;\n  o[45] = x11 >>>  8 & 0xff;\n  o[46] = x11 >>> 16 & 0xff;\n  o[47] = x11 >>> 24 & 0xff;\n\n  o[48] = x12 >>>  0 & 0xff;\n  o[49] = x12 >>>  8 & 0xff;\n  o[50] = x12 >>> 16 & 0xff;\n  o[51] = x12 >>> 24 & 0xff;\n\n  o[52] = x13 >>>  0 & 0xff;\n  o[53] = x13 >>>  8 & 0xff;\n  o[54] = x13 >>> 16 & 0xff;\n  o[55] = x13 >>> 24 & 0xff;\n\n  o[56] = x14 >>>  0 & 0xff;\n  o[57] = x14 >>>  8 & 0xff;\n  o[58] = x14 >>> 16 & 0xff;\n  o[59] = x14 >>> 24 & 0xff;\n\n  o[60] = x15 >>>  0 & 0xff;\n  o[61] = x15 >>>  8 & 0xff;\n  o[62] = x15 >>> 16 & 0xff;\n  o[63] = x15 >>> 24 & 0xff;\n}\n\nfunction core_hsalsa20(o,p,k,c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x5 >>>  0 & 0xff;\n  o[ 5] = x5 >>>  8 & 0xff;\n  o[ 6] = x5 >>> 16 & 0xff;\n  o[ 7] = x5 >>> 24 & 0xff;\n\n  o[ 8] = x10 >>>  0 & 0xff;\n  o[ 9] = x10 >>>  8 & 0xff;\n  o[10] = x10 >>> 16 & 0xff;\n  o[11] = x10 >>> 24 & 0xff;\n\n  o[12] = x15 >>>  0 & 0xff;\n  o[13] = x15 >>>  8 & 0xff;\n  o[14] = x15 >>> 16 & 0xff;\n  o[15] = x15 >>> 24 & 0xff;\n\n  o[16] = x6 >>>  0 & 0xff;\n  o[17] = x6 >>>  8 & 0xff;\n  o[18] = x6 >>> 16 & 0xff;\n  o[19] = x6 >>> 24 & 0xff;\n\n  o[20] = x7 >>>  0 & 0xff;\n  o[21] = x7 >>>  8 & 0xff;\n  o[22] = x7 >>> 16 & 0xff;\n  o[23] = x7 >>> 24 & 0xff;\n\n  o[24] = x8 >>>  0 & 0xff;\n  o[25] = x8 >>>  8 & 0xff;\n  o[26] = x8 >>> 16 & 0xff;\n  o[27] = x8 >>> 24 & 0xff;\n\n  o[28] = x9 >>>  0 & 0xff;\n  o[29] = x9 >>>  8 & 0xff;\n  o[30] = x9 >>> 16 & 0xff;\n  o[31] = x9 >>> 24 & 0xff;\n}\n\nfunction crypto_core_salsa20(out,inp,k,c) {\n  core_salsa20(out,inp,k,c);\n}\n\nfunction crypto_core_hsalsa20(out,inp,k,c) {\n  core_hsalsa20(out,inp,k,c);\n}\n\nvar sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\n            // \"expand 32-byte k\"\n\nfunction crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n    mpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream_salsa20(c,cpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream(c,cpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20(c,cpos,d,sn,s);\n}\n\nfunction crypto_stream_xor(c,cpos,m,mpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);\n}\n\n/*\n* Port of Andrew Moon's Poly1305-donna-16. Public domain.\n* https://github.com/floodyberry/poly1305-donna\n*/\n\nvar poly1305 = function(key) {\n  this.buffer = new Uint8Array(16);\n  this.r = new Uint16Array(10);\n  this.h = new Uint16Array(10);\n  this.pad = new Uint16Array(8);\n  this.leftover = 0;\n  this.fin = 0;\n\n  var t0, t1, t2, t3, t4, t5, t6, t7;\n\n  t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n  t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n  t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n  t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n  t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n  this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n  t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n  t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n  t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n  this.r[9] = ((t7 >>>  5)) & 0x007f;\n\n  this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n  this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n  this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n  this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n  this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n  this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n  this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n  this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n};\n\npoly1305.prototype.blocks = function(m, mpos, bytes) {\n  var hibit = this.fin ? 0 : (1 << 11);\n  var t0, t1, t2, t3, t4, t5, t6, t7, c;\n  var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n  var h0 = this.h[0],\n      h1 = this.h[1],\n      h2 = this.h[2],\n      h3 = this.h[3],\n      h4 = this.h[4],\n      h5 = this.h[5],\n      h6 = this.h[6],\n      h7 = this.h[7],\n      h8 = this.h[8],\n      h9 = this.h[9];\n\n  var r0 = this.r[0],\n      r1 = this.r[1],\n      r2 = this.r[2],\n      r3 = this.r[3],\n      r4 = this.r[4],\n      r5 = this.r[5],\n      r6 = this.r[6],\n      r7 = this.r[7],\n      r8 = this.r[8],\n      r9 = this.r[9];\n\n  while (bytes >= 16) {\n    t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n    t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n    t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n    t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n    t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n    h5 += ((t4 >>>  1)) & 0x1fff;\n    t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n    t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n    t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n    h9 += ((t7 >>> 5)) | hibit;\n\n    c = 0;\n\n    d0 = c;\n    d0 += h0 * r0;\n    d0 += h1 * (5 * r9);\n    d0 += h2 * (5 * r8);\n    d0 += h3 * (5 * r7);\n    d0 += h4 * (5 * r6);\n    c = (d0 >>> 13); d0 &= 0x1fff;\n    d0 += h5 * (5 * r5);\n    d0 += h6 * (5 * r4);\n    d0 += h7 * (5 * r3);\n    d0 += h8 * (5 * r2);\n    d0 += h9 * (5 * r1);\n    c += (d0 >>> 13); d0 &= 0x1fff;\n\n    d1 = c;\n    d1 += h0 * r1;\n    d1 += h1 * r0;\n    d1 += h2 * (5 * r9);\n    d1 += h3 * (5 * r8);\n    d1 += h4 * (5 * r7);\n    c = (d1 >>> 13); d1 &= 0x1fff;\n    d1 += h5 * (5 * r6);\n    d1 += h6 * (5 * r5);\n    d1 += h7 * (5 * r4);\n    d1 += h8 * (5 * r3);\n    d1 += h9 * (5 * r2);\n    c += (d1 >>> 13); d1 &= 0x1fff;\n\n    d2 = c;\n    d2 += h0 * r2;\n    d2 += h1 * r1;\n    d2 += h2 * r0;\n    d2 += h3 * (5 * r9);\n    d2 += h4 * (5 * r8);\n    c = (d2 >>> 13); d2 &= 0x1fff;\n    d2 += h5 * (5 * r7);\n    d2 += h6 * (5 * r6);\n    d2 += h7 * (5 * r5);\n    d2 += h8 * (5 * r4);\n    d2 += h9 * (5 * r3);\n    c += (d2 >>> 13); d2 &= 0x1fff;\n\n    d3 = c;\n    d3 += h0 * r3;\n    d3 += h1 * r2;\n    d3 += h2 * r1;\n    d3 += h3 * r0;\n    d3 += h4 * (5 * r9);\n    c = (d3 >>> 13); d3 &= 0x1fff;\n    d3 += h5 * (5 * r8);\n    d3 += h6 * (5 * r7);\n    d3 += h7 * (5 * r6);\n    d3 += h8 * (5 * r5);\n    d3 += h9 * (5 * r4);\n    c += (d3 >>> 13); d3 &= 0x1fff;\n\n    d4 = c;\n    d4 += h0 * r4;\n    d4 += h1 * r3;\n    d4 += h2 * r2;\n    d4 += h3 * r1;\n    d4 += h4 * r0;\n    c = (d4 >>> 13); d4 &= 0x1fff;\n    d4 += h5 * (5 * r9);\n    d4 += h6 * (5 * r8);\n    d4 += h7 * (5 * r7);\n    d4 += h8 * (5 * r6);\n    d4 += h9 * (5 * r5);\n    c += (d4 >>> 13); d4 &= 0x1fff;\n\n    d5 = c;\n    d5 += h0 * r5;\n    d5 += h1 * r4;\n    d5 += h2 * r3;\n    d5 += h3 * r2;\n    d5 += h4 * r1;\n    c = (d5 >>> 13); d5 &= 0x1fff;\n    d5 += h5 * r0;\n    d5 += h6 * (5 * r9);\n    d5 += h7 * (5 * r8);\n    d5 += h8 * (5 * r7);\n    d5 += h9 * (5 * r6);\n    c += (d5 >>> 13); d5 &= 0x1fff;\n\n    d6 = c;\n    d6 += h0 * r6;\n    d6 += h1 * r5;\n    d6 += h2 * r4;\n    d6 += h3 * r3;\n    d6 += h4 * r2;\n    c = (d6 >>> 13); d6 &= 0x1fff;\n    d6 += h5 * r1;\n    d6 += h6 * r0;\n    d6 += h7 * (5 * r9);\n    d6 += h8 * (5 * r8);\n    d6 += h9 * (5 * r7);\n    c += (d6 >>> 13); d6 &= 0x1fff;\n\n    d7 = c;\n    d7 += h0 * r7;\n    d7 += h1 * r6;\n    d7 += h2 * r5;\n    d7 += h3 * r4;\n    d7 += h4 * r3;\n    c = (d7 >>> 13); d7 &= 0x1fff;\n    d7 += h5 * r2;\n    d7 += h6 * r1;\n    d7 += h7 * r0;\n    d7 += h8 * (5 * r9);\n    d7 += h9 * (5 * r8);\n    c += (d7 >>> 13); d7 &= 0x1fff;\n\n    d8 = c;\n    d8 += h0 * r8;\n    d8 += h1 * r7;\n    d8 += h2 * r6;\n    d8 += h3 * r5;\n    d8 += h4 * r4;\n    c = (d8 >>> 13); d8 &= 0x1fff;\n    d8 += h5 * r3;\n    d8 += h6 * r2;\n    d8 += h7 * r1;\n    d8 += h8 * r0;\n    d8 += h9 * (5 * r9);\n    c += (d8 >>> 13); d8 &= 0x1fff;\n\n    d9 = c;\n    d9 += h0 * r9;\n    d9 += h1 * r8;\n    d9 += h2 * r7;\n    d9 += h3 * r6;\n    d9 += h4 * r5;\n    c = (d9 >>> 13); d9 &= 0x1fff;\n    d9 += h5 * r4;\n    d9 += h6 * r3;\n    d9 += h7 * r2;\n    d9 += h8 * r1;\n    d9 += h9 * r0;\n    c += (d9 >>> 13); d9 &= 0x1fff;\n\n    c = (((c << 2) + c)) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = (c >>> 13);\n    d1 += c;\n\n    h0 = d0;\n    h1 = d1;\n    h2 = d2;\n    h3 = d3;\n    h4 = d4;\n    h5 = d5;\n    h6 = d6;\n    h7 = d7;\n    h8 = d8;\n    h9 = d9;\n\n    mpos += 16;\n    bytes -= 16;\n  }\n  this.h[0] = h0;\n  this.h[1] = h1;\n  this.h[2] = h2;\n  this.h[3] = h3;\n  this.h[4] = h4;\n  this.h[5] = h5;\n  this.h[6] = h6;\n  this.h[7] = h7;\n  this.h[8] = h8;\n  this.h[9] = h9;\n};\n\npoly1305.prototype.finish = function(mac, macpos) {\n  var g = new Uint16Array(10);\n  var c, mask, f, i;\n\n  if (this.leftover) {\n    i = this.leftover;\n    this.buffer[i++] = 1;\n    for (; i < 16; i++) this.buffer[i] = 0;\n    this.fin = 1;\n    this.blocks(this.buffer, 0, 16);\n  }\n\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  for (i = 2; i < 10; i++) {\n    this.h[i] += c;\n    c = this.h[i] >>> 13;\n    this.h[i] &= 0x1fff;\n  }\n  this.h[0] += (c * 5);\n  c = this.h[0] >>> 13;\n  this.h[0] &= 0x1fff;\n  this.h[1] += c;\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  this.h[2] += c;\n\n  g[0] = this.h[0] + 5;\n  c = g[0] >>> 13;\n  g[0] &= 0x1fff;\n  for (i = 1; i < 10; i++) {\n    g[i] = this.h[i] + c;\n    c = g[i] >>> 13;\n    g[i] &= 0x1fff;\n  }\n  g[9] -= (1 << 13);\n\n  mask = (c ^ 1) - 1;\n  for (i = 0; i < 10; i++) g[i] &= mask;\n  mask = ~mask;\n  for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n\n  this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n  this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n  this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n  this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n  this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n  this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n  this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n  this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n\n  f = this.h[0] + this.pad[0];\n  this.h[0] = f & 0xffff;\n  for (i = 1; i < 8; i++) {\n    f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n    this.h[i] = f & 0xffff;\n  }\n\n  mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n  mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n  mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n  mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n  mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n  mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n  mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n  mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n  mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n  mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n  mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n  mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n  mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n  mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n  mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n  mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n};\n\npoly1305.prototype.update = function(m, mpos, bytes) {\n  var i, want;\n\n  if (this.leftover) {\n    want = (16 - this.leftover);\n    if (want > bytes)\n      want = bytes;\n    for (i = 0; i < want; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    bytes -= want;\n    mpos += want;\n    this.leftover += want;\n    if (this.leftover < 16)\n      return;\n    this.blocks(this.buffer, 0, 16);\n    this.leftover = 0;\n  }\n\n  if (bytes >= 16) {\n    want = bytes - (bytes % 16);\n    this.blocks(m, mpos, want);\n    mpos += want;\n    bytes -= want;\n  }\n\n  if (bytes) {\n    for (i = 0; i < bytes; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    this.leftover += bytes;\n  }\n};\n\nfunction crypto_onetimeauth(out, outpos, m, mpos, n, k) {\n  var s = new poly1305(k);\n  s.update(m, mpos, n);\n  s.finish(out, outpos);\n  return 0;\n}\n\nfunction crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\n  var x = new Uint8Array(16);\n  crypto_onetimeauth(x,0,m,mpos,n,k);\n  return crypto_verify_16(h,hpos,x,0);\n}\n\nfunction crypto_secretbox(c,m,d,n,k) {\n  var i;\n  if (d < 32) return -1;\n  crypto_stream_xor(c,0,m,0,d,n,k);\n  crypto_onetimeauth(c, 16, c, 32, d - 32, c);\n  for (i = 0; i < 16; i++) c[i] = 0;\n  return 0;\n}\n\nfunction crypto_secretbox_open(m,c,d,n,k) {\n  var i;\n  var x = new Uint8Array(32);\n  if (d < 32) return -1;\n  crypto_stream(x,0,32,n,k);\n  if (crypto_onetimeauth_verify(c, 16,c, 32,d - 32,x) !== 0) return -1;\n  crypto_stream_xor(m,0,c,0,d,n,k);\n  for (i = 0; i < 32; i++) m[i] = 0;\n  return 0;\n}\n\nfunction set25519(r, a) {\n  var i;\n  for (i = 0; i < 16; i++) r[i] = a[i]|0;\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for (i = 0; i < 16; i++) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c-1 + 37 * (c-1);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b-1);\n  for (var i = 0; i < 16; i++) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for (i = 0; i < 16; i++) t[i] = n[i];\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for (j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n    for (i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n    b = (m[15]>>16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1-b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2*i] = t[i] & 0xff;\n    o[2*i+1] = t[i]>>8;\n  }\n}\n\nfunction neq25519(a, b) {\n  var c = new Uint8Array(32), d = new Uint8Array(32);\n  pack25519(c, a);\n  pack25519(d, b);\n  return crypto_verify_32(c, 0, d, 0);\n}\n\nfunction par25519(a) {\n  var d = new Uint8Array(32);\n  pack25519(d, a);\n  return d[0] & 1;\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n  o[15] &= 0x7fff;\n}\n\nfunction A(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n}\n\nfunction Z(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n}\n\nfunction M(o, a, b) {\n  var v, c,\n     t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n     t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 253; a >= 0; a--) {\n    S(c, c);\n    if(a !== 2 && a !== 4) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction pow2523(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if(a !== 1) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction crypto_scalarmult(q, n, p) {\n  var z = new Uint8Array(32);\n  var x = new Float64Array(80), r, i;\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf();\n  for (i = 0; i < 31; i++) z[i] = n[i];\n  z[31]=(n[31]&127)|64;\n  z[0]&=248;\n  unpack25519(x,p);\n  for (i = 0; i < 16; i++) {\n    b[i]=x[i];\n    d[i]=a[i]=c[i]=0;\n  }\n  a[0]=d[0]=1;\n  for (i=254; i>=0; --i) {\n    r=(z[i>>>3]>>>(i&7))&1;\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n    A(e,a,c);\n    Z(a,a,c);\n    A(c,b,d);\n    Z(b,b,d);\n    S(d,e);\n    S(f,a);\n    M(a,c,a);\n    M(c,b,e);\n    A(e,a,c);\n    Z(a,a,c);\n    S(b,a);\n    Z(c,d,f);\n    M(a,c,_121665);\n    A(a,a,d);\n    M(c,c,a);\n    M(a,d,f);\n    M(d,b,x);\n    S(b,e);\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n  }\n  for (i = 0; i < 16; i++) {\n    x[i+16]=a[i];\n    x[i+32]=c[i];\n    x[i+48]=b[i];\n    x[i+64]=d[i];\n  }\n  var x32 = x.subarray(32);\n  var x16 = x.subarray(16);\n  inv25519(x32,x32);\n  M(x16,x16,x32);\n  pack25519(q,x16);\n  return 0;\n}\n\nfunction crypto_scalarmult_base(q, n) {\n  return crypto_scalarmult(q, n, _9);\n}\n\nfunction crypto_box_keypair(y, x) {\n  randombytes(x, 32);\n  return crypto_scalarmult_base(y, x);\n}\n\nfunction crypto_box_beforenm(k, y, x) {\n  var s = new Uint8Array(32);\n  crypto_scalarmult(s, x, y);\n  return crypto_core_hsalsa20(k, _0, s, sigma);\n}\n\nvar crypto_box_afternm = crypto_secretbox;\nvar crypto_box_open_afternm = crypto_secretbox_open;\n\nfunction crypto_box(c, m, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_afternm(c, m, d, n, k);\n}\n\nfunction crypto_box_open(m, c, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_open_afternm(m, c, d, n, k);\n}\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction crypto_hashblocks_hl(hh, hl, m, n) {\n  var wh = new Int32Array(16), wl = new Int32Array(16),\n      bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n      bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n      th, tl, i, j, h, l, a, b, c, d;\n\n  var ah0 = hh[0],\n      ah1 = hh[1],\n      ah2 = hh[2],\n      ah3 = hh[3],\n      ah4 = hh[4],\n      ah5 = hh[5],\n      ah6 = hh[6],\n      ah7 = hh[7],\n\n      al0 = hl[0],\n      al1 = hl[1],\n      al2 = hl[2],\n      al3 = hl[3],\n      al4 = hl[4],\n      al5 = hl[5],\n      al6 = hl[6],\n      al7 = hl[7];\n\n  var pos = 0;\n  while (n >= 128) {\n    for (i = 0; i < 16; i++) {\n      j = 8 * i + pos;\n      wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n      wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n    }\n    for (i = 0; i < 80; i++) {\n      bh0 = ah0;\n      bh1 = ah1;\n      bh2 = ah2;\n      bh3 = ah3;\n      bh4 = ah4;\n      bh5 = ah5;\n      bh6 = ah6;\n      bh7 = ah7;\n\n      bl0 = al0;\n      bl1 = al1;\n      bl2 = al2;\n      bl3 = al3;\n      bl4 = al4;\n      bl5 = al5;\n      bl6 = al6;\n      bl7 = al7;\n\n      // add\n      h = ah7;\n      l = al7;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma1\n      h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n      l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Ch\n      h = (ah4 & ah5) ^ (~ah4 & ah6);\n      l = (al4 & al5) ^ (~al4 & al6);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // K\n      h = K[i*2];\n      l = K[i*2+1];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // w\n      h = wh[i%16];\n      l = wl[i%16];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      th = c & 0xffff | d << 16;\n      tl = a & 0xffff | b << 16;\n\n      // add\n      h = th;\n      l = tl;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma0\n      h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n      l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Maj\n      h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n      l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh7 = (c & 0xffff) | (d << 16);\n      bl7 = (a & 0xffff) | (b << 16);\n\n      // add\n      h = bh3;\n      l = bl3;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      h = th;\n      l = tl;\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh3 = (c & 0xffff) | (d << 16);\n      bl3 = (a & 0xffff) | (b << 16);\n\n      ah1 = bh0;\n      ah2 = bh1;\n      ah3 = bh2;\n      ah4 = bh3;\n      ah5 = bh4;\n      ah6 = bh5;\n      ah7 = bh6;\n      ah0 = bh7;\n\n      al1 = bl0;\n      al2 = bl1;\n      al3 = bl2;\n      al4 = bl3;\n      al5 = bl4;\n      al6 = bl5;\n      al7 = bl6;\n      al0 = bl7;\n\n      if (i%16 === 15) {\n        for (j = 0; j < 16; j++) {\n          // add\n          h = wh[j];\n          l = wl[j];\n\n          a = l & 0xffff; b = l >>> 16;\n          c = h & 0xffff; d = h >>> 16;\n\n          h = wh[(j+9)%16];\n          l = wl[(j+9)%16];\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma0\n          th = wh[(j+1)%16];\n          tl = wl[(j+1)%16];\n          h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n          l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma1\n          th = wh[(j+14)%16];\n          tl = wl[(j+14)%16];\n          h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n          l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          b += a >>> 16;\n          c += b >>> 16;\n          d += c >>> 16;\n\n          wh[j] = (c & 0xffff) | (d << 16);\n          wl[j] = (a & 0xffff) | (b << 16);\n        }\n      }\n    }\n\n    // add\n    h = ah0;\n    l = al0;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[0];\n    l = hl[0];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[0] = ah0 = (c & 0xffff) | (d << 16);\n    hl[0] = al0 = (a & 0xffff) | (b << 16);\n\n    h = ah1;\n    l = al1;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[1];\n    l = hl[1];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[1] = ah1 = (c & 0xffff) | (d << 16);\n    hl[1] = al1 = (a & 0xffff) | (b << 16);\n\n    h = ah2;\n    l = al2;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[2];\n    l = hl[2];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[2] = ah2 = (c & 0xffff) | (d << 16);\n    hl[2] = al2 = (a & 0xffff) | (b << 16);\n\n    h = ah3;\n    l = al3;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[3];\n    l = hl[3];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[3] = ah3 = (c & 0xffff) | (d << 16);\n    hl[3] = al3 = (a & 0xffff) | (b << 16);\n\n    h = ah4;\n    l = al4;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[4];\n    l = hl[4];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[4] = ah4 = (c & 0xffff) | (d << 16);\n    hl[4] = al4 = (a & 0xffff) | (b << 16);\n\n    h = ah5;\n    l = al5;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[5];\n    l = hl[5];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[5] = ah5 = (c & 0xffff) | (d << 16);\n    hl[5] = al5 = (a & 0xffff) | (b << 16);\n\n    h = ah6;\n    l = al6;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[6];\n    l = hl[6];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[6] = ah6 = (c & 0xffff) | (d << 16);\n    hl[6] = al6 = (a & 0xffff) | (b << 16);\n\n    h = ah7;\n    l = al7;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[7];\n    l = hl[7];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[7] = ah7 = (c & 0xffff) | (d << 16);\n    hl[7] = al7 = (a & 0xffff) | (b << 16);\n\n    pos += 128;\n    n -= 128;\n  }\n\n  return n;\n}\n\nfunction crypto_hash(out, m, n) {\n  var hh = new Int32Array(8),\n      hl = new Int32Array(8),\n      x = new Uint8Array(256),\n      i, b = n;\n\n  hh[0] = 0x6a09e667;\n  hh[1] = 0xbb67ae85;\n  hh[2] = 0x3c6ef372;\n  hh[3] = 0xa54ff53a;\n  hh[4] = 0x510e527f;\n  hh[5] = 0x9b05688c;\n  hh[6] = 0x1f83d9ab;\n  hh[7] = 0x5be0cd19;\n\n  hl[0] = 0xf3bcc908;\n  hl[1] = 0x84caa73b;\n  hl[2] = 0xfe94f82b;\n  hl[3] = 0x5f1d36f1;\n  hl[4] = 0xade682d1;\n  hl[5] = 0x2b3e6c1f;\n  hl[6] = 0xfb41bd6b;\n  hl[7] = 0x137e2179;\n\n  crypto_hashblocks_hl(hh, hl, m, n);\n  n %= 128;\n\n  for (i = 0; i < n; i++) x[i] = m[b-n+i];\n  x[n] = 128;\n\n  n = 256-128*(n<112?1:0);\n  x[n-9] = 0;\n  ts64(x, n-8,  (b / 0x20000000) | 0, b << 3);\n  crypto_hashblocks_hl(hh, hl, x, n);\n\n  for (i = 0; i < 8; i++) ts64(out, 8*i, hh[i], hl[i]);\n\n  return 0;\n}\n\nfunction add(p, q) {\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf(),\n      g = gf(), h = gf(), t = gf();\n\n  Z(a, p[1], p[0]);\n  Z(t, q[1], q[0]);\n  M(a, a, t);\n  A(b, p[0], p[1]);\n  A(t, q[0], q[1]);\n  M(b, b, t);\n  M(c, p[3], q[3]);\n  M(c, c, D2);\n  M(d, p[2], q[2]);\n  A(d, d, d);\n  Z(e, b, a);\n  Z(f, d, c);\n  A(g, d, c);\n  A(h, b, a);\n\n  M(p[0], e, f);\n  M(p[1], h, g);\n  M(p[2], g, f);\n  M(p[3], e, h);\n}\n\nfunction cswap(p, q, b) {\n  var i;\n  for (i = 0; i < 4; i++) {\n    sel25519(p[i], q[i], b);\n  }\n}\n\nfunction pack(r, p) {\n  var tx = gf(), ty = gf(), zi = gf();\n  inv25519(zi, p[2]);\n  M(tx, p[0], zi);\n  M(ty, p[1], zi);\n  pack25519(r, ty);\n  r[31] ^= par25519(tx) << 7;\n}\n\nfunction scalarmult(p, q, s) {\n  var b, i;\n  set25519(p[0], gf0);\n  set25519(p[1], gf1);\n  set25519(p[2], gf1);\n  set25519(p[3], gf0);\n  for (i = 255; i >= 0; --i) {\n    b = (s[(i/8)|0] >> (i&7)) & 1;\n    cswap(p, q, b);\n    add(q, p);\n    add(p, p);\n    cswap(p, q, b);\n  }\n}\n\nfunction scalarbase(p, s) {\n  var q = [gf(), gf(), gf(), gf()];\n  set25519(q[0], X);\n  set25519(q[1], Y);\n  set25519(q[2], gf1);\n  M(q[3], X, Y);\n  scalarmult(p, q, s);\n}\n\nfunction crypto_sign_keypair(pk, sk, seeded) {\n  var d = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n  var i;\n\n  if (!seeded) randombytes(sk, 32);\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  scalarbase(p, d);\n  pack(pk, p);\n\n  for (i = 0; i < 32; i++) sk[i+32] = pk[i];\n  return 0;\n}\n\nvar L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\n\nfunction modL(r, x) {\n  var carry, i, j, k;\n  for (i = 63; i >= 32; --i) {\n    carry = 0;\n    for (j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n      carry = Math.floor((x[j] + 128) / 256);\n      x[j] -= carry * 256;\n    }\n    x[j] += carry;\n    x[i] = 0;\n  }\n  carry = 0;\n  for (j = 0; j < 32; j++) {\n    x[j] += carry - (x[31] >> 4) * L[j];\n    carry = x[j] >> 8;\n    x[j] &= 255;\n  }\n  for (j = 0; j < 32; j++) x[j] -= carry * L[j];\n  for (i = 0; i < 32; i++) {\n    x[i+1] += x[i] >> 8;\n    r[i] = x[i] & 255;\n  }\n}\n\nfunction reduce(r) {\n  var x = new Float64Array(64), i;\n  for (i = 0; i < 64; i++) x[i] = r[i];\n  for (i = 0; i < 64; i++) r[i] = 0;\n  modL(r, x);\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign(sm, m, n, sk) {\n  var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\n  var i, j, x = new Float64Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  var smlen = n + 64;\n  for (i = 0; i < n; i++) sm[64 + i] = m[i];\n  for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];\n\n  crypto_hash(r, sm.subarray(32), n+32);\n  reduce(r);\n  scalarbase(p, r);\n  pack(sm, p);\n\n  for (i = 32; i < 64; i++) sm[i] = sk[i];\n  crypto_hash(h, sm, n + 64);\n  reduce(h);\n\n  for (i = 0; i < 64; i++) x[i] = 0;\n  for (i = 0; i < 32; i++) x[i] = r[i];\n  for (i = 0; i < 32; i++) {\n    for (j = 0; j < 32; j++) {\n      x[i+j] += h[i] * d[j];\n    }\n  }\n\n  modL(sm.subarray(32), x);\n  return smlen;\n}\n\nfunction unpackneg(r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n  set25519(r[2], gf1);\n  unpack25519(r[1], p);\n  S(num, r[1]);\n  M(den, num, D);\n  Z(num, num, r[2]);\n  A(den, r[2], den);\n\n  S(den2, den);\n  S(den4, den2);\n  M(den6, den4, den2);\n  M(t, den6, num);\n  M(t, t, den);\n\n  pow2523(t, t);\n  M(t, t, num);\n  M(t, t, den);\n  M(t, t, den);\n  M(r[0], t, den);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) M(r[0], r[0], I);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) return -1;\n\n  if (par25519(r[0]) === (p[31]>>7)) Z(r[0], gf0, r[0]);\n\n  M(r[3], r[0], r[1]);\n  return 0;\n}\n\nfunction crypto_sign_open(m, sm, n, pk) {\n  var i;\n  var t = new Uint8Array(32), h = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()],\n      q = [gf(), gf(), gf(), gf()];\n\n  if (n < 64) return -1;\n\n  if (unpackneg(q, pk)) return -1;\n\n  for (i = 0; i < n; i++) m[i] = sm[i];\n  for (i = 0; i < 32; i++) m[i+32] = pk[i];\n  crypto_hash(h, m, n);\n  reduce(h);\n  scalarmult(p, q, h);\n\n  scalarbase(q, sm.subarray(32));\n  add(p, q);\n  pack(t, p);\n\n  n -= 64;\n  if (crypto_verify_32(sm, 0, t, 0)) {\n    for (i = 0; i < n; i++) m[i] = 0;\n    return -1;\n  }\n\n  for (i = 0; i < n; i++) m[i] = sm[i + 64];\n  return n;\n}\n\nvar crypto_secretbox_KEYBYTES = 32,\n    crypto_secretbox_NONCEBYTES = 24,\n    crypto_secretbox_ZEROBYTES = 32,\n    crypto_secretbox_BOXZEROBYTES = 16,\n    crypto_scalarmult_BYTES = 32,\n    crypto_scalarmult_SCALARBYTES = 32,\n    crypto_box_PUBLICKEYBYTES = 32,\n    crypto_box_SECRETKEYBYTES = 32,\n    crypto_box_BEFORENMBYTES = 32,\n    crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES,\n    crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES,\n    crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES,\n    crypto_sign_BYTES = 64,\n    crypto_sign_PUBLICKEYBYTES = 32,\n    crypto_sign_SECRETKEYBYTES = 64,\n    crypto_sign_SEEDBYTES = 32,\n    crypto_hash_BYTES = 64;\n\nnacl.lowlevel = {\n  crypto_core_hsalsa20: crypto_core_hsalsa20,\n  crypto_stream_xor: crypto_stream_xor,\n  crypto_stream: crypto_stream,\n  crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\n  crypto_stream_salsa20: crypto_stream_salsa20,\n  crypto_onetimeauth: crypto_onetimeauth,\n  crypto_onetimeauth_verify: crypto_onetimeauth_verify,\n  crypto_verify_16: crypto_verify_16,\n  crypto_verify_32: crypto_verify_32,\n  crypto_secretbox: crypto_secretbox,\n  crypto_secretbox_open: crypto_secretbox_open,\n  crypto_scalarmult: crypto_scalarmult,\n  crypto_scalarmult_base: crypto_scalarmult_base,\n  crypto_box_beforenm: crypto_box_beforenm,\n  crypto_box_afternm: crypto_box_afternm,\n  crypto_box: crypto_box,\n  crypto_box_open: crypto_box_open,\n  crypto_box_keypair: crypto_box_keypair,\n  crypto_hash: crypto_hash,\n  crypto_sign: crypto_sign,\n  crypto_sign_keypair: crypto_sign_keypair,\n  crypto_sign_open: crypto_sign_open,\n\n  crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\n  crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\n  crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\n  crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\n  crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\n  crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\n  crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\n  crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\n  crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\n  crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\n  crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\n  crypto_sign_BYTES: crypto_sign_BYTES,\n  crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\n  crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\n  crypto_hash_BYTES: crypto_hash_BYTES,\n\n  gf: gf,\n  D: D,\n  L: L,\n  pack25519: pack25519,\n  unpack25519: unpack25519,\n  M: M,\n  A: A,\n  S: S,\n  Z: Z,\n  pow2523: pow2523,\n  add: add,\n  set25519: set25519,\n  modL: modL,\n  scalarmult: scalarmult,\n  scalarbase: scalarbase,\n};\n\n/* High-level API */\n\nfunction checkLengths(k, n) {\n  if (k.length !== crypto_secretbox_KEYBYTES) throw new Error('bad key size');\n  if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error('bad nonce size');\n}\n\nfunction checkBoxLengths(pk, sk) {\n  if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error('bad public key size');\n  if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error('bad secret key size');\n}\n\nfunction checkArrayTypes() {\n  for (var i = 0; i < arguments.length; i++) {\n    if (!(arguments[i] instanceof Uint8Array))\n      throw new TypeError('unexpected type, use Uint8Array');\n  }\n}\n\nfunction cleanup(arr) {\n  for (var i = 0; i < arr.length; i++) arr[i] = 0;\n}\n\nnacl.randomBytes = function(n) {\n  var b = new Uint8Array(n);\n  randombytes(b, n);\n  return b;\n};\n\nnacl.secretbox = function(msg, nonce, key) {\n  checkArrayTypes(msg, nonce, key);\n  checkLengths(key, nonce);\n  var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\n  var c = new Uint8Array(m.length);\n  for (var i = 0; i < msg.length; i++) m[i+crypto_secretbox_ZEROBYTES] = msg[i];\n  crypto_secretbox(c, m, m.length, nonce, key);\n  return c.subarray(crypto_secretbox_BOXZEROBYTES);\n};\n\nnacl.secretbox.open = function(box, nonce, key) {\n  checkArrayTypes(box, nonce, key);\n  checkLengths(key, nonce);\n  var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\n  var m = new Uint8Array(c.length);\n  for (var i = 0; i < box.length; i++) c[i+crypto_secretbox_BOXZEROBYTES] = box[i];\n  if (c.length < 32) return null;\n  if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0) return null;\n  return m.subarray(crypto_secretbox_ZEROBYTES);\n};\n\nnacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\nnacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\nnacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\n\nnacl.scalarMult = function(n, p) {\n  checkArrayTypes(n, p);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  if (p.length !== crypto_scalarmult_BYTES) throw new Error('bad p size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult(q, n, p);\n  return q;\n};\n\nnacl.scalarMult.base = function(n) {\n  checkArrayTypes(n);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult_base(q, n);\n  return q;\n};\n\nnacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\nnacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\n\nnacl.box = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox(msg, nonce, k);\n};\n\nnacl.box.before = function(publicKey, secretKey) {\n  checkArrayTypes(publicKey, secretKey);\n  checkBoxLengths(publicKey, secretKey);\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES);\n  crypto_box_beforenm(k, publicKey, secretKey);\n  return k;\n};\n\nnacl.box.after = nacl.secretbox;\n\nnacl.box.open = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox.open(msg, nonce, k);\n};\n\nnacl.box.open.after = nacl.secretbox.open;\n\nnacl.box.keyPair = function() {\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\n  crypto_box_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.box.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_box_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  crypto_scalarmult_base(pk, secretKey);\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\nnacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\nnacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\nnacl.box.nonceLength = crypto_box_NONCEBYTES;\nnacl.box.overheadLength = nacl.secretbox.overheadLength;\n\nnacl.sign = function(msg, secretKey) {\n  checkArrayTypes(msg, secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var signedMsg = new Uint8Array(crypto_sign_BYTES+msg.length);\n  crypto_sign(signedMsg, msg, msg.length, secretKey);\n  return signedMsg;\n};\n\nnacl.sign.open = function(signedMsg, publicKey) {\n  checkArrayTypes(signedMsg, publicKey);\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var tmp = new Uint8Array(signedMsg.length);\n  var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\n  if (mlen < 0) return null;\n  var m = new Uint8Array(mlen);\n  for (var i = 0; i < m.length; i++) m[i] = tmp[i];\n  return m;\n};\n\nnacl.sign.detached = function(msg, secretKey) {\n  var signedMsg = nacl.sign(msg, secretKey);\n  var sig = new Uint8Array(crypto_sign_BYTES);\n  for (var i = 0; i < sig.length; i++) sig[i] = signedMsg[i];\n  return sig;\n};\n\nnacl.sign.detached.verify = function(msg, sig, publicKey) {\n  checkArrayTypes(msg, sig, publicKey);\n  if (sig.length !== crypto_sign_BYTES)\n    throw new Error('bad signature size');\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var m = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var i;\n  for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i];\n  for (i = 0; i < msg.length; i++) sm[i+crypto_sign_BYTES] = msg[i];\n  return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n};\n\nnacl.sign.keyPair = function() {\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  crypto_sign_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  for (var i = 0; i < pk.length; i++) pk[i] = secretKey[32+i];\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.sign.keyPair.fromSeed = function(seed) {\n  checkArrayTypes(seed);\n  if (seed.length !== crypto_sign_SEEDBYTES)\n    throw new Error('bad seed size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  for (var i = 0; i < 32; i++) sk[i] = seed[i];\n  crypto_sign_keypair(pk, sk, true);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\nnacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\nnacl.sign.seedLength = crypto_sign_SEEDBYTES;\nnacl.sign.signatureLength = crypto_sign_BYTES;\n\nnacl.hash = function(msg) {\n  checkArrayTypes(msg);\n  var h = new Uint8Array(crypto_hash_BYTES);\n  crypto_hash(h, msg, msg.length);\n  return h;\n};\n\nnacl.hash.hashLength = crypto_hash_BYTES;\n\nnacl.verify = function(x, y) {\n  checkArrayTypes(x, y);\n  // Zero length arguments are considered not equal.\n  if (x.length === 0 || y.length === 0) return false;\n  if (x.length !== y.length) return false;\n  return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\n};\n\nnacl.setPRNG = function(fn) {\n  randombytes = fn;\n};\n\n(function() {\n  // Initialize PRNG if environment provides CSPRNG.\n  // If not, methods calling randombytes will throw.\n  var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\n  if (crypto && crypto.getRandomValues) {\n    // Browsers.\n    var QUOTA = 65536;\n    nacl.setPRNG(function(x, n) {\n      var i, v = new Uint8Array(n);\n      for (i = 0; i < n; i += QUOTA) {\n        crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\n      }\n      for (i = 0; i < n; i++) x[i] = v[i];\n      cleanup(v);\n    });\n  } else if (typeof require !== 'undefined') {\n    // Node.js.\n    crypto = require('crypto');\n    if (crypto && crypto.randomBytes) {\n      nacl.setPRNG(function(x, n) {\n        var i, v = crypto.randomBytes(n);\n        for (i = 0; i < n; i++) x[i] = v[i];\n        cleanup(v);\n      });\n    }\n  }\n})();\n\n})(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\n","// Written in 2014-2016 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n(function(root, f) {\n  'use strict';\n  if (typeof module !== 'undefined' && module.exports) module.exports = f();\n  else if (root.nacl) root.nacl.util = f();\n  else {\n    root.nacl = {};\n    root.nacl.util = f();\n  }\n}(this, function() {\n  'use strict';\n\n  var util = {};\n\n  function validateBase64(s) {\n    if (!(/^(?:[A-Za-z0-9+\\/]{2}[A-Za-z0-9+\\/]{2})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?$/.test(s))) {\n      throw new TypeError('invalid encoding');\n    }\n  }\n\n  util.decodeUTF8 = function(s) {\n    if (typeof s !== 'string') throw new TypeError('expected string');\n    var i, d = unescape(encodeURIComponent(s)), b = new Uint8Array(d.length);\n    for (i = 0; i < d.length; i++) b[i] = d.charCodeAt(i);\n    return b;\n  };\n\n  util.encodeUTF8 = function(arr) {\n    var i, s = [];\n    for (i = 0; i < arr.length; i++) s.push(String.fromCharCode(arr[i]));\n    return decodeURIComponent(escape(s.join('')));\n  };\n\n  if (typeof atob === 'undefined') {\n    // Node.js\n\n    if (typeof Buffer.from !== 'undefined') {\n       // Node v6 and later\n      util.encodeBase64 = function (arr) { // v6 and later\n          return Buffer.from(arr).toString('base64');\n      };\n\n      util.decodeBase64 = function (s) {\n        validateBase64(s);\n        return new Uint8Array(Array.prototype.slice.call(Buffer.from(s, 'base64'), 0));\n      };\n\n    } else {\n      // Node earlier than v6\n      util.encodeBase64 = function (arr) { // v6 and later\n        return (new Buffer(arr)).toString('base64');\n      };\n\n      util.decodeBase64 = function(s) {\n        validateBase64(s);\n        return new Uint8Array(Array.prototype.slice.call(new Buffer(s, 'base64'), 0));\n      };\n    }\n\n  } else {\n    // Browsers\n\n    util.encodeBase64 = function(arr) {\n      var i, s = [], len = arr.length;\n      for (i = 0; i < len; i++) s.push(String.fromCharCode(arr[i]));\n      return btoa(s.join(''));\n    };\n\n    util.decodeBase64 = function(s) {\n      validateBase64(s);\n      var i, d = atob(s), b = new Uint8Array(d.length);\n      for (i = 0; i < d.length; i++) b[i] = d.charCodeAt(i);\n      return b;\n    };\n\n  }\n\n  return util;\n\n}));\n","function noop() {}\n\nclass RunnableLink {\n  constructor(prev, next, fn) {\n    this.prev = prev;\n    this.next = next;\n    this.fn = fn || noop;\n  }\n\n  run(data) {\n    this.fn(data);\n    this.next && this.next.run(data);\n  }\n}\n\nexport default RunnableLink;\n","import RunnableLink from './runnableLink';\n\n// A relatively generic LinkedList impl\nclass LinkedList {\n  constructor(linkConstructor) {\n    this.head = new RunnableLink();\n    this.tail = new RunnableLink(this.head);\n    this.head.next = this.tail;\n    this.linkConstructor = linkConstructor;\n    this.reg = {};\n  }\n\n  insert(data) {\n    const link = new RunnableLink(this.tail.prev, this.tail, data);\n    link.next.prev = link;\n    link.prev.next = link;\n    return link;\n  }\n\n  remove(link) {\n    link.prev.next = link.next;\n    link.next.prev = link.prev;\n  }\n}\n\nexport default LinkedList;\n","import LinkedList from './linkedList';\n\nlet id = 0;\nconst splitter = /[\\s,]+/g;\n\n// A link in the linked list which allows\n// for efficient execution of the callbacks\n\nclass Eev {\n  constructor() {\n    this.events = {};\n  }\n\n  on(names, fn) {\n    const me = this;\n\n    names.split(splitter).forEach(name => {\n      const list = me.events[name] || (me.events[name] = new LinkedList());\n      const eev = fn._eev || (fn._eev = ++id);\n\n      list.reg[eev] || (list.reg[eev] = list.insert(fn));\n    });\n  }\n\n  off(names, fn) {\n    const me = this;\n    fn &&\n      names.split(splitter).forEach(function(name) {\n        const list = me.events[name];\n\n        if (!list) {\n          return;\n        }\n\n        const link = list.reg[fn._eev];\n\n        list.reg[fn._eev] = undefined;\n\n        list && link && list.remove(link);\n      });\n  }\n\n  removeListener(...args) {\n    this.off(...args);\n  }\n\n  emit(name, data) {\n    const evt = this.events[name];\n    evt && evt.head.run(data);\n  }\n}\n\nexport default Eev;\n","import stopwatch from './stopwatch/stopwatch';\nimport EventEmitter from './emitter';\n\n// methods defined in this file\n\nasync function loadModule(whichUtil) {\n  return import(`./${whichUtil}`);\n}\n\nfunction log(msg) {\n  console.log(`${new Date().toLocaleString()} â†’ ${msg}`);\n}\n\nfunction isBrowser() {\n  return typeof window !== 'undefined';\n}\n\nfunction isNodeJs() {\n  return !isBrowser();\n}\n\nfunction listify(obj) {\n  if (typeof obj == 'undefined' || obj == null) {\n    return [];\n  }\n  return Array.isArray(obj) ? obj : [obj];\n}\n\nfunction bufferToHex(buffer) {\n  return Array.from(new Uint8Array(buffer))\n    .map(b => b.toString(16).padStart(2, '0'))\n    .join('');\n}\n\nfunction hexToBuffer(hex) {\n  const tokens = hex.match(/.{1,2}(?=(.{2})+(?!.))|.{1,2}$/g); // split by two, https://blog.abelotech.com/posts/split-string-tokens-defined-length-javascript/\n  return new Uint8Array(tokens.map(token => parseInt(token, 16)));\n}\n\n// source: https://stackoverflow.com/a/12965194/458177\n// good only up to 2**53 (JavaScript Integer range) -- usually this is plenty ...\nfunction integerToByteArray(/*long*/ long, arrayLen = 8) {\n  // we want to represent the input as a 8-bytes array\n  const byteArray = new Array(arrayLen).fill(0);\n\n  for (let index = 0; index < byteArray.length; index++) {\n    const byte = long & 0xff;\n    byteArray[index] = byte;\n    long = (long - byte) / 256;\n  }\n\n  return byteArray;\n}\n\nexport {\n  stopwatch,\n  EventEmitter,\n  // tool\n  loadModule,\n  // methods defined in this file:\n  log,\n  isBrowser,\n  isNodeJs,\n  listify,\n  bufferToHex,\n  hexToBuffer,\n  integerToByteArray\n};\n","import nacl from 'tweetnacl';\nimport naclutil from 'tweetnacl-util';\nnacl.util = naclutil;\n\n//let nonce = new Uint8Array(new ArrayBuffer(24), 0);\n\nimport { isObject, addHeader } from '../channel/sendHelpers';\nimport { integerToByteArray } from '../utils';\n\nfunction send({ data, connector }) {\n  if (isObject(data)) {\n    data = JSON.stringify(data);\n  }\n\n  const nonce = new Uint8Array(integerToByteArray(2 * connector.sentCount, 24));\n\n  if (!connector.closed()) {\n    if (connector.sentCount > 1) {\n      // we don't encrypt first two messags (RPC: exchangePubkeys and exchangePubkeys::ACK)\n\n      let flag = 0; // binary\n\n      if (typeof data == 'string') {\n        flag = 1; // string\n      }\n\n      const _encodedMessage = flag == 1 ? nacl.util.decodeUTF8(data) : data; // binary data (file stream...)\n      const encodedMessage = addHeader(_encodedMessage, flag);\n\n      const encryptedMessage = nacl.secretbox(encodedMessage, nonce, connector.sharedSecret);\n\n      if (connector.verbose) {\n        console.log();\n        console.log(`Connector â†’ Sending encrypted message #${connector.sentCount} @ ${connector.address}:`);\n        console.log(data);\n      }\n\n      connector.connection.websocket.send(encryptedMessage);\n    } else {\n      if (connector.verbose) {\n        console.log();\n        console.log(`Connector â†’ Sending message #${connector.sentCount} @ ${connector.address}:`);\n        console.log(data);\n      }\n\n      connector.connection.websocket.send(data);\n    }\n  } else {\n    console.log(`Warning: \"${data}\" was not sent because connector was not yet connected!`);\n    // TODO: check if it's better to pass on the \"log\" function from establishAndMaintainConnection\n  }\n}\n\nexport default send;\n","function isObject(obj) {\n  return obj !== undefined && obj !== null && obj.constructor == Object;\n}\n\nfunction addHeader(_msg, flag) {\n  const msg = new Uint8Array(_msg.length + 1);\n\n  const header = new Uint8Array(1);\n  header[0] = flag;\n\n  // concat!\n  msg.set(header);\n  msg.set(_msg, header.length);\n\n  return msg;\n}\n\nexport { isObject, addHeader };\n","import nacl from 'tweetnacl';\nimport naclutil from 'tweetnacl-util';\nnacl.util = naclutil;\n\n//let nonce = new Uint8Array(new ArrayBuffer(24), 0);\nimport { integerToByteArray } from '../utils';\n\nfunction isRpcCallResult(jsonData) {\n  return Object.keys(jsonData).includes('result') || Object.keys(jsonData).includes('error');\n}\n\nfunction wireReceive({ jsonData, encryptedData, rawMessage, wasEncrypted, connector }) {\n  const nonce = new Uint8Array(integerToByteArray(2 * connector.receivedCount + 1, 24));\n\n  if (connector.verbose && !wasEncrypted) {\n    console.log();\n    console.log(`Connector â†’ Received message #${connector.receivedCount} @ ${connector.address}:`);\n  }\n\n  if (jsonData) {\n    if (jsonData.jsonrpc) {\n      // normal result from RPC call, result is coming back from server and we receive it at client\n      if (isRpcCallResult(jsonData)) {\n        if (connector.verbose && !wasEncrypted) {\n          //we already logged it if it was encrypted\n          console.log('Received plain-text rpc result');\n          console.log(jsonData);\n        }\n\n        connector.rpcClient.jsonrpcMsgReceive(rawMessage);\n      } else {\n        // if we receive json rpc message on the client without the result or error property, this means that it is\n        // actually a reverse RPC call from server to client\n        connector.emit('json_rpc', rawMessage);\n      }\n    } else {\n      connector.emit('wire_receive', { jsonData, rawMessage });\n    }\n  } else if (encryptedData) {\n    if (connector.verbose == 'extra') {\n      console.log('Received bytes:');\n      console.log(encryptedData);\n      console.log(`Decrypting with shared secret ${connector.sharedSecret}...`);\n    }\n\n    // we assume connector.sharedSecret exists and was successful\n    // OPEN QUESTION :: binaryData can be both: encryptedData or actual binaryData.. if we always encrypt we can solve the dilemma\n    const _decryptedMessage = nacl.secretbox.open(encryptedData, nonce, connector.sharedSecret);\n\n    const flag = _decryptedMessage[0];\n    const decryptedMessage = _decryptedMessage.subarray(1);\n\n    //let decodedMessage;\n\n    // BE CAREFUL --> cannot use this in browser!!\n    //const start = stopwatch.start();\n\n    // try {\n    //   decodedMessage = nacl.util.encodeUTF8(decryptedMessage);\n    // } catch (e) {\n    //   // console.log('CANNOT DECODE');\n    //   // console.log(stopwatch.stop(start));\n    //   // to detect we cannot decode it takes around 5ms on MBP\n    //   // and even ~50-60ms on RPi\n    // }\n\n    //âš ï¸ âš ï¸ text strings are not allowed... we can only distinguish between binary data and json\n    //\n    // this book has both \"cannot decode\" and \"cannot parse json\" instances:\n    // http://localhost:7777/file/Schaum's%20Mathematical%20Handbook%20of%20Formulas%20and%20Tables%20-%20Murray%20R%20Spiegel.pdf?id=192.168.0.10-2f686f6d652f65636c697073652f53746f726167652f436f6c6c656374696f6e732f4d6174682f426f6f6b73322f75736566756c2f53636861756d2773204d617468656d61746963616c2048616e64626f6f6b206f6620466f726d756c617320616e64205461626c6573202d204d75727261792052205370696567656c2e706466\n    // 27 MB, around 100 such decistion instances\n    if (flag == 1) {\n      // wrap this in try// catch and report issue in coding if it happens\n      const decodedMessage = nacl.util.encodeUTF8(decryptedMessage);\n\n      // string\n      try {\n        const jsonData = JSON.parse(decodedMessage);\n\n        //if (jsonData) {\n        if (jsonData.jsonrpc) {\n          if (connector.verbose) {\n            console.log('Received and decrypted rpc result:');\n            console.log(jsonData);\n          }\n\n          wireReceive({ jsonData, rawMessage: decodedMessage, wasEncrypted: true, connector }); // recursive: will call rpcClient as before\n        } else if (jsonData.tag) {\n          const msg = jsonData;\n\n          if (msg.tag == 'binary_start') {\n            //console.log(`received binary_start from (remote) content server, sessionId: ${msg.sessionId}`);\n            connector.emit(msg.tag, { ...msg, ...{ tag: undefined } });\n          } else if (msg.tag == 'binary_end') {\n            //console.log(`fiberConnection: received binary_end from (remote) content server, sessionId: ${msg.sessionId}`);\n            connector.emit(msg.tag, { sessionId: msg.sessionId });\n          } else {\n            connector.emit('wire_receive', { jsonData, rawMessage: decodedMessage });\n          }\n        } else {\n          connector.emit('wire_receive', { jsonData, rawMessage: decodedMessage });\n        }\n      } catch (e) {\n        console.log(\"Couldn't parse json message although the flag was for string ...\");\n        //log.red();\n        throw e;\n        // console.log('CANNOT PARSE JSON');\n        // this only takes microseconds and is not problematic\n      }\n    } else {\n      // binary data\n      //if (!jsonData) {\n      const binaryData = decryptedMessage;\n\n      // console.log(decryptedMessage);\n      // console.log(connector.address);\n\n      // TODO: check if someone is sending some other binary data... now we assume everything binary is filestream!!\n      //\n      //if (Buffer.isBuffer(binaryData)) {\n      const sessionId = Buffer.from(binaryData.buffer, binaryData.byteOffset, 64).toString();\n      const binaryPayload = Buffer.from(binaryData.buffer, binaryData.byteOffset + 64);\n\n      //console.log(binaryPayload.length);\n\n      //console.log(`fiberConnection: received binary_data from (remote) content server, sessionId: ${sessionId}`);\n\n      connector.emit('binary_data', { sessionId, data: binaryPayload });\n      // } else {\n      //   console.log(binaryData);\n      //   console.log('NOT BUFFER!!!');\n      //   // for now this will never happen because we don't send encoded binary data yet\n      //   connector.wireReceive({ binaryData });\n      // }\n    }\n\n    //connector.emit('wire_receive', { jsonData, binaryData, rawMessage });\n  }\n}\n\nexport default wireReceive;\n","import { EventEmitter } from '../utils';\n\nclass Channel extends EventEmitter {\n  // connector or channel actually, todo: change variable name\n  constructor(connector) {\n    super();\n\n    this.connector = connector;\n  }\n\n  send(...args) {\n    this.connector.send(...args);\n  }\n}\n\nexport default Channel;\n","export default {\n  PARSE_ERROR: -32700,\n  INVALID_REQUEST: -32600,\n  METHOD_NOT_FOUND: -32601,\n  INVALID_PARAMS: -32602,\n  REMOTE_INTERNAL_ERROR: -32603\n};\n","import errorCodes from './errorCodes';\n\nclass MoleServer {\n  constructor({ transports }) {\n    if (!transports) throw new Error('TRANSPORT_REQUIRED');\n\n    this.transportsToRegister = transports;\n    this.methods = {};\n  }\n\n  setMethodPrefix(methodPrefix) {\n    this.methodPrefix = methodPrefix;\n  }\n\n  expose(methods) {\n    this.methods = methods;\n  }\n\n  registerTransport(transport) {\n    transport.onData(this._processRequest.bind(this, transport));\n  }\n\n  // async removeTransport(transport) {\n  //   await transport.shutdown(); // TODO\n  // }\n\n  async _processRequest(transport, data) {\n    const requestData = JSON.parse(data);\n    let responseData;\n\n    if (Array.isArray(requestData)) {\n      // TODO Batch error handling?\n      responseData = await Promise.all(requestData.map(request => this._callMethod(request, transport)));\n    } else {\n      responseData = await this._callMethod(requestData, transport);\n    }\n\n    return JSON.stringify(responseData);\n  }\n\n  async _callMethod(request, transport) {\n    const isRequest = request.hasOwnProperty('method');\n    if (!isRequest) return; // send nothing in response\n\n    const { method, params = [], id } = request;\n\n    let methodName = method;\n\n    if (methodName.includes('::')) {\n      const [prefix, name] = methodName.split('::');\n      methodName = name;\n      if (this.methodPrefix && prefix != this.methodPrefix) {\n        // not meant for us ...\n        return;\n      }\n    }\n\n    const methodNotFound =\n      !this.methods[methodName] ||\n      typeof this.methods[methodName] !== 'function' ||\n      methodName === 'constructor' ||\n      methodName.startsWith('_') ||\n      this.methods[methodName] === Object.prototype[methodName];\n\n    let response = {};\n\n    if (methodNotFound) {\n      response = {\n        jsonrpc: '2.0',\n        id,\n        error: {\n          code: errorCodes.METHOD_NOT_FOUND,\n          message: `Method [${methodName}] not found on remote target object`\n        }\n      };\n    } else {\n      this.currentTransport = transport;\n\n      try {\n        const result = await this.methods[methodName].apply(this.methods, params);\n\n        if (!id) return; // For notifications do not respond. \"\" means send nothing\n\n        response = {\n          jsonrpc: '2.0',\n          result: typeof result === 'undefined' ? null : result,\n          id\n        };\n      } catch (e) {\n        console.log(`Exposed RPC method ${method} internal error:`);\n        console.log(e);\n        console.log('Sending this error as a result to calling client ...');\n        response = {\n          jsonrpc: '2.0',\n          error: {\n            code: errorCodes.REMOTE_INTERNAL_ERROR,\n            message: `Method [${method}] internal error: ${e.stack}` // todo -- perhaps obscure the exact paths ... for privacy\n          },\n          id\n        };\n      }\n    }\n\n    return response;\n  }\n\n  run() {\n    for (const transport of this.transportsToRegister) {\n      this.registerTransport(transport);\n    }\n\n    this.transportsToRegister = [];\n  }\n}\n\nexport default MoleServer;\n","import errorCodes from './errorCodes';\n\nclass Base extends Error {\n  constructor(data = {}) {\n    super();\n\n    if (!data.code) throw new Error('Code required');\n    if (!data.message) throw new Error('Message required');\n\n    this.code = data.code;\n    this.message = data.message;\n  }\n}\n\nclass MethodNotFound extends Base {\n  constructor(message) {\n    super({\n      code: errorCodes.METHOD_NOT_FOUND,\n      message: message || 'Method not found'\n    });\n  }\n}\n\nclass InvalidParams extends Base {\n  constructor() {\n    super({\n      code: errorCodes.INVALID_PARAMS,\n      message: 'Invalid params'\n    });\n  }\n}\n\nclass RemoteInternalError extends Base {\n  constructor(message) {\n    super({\n      code: errorCodes.REMOTE_INTERNAL_ERROR,\n      message: `Error originating at remote endpoint: ${message}` || 'Remote Internal error'\n    });\n  }\n}\n\nclass ParseError extends Base {\n  constructor() {\n    super({\n      code: errorCodes.PARSE_ERROR,\n      message: 'Parse error'\n    });\n  }\n}\n\nclass InvalidRequest extends Base {\n  constructor() {\n    super({\n      code: errorCodes.INVALID_REQUEST,\n      message: 'Invalid request'\n    });\n  }\n}\n\nclass ServerError extends Base {}\n\nclass RequestTimeout extends ServerError {\n  constructor(message) {\n    super({\n      code: -32001,\n      message: `Request exceeded maximum execution time ${message}`\n    });\n  }\n}\n\nexport default {\n  Base,\n  MethodNotFound,\n  InvalidRequest,\n  InvalidParams,\n  RemoteInternalError,\n  ServerError,\n  ParseError,\n  RequestTimeout\n};\n","import X from './X';\nimport errorCodes from './errorCodes';\n\nclass MoleClient {\n  constructor({ transport, requestTimeout = 20000 }) {\n    if (!transport) throw new Error('TRANSPORT_REQUIRED');\n    this.transport = transport;\n\n    this.requestTimeout = requestTimeout;\n\n    this.pendingRequest = {};\n    this.initialized = false;\n  }\n\n  // prefix::methodName --> when multiple rpc objects are active\n  setMethodPrefix(methodPrefix) {\n    this.methodPrefix = methodPrefix;\n  }\n\n  async callMethod(methodName, params) {\n    this._init();\n\n    const method = this.methodPrefix ? `${this.methodPrefix}::${methodName}` : methodName;\n\n    const request = this._makeRequestObject({ method, params });\n    return this._sendRequest({ object: request, id: request.id });\n  }\n\n  notify(method, params) {\n    this._init();\n\n    const request = this._makeRequestObject({ method, params, mode: 'notify' });\n    this.transport.sendData(JSON.stringify(request));\n    return true;\n  }\n\n  async runBatch(calls) {\n    const batchId = this._generateId();\n    let onlyNotifications = true;\n\n    const batchRequest = [];\n\n    for (const [method, params, mode] of calls) {\n      const request = this._makeRequestObject({ method, params, mode, batchId });\n\n      if (request.id) {\n        onlyNotifications = false;\n      }\n\n      batchRequest.push(request);\n    }\n\n    if (onlyNotifications) {\n      return this.transport.sendData(JSON.stringify(batchRequest));\n    }\n\n    return this._sendRequest({ object: batchRequest, id: batchId });\n  }\n\n  _init() {\n    if (this.initialized) return;\n\n    this.transport.onData(this._processResponse.bind(this));\n\n    this.initialized = true;\n  }\n\n  _sendRequest({ object, id }) {\n    const data = JSON.stringify(object);\n\n    // DMT DEBUGGING:\n    // console.log(data);\n\n    return new Promise((resolve, reject) => {\n      this.pendingRequest[id] = { resolve, reject, sentObject: object };\n\n      setTimeout(() => {\n        if (this.pendingRequest[id]) {\n          delete this.pendingRequest[id];\n\n          reject(new X.RequestTimeout(data));\n        }\n      }, this.requestTimeout);\n\n      try {\n        this.transport.sendData(data);\n      } catch (e) {\n        delete this.pendingRequest[id];\n        reject(e);\n      }\n\n      // todo -- check -- this was the old code... TransportClientChannel had a lot of async methods...\n      // return this.transport.sendData(data).catch(error => {\n      //   delete this.pendingRequest[id];\n      //   reject(error); // TODO new X.InternalError() <--- ??\n      //   //reject(new X.InternalError());\n      // });\n    });\n  }\n\n  _processResponse(data) {\n    const response = JSON.parse(data);\n\n    if (Array.isArray(response)) {\n      this._processBatchResponse(response);\n    } else {\n      this._processSingleCallResponse(response);\n    }\n  }\n\n  _processSingleCallResponse(response) {\n    const isSuccessfulResponse = response.hasOwnProperty('result') || false;\n    const isErrorResponse = response.hasOwnProperty('error');\n\n    if (!isSuccessfulResponse && !isErrorResponse) return;\n\n    const resolvers = this.pendingRequest[response.id];\n    delete this.pendingRequest[response.id];\n\n    if (!resolvers) return;\n\n    if (isSuccessfulResponse) {\n      resolvers.resolve(response.result);\n    } else if (isErrorResponse) {\n      const errorObject = this._makeErrorObject(response.error);\n      // console.log(response.error);\n      // console.log('-----------');\n      // console.log(errorObject);\n      resolvers.reject(errorObject);\n    }\n  }\n\n  _processBatchResponse(responses) {\n    let batchId;\n    const responseById = {};\n    const errorsWithoutId = [];\n\n    for (const response of responses) {\n      if (response.id) {\n        if (!batchId) {\n          batchId = response.id.split('|')[0];\n        }\n\n        responseById[response.id] = response;\n      } else if (response.error) {\n        errorsWithoutId.push(response.error);\n      }\n    }\n\n    if (!this.pendingRequest[batchId]) return;\n\n    const { sentObject, resolve } = this.pendingRequest[batchId];\n    delete this.pendingRequest[batchId];\n\n    const batchResults = [];\n    let errorIdx = 0;\n    for (const request of sentObject) {\n      if (!request.id) {\n        // Skip notifications\n        batchResults.push(null);\n        continue;\n      }\n\n      const response = responseById[request.id];\n\n      if (response) {\n        const isSuccessfulResponse = response.hasOwnProperty('result') || false;\n\n        if (isSuccessfulResponse) {\n          batchResults.push({\n            success: true,\n            result: response.result\n          });\n        } else {\n          batchResults.push({\n            success: false,\n            result: this._makeErrorObject(response.error)\n          });\n        }\n      } else {\n        batchResults.push({\n          success: false,\n          error: this._makeErrorObject(errorsWithoutId[errorIdx])\n        });\n        errorIdx++;\n      }\n    }\n\n    resolve(batchResults);\n  }\n\n  _makeRequestObject({ method, params, mode, batchId }) {\n    const request = {\n      jsonrpc: '2.0',\n      method\n    };\n\n    if (params && params.length) {\n      request.params = params;\n    }\n\n    if (mode !== 'notify') {\n      request.id = batchId ? `${batchId}|${this._generateId()}` : this._generateId();\n    }\n\n    return request;\n  }\n\n  _makeErrorObject(errorData) {\n    const errorBuilder = {\n      [errorCodes.METHOD_NOT_FOUND]: () => {\n        return new X.MethodNotFound(errorData.message);\n      },\n      [errorCodes.REMOTE_INTERNAL_ERROR]: () => {\n        return new X.RemoteInternalError(errorData.message);\n      }\n    }[errorData.code];\n\n    return errorBuilder();\n  }\n\n  _generateId() {\n    // from \"nanoid\" package\n    const alphabet = 'bjectSymhasOwnProp-0123456789ABCDEFGHIJKLMNQRTUVWXYZ_dfgiklquvxz';\n    let size = 10;\n    let id = '';\n\n    while (0 < size--) {\n      id += alphabet[(Math.random() * 64) | 0];\n    }\n\n    return id;\n  }\n}\n\nexport default MoleClient;\n","function proxify(moleClient) {\n  const callMethodProxy = proxifyOwnMethod(moleClient.callMethod.bind(moleClient));\n  const notifyProxy = proxifyOwnMethod(moleClient.notify.bind(moleClient));\n\n  return new Proxy(moleClient, {\n    get(target, methodName) {\n      if (methodName === 'notify') {\n        return notifyProxy;\n      }\n\n      if (methodName === 'callMethod') {\n        return callMethodProxy;\n      }\n\n      if (methodName === 'then') {\n        // without this you will not be able to return client from an async function.\n        // V8 will see then method and will decide that client is a promise\n        return;\n      }\n\n      if (methodName === 'setMethodPrefix') {\n        return (...params) => moleClient.setMethodPrefix(params);\n      }\n\n      return (...params) => target.callMethod.call(target, methodName, params);\n    }\n  });\n}\n\nfunction proxifyOwnMethod(ownMethod) {\n  return new Proxy(ownMethod, {\n    get(target, methodName) {\n      return (...params) => target.call(null, methodName, params);\n    },\n    apply(target, _, args) {\n      return target.apply(null, args);\n    }\n  });\n}\n\nexport default proxify;\n","class TransportServerChannel {\n  constructor(channel) {\n    this.channel = channel;\n  }\n\n  onData(callback) {\n    this.channel.on('json_rpc', async reqData => {\n      const resData = await callback(reqData);\n      if (!resData) return;\n\n      this.channel.send(resData);\n    });\n\n    // this.ws.on('message', async reqData => {\n    //   const resData = await callback(reqData);\n    //   if (!resData) return;\n\n    //   this.ws.send(resData);\n    // });\n  }\n}\n\nexport default TransportServerChannel;\n","import MoleClient from './MoleClient';\nimport proxify from './proxify';\n\nclass MoleClientProxified extends MoleClient {\n  constructor(...args) {\n    super(...args);\n    return proxify(this);\n  }\n}\n\nexport default MoleClientProxified;\n","class TransportClientChannel {\n  constructor(channel) {\n    this.channel = channel;\n  }\n\n  onData(callback) {\n    this.channel.on('json_rpc', callback);\n  }\n\n  sendData(data) {\n    this.channel.send(data);\n  }\n}\n\nexport default TransportClientChannel;\n","class ConnectomeError extends Error {\n  constructor(message, errorCode) {\n    super(message);\n\n    this.name = this.constructor.name;\n\n    this.errorCode = errorCode;\n  }\n\n  errorCode() {\n    return this.errorCode;\n  }\n}\n\nexport default ConnectomeError;\n","import MoleChannel from './moleChannel';\n\nimport * as mole from './mole';\n\nconst { MoleClient, ClientTransport } = mole;\n\nimport ConnectomeError from '../error/ConnectomeError';\n\nclass SpecificRpcClient {\n  constructor(connectorOrServersideChannel, methodPrefix, requestTimeout) {\n    this.moleChannel = new MoleChannel(connectorOrServersideChannel);\n    this.methodPrefix = methodPrefix;\n\n    this.connectorOrServersideChannel = connectorOrServersideChannel;\n\n    this.client = new MoleClient({\n      requestTimeout,\n      transport: new ClientTransport(this.moleChannel)\n    });\n  }\n\n  jsonrpcMsgReceive(stringMessage) {\n    // todo: remove\n    //console.log(`Received RPC result from server:`);\n    //console.log(stringMessage);\n\n    this.moleChannel.emit('json_rpc', stringMessage);\n  }\n\n  call(methodName, params) {\n    if (this.connectorOrServersideChannel.closed()) {\n      return new Promise((success, reject) => {\n        reject(\n          new ConnectomeError(\n            `Method call [${methodName}] on closed channel or connector ignored. Please add a check for closed channel in your code.`,\n            'CLOSED_CHANNEL'\n          )\n        );\n      });\n    }\n\n    return this.client.callMethod(`${this.methodPrefix}::${methodName}`, params);\n  }\n}\n\nexport default SpecificRpcClient;\n","import SpecificRpcClient from './specificClient';\n\nconst DEFAULT_REQUEST_TIMEOUT = 5000;\n\nclass RpcClient {\n  constructor(connectorOrServersideChannel, requestTimeout) {\n    // connectorOrServersideChannel or channel actually, todo: change variable name\n    this.connectorOrServersideChannel = connectorOrServersideChannel;\n    this.remoteObjects = {};\n    this.requestTimeout = requestTimeout || DEFAULT_REQUEST_TIMEOUT;\n  }\n\n  remoteObject(methodPrefix) {\n    const remoteObject = this.remoteObjects[methodPrefix];\n    if (!remoteObject) {\n      this.remoteObjects[methodPrefix] = new SpecificRpcClient(this.connectorOrServersideChannel, methodPrefix, this.requestTimeout);\n    }\n    return this.remoteObjects[methodPrefix];\n  }\n\n  jsonrpcMsgReceive(stringMessage) {\n    for (const remoteObject of Object.values(this.remoteObjects)) {\n      remoteObject.jsonrpcMsgReceive(stringMessage);\n    }\n  }\n}\n\nexport default RpcClient;\n","import { MoleServer, ServerTransport } from './mole';\n\nclass RPCTarget {\n  constructor({ serversideChannel, serverMethods, methodPrefix }) {\n    const transports = [new ServerTransport(serversideChannel)];\n    this.server = new MoleServer({ transports });\n    this.server.expose(serverMethods);\n    this.server.setMethodPrefix(methodPrefix);\n    this.server.run();\n  }\n}\n\nexport default RPCTarget;\n","import nacl from 'tweetnacl';\nimport naclutil from 'tweetnacl-util';\nnacl.util = naclutil;\n\nimport send from './send';\nimport receive from './receive';\n\nimport { EventEmitter, listify, hexToBuffer, bufferToHex } from '../utils';\n\nimport RpcClient from '../rpc/client';\nimport RPCTarget from '../rpc/RPCTarget';\n\n// EventEmitter for browser (and nodejs as well)\nclass Connector extends EventEmitter {\n  constructor({ protocolLane, clientPrivateKey, clientPublicKey, rpcRequestTimeout, verbose = false, address } = {}) {\n    super();\n\n    this.protocolLane = protocolLane;\n\n    this.clientPrivateKey = clientPrivateKey;\n    this.clientPublicKey = clientPublicKey;\n    this.clientPublicKeyHex = bufferToHex(clientPublicKey);\n\n    this.rpcClient = new RpcClient(this, rpcRequestTimeout);\n\n    this.address = address;\n    this.verbose = verbose;\n\n    this.sentCount = 0;\n    this.receivedCount = 0;\n  }\n\n  isReady() {\n    return this.ready;\n  }\n\n  send(data) {\n    send({ data, connector: this }); // todo: was send successful (?) -- or did we send into closed channel? what happens then? sent counters will be out of sync\n    this.sentCount += 1;\n  }\n\n  wireReceive({ jsonData, encryptedData, rawMessage }) {\n    receive({ jsonData, encryptedData, rawMessage, connector: this });\n    this.receivedCount += 1;\n  }\n\n  // channel has this method and connector also has to have it so that rpc client can detect and warn us\n  closed() {\n    return !this.connected;\n  }\n\n  connectStatus(connected) {\n    this.connected = connected;\n\n    if (connected) {\n      this.sentCount = 0;\n      this.receivedCount = 0;\n\n      // todo: remove\n\n      this.diffieHellman({ clientPrivateKey: this.clientPrivateKey, clientPublicKey: this.clientPublicKey, protocolLane: this.protocolLane })\n        .then(({ sharedSecret, sharedSecretHex }) => {\n          //console.log(colors.magenta(`Shared secret: ${colors.gray(sharedSecretHex)}`));\n          this.ready = true;\n          this.emit('ready', { sharedSecret, sharedSecretHex });\n        })\n        .catch(e => {\n          // Auth::exchangePubkeys request exceeded maximum allowed time... can sometimes happen on RPi ... maybe increase this time\n          console.log(e);\n          console.log('dropping connection and retrying again ...');\n          this.close();\n        });\n    } else {\n      this.ready = false;\n      this.emit('disconnected');\n    }\n  }\n\n  remoteObject(handle) {\n    return {\n      call: (methodName, params = []) => {\n        return this.rpcClient.remoteObject(handle).call(methodName, listify(params)); // rpcClient always expects a list of arguments, never a single argument\n      }\n    };\n  }\n\n  registerRemoteObject(handle, obj) {\n    // todo: servesideChannel is actually connector in this (reverse) case\n    new RPCTarget({ serversideChannel: this, serverMethods: obj, methodPrefix: handle });\n  }\n\n  diffieHellman({ clientPrivateKey, clientPublicKey, protocolLane }) {\n    // TODO: to be improved\n    return new Promise((success, reject) => {\n      this.remoteObject('Auth')\n        .call('exchangePubkeys', { pubkey: this.clientPublicKeyHex })\n        .then(remotePubkey => {\n          const sharedSecret = nacl.box.before(hexToBuffer(remotePubkey), clientPrivateKey);\n          const sharedSecretHex = bufferToHex(sharedSecret);\n          this.sharedSecret = sharedSecret;\n\n          this.remotePubkeyHex = remotePubkey;\n\n          success({ sharedSecret, sharedSecretHex });\n\n          if (this.verbose) {\n            console.log('Established shared secret through diffie-hellman exchange:');\n            console.log(sharedSecretHex);\n          }\n\n          // let server know we're ready\n          this.remoteObject('Auth')\n            .call('finalizeHandshake', { protocolLane })\n            .then(() => {\n              // if (this.clientInitData) {\n              //   this.remoteObject('Hello')\n              //     .call('hello', this.clientInitData)\n              //     .catch(reject);\n              // }\n            })\n            .catch(reject);\n        })\n        .catch(reject);\n    });\n  }\n\n  clientPubkey() {\n    return this.clientPublicKeyHex;\n  }\n\n  remotePubkey() {\n    return this.remotePubkeyHex;\n  }\n\n  // can actually be an url as well\n  remoteIp() {\n    return this.address;\n  }\n\n  close() {\n    this.connection.websocket.close();\n  }\n\n  // RECENTLY DONE:\n  // no manual connection flag is set... we close connection here after unsuccessful diffie hellman/\n  // we do want it to reopen... not sure if manual close is used somewhere??\n  // TODO: if not needed, remove closedManually checks in establishAndMaintainConnection\n  closeAndDontReopenUNUSED() {\n    this.connection.closedManually = true;\n    this.connection.websocket.onclose = () => {}; // disable onclose handler first\n\n    // the reason is to avoid this issue:\n    //// there could be problems here -- ?\n    // 1. we close the connection by calling connection.close on the connection store\n    // 2. we create a new connection which sets connected=true on our store\n    // 3. after that the previous connection actually closes and sets connected=false on our store (next line!)\n    // todo: solve if proven problematic... maybe it won't cause trouble because closeCallback will trigger immediatelly\n\n    this.connectStatus(false);\n    this.connection.websocket.close();\n  }\n\n  // connection => obj\n  // freshConnection\n  // reconnectPaused\n  //\n  // this.connection = {\n  //   websocket :: WS,\n  //   endpoint, :: string,\n  //   closedManually :: bool,\n  //   checkTicker :: int,\n  // }\n}\n\nexport default Connector;\n","// DMT.JS\n// CONNECTION \"PLUMBING\"\n\n// THIS IS USED IN TWO SEPARATE CASES - always on the client side (a):\n// Connection always from a to b\n\n// DMT-GUI\n// (1a) - client is a browser WebSocket and it connects to:    (browser == true)  <--- FLAG, look in this file's code\n// (1b) - ws gui state endpoint (inside node.js dmt-process)\n\n// DMT-FIBER:\n// (2a) - client is a fiber client (inside node.js dmt-process) and connects to:       (browser == false)\n// (2b) - fiber ws server (inside node.js dmt-process)\n\nconst browser = typeof window !== 'undefined';\n\nimport Connector from '../connector/connector';\n\nfunction establishAndMaintainConnection(\n  { obj, address, ssl = false, port, protocol, protocolLane, rpcRequestTimeout, clientPrivateKey, clientPublicKey, remotePubkey, resumeNow, verbose },\n  { WebSocket, log }\n) {\n  const wsProtocol = ssl ? 'wss' : 'ws';\n  // hack for now!\n  // testing reverse proxy forwarding for websockets on https://uri.com/ws\n  const endpoint = port.toString().startsWith('/') ? `${wsProtocol}://${address}${port}` : `${wsProtocol}://${address}:${port}`;\n\n  log(`Trying to connect to ws endpoint ${endpoint} ...`);\n\n  // address goes into connector only for informative purposes\n  const connector = obj || new Connector({ address, protocolLane, rpcRequestTimeout, clientPrivateKey, clientPublicKey, verbose });\n\n  if (resumeNow) {\n    // we could do without this and just wait for the next 1s check interval but this is faster and resumes connection immediately\n    checkConnection({ connector, endpoint, protocol }, { WebSocket, log, resumeNow });\n    return connector;\n  }\n\n  if (connector.connection) {\n    return connector;\n  }\n\n  connector.connection = {};\n  connector.connection.endpoint = endpoint; // only for logging purposes, not needed for functionality\n\n  // so that event handlers on \"connector\" have time to get attached\n  // we would use process.nextTick here usually but it doesn't work in browser!\n  setTimeout(() => tryReconnect({ connector, endpoint, protocol }, { WebSocket, log }), 10);\n\n  connector.connection.checkTicker = 0; // gets reset to zero everytime anything comes out of the socket\n\n  // we check once per second, if process on the other side closed connection, we will detect this within one second\n  // if network went down, we will need maximum 10-12s to determine the other side is now disconnected\n  //\n  // Technical explanation:\n  //\n  // Sometimes the link between the server and the client can be interrupted in a way that keeps both the server and\n  // the client unaware of the broken state of the connection (e.g. when pulling the cord).\n  // In these cases ping messages can be used as a means to verify that the remote endpoint is still responsive.\n  //\n  const connectionCheckInterval = 1000;\n  const callback = () => {\n    if (!connector.connection.closedManually) {\n      checkConnection({ connector, endpoint, protocol }, { WebSocket, log });\n      setTimeout(callback, connectionCheckInterval);\n    }\n  };\n\n  setTimeout(callback, connectionCheckInterval); // we already tried to connect in the first call in this function, we continue after the set interval\n\n  return connector; // connector (state) object\n}\n\nexport default establishAndMaintainConnection;\n\n// HELPER METHODS:\n\n// reconnectPaused =>\n// we still send pings, observe connected state and do everything,\n// the only thing we don't do is that we don't try to reconnect (create new WebSocket -> because this is resource intensive and it shows in browser log in red in console)\nfunction checkConnection({ connector, endpoint, protocol }, { WebSocket, log, resumeNow }) {\n  const conn = connector.connection;\n\n  //const prevConnected = connector.connected;\n\n  if (connectionIdle(conn)) {\n    // TODO: verify how often this gets called....\n    // seemed to happen on: dmt update lab dpanel ... not sure why... restart didn't last more than 12s\n    conn.websocket.close(); // will trigger onClose which will set connection status to false\n    // we home onClose is called rather instantly.. IF THERE ARE PROBLEMS, CHECK THIS PART IN THE FUTURE\n\n    // todo2: maybe check if under nodejs (ws) we should do terminate() instead ..\n    // https://stackoverflow.com/a/49791634\n    // todo3: instantly execute close handler and forget about this connection, label it inactive\n    // then it can take some time to close if it wants ... we should discard it immediately\n    //conn.websocket = null; // done: todo3 -- problem with onClose -- setConnected would get set on this connection\n    return;\n  }\n\n  const connected = socketConnected(conn);\n  // via ticker\n\n  // TODO: check ticker, if more than 12s, terminate socket ... then close handler should fire...\n  // then it's closed for good.. otherwise we may have issues with sharedSecret sync...\n\n  if (connected) {\n    // we cannot send lower-level ping frames from browser: https://stackoverflow.com/a/10586583/458177\n    conn.websocket.send('ping');\n  } else if (!connector.reconnectPaused && (resumeNow || conn.checkTicker <= 30 || conn.checkTicker % 3 == 0)) {\n    if (connector.connected == undefined) {\n      connector.connectStatus(false); // initial status report when not able to connect at beginning\n    }\n\n    // first 30s we try to reconnect every second, after that every 3s\n    tryReconnect({ connector, endpoint, protocol }, { WebSocket, log });\n  }\n\n  // if (prevConnected != connected || prevConnected == null) {\n  //   connector.connectStatus(connected);\n  // }\n\n  conn.checkTicker += 1;\n}\n\nfunction tryReconnect({ connector, endpoint, protocol }, { WebSocket, log }) {\n  if (connector.connection.closedManually) {\n    return;\n  }\n\n  const conn = connector.connection;\n\n  //if (conn.websocket) {\n  // get rid of possible previous websocket hanging around and executing opencallback\n  //conn.websocket.close(); // we don't strictky need this because of double check in openCallback but it's nice to do so we don't get brief temporary connections on server (just to confuse us) ... previous ws can linger around and open:\n\n  // ACTUALLY IT DOESN'T HELP !!! WE STILL GET LINGERING CONNECTIONS (AT MOST ONE ACCORDING TO TESTS) --> THAT'S WHY WE MAKE SURE\n\n  //conn.websocket.terminate(); // NOT OK!!! we have to actually use .close() !!\n\n  // testground pid 26235 7/24/2019, 9:42:54 PM 6311ms (+25ms) âˆž OPEN CALLBACK !!!!!!!!! 1\n  // testground pid 26235 7/24/2019, 9:42:54 PM 6313ms (+02ms) âˆž websocket conn to ws://192.168.0.10:8888 open\n  // testground pid 26235 7/24/2019, 9:42:54 PM 6315ms (+02ms) âˆž FiberConnection received state: {\n  //   \"connected\": true\n  // }\n  // testground pid 26235 7/24/2019, 9:42:54 PM 6317ms (+02ms) âˆž âœ“âœ“âœ“âœ“âœ“âœ“ CONNECTED\n  // testground pid 26235 7/24/2019, 9:42:54 PM 6542ms (+33ms) âˆž OPEN CALLBACK !!!!!!!!! 0  <---- previous lingering connection!!\n  //}\n\n  // we supposedly don't have to do anything with previous instance of WebSocket after repeatd reconnect retries\n  // it will get garbage collected (but it seems to slow everything down once we're past 100 unsuccessfull reconnects in a row)\n\n  // this line causes slowness after we keep disconnected on localhost and frontent keeps retrying\n  // after reconnect, connecting to nearby devices will be slow for some time\n  // we partially solved this by delaying retries longer (3s instead of 1s after first 30s of not being able to connect)\n  //\n  // when we are retrying connections to non-local endpoints, we pause retries after device drops from nearbyDevices list (implemented in multiConnectedStore::pauseActiveStoreIfDeviceNotNearby)\n  // for non-local endpoints on devices that we are connected to but not in foreground (selected device), we pause reconnects alltogether (multiConnectedStore::pauseDisconnectedStores)\n  const ws = new WebSocket(endpoint, protocol);\n\n  if (browser) {\n    ws.binaryType = 'arraybuffer';\n  }\n\n  if (!browser) {\n    // nodejs\n    ws.on('error', error => {\n      // do nothing, but we still need to catch this to not throw global exception (in nodejs)\n    });\n  }\n\n  const openCallback = m => {\n    //log.cyan(`OPEN CALLBACK !!!!!!!!! ${conn.checkTicker}`);\n\n    if (connector.closed()) {\n      // double-checking... ws connection retries could apparently come back and later open MANY connections when backend is accessible\n      // this was a bug with 50-200 sudden connections after backend was offline for some little time.. this happened more on rpi than on laptop but it still happened\n      // check in: https://tools.ietf.org/html/rfc6455\n      log(`websocket conn to ${endpoint} open`);\n      //log('new websocket conn open');\n\n      conn.checkTicker = 0; // ADDED HERE LATER --- usually we don't need this in frontend because we keep sending state! but we better do the same there as well !! TODOÂ±!!!!!\n\n      //log(`âœ“âœ“âœ“âœ“âœ“âœ“ CONNECTED`);\n\n      addSocketListeners({ ws, connector, openCallback }, { log });\n\n      conn.websocket = ws;\n\n      connector.connectStatus(true);\n    } else {\n      //log('new connection not needed');\n      ws.close();\n    }\n  };\n\n  if (browser) {\n    ws.addEventListener('open', openCallback);\n  } else {\n    ws.on('open', openCallback);\n  }\n}\n\n// ***************** PLUMBING *****************\n\nfunction addSocketListeners({ ws, connector, openCallback }, { log }) {\n  const conn = connector.connection;\n\n  const errorCallback = m => {\n    log(`websocket conn ${connector.connection.endpoint} error`);\n    log(m);\n  };\n\n  const closeCallback = m => {\n    log(`websocket conn ${connector.connection.endpoint} closed`);\n\n    // we have to check this because of initial status can be set elsewhere and we don't want to report of disconnection\n    if (!connector.closed()) {\n      connector.connectStatus(false);\n    }\n  };\n\n  const messageCallback = _msg => {\n    conn.checkTicker = 0;\n\n    const msg = browser ? _msg.data : _msg;\n\n    // only instance of data that is not either binary or json  (it is simply a string)\n    if (msg == 'pong') {\n      // we don't do anything here, it was enough that we have set the checkTicker to zero\n      return;\n    }\n\n    let jsonData;\n\n    try {\n      jsonData = JSON.parse(msg);\n    } catch (e) {}\n\n    // unencrypted -- only messages for key exchange\n    if (jsonData) {\n      connector.wireReceive({ jsonData, rawMessage: msg });\n    } else {\n      // this is either encrypted json or binary data\n      if (browser) {\n        // we have to convert from ArrayBuffer\n        connector.wireReceive({ encryptedData: new Uint8Array(msg) });\n      } else {\n        connector.wireReceive({ encryptedData: msg });\n      }\n    }\n  };\n\n  if (browser) {\n    ws.addEventListener('error', errorCallback);\n    ws.addEventListener('close', closeCallback);\n    ws.addEventListener('message', messageCallback);\n  } else {\n    ws.on('error', errorCallback);\n    ws.on('close', closeCallback);\n    ws.on('message', messageCallback);\n  }\n\n  // separate interval handler to purge stale sockets, because we couldn't detach the handlers from checkConnection function....\n  // only here because we set them here ....\n  const staleSocketCheckInterval = 1 * 1000;\n  const purgeSocketIfStale = () => {\n    if (!socketConnected(conn)) {\n      //log(`socket not connected anymore ticker: ${conn.checkTicker}, socket state: ${conn.websocket.readyState}`);\n      // removing these listeners is probably not needed -- test later\n      // ws.removeEventListener('open', openCallback);\n      // ws.removeEventListener('error', errorCallback);\n      // ws.removeEventListener('close', closeCallback);\n      // ws.removeEventListener('message', messageCallback);\n      ws.close(); // added later - test\n    } else {\n      setTimeout(purgeSocketIfStale, staleSocketCheckInterval);\n    }\n  };\n  setTimeout(purgeSocketIfStale, staleSocketCheckInterval);\n}\n\nfunction connectionIdle(conn) {\n  const STATE_OPEN = 1;\n\n  // we allow 12 seconds without message receive from the server side until we determine connection is broken\n  // this double negation is needed because otherwise (in node but not in browse!)\n  // we get \"undefined\" returned in case there is no conn.websocket object yet\n  // we actually need false so that set({connected}) actually works! if undefined this doesn't set any key.. bla bla bla, unimportant trickery\n  return conn.websocket && conn.checkTicker > 12 && conn.websocket.readyState == STATE_OPEN;\n}\n\nfunction socketConnected(conn) {\n  const STATE_OPEN = 1;\n  return conn.websocket && conn.websocket.readyState == STATE_OPEN;\n}\n","import { log } from '../utils';\nimport _establishAndMaintainConnection from './establishAndMaintainConnection';\n\nfunction establishAndMaintainConnection(opts) {\n  return new Promise(success => {\n    success(_establishAndMaintainConnection(opts, { WebSocket, log }));\n  });\n}\n\nexport default establishAndMaintainConnection;\n","import nacl from 'tweetnacl';\nimport naclutil from 'tweetnacl-util';\nnacl.util = naclutil;\n\nimport { isObject, addHeader } from './sendHelpers';\nimport { integerToByteArray } from '../utils';\n\n//let nonce = new Uint8Array(new ArrayBuffer(24), 0);\n\nfunction send({ message, channel }) {\n  if (isObject(message)) {\n    message = JSON.stringify(message);\n  }\n\n  const nonce = new Uint8Array(integerToByteArray(2 * channel.sentCount + 1, 24));\n\n  if (channel.verbose) {\n    if (channel.sharedSecret) {\n      console.log(`Channel â†’ Sending encrypted message #${channel.sentCount} @ ${channel.remoteIp()}:`);\n    } else {\n      console.log(`Channel â†’ Sending message #${channel.sentCount} @ ${channel.remoteIp()}:`);\n    }\n\n    console.log(message);\n  }\n\n  // TODO\n  if (channel.sharedSecret) {\n    let flag = 0; // binary\n\n    if (typeof message == 'string') {\n      flag = 1; // string\n    }\n\n    const _encodedMessage = flag == 1 ? nacl.util.decodeUTF8(message) : message; // binary data (file stream...)\n    const encodedMessage = addHeader(_encodedMessage, flag);\n\n    const encryptedMessage = nacl.secretbox(encodedMessage, nonce, channel.sharedSecret);\n    message = encryptedMessage;\n\n    if (channel.verbose == 'extra') {\n      console.log('Encrypted bytes:');\n      console.log(encryptedMessage);\n    }\n  }\n\n  if (channel.verbose) {\n    console.log();\n  }\n\n  //if (!channel.terminated) {\n  if (!channel.ws.terminated && channel.ws.readyState == channel.ws.OPEN) {\n    //channel.sentMessageCount += 1;\n    channel.ws.send(message);\n  } else {\n    channel.ws.terminated = true;\n    // TODO: improve and let caller know the message couldn't be sent! and let it deal with it\n    //log.red(`tried to send over closed channel: ${message}`);\n  }\n  //}\n}\n\nexport default send;\n","import nacl from 'tweetnacl';\nimport naclutil from 'tweetnacl-util';\nnacl.util = naclutil;\n\n//let nonce = new Uint8Array(new ArrayBuffer(24), 0);\nimport { integerToByteArray } from '../utils';\n\nfunction messageReceived({ message, channel }) {\n  const nonce = new Uint8Array(integerToByteArray(2 * channel.receivedCount, 24));\n\n  if (channel.verbose) {\n    console.log(`Channel â†’ Received message #${channel.receivedCount} @ ${channel.remoteIp()}:`);\n  }\n\n  if (channel.sharedSecret) {\n    if (channel.verbose == 'extra') {\n      console.log('Received bytes:');\n      console.log(message);\n      console.log(`Decrypting with shared secret ${channel.sharedSecret}...`);\n    }\n\n    try {\n      const _decryptedMessage = nacl.secretbox.open(message, nonce, channel.sharedSecret);\n\n      const flag = _decryptedMessage[0]; // should always be 1 (string) here because channel does not receive binary data, only connector (for now ?)\n      const decryptedMessage = _decryptedMessage.subarray(1);\n\n      const decodedMessage = nacl.util.encodeUTF8(decryptedMessage);\n      message = decodedMessage;\n    } catch (e) {\n      throw new Error(`${message} -- ${channel.protocol} -- ${e.toString()}`);\n    }\n  }\n\n  let jsonData;\n\n  try {\n    jsonData = JSON.parse(message);\n  } catch (e) {\n    console.log('---');\n    console.log(message);\n    console.log('---');\n    return;\n  }\n\n  if (channel.verbose) {\n    if (channel.sharedSecret) {\n      console.log('Decrypted message:');\n    }\n\n    console.log(message);\n    console.log();\n  }\n\n  if (jsonData.jsonrpc) {\n    // if we received rpc message with result or error property on the server, it means\n    // that this is a result of a reverse rpc call (from server to client) and now result from client is coming back on our\n    // (serverside) channel\n    if (Object.keys(jsonData).includes('result') || Object.keys(jsonData).includes('error')) {\n      channel.reverseRpcClient.jsonrpcMsgReceive(message);\n    } else {\n      // todo: remove\n      // console.log(`Received RPC call from client:`);\n      // console.log(jsonData);\n      // if we received a call without result or error property on server, that means it is a normal RPC call\n      channel.emit('json_rpc', message);\n    }\n  } else if (jsonData.tag == 'request_file') {\n    channel.streamFile(jsonData); // { filePath, sessionId }\n  } else {\n    channel.emit('message', message);\n  }\n  // } catch (e) {\n  //   // todo: remove! after this error is found:\n\n  //   //      lab pid 7123 3/17/2020, 6:27:05 PM 39915ms (+236ms) âˆž mpv engine play /root/DMTMountedMedia/solar/Music/Categories/Progressive/Shadow Gallery/Shadow Gallery - 2007 - Prime Cuts/Shadow Gallery - 07. The Final Hour.mp3\n  //   //lab pid 7123 3/17/2020, 6:29:16 PM 170934ms âˆž Caught global exception: SyntaxError: Unexpected token ` in JSON at position 0\n  //   //lab pid 7123 3/17/2020, 6:29:16 PM 170945ms (+11ms) âˆž SyntaxError: Unexpected token ` in JSON at position 0\n  //   //    at JSON.parse (<anonymous>)\n  //   //at Channel.messageReceived (file:///root/.dmt/core/node/connectome/lib/wsChannel/channel.js:94:27)\n  //   //at WebSocket.<anonymous> (file:///root/.dmt/core/node/connectome/lib/wsServer/serverInstance.js:103:19)\n  //   //at WebSocket.emit (events.js:333:22)\n  //   //at Receiver.receiverOnMessage (/root/.dmt/core/node/connectome/node_modules/ws/lib/websocket.js:801:20)\n  //   //at Receiver.emit (events.js:321:20)\n  //   //at Receiver.dataMessage (/root/.dmt/core/node/connectome/node_modules/ws/lib/receiver.js:427:14)\n  //   //at Receiver.getData (/root/.dmt/core/node/connectome/node_modules/ws/lib/receiver.js:366:17)\n  //   //at Receiver.startLoop (/root/.dmt/core/node/connectome/node_modules/ws/lib/receiver.js:142:22)\n  //   //at Receiver._write (/root/.dmt/core/node/connectome/node_modules/ws/lib/receiver.js:77:10)\n  //   //lab pid 7123 3/17/2020, 6:29:16 PM 170947ms (+02ms) âˆž EXITING, bye âœ‹\n\n  //   throw new Error(`${message} ${e.toString()}`);\n  // }\n}\n\nexport default messageReceived;\n","import nacl from 'tweetnacl';\nimport naclutil from 'tweetnacl-util';\n\nimport { EventEmitter, hexToBuffer } from '../../utils';\n\nnacl.util = naclutil;\n\nclass AuthTarget extends EventEmitter {\n  constructor({ keypair, channel }) {\n    super();\n\n    this.keypair = keypair;\n    this.channel = channel;\n  }\n\n  exchangePubkeys({ pubkey }) {\n    const remoteClientPubkey = hexToBuffer(pubkey);\n\n    this.channel.setRemotePubkey(pubkey);\n\n    this.sharedSecret = nacl.box.before(remoteClientPubkey, this.keypair.privateKey);\n\n    return this.keypair.publicKeyHex;\n  }\n\n  finalizeHandshake({ protocolLane }) {\n    this.emit('shared_secret', { sharedSecret: this.sharedSecret, protocolLane });\n  }\n}\n\nexport default AuthTarget;\n","import nacl from 'tweetnacl';\nimport naclutil from 'tweetnacl-util';\n\nimport { bufferToHex } from './lib/utils';\nimport connect from './lib/connect/connectNode';\nimport connectBrowser from './lib/connect/connectBrowser';\n\nimport Server from './lib/server/server';\n\nimport FiberPool from './lib/fibers/fiberPool';\n//import Fanout from './lib/fibers/fanout';\n\nimport contentServer from './lib/fileTransport/contentServer/contentServer';\nimport * as fiberHandle from './lib/fileTransport/fiberHandle/fiberHandle';\n\nnacl.util = naclutil;\n\nfunction newKeypair() {\n  const keys = nacl.box.keyPair();\n  const publicKeyHex = bufferToHex(keys.publicKey);\n  const privateKeyHex = bufferToHex(keys.secretKey);\n\n  return { privateKey: keys.secretKey, publicKey: keys.publicKey, privateKeyHex, publicKeyHex };\n}\n\nexport { connect, connectBrowser, FiberPool, Server, newKeypair, contentServer, fiberHandle };\n","import fastJsonPatch from 'fast-json-patch';\n\nimport { connectBrowser as connect } from 'connectome';\nimport SimpleStore from './simpleStore';\n\nconst { applyPatch: applyJSONPatch } = fastJsonPatch;\n\nclass ConnectedStore extends SimpleStore {\n  constructor({ ip = null, ssl = false, port, protocol, protocolLane, session, logStore, rpcRequestTimeout, rpcObjectsSetup, verbose } = {}) {\n    super();\n\n    this.ssl = ssl;\n    this.protocol = protocol;\n    this.protocolLane = protocolLane;\n    this.session = session;\n    this.logStore = logStore;\n    this.verbose = verbose;\n\n    this.set({ ip: ip || window.location.hostname });\n\n    this.rpcRequestTimeout = rpcRequestTimeout;\n\n    const objects = rpcObjectsSetup ? rpcObjectsSetup({ store: this }) : {};\n\n    this.connect(this.ip, port, objects);\n  }\n\n  remoteObject(handle) {\n    return this.connector.remoteObject(handle);\n  }\n\n  connect(address, port, objects) {\n    const clientPrivateKey = this.session.privateKey;\n    const clientPublicKey = this.session.publicKey;\n\n    connect({\n      address,\n      ssl: this.ssl,\n      port,\n      protocol: this.protocol,\n      protocolLane: this.protocolLane,\n      clientPrivateKey,\n      clientPublicKey,\n      rpcRequestTimeout: this.rpcRequestTimeout,\n      verbose: this.verbose\n    }).then(connector => {\n      this.connector = connector;\n\n      for (const [handle, obj] of Object.entries(objects)) {\n        connector.registerRemoteObject(handle, obj);\n      }\n\n      connector.on('wire_receive', ({ jsonData }) => {\n        if (jsonData.state) {\n          this.wireStateReceived = true;\n\n          if (this.verbose) {\n            console.log(`New store ${this.ip} / ${this.protocol} / ${this.protocolLane} state:`);\n            console.log(jsonData.state);\n          }\n\n          this.set(jsonData.state);\n        }\n\n        if (jsonData.diff && this.wireStateReceived) {\n          applyJSONPatch(this.state, jsonData.diff);\n          this.pushStateToSubscribers();\n        }\n      });\n\n      connector.on('ready', ({ sharedSecret, sharedSecretHex }) => {\n        if (!this.connected) {\n          this.emit('connected');\n        }\n\n        this.set({ connected: true });\n\n        //console.log(`Shared secret: ${sharedSecretHex}`);\n        this.session.set({ sharedSecret, sharedSecretHex }); // so we can show in gui easily\n      });\n\n      connector.on('disconnected', () => {\n        this.set({ connected: false });\n      });\n    });\n  }\n}\n\nexport default ConnectedStore;\n","import SimpleStore from './simpleStore';\nimport ConnectedStore from './connectedStore';\nimport MultiConnectedStore from './multiConnectedStore';\nimport ParallelStore from './parallelStore';\nimport SessionStore from './sessionStore';\nimport LogStore from './logStore';\n\nexport default { SimpleStore, ConnectedStore, MultiConnectedStore, ParallelStore, SessionStore, LogStore };\n","import SimpleStore from './simpleStore';\nimport ConnectedStore from './connectedStore';\n\nclass MultiConnectedStore extends SimpleStore {\n  constructor({ port, protocol, protocolLane, session, initialIp }) {\n    super();\n\n    this.session = session;\n\n    this.activeStoreId = 0;\n    this.currentIp = window.location.hostname; // usually localhost\n\n    this.port = port;\n    this.protocol = protocol;\n    this.protocolLane = protocolLane;\n\n    this.stores = [];\n    this.switch({ ip: this.currentIp });\n\n    //console.log(initialIp);\n\n    if (initialIp) {\n      this.switch({ ip: initialIp });\n\n      // setTimeout(() => { }, 1000)\n    }\n  }\n\n  remoteObject(handle) {\n    return this.activeStore.remoteObject(handle);\n  }\n\n  switch({ deviceId, ip }) {\n    let matchingStore;\n\n    this.stores.forEach((store, index) => {\n      if (store.ip == ip) {\n        matchingStore = store;\n      }\n    });\n\n    this.currentIp = ip;\n\n    if (!matchingStore) {\n      const newStore = new ConnectedStore({ ip, port: this.port, protocol: this.protocol, protocolLane: this.protocolLane, session: this.session });\n      matchingStore = newStore;\n\n      newStore.subscribe(state => {\n        // delete current.notifications; // not interested in remote notifications -- we don't show or use them\n        // // we make sure that in our Svelte Global Store (and thus GUI) there are only this device notifications...\n        // delete current.nearbyDevices; // also not interested in other devices \"nearbyDevices list\"\n        //this.stateChangeHandler({ state: current, storeId: newStoreId, stateDiff: changed });\n        if (state.ip == this.currentIp) {\n          this.set(state);\n        }\n      });\n\n      this.stores.push(newStore);\n    }\n\n    this.set(matchingStore.state);\n\n    this.activeStore = matchingStore;\n  }\n}\n\nexport default MultiConnectedStore;\n","import SimpleStore from './simpleStore';\nimport ConnectedStore from './connectedStore';\n\n// not yet sure if this is needed\nclass ParallelStore extends SimpleStore {\n  constructor({ session, port, protocol, addressList }) {\n    super();\n\n    this.stores = [];\n\n    for (const { ip } of addressList) {\n      this.addStore({ ip, port, protocol, session });\n    }\n  }\n\n  addStore({ ip, port, protocol, session }) {\n    let matchingStore;\n\n    this.stores.forEach((store, index) => {\n      if (store.ip == ip) {\n        matchingStore = store;\n      }\n    });\n\n    this.currentIp = ip;\n\n    if (!matchingStore) {\n      const newStore = new ConnectedStore({ ip, port, protocol, session });\n      matchingStore = newStore;\n\n      newStore.subscribe(state => {\n        // delete current.notifications; // not interested in remote notifications -- we don't show or use them\n        // // we make sure that in our Svelte Global Store (and thus GUI) there are only this device notifications...\n        // delete current.nearbyDevices; // also not interested in other devices \"nearbyDevices list\"\n        //this.stateChangeHandler({ state: current, storeId: newStoreId, stateDiff: changed });\n        if (state.ip == this.currentIp) {\n          this.set(state);\n        }\n      });\n\n      this.stores.push(newStore);\n    }\n\n    this.set(matchingStore.state);\n  }\n}\n\nexport default ParallelStore;\n","import { newKeypair } from 'connectome';\nimport SimpleStore from './simpleStore';\n\nclass SessionStore extends SimpleStore {\n  constructor({ verbose = false } = {}) {\n    super();\n\n    this.verbose = verbose;\n\n    this.constructOurKeypair();\n  }\n\n  constructOurKeypair() {\n    const keypair = newKeypair();\n    this.set(keypair);\n\n    if (this.verbose) {\n      console.log('Constructed new client keypair:');\n      console.log(`Private key: ${keypair.privateKeyHex}`);\n      console.log(`Public key: ${keypair.publicKeyHex}`);\n    }\n  }\n}\n\nexport default SessionStore;\n","import SimpleStore from './simpleStore';\n\nclass LogStore extends SimpleStore {\n  constructor() {\n    super();\n\n    this.set({ log: [] });\n  }\n\n  // todo: maybe move to MultiConnected store... and use only that store in place of connectedstore,,, but fix it to just one connection\n  // when used as single-connected store\n  // cannot use console.log from here!!, use \"origLog\" -- for debugging\n  addToLog({ origConsoleLog, limit }, ...args) {\n    // arguments are collected and single argument passed in actually became an array with one element\n    if (args.length == 1) {\n      args = args[0];\n    }\n\n    // origConsoleLog('HEYYY:');\n    // origConsoleLog(args);\n\n    let { log } = this.get();\n\n    if (typeof args == 'string') {\n      log.push(args);\n    } else {\n      try {\n        log.push(`${JSON.stringify(args)}`);\n      } catch (e) {\n        log.push(args);\n      }\n    }\n    log = log.slice(-limit);\n\n    this.set({ log });\n\n    this.emit('new_log_entry');\n  }\n}\n\nexport default LogStore;\n","function wrap(text, color) {\n  return `<span style=\"color: ${color};\">${text}</span>`;\n}\n\nfunction white(text) {\n  return wrap(text, 'white');\n}\n\nfunction red(text) {\n  return wrap(text, '#E34042');\n}\n\nfunction green(text) {\n  return wrap(text, '#5FE02A');\n}\n\nfunction gray(text) {\n  return wrap(text, '#C3C6C6');\n}\n\nfunction yellow(text) {\n  return wrap(text, '#E5AE34');\n}\n\nfunction cyan(text) {\n  return wrap(text, '#29B3BF');\n}\n\nfunction magenta(text) {\n  return wrap(text, '#A144E9');\n}\n\nexport default { white, red, green, gray, yellow, cyan, magenta };\n","// Running on the page, in the browser\n// This API will go live in early 2020\n// It will be the only API available after a 6-week deprecation period\n\nfunction metaMaskInstalled() {\n  return typeof ethereum != 'undefined' && ethereum.isMetaMask;\n}\n\nfunction getFirstAccount(accounts) {\n  if (accounts.length > 0) {\n    // console.log(`Accounts:`);\n    // console.log(accounts);\n    return accounts[0];\n  }\n}\n\n/***********************************/\n/* Handle connecting, per EIP 1102 */\n/***********************************/\n\n// You should only attempt to connect in response to user interaction,\n// such as a button click. Otherwise, you're popup-spamming the user\n// like it's 1999.\n// If you can't retrieve the user's account(s), you should encourage the user\n// to initiate a connection attempt.\n//document.getElementById('connectButton', connect)\n\nfunction metamaskConnectWrapper(accountChangedCallback) {\n  const connect = () => {\n    return new Promise((success, reject) => {\n      metamaskConnect()\n        .then(accounts => {\n          const acc = getFirstAccount(accounts);\n          // not sure why does this happen and we ged undefined acc but it seems to happen ...\n          // not sure what will we see in the interface now (logins still successful ?)\n          if (acc) {\n            accountChangedCallback(acc);\n          } else {\n            console.log('WARNING: received this from eth_requestAccounts, could not parse out a single account:');\n            console.log(accounts);\n            console.log('--------------------');\n          }\n        })\n        .catch(reject);\n    });\n  };\n\n  return connect;\n}\n\nfunction metamaskConnect() {\n  return new Promise((success, reject) => {\n    if (metaMaskInstalled()) {\n      // This is equivalent to ethereum.enable()\n      ethereum\n        .send('eth_requestAccounts')\n        .then(rpcResult => {\n          success(rpcResult.result);\n        })\n        .catch(err => {\n          if (err.code === 4001) {\n            // EIP 1193 userRejectedRequest error\n            reject(new Error('Please connect to MetaMask.'));\n          } else {\n            reject(err);\n          }\n        });\n    } else {\n      reject(new Error('Metamask not installed! Why was the connect button shown ?'));\n    }\n  });\n}\n\n// HACK --> REMOVE SOON, NOT ALWAYS WORKING\nconst MAX_RETRIES = 20;\n\nfunction metamaskInit(accountChangedCallback = () => {}, { retryCount = MAX_RETRIES } = {}) {\n  const retryInterval = 100; // 10 x 100ms = 1s ! more than enough for metamask to do it's magic!\n\n  const first = retryCount == MAX_RETRIES;\n\n  if (metaMaskInstalled()) {\n    // 1) initial account detection on page load\n    // recurse every 100ms max 10 times to see if ethereum address is known to us\n    // UPS: We strongly discourage the use of this property, which may be removed in the future.\n    // Ask developers: how to make sure ethereum.on('accountsChanged', handleAccountsChanged);\n    // is cought early ... where to attach listener?? then we don't have to use this polling trick\n    if (ethereum.selectedAddress) {\n      console.log(`Success at ${MAX_RETRIES - retryCount}`);\n      accountChangedCallback(ethereum.selectedAddress);\n    } else if (retryCount > 0) {\n      setTimeout(() => metamaskInit(accountChangedCallback, { retryCount: retryCount - 1 }), retryInterval);\n    }\n\n    if (first) {\n      // initial function run\n      // 2) attach handler for all future changes which are not related to manual user action (connect)\n      // SPECIAL COMMENT:\n      // // Note that this event is emitted on page load.\n      // If the array of accounts is non-empty, you're already\n      // connected.\n      //\n      // BUT we decide not to try catch initial event\n      //   ethereum.on('accountsChanged', handleAccountsChanged);\n      // because it's not reliable, we sometimes fail to attach this before it's fired..\n      // we could do it in index.html but it would be ugly! We just use initial and effective \"polling\" (recurse this function)\n      ethereum.on('accountsChanged', accounts => {\n        // it seems that if not connected we still get this event but with empty value... we don't pass empty value on, dont have to call our handler because empty account is assumed initially outside of this script anyway\n        const acc = getFirstAccount(accounts);\n        if (acc) {\n          accountChangedCallback(acc);\n        }\n      });\n    }\n\n    //console.log('METAMASK INSTALLED');\n\n    // For now, 'eth_accounts' will continue to always return an array\n    //ethereum.on('accountsChanged', handleAccountsChanged);\n  } else {\n    console.log('METAMASK INIT FAILED: not installed');\n    return false;\n  }\n\n  // 3) handle user action (first account connect)\n  return metamaskConnectWrapper(accountChangedCallback);\n}\n\n// if (metaMaskInstalled()) {\n//   // Note that this event is emitted on page load.\n//   // If the array of accounts is non-empty, you're already\n//   // connected.\n//   // For now, 'eth_accounts' will continue to always return an array\n//   console.log('ATTACHED HANDLER');\n//   ethereum.on('accountsChanged', handleAccountsChanged);\n// }\n\n/*********************************************************/\n/* Handle chain (network) and chainChanged, per EIP 1193 */\n/*********************************************************/\n\n// let currentChainId = null;\n// ethereum\n//   .send('eth_chainId')\n//   .then(handleChainChanged)\n//   .catch(err => console.error(err)); // This should never happen\n\n// ethereum.on('chainChanged', handleChainChanged);\n\n// function handleChainChanged(chainId) {\n//   // console.log(`Eth chain id:`);\n//   // console.log(chainId);\n//   if (currentChainId !== chainId) {\n//     currentChainId = chainId;\n//     // Run any other necessary logic...\n//   }\n// }\n\n// /**********************************************************/\n// /* Handle user accounts and accountsChanged, per EIP 1193 */\n// ********************************************************\n\n// let currentAccount = null;\n// ethereum\n//   .send('eth_accounts')\n//   .then(handleAccountsChanged)\n//   .catch(err => {\n//     // In the future, maybe in 2020, this will return a 4100 error if\n//     // the user has yet to connect\n//     if (err.code === 4100) {\n//       // EIP 1193 unauthorized error\n//       console.log('Please connect to MetaMask.');\n//     } else {\n//       console.error(err);\n//     }\n//   });\n\nexport { metamaskInit };\n","function queryDifferentEnough({ searchQuery, prevQuery }) {\n  return normalizeQuery(searchQuery) != normalizeQuery(prevQuery);\n}\n\nfunction normalizeQuery(query) {\n  return query ? query.trim().replace(/\\s+/g, ' ') : query;\n}\n\nlet prevQuery = '';\nlet executeQueryTimeout;\nconst timeTags = []; // we can keep this growing (for now ?)  probably forever, todo: OPTIMIZE LATER and be careful when reassigning this array, learn more about event loops!\n\nconst SEARCH_LAG_MS = 300; // 300 -- best value ->> if user presses the next key within this much from the last one, previous search query is cancelled\n\nfunction executeSearch({ searchQuery, remoteObject, remoteMethod, searchDelay = SEARCH_LAG_MS, force, searchStatusCallback = () => {} }) {\n  return new Promise((success, reject) => {\n    if (searchQuery.trim() == '') {\n      timeTags.push(Date.now());\n\n      if (prevQuery != '' || force) {\n        clearTimeout(executeQueryTimeout);\n        searchStatusCallback({ searching: false });\n\n        //success([]); // empty result set\n\n        if (force) {\n          success(null); // don't ask :) okk... we need to have a way to initially show something based on if there were ever results... force is only\n        } else {\n          success([]); // empty result set\n        }\n      }\n\n      prevQuery = searchQuery;\n\n      return;\n    }\n\n    try {\n      console.log('prevQuery:');\n      console.log(prevQuery);\n      console.log(`force: ${force}`);\n\n      if (force || queryDifferentEnough({ searchQuery, prevQuery })) {\n        clearTimeout(executeQueryTimeout);\n\n        searchStatusCallback({ searching: true });\n        // if we called this from inside a timeout, there would be a gui lag. Now we report that we are searching even before we fire off search (while we wait for possible next user input)\n\n        prevQuery = searchQuery;\n\n        executeQueryTimeout = setTimeout(() => {\n          const timeTag = Date.now();\n          timeTags.push(timeTag);\n\n          console.log(`Search executed on remote object: ${searchQuery}`);\n\n          remoteObject\n            .call(remoteMethod, { query: normalizeQuery(searchQuery), searchOriginHost: window.location.host })\n            .then(searchResults => {\n              //console.log(`Search with timeTag ${timeTag} just returned ...`);\n\n              const lastTimeTag = timeTags[timeTags.length - 1];\n\n              if (timeTag == lastTimeTag) {\n                const noHits = searchResults.filter(response => response.error || response.results.length == 0).length == searchResults.length;\n\n                searchStatusCallback({ searching: false, noHits }); // searchResults && searchResults.length == 0 -- todo: fix this since we now return aggregate results\n                success(searchResults);\n              } else {\n                console.log('Discarding search result which came out of order because a more recent result is due ...');\n                // keep the promise pending --> does not matter in frontend ... nodejs would keep a reference count ..\n                // we only use this lib on GUI!\n              }\n              // timeTags.reduce((prevTimeTag, timeTag) => {\n              //   if (prevTimeTag != null) {\n              //     if (prevTimeTag > timeTag) {\n              //       console.log(`Problem!! Results for ${normalizeQuery(searchQuery)} came back out of order ${prevTimeTag} > ${timeTag}`);\n              //     }\n              //   }\n              //   return timeTag;\n              // }, null);\n            })\n            .catch(e => {\n              searchStatusCallback({ searching: false });\n              reject(e);\n            });\n        }, searchDelay);\n      }\n    } catch (e) {\n      console.log('This error should not happen: bug in dmt-js');\n      searchStatusCallback({ searching: false });\n      reject(e);\n    }\n  });\n}\n\nexport default executeSearch;\n","function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value' || descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group) {\n    const value = [];\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.push(group[i].__value);\n    }\n    return value;\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j];\n                if (attributes[attribute.name]) {\n                    j++;\n                }\n                else {\n                    node.removeAttribute(attribute.name);\n                }\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    if (value != null || input.value) {\n        input.value = value;\n    }\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\nfunction add_resize_listener(element, fn) {\n    if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n    }\n    const object = document.createElement('object');\n    object.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n    object.setAttribute('aria-hidden', 'true');\n    object.type = 'text/html';\n    object.tabIndex = -1;\n    let win;\n    object.onload = () => {\n        win = object.contentDocument.defaultView;\n        win.addEventListener('resize', fn);\n    };\n    if (/Trident/.test(navigator.userAgent)) {\n        element.appendChild(object);\n        object.data = 'about:blank';\n    }\n    else {\n        object.data = 'about:blank';\n        element.appendChild(object);\n    }\n    return {\n        cancel: () => {\n            win && win.removeEventListener && win.removeEventListener('resize', fn);\n            element.removeChild(object);\n        }\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n    }\n    m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(target, this.n[i], anchor);\n        }\n        this.t = target;\n    }\n    u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nlet stylesheet;\nlet active = 0;\nlet current_rules = {};\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    if (!current_rules[name]) {\n        if (!stylesheet) {\n            const style = element('style');\n            document.head.appendChild(style);\n            stylesheet = style.sheet;\n        }\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    node.style.animation = (node.style.animation || '')\n        .split(', ')\n        .filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    )\n        .join(', ');\n    if (name && !--active)\n        clear_rules();\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        let i = stylesheet.cssRules.length;\n        while (i--)\n            stylesheet.deleteRule(i);\n        current_rules = {};\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro â€” we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro â€” needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined' ? window : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error(`Cannot have duplicate keys in a keyed each`);\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += \" \" + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += \" \" + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if ($$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(children(options.target));\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.19.2' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error(`Infinite loop detected`);\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","// some special treatment for some tags\n// usually it's a tag name in colored background\n// sometimes we want an unicode symbol instead of tag name (esp. for music)\n\nfunction mediaTypeIcon(mediaType) {\n  switch (mediaType) {\n    case 'music':\n      return 'â™¬';\n\n    default:\n      return '';\n  }\n}\n\nexport default mediaTypeIcon;\n","import { stores } from 'dmt-js';\nconst { SimpleStore } = stores;\n\nclass LoginStore extends SimpleStore {\n  constructor({ verbose = false } = {}) {\n    super();\n\n    this.verbose = verbose;\n  }\n\n  login(ethAddress) {\n    //console.log(`LOGIN_STORE: ${ethAddress}`);\n    this.set({ ethAddress, loggedIn: true });\n    this.emit('metamask_login', ethAddress);\n  }\n}\n\nexport default LoginStore;\n","import { Emitter } from 'dmt-js';\n\nclass App extends Emitter {\n  constructor() {\n    super();\n\n    this.isLocalhost = window.location.hostname == 'localhost';\n    this.isLAN = window.location.hostname.startsWith('192.168.');\n    this.isZetaSeek = window.location.hostname == 'zetaseek.com';\n\n    this.isMobile = window.screen.width < 768;\n\n    this.ssl = window.location.protocol == 'https:';\n  }\n}\n\nexport default new App();\n","window.addEventListener(\"popstate\", function (e) {\n    Url.triggerPopStateCb(e)\n});\n\nconst Url = module.exports = {\n\n    _onPopStateCbs: []\n  , _isHash: false\n\n    /**\n     * queryString\n     * Finds the value of parameter passed in first argument.\n     *\n     * @name queryString\n     * @function\n     * @param {String} name The parameter name.\n     * @param {Boolean} notDecoded If `true`, the result will be encoded.\n     * @return {String|Boolean|Undefined} The parameter value (as string),\n     * `true` if the parameter is there, but doesn't have a value, or\n     * `undefined` if it is missing.\n     */\n  , queryString (name, notDecoded) {\n        name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\n\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\")\n          , results = regex.exec(location.search)\n          , encoded = null\n          ;\n\n        if (results === null) {\n            regex = new RegExp(\"[\\\\?&]\" + name + \"(\\\\&([^&#]*)|$)\");\n            if (regex.test(location.search)) {\n                return true;\n            }\n            return undefined;\n        } else {\n            encoded = results[1].replace(/\\+/g, \" \");\n            if (notDecoded) {\n                return encoded;\n            }\n            return decodeURIComponent(encoded);\n        }\n    }\n\n    /**\n     * parseQuery\n     * Parses a string as querystring. Like the `queryString` method does, if\n     * the parameter is there, but it doesn't have a value, the value will\n     * be `true`.\n     *\n     * @name parseQuery\n     * @function\n     * @param {String} search An optional string that should be parsed\n     * (default: `window.location.search`).\n     * @return {Object} The parsed querystring. Note this will contain empty\n     * strings for\n     */\n  , parseQuery (search) {\n        var query = {};\n\n        if (typeof search !== \"string\") {\n            search = window.location.search;\n        }\n\n        search = search.replace(/^\\?/g, \"\");\n\n        if (!search) {\n            return {};\n        }\n\n        var a = search.split(\"&\")\n          , i = 0\n          , iequ\n          , value = null\n          ;\n\n        for (; i < a.length; ++i) {\n            iequ = a[i].indexOf(\"=\");\n\n            if (iequ < 0) {\n                iequ = a[i].length;\n                value = true;\n            } else {\n                value = decodeURIComponent(a[i].slice(iequ+1))\n            }\n\n            query[decodeURIComponent(a[i].slice(0, iequ))] = value;\n        }\n\n        return query;\n    }\n\n    /**\n     * stringify\n     * Stringifies a query object.\n     *\n     * @name stringify\n     * @function\n     * @param {Object} queryObj The object that should be stringified.\n     * @return {String} The stringified value of `queryObj` object.\n     */\n  , stringify (queryObj) {\n\n        if (!queryObj || queryObj.constructor !== Object) {\n            throw new Error(\"Query object should be an object.\");\n        }\n\n        var stringified = \"\";\n        Object.keys(queryObj).forEach(function(c) {\n            var value = queryObj[c];\n            stringified += c;\n            if (value !== true) {\n                stringified += \"=\" + encodeURIComponent(queryObj[c]);\n            }\n            stringified += \"&\";\n        });\n\n        stringified = stringified.replace(/\\&$/g, \"\");\n        return stringified;\n    }\n\n    /**\n     * updateSearchParam\n     * Adds, updates or deletes a parameter (without page refresh).\n     *\n     * @name updateSearchParam\n     * @function\n     * @param {String} param The parameter name.\n     * @param {String|undefined} value The parameter value. If `undefined`, the parameter will be removed.\n     * @param {Boolean} push If `true`, the page will be kept in the history,\n     * otherwise the location will be changed but by pressing the back button\n     * will not bring you to the old location.\n     * @param {Boolean} triggerPopState Triggers the popstate handlers (by default falsly).\n     * @return {Url} The `Url` object.\n     */\n  , updateSearchParam (param, value, push, triggerPopState) {\n\n        var searchParsed = this.parseQuery();\n\n        // Delete the parameter\n        if (value === undefined) {\n            delete searchParsed[param];\n        } else {\n            // Update or add\n            if (searchParsed[param] === value) {\n                return Url;\n            }\n            searchParsed[param] = value;\n        }\n\n        var newSearch = \"?\" + this.stringify(searchParsed);\n        this._updateAll(window.location.pathname + newSearch + location.hash, push, triggerPopState);\n\n        return Url;\n    }\n\n    /**\n     * getLocation\n     * Returns the page url, but not including the domain name.\n     *\n     * @name getLocation\n     * @function\n     * @return {String} The page url (without domain).\n     */\n  , getLocation () {\n        return window.location.pathname + window.location.search + window.location.hash;\n    }\n\n    /**\n     * hash\n     * Sets/gets the hash value.\n     *\n     * @name hash\n     * @function\n     * @param {String} newHash The hash to set.\n     * @param {Boolean} triggerPopState Triggers the popstate handlers (by default falsly).\n     * @return {String} The location hash.\n     */\n  , hash (newHash, triggerPopState) {\n        if (newHash === undefined) {\n            return location.hash.substring(1);\n        }\n        if (!triggerPopState) {\n            setTimeout(function () {\n                Url._isHash = false;\n            }, 0);\n            Url._isHash = true;\n        }\n        return location.hash = newHash;\n    }\n\n    /**\n     * _updateAll\n     * Update the full url (pathname, search, hash).\n     *\n     * @name _updateAll\n     * @function\n     * @param {String} newHash The hash to set.\n     * @param {Boolean} triggerPopState Triggers the popstate handlers (by default falsly).\n     * @return {String} The set url.\n     */\n  , _updateAll (s, push, triggerPopState) {\n        window.history[push ? \"pushState\" : \"replaceState\"](null, \"\", s);\n        if (triggerPopState) {\n            Url.triggerPopStateCb({});\n        }\n        return s;\n    }\n\n    /**\n     * pathname\n     * Sets/gets the pathname.\n     *\n     * @name getLocation\n     * @function\n     * @param {String} pathname The pathname to set.\n     * @param {Boolean} push If `true`, the page will be kept in the history,\n     * otherwise the location will be changed but by pressing the back button\n     * will not bring you to the old location.\n     * @param {Boolean} triggerPopState Triggers the popstate handlers (by default falsly).\n     * @return {String} The set url.\n     */\n  , pathname (pathname, push, triggerPopState) {\n        if (pathname === undefined) {\n            return location.pathname;\n        }\n        return this._updateAll(pathname + window.location.search + window.location.hash, push, triggerPopState);\n    }\n\n    /**\n     * triggerPopStateCb\n     * Calls the popstate handlers.\n     *\n     * @name triggerPopStateCb\n     * @function\n     */\n  , triggerPopStateCb (e) {\n        if (this._isHash) { return; }\n        this._onPopStateCbs.forEach(function (c) {\n            c(e)\n        });\n    }\n\n    /**\n     * onPopState\n     * Adds a popstate handler.\n     *\n     * @name onPopState\n     * @function\n     * @param {Function} cb The callback function.\n     */\n  , onPopState (cb) {\n        this._onPopStateCbs.push(cb);\n    }\n\n    /**\n     * removeHash\n     * Removes the hash from the url.\n     *\n     * @name removeHash\n     * @function\n     */\n  , removeHash () {\n        this._updateAll(window.location.pathname + window.location.search, false, false);\n    }\n   \n    /**\n     * removeQuery\n     * Removes the querystring parameters from the url.\n     *\n     * @name removeQuery\n     * @function\n     */\n  , removeQuery () {\n        this._updateAll(window.location.pathname + window.location.hash, false, false);\n    }\n\n  , version: \"2.3.1\"\n};\n","<script>\n  // import { getContext } from 'svelte';\n  // const app = getContext('app');\n\n  const d = new Date();\n  const datestring = `${d.getFullYear()}-${(d.getMonth() + 1)}-${d.getDate()}`;\n</script>\n\n<!-- {#if app.isZetaSeek} -->\n\n  <div class=\"about\">\n    <b>Zeta</b><span class=\"dash\">/</span><b><a href=\"https://dmt-system.com\">DMT</a></b> DEMO <span class=\"version\">v{datestring}</span>\n\n    <p>\n      An evolving search<sup>+</sup> technology for <b>web3</b> <span>r</span>evolution.\n    </p>\n\n    <p>\n      [ If you think all times are the same, you are wrong ]\n      <!-- [ <span>Imagine all the people sharing all the files</span> â€” <i>John Lennon</i> ] -->\n    </p>\n\n    <!-- <p>\n      [ <span>And the network will live as one.</span> ]\n    </p> -->\n\n    <!-- <p>\n      Principal use is as an installed engine (desktop or server).\n    </p>\n\n    <p>\n      Instructions coming soon.\n    </p> -->\n  </div>\n\n<!-- {/if} -->\n\n<style>\n.about {\n  width: 300px;\n  position: fixed;\n  right: 0;\n  bottom: 0;\n  padding: 10px;\n  color: white;\n  font-size: 0.8em;\n  opacity: 0.8;\n  border-top-left-radius: 10px;\n  color: #232527;\n  background-color: #A4938B;\n  background-color: #D9EBD5;\n}\n\n.about p {\n  font-size: 0.8em;\n  color: #232527;\n}\n\n.about span {\n  color: #777;\n  color: #535B62;\n  color: #5D6270;\n  color: var(--dmt-violet-dark);\n}\n\n.about span.dash {\n  padding: 0 2px;\n}\n\n.about span.version {\n  font-size: 0.8em;\n}\n\na {\n  color: white;\n  color: #232527;\n  text-decoration: underline;\n}\n\na:hover {\n  color: #404076;\n}\n\n@media only screen and (max-width: 768px) {\n  .about {\n    /*display: none;*/\n    /*width: 300px;*/\n  }\n}\n\n</style>\n","<script>\n  import { getContext } from 'svelte';\n  const app = getContext('app');\n\n  export let connected;\n  export let ethAddress;\n  export let displayName;\n  export let isAdmin;\n\n</script>\n\n<!-- <svg id=\"eth_address\"></svg> -->\n<div id=\"eth_identity\">\n  {#if displayName}\n\n    {displayName}\n\n    {#if isAdmin}\n      <span class=\"admin\">(+)</span>\n    {/if}\n    â†\n    <span>{ethAddress}</span>\n  {:else}\n    {#if connected}\n      <span class=\"anon\">Anonymous <span class=\"invite\">[please edit your profile]</span> â†</span>\n    {/if}\n    <span>{ethAddress}</span>\n  {/if}\n</div>\n\n\n<style>\n  #eth_identity {\n    color: white;\n    font-size: 0.8em;\n\n    position: absolute;\n    top: 15px;\n    top: 0;\n    right: 0px;\n    /*width: 300px;*/\n    padding: 10px;\n  }\n\n  #eth_identity span {\n    color: var(--dmt-bright-cyan);\n  }\n\n  #eth_identity span.admin {\n    color: var(--dmt-bright-cyan);\n  }\n\n  #eth_identity span.anon {\n    color: #aaa;\n  }\n\n  #eth_identity span.anon span.invite {\n    color: var(--dmt-warning-pink);\n  }\n</style>\n\n\n\n","<script>\n  import { getContext } from 'svelte';\n  const app = getContext('app');\n\n</script>\n\n<div class=\"metamask_missing\">\n  Install <a href=\"https://metamask.io\">MetaMask</a> extension to login.\n  <div class=\"explain\">\n    MetaMask provides the simplest yet most secure way to connect to decentralized applications. You are always in control when interacting on the new decentralized web.\n  </div>\n\n  <div class=\"explain\">\n    <span class=\"green\">\n      [ <a href=\"https://swarm-gateways.net/bzz:/0df387857246f1e70d89cd5f0e0be587f6a939bdf7c5b40f435a559f563aa292\">Watch MetaMask explainer video via p2p</a> ]\n    </span>\n  </div>\n\n  <a href=\"https://metamask.io\"> <img src=\"/apps/zeta/img/metamask.png\" alt=\"metamask\" /> </a>\n\n  {#if app.isZetaSeek}\n    <div class=\"explain\">\n      When you login with truly revolutionary MetaMask identity, you get to know more about this project as well.\n      <br><br>\n      <span>\n        We invite you to the path of enjoyable exploration and collaborative innovation.\n      </span>\n      <span class=\"cyan\">\n        To live is to know.\n      </span>\n    </div>\n  {/if}\n</div>\n\n<style>\n  .metamask_missing {\n    color: white;\n\n    position: absolute;\n    top: 0;\n    right: 0;\n\n    padding: 20px;\n    width: 310px;\n  }\n\n  .metamask_missing a {\n    /*color: var(--metamask-orange);*/\n    color: #99DDDD;\n    text-decoration: underline;\n  }\n\n  .metamask_missing:hover {\n    opacity: 0.9;\n  }\n\n  .explain {\n    margin-top: 10px;\n    color: #ddd;\n    font-size: 0.7em;\n  }\n\n  .explain span {\n    /*color: var(--dmt-bright-cyan);*/\n    color: var(--dmt-cool-green);\n  }\n\n  .explain span.cyan {\n    /*color: var(--dmt-bright-cyan);*/\n    /*color: var(--dmt-cool-cyan);*/\n    font-style: italic;\n  }\n\n  .explain span.green {\n    /*color: var(--dmt-bright-cyan);*/\n    /*color: var(--dmt-cool-cyan);*/\n    color: var(--dmt-vibrant-green);\n  }\n\n  .metamask_missing img {\n    width: 200px;\n  }\n\n  @media (max-width: 812px) {\n    .metamask_missing {\n      display: none;\n    }\n  }\n</style>\n\n\n\n","<script>\n  import { getContext } from 'svelte';\n  const app = getContext('app');\n\n  import DisplayLoggedInInfo from './DisplayLoggedInInfo.svelte';\n  import DisplayMetamaskInvite from './DisplayMetamaskInvite.svelte';\n\n  export let connected;\n  export let metamaskConnect;\n  export let ethAddress;\n  export let displayName;\n  export let isAdmin;\n\n  function login() {\n    metamaskConnect().catch(e => {\n      console.log(\"Metamask not connected (yet):\");\n      console.log(e);\n    });\n  }\n\n</script>\n\n{#if ethAddress}\n  <DisplayLoggedInInfo {connected} {ethAddress} {displayName} {isAdmin} {metamaskConnect} />\n  <!-- <svg id=\"eth_address\"></svg> -->\n{:else}\n  {#if metamaskConnect}\n    <div class=\"login\" on:click|preventDefault={() => { login(); }}>\n      <a href=\"#\">\n        <img src=\"/apps/zeta/img/metamask.png\" on:click|preventDefault={() => { login(); }} alt=\"metamask \" />\n      </a>\n      <br>\n      <b>CONNECT</b>\n      {#if app.isZetaSeek}\n        <div class=\"explain\">\n          <span>\n            We invite you to the path of enjoyable exploration and collaborative innovation.\n          </span>\n        </div>\n      {/if}\n    </div>\n  {:else}\n    <DisplayMetamaskInvite />\n  {/if}\n{/if}\n\n<style>\n  .login {\n    position: absolute;\n    /*top: 15px;*/\n    top: 0;\n    right: 0px;\n\n    color: white;\n\n    cursor: pointer;\n  }\n\n  .login img {\n    width: 120px;\n    padding: 5px 20px;\n  }\n\n  .login .explain {\n    width: 230px;\n    padding: 0 10px;\n  }\n\n  .explain {\n    margin-top: 10px;\n    color: #ddd;\n    font-size: 0.7em;\n  }\n\n  .explain span {\n    /*color: var(--dmt-bright-cyan);*/\n    color: var(--dmt-cool-green);\n  }\n\n  .login:hover {\n    opacity: 0.9;\n    cursor: pointer;\n  }\n\n  @media (max-width: 812px) {\n    .login {\n      display: none;\n    }\n  }\n</style>\n\n\n\n","<script>\n  import { onMount } from 'svelte';\n\n  export let connected;\n  export let loginStore;\n  export let store;\n\n  // load at start\n  $: ethAddress = $loginStore.ethAddress;\n\n  $: savedName = $loginStore.userName || $loginStore.userIdentity;\n  $: savedEmail = $loginStore.userEmail;\n\n  // not reactive!\n  // let name;\n  // let email;\n\n  let editMode;\n\n  function edit(_editMode = true) {\n    editMode = _editMode;\n\n    document.getElementById('name').value = savedName || '';\n    document.getElementById('email').value = savedEmail || '';\n\n    // if (editMode) {\n    //   setTimeout(() => {\n\n    //   }, 10);\n    // }\n  }\n\n  function save() {\n    const name = document.getElementById('name').value;\n    const email = document.getElementById('email').value;\n\n    store.saveUserProfile({ ethAddress, userName: name, userEmail: email });\n\n    editMode = false;\n  }\n\n</script>\n\n<div class=\"profile\">\n  <!-- <a href=\"#\"> -->\n    <!-- <img src=\"/apps/zeta/img/alien.png\" alt=\"alien\" /> -->\n  <!-- </a> -->\n\n  <h3>Profile</h3>\n\n  <div class=\"edit_form\" class:visible={editMode}>\n\n    <label for=\"name\">Your nick or real name</label>\n    <input id=\"name\" placeholder=\"\" disabled={!connected}>\n\n    <label for=\"email\">Your email</label>\n    <input id=\"email\" placeholder=\"\" disabled={!connected}>\n\n    <p>\n      {#if connected}\n        <a href=\"#\" on:click|preventDefault={() => { save(); }}>Save</a>\n      {:else}\n        Disconnected\n      {/if}\n      | <a href=\"#\" on:click|preventDefault={() => { edit(false); }}>Cancel</a>\n    </p>\n\n  </div>\n\n  <div class=\"display_profile\" class:visible={!editMode}>\n\n    <p>\n      <span>Name:</span> {savedName || '/'}\n    </p>\n\n    <p>\n      <span>Email:</span> {savedEmail || '/'}\n    </p>\n\n    <a href=\"#\" on:click|preventDefault={() => { edit(); }}>Edit profile</a>\n\n  </div>\n\n  {#if !savedEmail}\n    <div class=\"explain\">Provide email if you want to be notified about project progress.</div>\n  {/if}\n\n</div>\n\n<style>\n  .profile {\n    color: white;\n\n    margin-top: 10px;\n\n    padding: 10px;\n    /*padding-top: 0;*/\n    font-size: 0.8em;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    color: #232527;\n    background-color: #8EEFA2;\n    background-color: var(--dmt-warning-pink);\n\n    width: 400px;\n\n    text-align: justify;\n  }\n\n  .profile input {\n    width: 250px;\n  }\n\n  .profile input:disabled {\n    background-color: var(--dmt-warning-pink);\n  }\n\n  .profile span {\n    color: var(--dmt-violet-dark);\n  }\n\n  .profile h3 {\n    color: var(--dmt-navy);\n    margin-top: 5px;\n  }\n\n  .profile h3 span {\n    color: #555;\n  }\n\n  .profile .section_header {\n    font-weight: bold;\n  }\n\n  .edit_form, .display_profile {\n    display: none;\n  }\n\n  .edit_form.visible, .display_profile.visible {\n    display: block;\n  }\n\n  .explain {\n    margin-top: 10px;\n    /*color: #ddd;*/\n    font-size: 0.8em;\n  }\n\n  .explain span {\n    /*color: var(--dmt-bright-cyan);*/\n    color: var(--dmt-cool-green);\n  }\n\n  section {\n    display: none;\n  }\n\n  span.mark:before {\n    content: 'â–·';\n  }\n\n  span.section_visible.mark:before {\n    content: 'â–¼';\n  }\n\n  section.visible {\n    display: block;\n  }\n</style>\n","<script>\n  import { mediaTypeIcon } from 'dmt-js';\n\n  export let tag;\n</script>\n\n<span class=\"tag {tag.toLowerCase()}Tag\">\n\n  {#if mediaTypeIcon(tag)}\n    {mediaTypeIcon(tag)}\n  {:else}\n    {tag.toUpperCase()}\n  {/if}\n\n</span>\n\n<style>\n.tag {\n  background-color: #ddd;\n  border-radius: 2px;\n  color: #555;\n  padding: 0 2px;\n}\n\n/* (some) resultTypes ==> */\n\n.swarmTag {\n  /*color: #555;*/\n  /*color: white;*/\n  color: #FFAF28;\n  /*background-color: #FFA500;*/\n  background: none;\n  font-style: italic;\n  font-size: 0.8em;\n}\n\n.ensTag {\n  background-color: #5284FF;\n  color: white;\n}\n\n/* mediaTypes ==> */\n\n.videoTag {\n  color: white;\n  background-color: #7A3D12;\n  color: #333;\n  background-color: #FFD878;\n}\n\n.musicTag {\n  color: white;\n  background-color: #B54195;\n  font-size: 0.8em;\n}\n\n.imageTag {\n  color: white;\n  background-color: #C76479;\n}\n\n.pdfTag {\n  color: white;\n  background-color: #575DC9;\n}\n\n.txtTag {\n  color: #CCC;\n  background-color: #444;\n}\n\n.noteTag {\n  color: white;\n  background-color: #679536;\n}\n\n/*.mediaTypeIcon {\n  opacity: 0.7;\n  color: white;\n}*/\n</style>\n","<script>\n  import { getContext } from 'svelte';\n  const app = getContext('app');\n\n  import ResultTag from '../SearchResults/ResultTag.svelte';\n\n  export let teamName;\n\n  const sections = {\n    \"Swarm\": { visible: false }\n  };\n\n  function toggleSection(section) {\n    sections[section].visible = !sections[section].visible;\n  }\n\n</script>\n\n<div class=\"promo\">\n\n  <h3><span class=\"swarm_official\">{teamName.toUpperCase()}</span> ðŸ˜ŽðŸ–ï¸ <span>Summer Reading Club</span></h3>\n\n  <div class=\"inner\">\n\n    <p>\n      <a href=\"#\" class=\"section_header\" on:click|preventDefault={() => { toggleSection('Swarm'); }}>The Book Of Swarm</a>\n\n      <span class=\"mark\" class:section_visible={sections.Swarm.visible}></span>\n    </p>\n\n    <section class:visible={sections.Swarm.visible}>\n      Get <a href=\"#\" on:click|preventDefault={() => { app.emit('search', 'Book of Swarm pdf'); }}>The Book Of Swarm</a> ðŸ“™ðŸ\n      <!-- The Book Of Swarm â†’ <a class=\"outside\" href=\"https://swarm-gateways.net/bzz:/35810ba9634c3b3978edfd79961dfda2f5a79ec46c3b3c0c8d209c5217318ac5/\">download from Swarm p2p network</a> itself. -->\n\n      <p>\n        A technical book released on <b>May 18th 2020</b> which serves as a reference for <b>implementation of Swarm clients</b>:\n        The <a class=\"outside\" href=\"https://github.com/ethersphere/bee\">Ethereum Swarm Bee</a> <span class=\"small\">(the next official client to replace the current legacy one)</span> and others.\n      </p>\n    </section>\n\n    <p>\n      <a class=\"outside\" href=\"https://swarm.ethereum.org\">Swarm Project Website</a> or via <!-- <ResultTag tag='ens'/> --> <a href=\"https://swarm-gateways.net/bzz:/swarm.eth/\" class=\"outside\">Swarm gateway</a>\n      <br>\n      <span class=\"tagline\">Storage and Communication for a Sovereign Digital Society</span>\n    </p>\n\n  </div>\n</div>\n\n<style>\n  .promo {\n    margin-top: 10px;\n\n    padding: 10px;\n    /*padding-top: 0;*/\n    font-size: 0.8em;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n\n    color: #382609;\n    background-color: #FFAF28;\n\n    width: 400px;\n\n    text-align: justify;\n  }\n\n  .promo h3 {\n    color: #1C1304;\n    margin-top: 5px;\n  }\n\n  .promo h3 span {\n    color: #555;\n  }\n\n  .promo .section_header {\n    font-weight: bold;\n  }\n\n  a.outside {\n    text-decoration: underline;\n    text-decoration-style: solid;\n  }\n\n  section {\n    display: none;\n  }\n\n  a.outside:before {\n    /*content: 'âž¤ ';*/\n  }\n\n  span.mark:before {\n    content: 'â–·';\n  }\n\n  span.section_visible.mark:before {\n    content: 'â–¼';\n  }\n\n  span.swarm_official {\n    color: #333333;\n  }\n\n  span.small {\n    font-size: 0.8em;\n  }\n\n  span.tagline {\n    color: 354049;\n    font-weight: bold;\n    font-style: italic;\n  }\n\n  section.visible {\n    display: block;\n  }\n\n  .invite {\n    color: var(--dmt-navy2);\n    /*color: #ECE597;\n    color: #D8C2B4;*/\n    font-weight: bold;\n  }\n\n  .invite span {\n    filter: invert(0.8);\n  }\n\n  /*.promo .section_header:hover {\n    cursor: pointer;\n    color: #1F5256;\n  }*/\n\n</style>\n\n\n\n","<script>\n  import { getContext } from 'svelte';\n  const app = getContext('app');\n\n  export let displayName;\n  export let teamName;\n\n  const sections = {\n    \"PeterGloor\": { visible: false }\n  };\n\n  function toggleSection(section) {\n    sections[section].visible = !sections[section].visible;\n  }\n\n</script>\n\n<div class=\"promo\">\n\n  <h3>{displayName} <span>â¬Œ</span> {teamName} ðŸ˜ŽðŸ–ï¸ <span>Summer Reading Club</span></h3>\n\n  <div class=\"inner\">\n\n    <p>\n      <a href=\"#\" class=\"section_header\" on:click|preventDefault={() => { toggleSection('PeterGloor'); }}>Collaborative Innovation Networks </a>\n\n      <span class=\"mark\" class:section_visible={sections.PeterGloor.visible}></span>\n    </p>\n\n    <section class:visible={sections.PeterGloor.visible}>\n      <p>\n        <a href=\"#\" on:click|preventDefault={() => { app.emit('search', 'Peter Gloor'); }}>Peter Gloor's books on collaborative innovation</a>\n      </p>\n\n      Especially recommended: <a href=\"#\" on:click|preventDefault={() => { app.emit('search', 'Peter Gloor Coolfarming'); }}>Coolfarming</a>\n\n      <p>\n        Why is it that Apple products are cool? Why is Steve Jobs cool? What if you could become cool, too? And what if you could make your own ideas cool? What if you could even turn them into the next big thing?\n      </p>\n\n      <!-- <p>\n        The good news is, there are indeed steps you can take to be cool, and to convert your ideas into a cool trend. This book addresses the basic questions of what the magic of cool is. It shows you how to â€œcoolfarmâ€ your ideas, how to make trends cool, and how to become cool yourself.\n      </p> -->\n    </section>\n\n  </div>\n</div>\n\n<style>\n  .promo {\n    color: white;\n\n    margin-top: 10px;\n\n    padding: 10px;\n    /*padding-top: 0;*/\n    font-size: 0.8em;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    color: #232527;\n    background-color: #8EEFA2;\n\n    width: 400px;\n\n    text-align: justify;\n  }\n\n  .promo h3 {\n    color: var(--dmt-navy);\n    margin-top: 5px;\n  }\n\n  .promo h3 span {\n    color: #555;\n  }\n\n  .promo .section_header {\n    font-weight: bold;\n  }\n\n  section {\n    display: none;\n  }\n\n  span.mark:before {\n    content: 'â–·';\n  }\n\n  span.section_visible.mark:before {\n    content: 'â–¼';\n  }\n\n  section.visible {\n    display: block;\n  }\n\n  .invite {\n    color: var(--dmt-navy2);\n    font-weight: bold;\n  }\n\n  .invite span {\n    filter: invert(0.8);\n  }\n\n  /*.promo .section_header:hover {\n    cursor: pointer;\n    color: #1F5256;\n  }*/\n\n</style>\n\n\n\n","<script>\n  import { getContext } from 'svelte';\n  const app = getContext('app');\n\n  export let connected;\n  export let loggedIn;\n\n  export let deviceName; // temp\n  export let metamaskConnect;\n  export let searchQuery;\n\n  export let displayName;\n\n  export let loginStore;\n  export let store;\n  $: userIdentity = $loginStore.userIdentity;\n  $: userTeams = $loginStore.userTeams;\n\n  import Links from './Links.svelte';\n  import Profile from './Profile.svelte';\n  import PromoBox from './PromoBox.svelte';\n  import InsideBox from './InsideBox.svelte';\n  import TeamBox from './TeamBox.svelte';\n\n</script>\n\n<div class=\"leftbar\">\n  <!-- {#if loggedIn || (!loggedIn && !searchQuery)}\n    <Links />\n  {/if} -->\n\n  <!-- <PromoBox {metamaskConnect} /> -->\n\n  <!-- we don't actually need to be connected but ui behaves better (otherwise we see \"Info\" flashing before userTeams are loaded) -- we now have a shorter flash... between connection and the time until userTeams come from backend -->\n\n    {#if loggedIn}\n\n      {#if (app.isLocalhost && deviceName == 'eclipse') || app.isZetaSeek}\n        <Profile {connected} {loginStore} {store} />\n\n        {#if connected}\n          {#if userTeams && userTeams.includes('zeta')} <!-- todo -- one teambox for each team -->\n            <TeamBox {displayName} teamName='ZetaTeam' />\n          {/if}\n\n          <InsideBox teamName='Swarm' />\n        {/if}\n      {/if}\n    <!-- {:else if !searchQuery} -->\n\n    {/if}\n\n</div>\n\n<style>\n  .leftbar {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n\n    color: white;\n\n    /*padding: 10px;\n    padding-top: 0;\n    font-size: 0.8em;\n    border-bottom-right-radius: 10px;\n    color: #232527;\n    background-color: #A4938B;\n    background-color: #9EC6EA;*/\n  }\n\n  :global(.leftbar a) {\n    color: #333;\n    text-decoration: underline;\n    text-decoration-style: dotted;\n  }\n\n  :global(.leftbar a:hover) {\n    color: #111;\n    text-decoration-style: solid;\n  }\n\n  :global(.leftbar span.date) {\n    color: var(--dmt-violet-dark);\n    font-size: 0.9em;\n  }\n\n  @media (max-width: 1150px) {\n    .leftbar {\n      display: none;\n    }\n  }\n</style>\n\n\n\n","<script>\n  export let size = 25;\n  export let speed = 750;\n  export let color = 'rgba(0,0,0,0.4)';\n  export let thickness = 2;\n  export let gap = 40;\n  export let radius = 10;\n\n  let dash;\n  $: dash = 2 * Math.PI * radius * (100 - gap) / 100\n</script>\n\n<svg\n  height=\"{size}\"\n  width=\"{size}\"\n  style=\"animation-duration:{speed}ms;\"\n  class=\"svelte-spinner\"\n  viewbox=\"0 0 32 32\"\n>\n  <circle\n    role=\"presentation\"\n    cx=\"16\"\n    cy=\"16\"\n    r=\"{radius}\"\n    stroke=\"{color}\"\n    fill=\"none\"\n    stroke-width=\"{thickness}\"\n    stroke-dasharray=\"{dash},100\"\n    stroke-linecap=\"round\"\n  />\n</svg>\n\n<style>\n  .svelte-spinner {\n    transition-property: transform;\n    animation-name: svelte-spinner_infinite-spin;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n  }\n  @keyframes svelte-spinner_infinite-spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n</style>\n","<script>\n  import { getContext } from 'svelte';\n  const app = getContext('app');\n\n  import Spinner from 'svelte-spinner';\n\n  export let connected;\n  export let deviceName;\n  export let isSearching;\n\n  function displayDeviceName(deviceName) {\n    return deviceName && app.isLocalhost || app.isLAN ? `@${deviceName}` : '';\n  }\n</script>\n\n<p class=\"connection_status\" class:ok={connected}>\n  {#if connected}\n    <span class=\"device_name\">{displayDeviceName(deviceName)}</span> {displayDeviceName(deviceName) ? 'ready' : 'Ready'}\n\n    {#if isSearching}\n      <Spinner size=\"15\" speed=\"400\" color=\"#fff\" thickness=\"2\" gap=\"40\"/>\n    {:else}\n      <span class=\"mark\">âœ“</span>\n    {/if}\n  {:else}\n     <span class=\"device_name\">{displayDeviceName(deviceName)}</span> {displayDeviceName(deviceName) ? 'reconnecting' : 'Reconnecting' } <Spinner size=\"15\" speed=\"2000\" color=\"#EFCAF8\" thickness=\"3\" gap=\"25\"/>\n  {/if}\n</p>\n\n<style>\n  p.connection_status {\n    color: var(--dmt-warning-pink);\n  }\n\n  p.connection_status.ok {\n    color: #fff;\n  }\n\n  span.device_name, span.mark {\n    color: var(--dmt-bright-cyan);\n  }\n</style>\n","<script>\n  import ResultTag from './ResultTag.svelte';\n\n  export let mediaType;\n  export let resultType;\n  export let entryType;\n</script>\n\n{#if mediaType}\n\n  {#if mediaType == 'photo'}\n    <ResultTag tag=\"image\" />\n  {:else}\n    <ResultTag tag={mediaType} />\n  {/if}\n\n{/if}\n\n\n{#if resultType}\n  <ResultTag tag={resultType} />\n{/if}\n\n<!-- note results -->\n\n<!-- {#if resultType == 'note'}\n  <ResultTag tag=\"note\" />\n{/if}\n -->\n","<script>\n  import { getContext } from 'svelte';\n  const app = getContext('app');\n\n  export let mediaType;\n  export let playableUrl;\n\n  function play(playableUrl) {\n    app.emit('play', { playableUrl });\n  }\n</script>\n\n{#if !app.isZetaSeek && mediaType == 'music'}\n  <button on:click={() => { play(playableUrl); }}>PLAY</button>\n{/if}\n\n<style>\n  button {\n    border: 0;\n    cursor: pointer;\n    padding: 0 2px;\n    /*font-size: 0.8em;*/\n    margin: 0;\n  }\n\n  button:hover {\n    /*background-color: #7476FF;*/\n    background-color: #B54195;\n  }\n</style>\n","<script>\n  import ResultTags from './ResultTags.svelte';\n  import PlayMedia from './PlayMedia.svelte';\n\n  export let playableUrl;\n  export let name;\n  export let prettyTime;\n  export let entryType;\n  export let mediaType;\n  export let context;\n</script>\n\n<ResultTags {entryType} {mediaType} resultType=\"swarm\" />\n\n<a href=\"{playableUrl}\">\n  <b>{name}</b>\n</a>\n\n{#if prettyTime}\n  Â·\n  <span class=\"pretty_time\">{prettyTime}</span>\n{/if}\n\n{#if context}\n  {#if entryType == 'ens'}\n    âˆž\n  {:else}\n    Â·\n  {/if}\n\n  <span class=\"context\">{#if entryType != 'ens'}({/if}{context}{#if entryType != 'ens'}){/if}</span>\n{/if}\n\n<PlayMedia {playableUrl} {mediaType} />\n\n<style>\n  a {\n    text-decoration: underline;\n    text-decoration-style: solid; /* external link */\n  }\n\n  span.pretty_time {\n    color: #DFB1D9;\n  }\n\n  span.context {\n    color: #aaa;\n  }\n</style>\n","<script>\n  import { ansicolor } from 'dmt-js';\n\n  import ResultTags from './ResultTags.svelte';\n  import PlayMedia from './PlayMedia.svelte';\n\n  // use: https://www.rgbtohex.net/hextorgb/\n  ansicolor.rgb = {\n    black: [0, 0, 0],\n    // darkGray: [180, 180, 180],\n    darkGray: [160, 160, 160],\n    //cyan: [255, 255, 255]\n    cyan:         [37, 176, 188],\n    lightCyan:    [0, 204, 255]\n  };\n\n  export let playableUrl;\n  export let filePathANSI;\n\n  export let mediaType;\n  export let fileSizePretty;\n</script>\n\n<ResultTags {mediaType}  />\n\n<a href=\"{playableUrl}\">\n  {#each ansicolor.parse(filePathANSI).spans as span}<span style=\"{span.css}\">{span.text}</span>{/each}\n</a>\n\n<PlayMedia {playableUrl} {mediaType} />\n\n{#if fileSizePretty}\n  <span class=\"file_size\">{fileSizePretty}</span>\n{/if}\n\n<style>\n  span {\n    color: #EEE;\n  }\n\n  span.file_size {\n    color: #DFB1D9;\n  }\n</style>\n","<script>\n  import ResultTags from './ResultTags.svelte';\n\n  export let noteUrl;\n  export let notePreview;\n  export let noteTags;\n</script>\n\n<ResultTags resultType=\"note\" />\n\n<a href=\"{noteUrl}\">\n  {notePreview} <span class=\"note_tags\">[{noteTags}]</span>\n</a>\n\n<style>\n  .note_tags {\n    color: #679536;\n  }\n</style>\n","<script>\n  export let meta;\n</script>\n\n<h3>\n  @{meta.providerHost}<span class=\"contentId\">{#if meta.contentId}/{meta.contentId}{/if}</span>\n\n  <!-- {#if !providerResponse.error}\n    <span class=\"searchTime\">fs <span class=\"value\">{providerResponse.meta.searchTimePretty}</span>\n      {#if providerResponse.meta.networkTimePretty}\n        Â· network <span class=\"value\">{providerResponse.meta.networkTimePretty}</span>\n      {/if}\n    </span>\n  {/if} -->\n\n</h3>\n\n<style>\n  h3 span.contentId {\n    color: #DDD;\n  }\n</style>\n","<script>\n  import { colorsHTML as colors } from 'dmt-js';\n\n  export let providerResponse;\n\n  function displayResultsMeta(providerResponse) {\n    if (providerResponse.error) {\n      return colors.red(`âš ï¸  Error: ${providerResponse.error}`);\n    }\n\n    const { meta } = providerResponse;\n    const { page, noMorePages, resultCount, resultsFrom, resultsTo, searchTimePretty, networkTimePretty } = meta;\n\n    let time = '';\n\n    if (searchTimePretty) {\n      time += colors.gray(` Â· ${colors.gray('fs')} ${colors.white(searchTimePretty)}`);\n    }\n\n    if (networkTimePretty) {\n      time += colors.gray(` Â· ${colors.gray('network')} ${colors.white(networkTimePretty)}`);\n    }\n\n    if (resultCount > 0) {\n      if (page == 1 && noMorePages) {\n        return colors.white(`${resultCount} ${resultCount == 1 ? 'result' : 'results'}${time}`);\n      }\n\n      const isLastPage = noMorePages ? colors.white(' (last page)') : '';\n      const resultsDescription = `${colors.white(`Results ${resultsFrom} to ${resultsTo}`)}`;\n      return colors.gray(`${colors.white(`Page ${page}`)}${isLastPage} â†’ ${resultsDescription}${time}`);\n    }\n\n    return colors.gray(`No ${page > 1 ? 'more ' : ''}results${time}`);\n  }\n</script>\n\n<div class=\"results_meta\">\n  {@html displayResultsMeta(providerResponse)}\n</div>\n\n<style>\n  .results_meta {\n    margin-top: 5px;\n    font-size: 0.8em;\n  }\n</style>\n","<script>\n  import ResultSwarm from './ResultSwarm.svelte';\n  import ResultFs from './ResultFS.svelte';\n  import ResultNote from './ResultNote.svelte';\n\n  import ResultsMetaTop from './ResultsMetaTop.svelte';\n  import ResultsMetaBottom from './ResultsMetaBottom.svelte';\n\n  export let loggedIn;\n  export let searchResults;\n  export let noSearchHits;\n</script>\n\n<div class=\"no_results\" class:visible={noSearchHits}>NO HITS\n  {#if loggedIn}\n    FOR NOW\n  {:else}\n    // <span>PERHAPS TRY TO LOGIN FIRST</span>\n  {/if}\n</div>\n\n{#if searchResults}\n\n  {#if searchResults.error}\n    <div class=\"search_error\">\n      <p>Search Error in Frontend Code:</p>\n      <span>{searchResults.error.message}</span>\n      <span>{@html searchResults.error.stack.split('\\n').join('<br>')}</span>\n    </div>\n  {:else}\n    {#each searchResults as providerResponse}\n\n      <div class=\"results\">\n\n        <!-- PROVIDER ERROR -->\n        {#if providerResponse.error}\n          <ResultsMetaTop meta={providerResponse.meta}/>\n\n          <div class=\"result_error\">\n            Error: <span>{JSON.stringify(providerResponse.error)}</span>\n          </div>\n        {/if}\n\n        <!-- SOME RESULTS (if not results, we omit this provider) -->\n        {#if providerResponse.results && providerResponse.results.length > 0}\n          <ResultsMetaTop meta={providerResponse.meta}/>\n\n          {#each providerResponse.results as {filePath, name, context, swarmBzzHash, mediaType, entryType, prettyTime, filePathANSI, playableUrl, fiberContentURL, fileSizePretty, isNote, notePreview, noteUrl, noteContents, noteTags}}\n            <div class=\"result\">\n              {#if swarmBzzHash}\n                <ResultSwarm {name} {playableUrl} {mediaType} {entryType} {prettyTime} {context} />\n              {:else if filePath}\n                <ResultFs {playableUrl} {mediaType} {filePathANSI} {fileSizePretty} />\n              {:else if isNote}\n                <ResultNote {noteUrl} {notePreview} {noteTags} />\n              {:else}\n                <div class=\"resultError\">Unsupported search results format.</div>\n              {/if}\n            </div>\n          {/each}\n\n          <ResultsMetaBottom {providerResponse}/>\n        {/if}\n\n      </div>\n    {/each}\n  {/if}\n{/if}\n\n<style>\n  .results {\n    padding-top: 5px;\n    /*line-height: 1.2em;*/\n    font-size: 0.8em;\n    width: 100%;\n  }\n\n  .results a.button {\n    background-color: #ddd;\n    border-radius: 2px;\n    color: #555;\n    padding: 0 2px;\n  }\n\n  .results span {\n    color: #DDD;\n  }\n\n  .result {\n    padding: 3px 0;\n  }\n\n  .search_error {\n    color: var(--dmt-warning-pink);\n    margin-top: 20px;\n  }\n\n  .result_error {\n    color: var(--dmt-warning-pink);\n  }\n\n  .search_error span, .result_error span {\n    /*color: #555;*/\n    color: white;\n    background-color: #ddd;\n    background-color: #702E3C;\n    padding: 2px;\n    line-height: 1.5em;\n  }\n\n  :global(.results a) {\n    color: white;\n    text-decoration: underline;\n    text-decoration-style: dotted;\n    padding: 0 2px;\n  }\n\n  :global(.results a:visited) {\n    color: #F695FF;\n    color: white;\n  }\n\n  :global(.results a:hover) {\n    /*color: #FFE8DF;*/\n    color: white;\n    /*color: var(--dmt-navy);*/\n    background-color: #444;\n  }\n\n  a.button:hover {\n    background-color: white;\n    color: black;\n    cursor: pointer;\n  }\n\n  .no_results {\n    display: none;\n    padding: 10px 0;\n    color: var(--dmt-warning-pink);\n  }\n\n  .no_results.visible {\n    display: block;\n  }\n\n  .no_results span {\n    color: var(--dmt-bright-cyan);\n  }\n\n  @media only screen and (max-width: 768px) {\n    .results {\n      font-size: 0.6em;\n    }\n  }\n</style>\n","<script>\n  import { cssBridge, Escape, executeSearch } from 'dmt-js';\n\n  // http://jillix.github.io/url.js/ (TODO)\n  import Url from 'urljs';\n\n  import { onMount, setContext } from 'svelte';\n\n  import About from './components/About.svelte';\n  import Login from './components/Login/Login.svelte';\n  import LeftBar from './components/LeftBar/LeftBar.svelte';\n  import ConnectionStatus from './components/ConnectionStatus.svelte';\n  import SearchResults from './components/SearchResults/SearchResults.svelte';\n\n  export let store;\n  export let appHelper;\n  export let metamaskConnect;\n\n  setContext('app', appHelper);\n\n  const { isZetaSeek, isLocalhost, isMobile } = appHelper;\n\n  appHelper.on('play', ({ playableUrl }) => {\n    console.log(`Loading ${playableUrl} into mpv on localhost ...`);\n    store.remoteObject('GUIPlayerObject').call('playUrl', { playableUrl });\n  });\n  // ---------\n\n  const searchDelay = isLocalhost ? 50 : 70; // 50 : 400  // zetaseek we spare our own resources and let users wait a little bit so they don't trigger a lot of requests\n\n  let isSearching;\n  let noSearchHits;\n\n  // if (isZetaSeek) {\n  //   cssBridge.setWallpaper('/apps/zeta/wallpapers/hilly_dark_forest_river_fog.jpg');\n  // } else {\n  //   cssBridge.setWallpaper('/apps/zeta/wallpapers/black_triangles.jpg');\n  //}\n\n  const { loginStore } = store;\n\n  $: deviceName = $store.deviceName;\n  $: searchResults = $store.searchResults;\n  $: connected = $store.connected;\n  $: ethAddress = $loginStore.ethAddress; // also present in $store but we use it from frontEnd because it's more immediate -> it will work even if backend is currently disonnected\n  $: userIdentity = $loginStore.userIdentity;\n  $: userName = $loginStore.userName;\n  $: loggedIn = $loginStore.loggedIn;\n  $: isAdmin = $loginStore.isAdmin; // hmm ...\n  $: userTeams = $loginStore.userTeams; // hmm ...\n\n  $: displayName = userName || userIdentity;\n\n  let searchQuery;\n\n  searchQuery = Url.parseQuery().q;\n\n  if(searchQuery) {\n    searchQuery = decodeURIComponent(searchQuery);\n  }\n\n  // HACK but some platofrms need this to work properly -- for example opening a link from discord\n\n  let searchInput;\n\n  onMount(() => {\n    if (!isMobile) { // let's not focus on the mobile, users should see the entire page on first visit... there are more important things on it that search itself! :) Maybe on mobile recommend more stuff instead of typing\n      setTimeout(() => {\n        // after the input field is hopefully connected (and thus not :disabled... so that focusing the field will work...)\n        searchInput.focus();\n      }, 700);\n    }\n\n    setTimeout(() => {\n      // trigger initial search in case there were query parameters in url\n      //\n      triggerSearch({ force: true });\n    }, 100); // if it is not connected yet, it will retry !\n  });\n\n  function searchInputChanged() {\n    console.log('searchInputChanged event received, triggering search ...');\n    triggerSearch();\n  }\n\n  function triggerSearch({ force = false } = {}) {\n    // BECAUSE IT IS NOT ALWAYS BOUND !! (especially at first load) ... we read it manually ...\n    searchQuery = document.getElementById('search_input').value;\n\n    console.log(`triggerSearch: ${searchQuery}`);\n\n    const remoteObject = store.remoteObject('GUISearchObject');\n    const remoteMethod = 'search';\n\n    const searchStatusCallback = ({ searching, noHits }) => {\n      isSearching = searching;\n      noSearchHits = noHits;\n    };\n\n    if (connected) {\n      //console.log(`Sending search query: ${searchQuery}`);\n\n      if (searchQuery == null) {\n        console.log('Warning: null SEARCH QUERY !!! Should not hapen. There is a bug probably in GUI code');\n      }\n\n      if (searchQuery) {\n        Url.updateSearchParam('q', searchQuery);\n      } else {\n        Url.updateSearchParam('q'); // delete\n      }\n\n      executeSearch({ searchQuery, remoteObject, remoteMethod, searchStatusCallback, searchDelay, force }).then(searchResults => {\n        // console.log(\"SEARCH RESULTS:\");\n        // console.log(searchResults);\n        store.set({ searchResults });\n      }).catch(e => {\n        store.set({ searchResults: { error: e } });\n      });\n    } else if (searchQuery) { // sometimes we get empry searchQuery on first page load (we don't have to report that because it's not a problem... but we should never allow the user to typo into the disconnected field)\n      // const error = new Error('Frontend wasn\\'t yet connected ... FIX the code, dont send queries yet or then....');\n      // store.set({ searchResults: { error } });\n      setTimeout(() => {\n        triggerSearch();\n      }, 500); // OH YEA :) --> we need this for initial load when query parameters were read and search couldn't yet work because it was disconnected\n    }\n  }\n\n  function goHome() {\n    doSearch('');\n  }\n\n  function doSearch(query) {\n    document.getElementById('search_input').value = query; // clear input field (searchQuery is bound at should change automatically)\n    triggerSearch(); // clear search results\n  }\n\n  appHelper.on('search', doSearch);\n\n  if (!isZetaSeek) {\n    setTimeout(() => {\n      if (deviceName) {\n        document.title = `${deviceName} - search`;\n      }\n    }, 800); // hackish!\n  }\n</script>\n\n<svelte:head>\n  {#if isZetaSeek}\n    <title>ZetaSeek</title>\n  {:else}\n    <title>search</title>\n  {/if}\n</svelte:head>\n\n<!-- {#if isLocalhost && deviceName == 'eclipse'} -->\n\n{#if (isLocalhost && deviceName == 'eclipse') || isZetaSeek}\n  <LeftBar {connected} {loggedIn} {metamaskConnect} {displayName} {loginStore} {store} {searchQuery} {deviceName} />\n{/if}\n\n<!-- (isLocalhost && deviceName == 'eclipse') -->\n<!-- {#if (isLocalhost && deviceName == 'eclipse') || (isZetaSeek && (!isMobile || (isMobile && !searchQuery)))} -->\n<!-- !searchQuery && -->\n<!-- as a test on dev machine and on zetaseek but on mobile only if there are no search results -->\n{#if ((isLocalhost && deviceName == 'eclipse') || (isZetaSeek && (!isMobile || (isMobile && !searchQuery))))}\n  <About />\n{/if}\n\n<main>\n\n  {#if !isLocalhost || (isLocalhost && deviceName == 'eclipse')}\n    <Login {connected} {metamaskConnect} {ethAddress} {displayName} {isAdmin} />\n  {:else}\n    <Escape />\n  {/if}\n\n  <div class=\"logo\">\n    <a href=\"#\" on:click|preventDefault={() => { goHome(); }}>\n      <img src={`/apps/zeta/img/${isZetaSeek ? 'zetaseek' : 'search'}_logo.png`} alt=\"zeta logo\">\n    </a>\n  </div>\n\n  <ConnectionStatus {connected} {isSearching} {deviceName} />\n\n  <div class=\"search\">\n\n    <input id=\"search_input\" bind:value={searchQuery} bind:this={searchInput} on:keyup={searchInputChanged} on:paste={searchInputChanged} placeholder=\"Please type your query ...\" disabled={!connected}>\n\n    {#if !connected && isLocalhost}\n      <p class=\"connection_status_help\">\n        Please start <span>dmt-proc</span>.\n      </p>\n    {/if}\n\n    {#if !isLocalhost && connected && !searchResults}\n      <p class=\"connection_status_help\">\n        {#if loggedIn}\n          Welcome<span>{displayName ? ` ${displayName}` : ''}</span>, you have found a fine place <span>â™ªâ™«â™¬</span>\n        {:else} <!-- not logged in -->\n          The secret realm awaits.\n        {/if}\n      </p>\n    {/if}\n\n    <SearchResults {loggedIn} {searchResults} {noSearchHits} />\n\n  </div>\n\n</main>\n\n<style>\n  :root {\n    --warning: #E34042;\n    --dmt-red: #E34042;\n    --dmt-warning-pink: #EFCAF8;\n    --dmt-orange: #E5AE34;\n\n    --dmt-navy: #41468F;\n    --dmt-navy2: #292C5A;\n    --dmt-cyan: #29B3BF;\n    --dmt-bright-cyan: #3EFFE5;\n    --dmt-violet: #873BBF;\n    --dmt-violet-dark: #2E1740;\n\n    --dmt-vibrant-green: #5FE02A;\n    --dmt-cool-green: #5DF699;\n    --dmt-cool-cyan: #51F5C8;\n  }\n\n\tmain {\n\t\ttext-align: center;\n\t\tpadding: 1em;\n    padding-top: 80px;\n\t}\n\n  /*:global(a) {\n    color: white;\n    text-decoration: underline;\n    text-decoration-style: dotted;\n    padding: 0 2px;\n  }\n\n  :global(a:visited) {\n    color: #F695FF;\n    color: white;\n  }\n\n  :global(a:hover) {\n    color: white;\n    background-color: #444;\n  }*/\n\n  .logo:hover {\n    opacity: 0.9;\n    /*cursor: pointer;*/\n  }\n\n  .logo img {\n    filter: invert(1);\n    width: 200px;\n    margin: 0 auto;\n    margin-bottom: 20px;\n  }\n\n  input#search_input {\n    width: 330px;\n    margin: 0 auto;\n    color: #222;\n    outline: none;\n  }\n\n  input#search_input:disabled {\n    background-color: var(--dmt-warning-pink);\n  }\n\n  .search {\n    color: white;\n  }\n\n  .connection_status_help {\n    color: var(--dmt-cool-green);\n    font-size: 0.8em;\n  }\n\n  .connection_status_help span {\n    color: var(--dmt-cool-cyan);\n  }\n\n  @media only screen and (max-width: 768px) {\n    main {\n      padding-top: 30px;\n    }\n\n    .logo img {\n      width: 150px;\n      margin-bottom: 10px;\n    }\n  }\n</style>\n","import { stores, metamask } from 'dmt-js';\n\nimport LoginStore from './loginStore';\nimport ConnectedStore from './connectedStore';\n\nimport appHelper from './appHelper'; // our custom helper object\n\nconst { SessionStore, LogStore } = stores;\n\nconst { metamaskInit } = metamask;\n\nimport App from './App.svelte';\n\nconst port = appHelper.ssl ? '/ws' : 7780; // hackish ?\nconst protocol = 'zeta';\nconst protocolLane = 'gui';\n\n// RPC targets on frontend\n\nconst rpcObjectsSetup = ({ store }) => {\n  return {\n    Receiver: {\n      msg: msg => {\n        store.set({ msg });\n      }\n    }\n  };\n};\n\nconst logStore = new LogStore();\n\n// source: https://stackoverflow.com/a/9216488\nconst log = console.log.bind(console);\nconsole.log = (...args) => {\n  logStore.addToLog({ origConsoleLog: log, limit: 100 }, ...args);\n  log(...args);\n};\n\nconst verbose = false;\nconst session = new SessionStore({ verbose });\nconst loginStore = new LoginStore();\n\nconst rpcRequestTimeout = 5500; // 500ms more than default so that if any underlying request time outs, we still get that info to the frontent (otherwise this request would time-out as well)\n// todo: what if default changes ? we should somehow add 500ms to default... or specify hopNumber which decreases as we nest searches... current hop is multiplied by 500ms to allow for underlying timeouts\nconst store = new ConnectedStore(loginStore, {\n  port,\n  ssl: appHelper.ssl,\n  protocol,\n  protocolLane,\n  rpcRequestTimeout,\n  rpcObjectsSetup,\n  verbose,\n  session,\n  logStore\n});\n\nconst metamaskConnect = metamaskInit(ethAddress => {\n  // main place where we get always current connected account!\n  // should be in sync with metamask state\n  console.log(`Connected ethereum address: ${ethAddress}`);\n  loginStore.login(ethAddress);\n});\n\nconst app = new App({\n  target: document.body,\n  props: {\n    store,\n    appHelper,\n    metamaskConnect\n  }\n});\n\nexport default app;\n","import { stores } from 'dmt-js';\n\nclass ConnectedStore extends stores.ConnectedStore {\n  constructor(loginStore, options) {\n    super(options);\n\n    this.loginStore = loginStore;\n\n    // also reconnects are handled here\n    this.on('connected', () => {\n      const { ethAddress } = this.loginStore.get();\n\n      if (ethAddress) {\n        //console.log(`AAAAA ${ethAddress}`);\n        this.loginAddress(ethAddress);\n      }\n    });\n\n    loginStore.on('metamask_login', ethAddress => {\n      if (this.connected) {\n        //console.log(`BBBBB ${ethAddress}`);\n        this.loginAddress(ethAddress);\n      }\n    });\n  }\n\n  // only logs in on frontend still... this only gets information and permissions\n  // for this user ..\n  // in future we have to figure out how to actually allow only for correct users.. if they're not logged\n  // into backend currently... assign to connection ? or send ethAddress with every request ??\n  loginAddress(ethAddress) {\n    this.remoteObject('GUIFrontendAcceptor')\n      .call('getUserIdentity', { address: ethAddress, urlHostname: window.location.hostname })\n      .then(identity => {\n        // console.log('RECEIVED: ');\n        // console.log(identity);\n        this.loginStore.set(identity);\n      })\n      .catch(console.log);\n  }\n\n  saveUserProfile(options) {\n    this.remoteObject('GUIFrontendAcceptor')\n      .call('saveUserProfile', options)\n      .then(() => {\n        console.log('Profile saved');\n        this.loginStore.set(options);\n      })\n      .catch(console.log);\n  }\n}\n\nexport default ConnectedStore;\n"],"names":["_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","sliceIterator","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","Constructor","protoProps","staticProps","prototype","_toConsumableArray","arr2","from","_classCallCheck","instance","O","colorCodes","colorCodesLight","styleCodes","asBright","red","green","yellow","blue","magenta","cyan","black","lightGray","types","0","2","3","9","4","10","subtypes","color","colorLight","bgColor","bgColorLight","style","unstyle","clean","obj","k","keys","Color","background","name","brightness","this","inverted","inverse","rgbName","Code","bright","prop","rgb","Colors","alpha","dim","concat","join","get","n","Number","Math","floor","type","noBrightness","x","str","assign","reset","noItalic","noUnderline","noInverse","noColor","noBgColor","wrap","openCode","closeCode","open","close","String","split","map","line","s","replace","denormalizeBrightness","a","b","camel","charAt","toUpperCase","slice","stringWrappingMethods","reduce","spans","state","buffer","text","code","codes","c","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_code","return","rawParse","p","styles","Set","span","has","underline","italic","bold","foreColor","defaultBrightness","styledSpan","css","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","isBrightness","subtype","add","delete","filter","parsed","asChromeConsoleLogArguments","names","forEach","assignStringWrappingAPI","wrapBefore","arguments","memo","_ref","_ref2","_ref3","darkGray","white","lightRed","lightGreen","lightYellow","lightBlue","lightMagenta","lightCyan","noop","RunnableLink","[object Object]","prev","fn","data","run","LinkedList","linkConstructor","head","tail","reg","link","id","splitter","Eev","events","me","list","eev","_eev","insert","remove","args","off","evt","Store","Emitter","super","subscriptions","pushStateToSubscribers","callback","subscriptionId","random","el","index","splice","sub","extendStatics","__extends","d","setPrototypeOf","__proto__","hasOwnProperty","__","constructor","create","_hasOwnProperty","call","_objectKeys","_deepClone","JSON","parse","stringify","isInteger","charCode","len","charCodeAt","escapePathComponent","path","indexOf","unescapePathComponent","patchErrorMessageFormatter","message","messageParts","PatchError","_super","operation","tree","_newTarget","_this","Error","JsonPatchError","deepClone","objOps","document","newDocument","removed","move","getValueByPointer","originalValue","applyOperation","op","copy","valueToCopy","test","_areEquals","_get","arrOps","pointer","getOriginalDestination","validateOperation","mutateDocument","banPrototypeModifications","validator","returnValue","t","existingPathFragment","validateFunction","applyPatch","patch","results","length_1","hasUndefined","objKeys","objKeysLength","pathLen","existingPathLen","error","validate","sequence","externalValidator","e","arrA","arrB","operationResult","beforeDict","WeakMap","Mirror","observers","Map","ObserverInfo","observer","generate","invertible","mirror","object","_generate","patches","temp","toJSON","newKeys","oldKeys","deleted","oldVal","newVal","root","unobserve","getMirror","observerInfo","getObserverFromMirror","set","dirtyCheck","fastCheck","clearTimeout","setTimeout","window","addEventListener","removeObserverFromMirror","removeEventListener","tree1","tree2","core","duplex","nacl","gf","init","r","Float64Array","randombytes","_0","Uint8Array","_9","gf0","gf1","_121665","D","D2","X","Y","I","ts64","h","l","vn","xi","y","yi","crypto_verify_16","crypto_verify_32","crypto_core_salsa20","out","inp","o","u","j0","j1","j2","j3","j4","j5","j6","j7","j8","j9","j10","j11","j12","j13","j14","j15","x0","x1","x2","x3","x4","x5","x6","x7","x8","x9","x10","x11","x12","x13","x14","x15","core_salsa20","crypto_core_hsalsa20","core_hsalsa20","sigma","crypto_stream_salsa20_xor","cpos","m","mpos","z","crypto_stream_salsa20","crypto_stream","sn","crypto_stream_xor","poly1305","t0","t1","t2","t3","t4","t5","t6","t7","Uint16Array","pad","leftover","fin","crypto_onetimeauth","outpos","update","finish","crypto_onetimeauth_verify","hpos","crypto_secretbox","crypto_secretbox_open","set25519","car25519","v","sel25519","q","pack25519","j","neq25519","par25519","unpack25519","A","Z","M","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","S","inv25519","pow2523","crypto_scalarmult","f","x32","subarray","x16","crypto_scalarmult_base","crypto_box_keypair","crypto_box_beforenm","blocks","bytes","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","hibit","h0","h1","h2","h3","h4","h5","h6","h7","h8","h9","r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","mac","macpos","mask","g","want","crypto_box_afternm","crypto_box_open_afternm","K","crypto_hashblocks_hl","hh","hl","bh0","bh1","bh2","bh3","bh4","bh5","bh6","bh7","bl0","bl1","bl2","bl3","bl4","bl5","bl6","bl7","th","tl","wh","Int32Array","wl","ah0","ah1","ah2","ah3","ah4","ah5","ah6","ah7","al0","al1","al2","al3","al4","al5","al6","al7","pos","crypto_hash","cswap","pack","tx","ty","zi","scalarmult","scalarbase","crypto_sign_keypair","pk","sk","seeded","L","modL","carry","crypto_sign","sm","smlen","crypto_sign_open","chk","num","den","den2","den4","den6","unpackneg","checkLengths","checkArrayTypes","cleanup","lowlevel","crypto_box","crypto_box_open","crypto_secretbox_KEYBYTES","crypto_secretbox_NONCEBYTES","crypto_secretbox_ZEROBYTES","crypto_secretbox_BOXZEROBYTES","crypto_scalarmult_BYTES","crypto_scalarmult_SCALARBYTES","crypto_box_PUBLICKEYBYTES","crypto_box_SECRETKEYBYTES","crypto_box_BEFORENMBYTES","crypto_box_NONCEBYTES","crypto_box_ZEROBYTES","crypto_box_BOXZEROBYTES","crypto_sign_BYTES","crypto_sign_PUBLICKEYBYTES","crypto_sign_SECRETKEYBYTES","crypto_sign_SEEDBYTES","crypto_hash_BYTES","randomBytes","secretbox","msg","nonce","box","keyLength","nonceLength","overheadLength","scalarMult","base","scalarLength","groupElementLength","publicKey","secretKey","before","checkBoxLengths","after","keyPair","fromSecretKey","publicKeyLength","secretKeyLength","sharedKeyLength","sign","signedMsg","tmp","mlen","detached","sig","verify","fromSeed","seed","seedLength","signatureLength","hash","hashLength","setPRNG","crypto","self","msCrypto","getRandomValues","min","require$$0","module","exports","util","validateBase64","decodeUTF8","unescape","encodeURIComponent","encodeUTF8","fromCharCode","decodeURIComponent","escape","atob","Buffer","encodeBase64","toString","decodeBase64","btoa","log","console","Date","toLocaleString","bufferToHex","padStart","integerToByteArray","long","arrayLen","byteArray","fill","byte","send","connector","sentCount","closed","flag","encodedMessage","_msg","header","addHeader","encryptedMessage","sharedSecret","verbose","address","connection","websocket","wireReceive","jsonData","encryptedData","rawMessage","wasEncrypted","receivedCount","jsonrpc","includes","isRpcCallResult","emit","rpcClient","jsonrpcMsgReceive","_decryptedMessage","decryptedMessage","decodedMessage","tag","sessionId","binaryData","byteOffset","binaryPayload","naclutil","Channel","EventEmitter","MoleServer","transports","transportsToRegister","methods","methodPrefix","transport","onData","_processRequest","bind","requestData","responseData","Promise","all","request","_callMethod","method","params","methodName","prefix","response","startsWith","errorCodes","currentTransport","result","apply","stack","registerTransport","Base","ServerError","MethodNotFound","InvalidRequest","InvalidParams","RemoteInternalError","ParseError","RequestTimeout","MoleClient","requestTimeout","pendingRequest","initialized","_init","_makeRequestObject","_sendRequest","mode","sendData","calls","batchId","_generateId","onlyNotifications","batchRequest","_processResponse","resolve","reject","sentObject","_processBatchResponse","_processSingleCallResponse","isSuccessfulResponse","isErrorResponse","resolvers","errorObject","_makeErrorObject","responses","responseById","errorsWithoutId","batchResults","errorIdx","success","errorData","errorBuilder","size","proxifyOwnMethod","ownMethod","Proxy","_","TransportServerChannel","channel","on","async","resData","reqData","moleClient","callMethodProxy","callMethod","notifyProxy","notify","setMethodPrefix","proxify","ConnectomeError","errorCode","ClientTransport","mole","SpecificRpcClient","connectorOrServersideChannel","moleChannel","MoleChannel","client","stringMessage","RpcClient","remoteObjects","remoteObject","values","RPCTarget","serversideChannel","serverMethods","ServerTransport","server","expose","Connector","protocolLane","clientPrivateKey","clientPublicKey","rpcRequestTimeout","clientPublicKeyHex","ready","receive","connected","diffieHellman","then","sharedSecretHex","catch","handle","pubkey","remotePubkey","hex","tokens","match","token","parseInt","hexToBuffer","remotePubkeyHex","closedManually","onclose","connectStatus","browser","checkConnection","endpoint","protocol","WebSocket","resumeNow","conn","checkTicker","readyState","connectionIdle","socketConnected","reconnectPaused","tryReconnect","ws","binaryType","openCallback","errorCallback","closeCallback","messageCallback","purgeSocketIfStale","addSocketListeners","establishAndMaintainConnection","opts","ssl","port","wsProtocol","_establishAndMaintainConnection","applyJSONPatch","fastJsonPatch","ConnectedStore","SimpleStore","ip","session","logStore","rpcObjectsSetup","location","hostname","objects","store","connect","privateKey","entries","registerRemoteObject","wireStateReceived","diff","MultiConnectedStore","initialIp","activeStoreId","currentIp","stores","switch","activeStore","deviceId","matchingStore","newStore","subscribe","ParallelStore","addressList","addStore","SessionStore","constructOurKeypair","keypair","publicKeyHex","privateKeyHex","newKeypair","LogStore","origConsoleLog","limit","gray","metaMaskInstalled","ethereum","isMetaMask","getFirstAccount","accounts","metamaskConnectWrapper","accountChangedCallback","rpcResult","acc","metamaskInit","retryCount","first","selectedAddress","normalizeQuery","query","trim","executeQueryTimeout","prevQuery","timeTags","executeSearch","searchQuery","remoteMethod","searchDelay","force","searchStatusCallback","now","searching","queryDifferentEnough","timeTag","searchOriginHost","host","searchResults","lastTimeTag","noHits","blank_object","run_all","fns","is_function","thing","safe_not_equal","callbacks","unsub","unsubscribe","append","node","appendChild","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","element","createElement","svg_element","createElementNS","createTextNode","space","empty","listen","event","handler","options","prevent_default","preventDefault","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","set_input_value","input","set_style","important","setProperty","toggle_class","toggle","classList","current_component","set_current_component","component","get_current_component","getContext","$$","context","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","add_render_callback","flushing","seen_callbacks","flush","pop","clear","fragment","before_update","dirty","ctx","after_update","outroing","outros","group_outros","check_outros","transition_in","block","local","transition_out","globals","global","create_component","mount_component","on_mount","on_destroy","new_on_destroy","destroy_component","make_dirty","create_fragment","not_equal","parent_component","prop_values","bound","ret","rest","hydrate","childNodes","children","intro","SvelteComponent","$destroy","mediaTypeIcon","mediaType","isLocalhost","isLAN","isZetaSeek","isMobile","screen","width","Url","triggerPopStateCb","_onPopStateCbs","_isHash","notDecoded","regex","RegExp","exec","search","encoded","iequ","queryObj","stringified","param","triggerPopState","searchParsed","parseQuery","newSearch","_updateAll","pathname","getLocation","newHash","substring","history","cb","version","getFullYear","getMonth","getDate","ethAddress","displayName","isAdmin","app","metamaskConnect","login","loginStore","editMode","edit","_editMode","getElementById","savedName","savedEmail","save","email","saveUserProfile","userName","userEmail","$loginStore","userIdentity","toLowerCase","Swarm","visible","teamName","sections","toggleSection","section","PeterGloor","loggedIn","deviceName","userTeams","dash","speed","thickness","gap","radius","PI","isSearching","resultType","entryType","playableUrl","play","prettyTime","ansicolor","filePathANSI","fileSizePretty","noteUrl","notePreview","noteTags","contentId","providerHost","meta","displayResultsMeta","providerResponse","colors","page","noMorePages","resultCount","resultsFrom","resultsTo","searchTimePretty","networkTimePretty","time","isLastPage","resultsDescription","noSearchHits","appHelper","searchInput","triggerSearch","updateSearchParam","goHome","doSearch","focus","title","$store","metamask","addToLog","loginAddress","urlHostname","identity","Receiver","body"],"mappings":"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"}