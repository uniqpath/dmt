var app=function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=Object,i=["black","red","green","yellow","blue","magenta","cyan","lightGray","","default"],a=["darkGray","lightRed","lightGreen","lightYellow","lightBlue","lightMagenta","lightCyan","white",""],c=["","bright","dim","italic","underline","","","inverse"],l={red:"lightRed",green:"lightGreen",yellow:"lightYellow",blue:"lightBlue",magenta:"lightMagenta",cyan:"lightCyan",black:"darkGray",lightGray:"white"},u={0:"style",2:"unstyle",3:"color",9:"colorLight",4:"bgColor",10:"bgColorLight"},h={color:i,colorLight:a,bgColor:i,bgColorLight:a,style:c,unstyle:c},p=function(e){for(var t in e)e[t]||delete e[t];return 0===s.keys(e).length?void 0:e},d=function(){function e(t,n,r){o(this,e),this.background=t,this.name=n,this.brightness=r}return n(e,[{key:"defaultBrightness",value:function(t){return new e(this.background,this.name,this.brightness||t)}},{key:"css",value:function(e){var t=e?this.inverse:this,n=t.brightness===f.bright&&l[t.name]||t.name,o=t.background?"background:":"color:",s=v.rgb[n],i=this.brightness===f.dim?.5:1;return s?o+"rgba("+[].concat(r(s),[i]).join(",")+");":!t.background&&i<1?"color:rgba(0,0,0,0.5);":""}},{key:"inverse",get:function(){return new e(!this.background,this.name||(this.background?"black":"white"),this.brightness)}},{key:"clean",get:function(){return p({name:"default"===this.name?"":this.name,bright:this.brightness===f.bright,dim:this.brightness===f.dim})}}]),e}(),f=function(){function e(t){o(this,e),void 0!==t&&(this.value=Number(t))}return n(e,[{key:"type",get:function(){return u[Math.floor(this.value/10)]}},{key:"subtype",get:function(){return h[this.type][this.value%10]}},{key:"str",get:function(){return this.value?"["+this.value+"m":""}},{key:"isBrightness",get:function(){return this.value===e.noBrightness||this.value===e.bright||this.value===e.dim}}],[{key:"str",value:function(t){return new e(t).str}}]),e}();s.assign(f,{reset:0,bright:1,dim:2,inverse:7,noBrightness:22,noItalic:23,noUnderline:24,noInverse:27,noColor:39,noBgColor:49});var m=function(e,t,n){var r=f.str(t),o=f.str(n);return String(e).split("\n").map((function(e){return function(e){return e.replace(/(\u001b\[(1|2)m)/g,"[22m$1")}(r+(t=e.replace(/\u001b\[22m(\u001b\[(1|2)m)/g,"$1"),n=o,s=r,t.split(n).join(s))+o);var t,n,s})).join("\n")},g=function(e,t){return e+t.charAt(0).toUpperCase()+t.slice(1)},y=[].concat(r(i.map((function(e,t){return e?[[e,30+t,f.noColor],[g("bg",e),40+t,f.noBgColor]]:[]}))),r(a.map((function(e,t){return e?[[e,90+t,f.noColor],[g("bg",e),100+t,f.noBgColor]]:[]}))),r(["","BrightRed","BrightGreen","BrightYellow","BrightBlue","BrightMagenta","BrightCyan"].map((function(e,t){return e?[["bg"+e,100+t,f.noBgColor]]:[]}))),r(c.map((function(e,t){return e?[[e,t,"bright"===e||"dim"===e?f.noBrightness:20+t]]:[]})))).reduce((function(e,t){return e.concat(t)}));var v=function(){function e(t){o(this,e),this.spans=t?function(e){for(var t=0,n="",r="",o="",s=[],i=[],a=0,c=e.length;a<c;a++){var l=e[a];switch(n+=l,t){case 0:""===l?(t=1,n=l):r+=l;break;case 1:"["===l?(t=2,o="",s=[]):(t=0,r+=n);break;case 2:if(l>="0"&&l<="9")o+=l;else if(";"===l)s.push(new f(o)),o="";else if("m"===l&&o.length){s.push(new f(o));var u=!0,h=!1,p=void 0;try{for(var d,m=s[Symbol.iterator]();!(u=(d=m.next()).done);u=!0){var g=d.value;i.push({text:r,code:g}),r=""}}catch(e){h=!0,p=e}finally{try{!u&&m.return&&m.return()}finally{if(h)throw p}}t=0}else t=0,r+=n}}return 0!==t&&(r+=n),r&&i.push({text:r,code:new f}),i}(t):[]}return n(e,[{key:Symbol.iterator,value:function(){return this.spans[Symbol.iterator]()}},{key:"str",get:function(){return this.spans.reduce((function(e,t){return e+t.text+t.code.str}),"")}},{key:"parsed",get:function(){var t=void 0,n=void 0,r=void 0,o=void 0;function i(){t=new d,n=new d(!0),r=void 0,o=new Set}return i(),s.assign(new e,{spans:this.spans.map((function(e){var a=e.code,c=o.has("inverse"),l=o.has("underline")?"text-decoration: underline;":"",u=o.has("italic")?"font-style: italic;":"",h=r===f.bright?"font-weight: bold;":"",m=t.defaultBrightness(r),g=s.assign({css:h+u+l+m.css(c)+n.css(c)},p({bold:!!h,color:m.clean,bgColor:n.clean}),e),y=!0,v=!1,b=void 0;try{for(var w,$=o[Symbol.iterator]();!(y=(w=$.next()).done);y=!0){g[w.value]=!0}}catch(e){v=!0,b=e}finally{try{!y&&$.return&&$.return()}finally{if(v)throw b}}if(a.isBrightness)r=a.value;else if(void 0!==e.code.value)if(e.code.value===f.reset)i();else switch(e.code.type){case"color":case"colorLight":t=new d(!1,a.subtype);break;case"bgColor":case"bgColorLight":n=new d(!0,a.subtype);break;case"style":o.add(a.subtype);break;case"unstyle":o.delete(a.subtype)}return g})).filter((function(e){return e.text.length>0}))})}},{key:"asChromeConsoleLogArguments",get:function(){var e=this.parsed.spans;return[e.map((function(e){return"%c"+e.text})).join("")].concat(r(e.map((function(e){return e.css}))))}},{key:"browserConsoleArguments",get:function(){return this.asChromeConsoleLogArguments}}],[{key:"parse",value:function(t){return new e(t).parsed}},{key:"strip",value:function(e){return e.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g,"")}},{key:"nice",get:function(){return e.names.forEach((function(t){t in String.prototype||s.defineProperty(String.prototype,t,{get:function(){return e[t](this)}})})),e}},{key:"ansicolor",get:function(){return e}}]),e}();!function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return y.reduce((function(n,o){var i=t(o,3),a=i[0],c=i[1],l=i[2];return s.defineProperty(n,a,{get:function(){return e((function(e){return r(m(e,c,l))}))}})}),n)}(v,(function(e){return e})),v.names=y.map((function(e){return t(e,1)[0]})),v.rgb={black:[0,0,0],darkGray:[100,100,100],lightGray:[200,200,200],white:[255,255,255],red:[204,0,0],lightRed:[255,51,0],green:[0,204,0],lightGreen:[51,204,51],yellow:[204,102,0],lightYellow:[255,153,51],blue:[0,0,255],lightBlue:[26,140,255],magenta:[204,0,204],lightMagenta:[255,0,255],cyan:[0,153,255],lightCyan:[0,204,255]};var b=v;function w(){}class ${constructor(e,t,n){this.prev=e,this.next=t,this.fn=n||w}run(e){this.fn(e),this.next&&this.next.run(e)}}class _{constructor(e){this.head=new $,this.tail=new $(this.head),this.head.next=this.tail,this.linkConstructor=e,this.reg={}}insert(e){const t=new $(this.tail.prev,this.tail,e);return t.next.prev=t,t.prev.next=t,t}remove(e){e.prev.next=e.next,e.next.prev=e.prev}}let A=0;const k=/[\s,]+/g;class x{constructor(){this.events={}}on(e,t){const n=this;e.split(k).forEach(e=>{const r=n.events[e]||(n.events[e]=new _),o=t._eev||(t._eev=++A);r.reg[o]||(r.reg[o]=r.insert(t))})}off(e,t){const n=this;t&&e.split(k).forEach((function(e){const r=n.events[e];if(!r)return;const o=r.reg[t._eev];r.reg[t._eev]=void 0,r&&o&&r.remove(o)}))}removeListener(...e){this.off(...e)}emit(e,t){const n=this.events[e];n&&n.head.run(t)}}class S extends x{constructor(){super(),this.state={},this.subscriptions=[]}set(e){Object.assign(this.state,e),Object.assign(this,this.state),this.pushStateToSubscribers()}get(){return this.state}subscribe(e){const t=Math.random();return this.subscriptions.push({subscriptionId:t,callback:e}),e(this.state),()=>{this.subscriptions.forEach((e,n)=>{e.subscriptionId==t&&this.subscriptions.splice(n,1)})}}pushStateToSubscribers(){this.subscriptions.forEach(e=>e.callback(this.state))}}
/*!
     * https://github.com/Starcounter-Jack/JSON-Patch
     * (c) 2017 Joachim Wester
     * MIT license
     */var T,E=(T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),C=Object.prototype.hasOwnProperty;function O(e,t){return C.call(e,t)}function P(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)O(e,r)&&t.push(r);return t}function N(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function R(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function U(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function j(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function M(e,t){var n=[e];for(var r in t){var o="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==o&&n.push(r+": "+o)}return n.join("\n")}var I=function(e){function t(t,n,r,o,s){var i=this.constructor,a=e.call(this,M(t,{name:n,index:r,operation:o,tree:s}))||this;return a.name=n,a.index=r,a.operation=o,a.tree=s,Object.setPrototypeOf(a,i.prototype),a.message=M(t,{name:n,index:r,operation:o,tree:s}),a}return E(t,e),t}(Error),L=I,z=N,B={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=q(n,this.path);r&&(r=N(r));var o=H(n,{op:"remove",path:this.from}).removed;return H(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=q(n,this.from);return H(n,{op:"add",path:this.path,value:N(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:G(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},D={add:function(e,t,n){return R(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:B.move,copy:B.copy,test:B.test,_get:B._get};function q(e,t){if(""==t)return e;var n={op:"_get",path:t};return H(e,n),n.value}function H(e,t,n,r,o,s){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===s&&(s=0),n&&("function"==typeof n?n(t,0,e,t.path):Y(t,0)),""===t.path){var i={newDocument:e};if("add"===t.op)return i.newDocument=t.value,i;if("replace"===t.op)return i.newDocument=t.value,i.removed=e,i;if("move"===t.op||"copy"===t.op)return i.newDocument=q(e,t.from),"move"===t.op&&(i.removed=e),i;if("test"===t.op){if(i.test=G(e,t.value),!1===i.test)throw new L("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return i.newDocument=e,i}if("remove"===t.op)return i.removed=e,i.newDocument=null,i;if("_get"===t.op)return t.value=e,i;if(n)throw new L("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return i}r||(e=N(e));var a=(t.path||"").split("/"),c=e,l=1,u=a.length,h=void 0,p=void 0,d=void 0;for(d="function"==typeof n?n:Y;;){if(p=a[l],o&&"__proto__"==p)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===h&&(void 0===c[p]?h=a.slice(0,l).join("/"):l==u-1&&(h=t.path),void 0!==h&&d(t,0,e,h)),l++,Array.isArray(c)){if("-"===p)p=c.length;else{if(n&&!R(p))throw new L("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);R(p)&&(p=~~p)}if(l>=u){if(n&&"add"===t.op&&p>c.length)throw new L("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);if(!1===(i=D[t.op].call(t,c,p,e)).test)throw new L("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return i}}else if(p&&-1!=p.indexOf("~")&&(p=j(p)),l>=u){if(!1===(i=B[t.op].call(t,c,p,e)).test)throw new L("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return i}c=c[p]}}function K(e,t,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=!0),n&&!Array.isArray(t))throw new L("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=N(e));for(var s=new Array(t.length),i=0,a=t.length;i<a;i++)s[i]=H(e,t[i],n,!0,o,i),e=s[i].newDocument;return s.newDocument=e,s}function Y(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new L("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!B[e.op])throw new L("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new L("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new L('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new L("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new L("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0}else if("object"==typeof t){var o=P(t),s=o.length;for(n=0;n<s;n++)if(e(t[o[n]]))return!0}return!1}(e.value))throw new L("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var o=e.path.split("/").length,s=r.split("/").length;if(o!==s+1&&o!==s)throw new L("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new L("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var i=F([{op:"_get",path:e.from,value:void 0}],n);if(i&&"OPERATION_PATH_UNRESOLVABLE"===i.name)throw new L("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function F(e,t,n){try{if(!Array.isArray(e))throw new L("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)K(N(t),N(e),n||!0);else{n=n||Y;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof L)return e;throw e}}function G(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,o,s=Array.isArray(e),i=Array.isArray(t);if(s&&i){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!G(e[n],t[n]))return!1;return!0}if(s!=i)return!1;var a=Object.keys(e);if((r=a.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(a[n]))return!1;for(n=r;0!=n--;)if(!G(e[o=a[n]],t[o]))return!1;return!0}return e!=e&&t!=t}var W=Object.freeze({__proto__:null,JsonPatchError:L,deepClone:z,getValueByPointer:q,applyOperation:H,applyPatch:K,applyReducer:function(e,t,n){var r=H(e,t);if(!1===r.test)throw new L("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument},validator:Y,validate:F,_areEquals:G}),Q=new WeakMap,J=function(e){this.observers=new Map,this.obj=e},Z=function(e,t){this.callback=e,this.observer=t};
/*!
     * https://github.com/Starcounter-Jack/JSON-Patch
     * (c) 2017 Joachim Wester
     * MIT license
     */function V(e,t){void 0===t&&(t=!1);var n=Q.get(e.object);X(n.value,e.object,e.patches,"",t),e.patches.length&&K(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function X(e,t,n,r,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var s=P(t),i=P(e),a=!1,c=i.length-1;c>=0;c--){var l=e[h=i[c]];if(!O(t,h)||void 0===t[h]&&void 0!==l&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(o&&n.push({op:"test",path:r+"/"+U(h),value:N(l)}),n.push({op:"remove",path:r+"/"+U(h)}),a=!0):(o&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}));else{var u=t[h];"object"==typeof l&&null!=l&&"object"==typeof u&&null!=u?X(l,u,n,r+"/"+U(h),o):l!==u&&(o&&n.push({op:"test",path:r+"/"+U(h),value:N(l)}),n.push({op:"replace",path:r+"/"+U(h),value:N(u)}))}}if(a||s.length!=i.length)for(c=0;c<s.length;c++){var h;O(e,h=s[c])||void 0===t[h]||n.push({op:"add",path:r+"/"+U(h),value:N(t[h])})}}}var ee=Object.freeze({__proto__:null,unobserve:function(e,t){t.unobserve()},observe:function(e,t){var n,r=function(e){return Q.get(e)}(e);if(r){var o=function(e,t){return e.observers.get(t)}(r,t);n=o&&o.observer}else r=new J(e),Q.set(e,r);if(n)return n;if(n={},r.value=N(e),t){n.callback=t,n.next=null;var s=function(){V(n)},i=function(){clearTimeout(n.next),n.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener("mouseup",i),window.addEventListener("keyup",i),window.addEventListener("mousedown",i),window.addEventListener("keydown",i),window.addEventListener("change",i))}return n.patches=[],n.object=e,n.unobserve=function(){V(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",i),window.removeEventListener("keyup",i),window.removeEventListener("mousedown",i),window.removeEventListener("keydown",i),window.removeEventListener("change",i))},r.observers.set(t,new Z(t,n)),n},generate:V,compare:function(e,t,n){void 0===n&&(n=!1);var r=[];return X(e,t,r,"",n),r}}),te=Object.assign({},W,ee,{JsonPatchError:I,deepClone:N,escapePathComponent:U,unescapePathComponent:j}),ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function re(e,t){return e(t={exports:{}},t.exports),t.exports}var oe,se=(oe=Object.freeze({__proto__:null,default:{}}))&&oe.default||oe,ie=re((function(e){!function(e){var t=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},n=function(){throw new Error("no PRNG")},r=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=t(),i=t([1]),a=t([56129,1]),c=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(e,t,n,r){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n,e[t+4]=r>>24&255,e[t+5]=r>>16&255,e[t+6]=r>>8&255,e[t+7]=255&r}function f(e,t,n,r,o){var s,i=0;for(s=0;s<o;s++)i|=e[t+s]^n[r+s];return(1&i-1>>>8)-1}function m(e,t,n,r){return f(e,t,n,r,16)}function g(e,t,n,r){return f(e,t,n,r,32)}function y(e,t,n,r){!function(e,t,n,r){for(var o,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,c=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,l=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,p=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,g=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,v=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,b=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,w=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,$=s,_=i,A=a,k=c,x=l,S=u,T=h,E=p,C=d,O=f,P=m,N=g,R=y,U=v,j=b,M=w,I=0;I<20;I+=2)$^=(o=(R^=(o=(C^=(o=(x^=(o=$+R|0)<<7|o>>>25)+$|0)<<9|o>>>23)+x|0)<<13|o>>>19)+C|0)<<18|o>>>14,S^=(o=(_^=(o=(U^=(o=(O^=(o=S+_|0)<<7|o>>>25)+S|0)<<9|o>>>23)+O|0)<<13|o>>>19)+U|0)<<18|o>>>14,P^=(o=(T^=(o=(A^=(o=(j^=(o=P+T|0)<<7|o>>>25)+P|0)<<9|o>>>23)+j|0)<<13|o>>>19)+A|0)<<18|o>>>14,M^=(o=(N^=(o=(E^=(o=(k^=(o=M+N|0)<<7|o>>>25)+M|0)<<9|o>>>23)+k|0)<<13|o>>>19)+E|0)<<18|o>>>14,$^=(o=(k^=(o=(A^=(o=(_^=(o=$+k|0)<<7|o>>>25)+$|0)<<9|o>>>23)+_|0)<<13|o>>>19)+A|0)<<18|o>>>14,S^=(o=(x^=(o=(E^=(o=(T^=(o=S+x|0)<<7|o>>>25)+S|0)<<9|o>>>23)+T|0)<<13|o>>>19)+E|0)<<18|o>>>14,P^=(o=(O^=(o=(C^=(o=(N^=(o=P+O|0)<<7|o>>>25)+P|0)<<9|o>>>23)+N|0)<<13|o>>>19)+C|0)<<18|o>>>14,M^=(o=(j^=(o=(U^=(o=(R^=(o=M+j|0)<<7|o>>>25)+M|0)<<9|o>>>23)+R|0)<<13|o>>>19)+U|0)<<18|o>>>14;$=$+s|0,_=_+i|0,A=A+a|0,k=k+c|0,x=x+l|0,S=S+u|0,T=T+h|0,E=E+p|0,C=C+d|0,O=O+f|0,P=P+m|0,N=N+g|0,R=R+y|0,U=U+v|0,j=j+b|0,M=M+w|0,e[0]=$>>>0&255,e[1]=$>>>8&255,e[2]=$>>>16&255,e[3]=$>>>24&255,e[4]=_>>>0&255,e[5]=_>>>8&255,e[6]=_>>>16&255,e[7]=_>>>24&255,e[8]=A>>>0&255,e[9]=A>>>8&255,e[10]=A>>>16&255,e[11]=A>>>24&255,e[12]=k>>>0&255,e[13]=k>>>8&255,e[14]=k>>>16&255,e[15]=k>>>24&255,e[16]=x>>>0&255,e[17]=x>>>8&255,e[18]=x>>>16&255,e[19]=x>>>24&255,e[20]=S>>>0&255,e[21]=S>>>8&255,e[22]=S>>>16&255,e[23]=S>>>24&255,e[24]=T>>>0&255,e[25]=T>>>8&255,e[26]=T>>>16&255,e[27]=T>>>24&255,e[28]=E>>>0&255,e[29]=E>>>8&255,e[30]=E>>>16&255,e[31]=E>>>24&255,e[32]=C>>>0&255,e[33]=C>>>8&255,e[34]=C>>>16&255,e[35]=C>>>24&255,e[36]=O>>>0&255,e[37]=O>>>8&255,e[38]=O>>>16&255,e[39]=O>>>24&255,e[40]=P>>>0&255,e[41]=P>>>8&255,e[42]=P>>>16&255,e[43]=P>>>24&255,e[44]=N>>>0&255,e[45]=N>>>8&255,e[46]=N>>>16&255,e[47]=N>>>24&255,e[48]=R>>>0&255,e[49]=R>>>8&255,e[50]=R>>>16&255,e[51]=R>>>24&255,e[52]=U>>>0&255,e[53]=U>>>8&255,e[54]=U>>>16&255,e[55]=U>>>24&255,e[56]=j>>>0&255,e[57]=j>>>8&255,e[58]=j>>>16&255,e[59]=j>>>24&255,e[60]=M>>>0&255,e[61]=M>>>8&255,e[62]=M>>>16&255,e[63]=M>>>24&255}(e,t,n,r)}function v(e,t,n,r){!function(e,t,n,r){for(var o,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,c=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,l=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,p=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,g=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,v=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,b=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,w=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,$=0;$<20;$+=2)s^=(o=(y^=(o=(d^=(o=(l^=(o=s+y|0)<<7|o>>>25)+s|0)<<9|o>>>23)+l|0)<<13|o>>>19)+d|0)<<18|o>>>14,u^=(o=(i^=(o=(v^=(o=(f^=(o=u+i|0)<<7|o>>>25)+u|0)<<9|o>>>23)+f|0)<<13|o>>>19)+v|0)<<18|o>>>14,m^=(o=(h^=(o=(a^=(o=(b^=(o=m+h|0)<<7|o>>>25)+m|0)<<9|o>>>23)+b|0)<<13|o>>>19)+a|0)<<18|o>>>14,w^=(o=(g^=(o=(p^=(o=(c^=(o=w+g|0)<<7|o>>>25)+w|0)<<9|o>>>23)+c|0)<<13|o>>>19)+p|0)<<18|o>>>14,s^=(o=(c^=(o=(a^=(o=(i^=(o=s+c|0)<<7|o>>>25)+s|0)<<9|o>>>23)+i|0)<<13|o>>>19)+a|0)<<18|o>>>14,u^=(o=(l^=(o=(p^=(o=(h^=(o=u+l|0)<<7|o>>>25)+u|0)<<9|o>>>23)+h|0)<<13|o>>>19)+p|0)<<18|o>>>14,m^=(o=(f^=(o=(d^=(o=(g^=(o=m+f|0)<<7|o>>>25)+m|0)<<9|o>>>23)+g|0)<<13|o>>>19)+d|0)<<18|o>>>14,w^=(o=(b^=(o=(v^=(o=(y^=(o=w+b|0)<<7|o>>>25)+w|0)<<9|o>>>23)+y|0)<<13|o>>>19)+v|0)<<18|o>>>14;e[0]=s>>>0&255,e[1]=s>>>8&255,e[2]=s>>>16&255,e[3]=s>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=m>>>0&255,e[9]=m>>>8&255,e[10]=m>>>16&255,e[11]=m>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=h>>>0&255,e[17]=h>>>8&255,e[18]=h>>>16&255,e[19]=h>>>24&255,e[20]=p>>>0&255,e[21]=p>>>8&255,e[22]=p>>>16&255,e[23]=p>>>24&255,e[24]=d>>>0&255,e[25]=d>>>8&255,e[26]=d>>>16&255,e[27]=d>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,n,r)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(e,t,n,r,o,s,i){var a,c,l=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=s[c];for(;o>=64;){for(y(u,l,i,b),c=0;c<64;c++)e[t+c]=n[r+c]^u[c];for(a=1,c=8;c<16;c++)a=a+(255&l[c])|0,l[c]=255&a,a>>>=8;o-=64,t+=64,r+=64}if(o>0)for(y(u,l,i,b),c=0;c<o;c++)e[t+c]=n[r+c]^u[c];return 0}function $(e,t,n,r,o){var s,i,a=new Uint8Array(16),c=new Uint8Array(64);for(i=0;i<16;i++)a[i]=0;for(i=0;i<8;i++)a[i]=r[i];for(;n>=64;){for(y(c,a,o,b),i=0;i<64;i++)e[t+i]=c[i];for(s=1,i=8;i<16;i++)s=s+(255&a[i])|0,a[i]=255&s,s>>>=8;n-=64,t+=64}if(n>0)for(y(c,a,o,b),i=0;i<n;i++)e[t+i]=c[i];return 0}function _(e,t,n,r,o){var s=new Uint8Array(32);v(s,r,o,b);for(var i=new Uint8Array(8),a=0;a<8;a++)i[a]=r[a+16];return $(e,t,n,i,s)}function A(e,t,n,r,o,s,i){var a=new Uint8Array(32);v(a,s,i,b);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=s[l+16];return w(e,t,n,r,o,c,a)}var k=function(e){var t,n,r,o,s,i,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,n=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|n<<3),r=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(n>>>10|r<<6),o=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(r>>>7|o<<9),s=255&e[8]|(255&e[9])<<8,this.r[4]=255&(o>>>4|s<<12),this.r[5]=s>>>1&8190,i=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(s>>>14|i<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(i>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function x(e,t,n,r,o,s){var i=new k(s);return i.update(n,r,o),i.finish(e,t),0}function S(e,t,n,r,o,s){var i=new Uint8Array(16);return x(i,0,n,r,o,s),m(e,t,i,0)}function T(e,t,n,r,o){var s;if(n<32)return-1;for(A(e,0,t,0,n,r,o),x(e,16,e,32,n-32,e),s=0;s<16;s++)e[s]=0;return 0}function E(e,t,n,r,o){var s,i=new Uint8Array(32);if(n<32)return-1;if(_(i,0,32,r,o),0!==S(t,16,t,32,n-32,i))return-1;for(A(e,0,t,0,n,r,o),s=0;s<32;s++)e[s]=0;return 0}function C(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function O(e){var t,n,r=1;for(t=0;t<16;t++)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function P(e,t,n){for(var r,o=~(n-1),s=0;s<16;s++)r=o&(e[s]^t[s]),e[s]^=r,t[s]^=r}function N(e,n){var r,o,s,i=t(),a=t();for(r=0;r<16;r++)a[r]=n[r];for(O(a),O(a),O(a),o=0;o<2;o++){for(i[0]=a[0]-65517,r=1;r<15;r++)i[r]=a[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=a[15]-32767-(i[14]>>16&1),s=i[15]>>16&1,i[14]&=65535,P(a,i,1-s)}for(r=0;r<16;r++)e[2*r]=255&a[r],e[2*r+1]=a[r]>>8}function R(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return N(n,e),N(r,t),g(n,0,r,0)}function U(e){var t=new Uint8Array(32);return N(t,e),1&t[0]}function j(e,t){var n;for(n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function M(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function I(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function L(e,t,n){var r,o,s=0,i=0,a=0,c=0,l=0,u=0,h=0,p=0,d=0,f=0,m=0,g=0,y=0,v=0,b=0,w=0,$=0,_=0,A=0,k=0,x=0,S=0,T=0,E=0,C=0,O=0,P=0,N=0,R=0,U=0,j=0,M=n[0],I=n[1],L=n[2],z=n[3],B=n[4],D=n[5],q=n[6],H=n[7],K=n[8],Y=n[9],F=n[10],G=n[11],W=n[12],Q=n[13],J=n[14],Z=n[15];s+=(r=t[0])*M,i+=r*I,a+=r*L,c+=r*z,l+=r*B,u+=r*D,h+=r*q,p+=r*H,d+=r*K,f+=r*Y,m+=r*F,g+=r*G,y+=r*W,v+=r*Q,b+=r*J,w+=r*Z,i+=(r=t[1])*M,a+=r*I,c+=r*L,l+=r*z,u+=r*B,h+=r*D,p+=r*q,d+=r*H,f+=r*K,m+=r*Y,g+=r*F,y+=r*G,v+=r*W,b+=r*Q,w+=r*J,$+=r*Z,a+=(r=t[2])*M,c+=r*I,l+=r*L,u+=r*z,h+=r*B,p+=r*D,d+=r*q,f+=r*H,m+=r*K,g+=r*Y,y+=r*F,v+=r*G,b+=r*W,w+=r*Q,$+=r*J,_+=r*Z,c+=(r=t[3])*M,l+=r*I,u+=r*L,h+=r*z,p+=r*B,d+=r*D,f+=r*q,m+=r*H,g+=r*K,y+=r*Y,v+=r*F,b+=r*G,w+=r*W,$+=r*Q,_+=r*J,A+=r*Z,l+=(r=t[4])*M,u+=r*I,h+=r*L,p+=r*z,d+=r*B,f+=r*D,m+=r*q,g+=r*H,y+=r*K,v+=r*Y,b+=r*F,w+=r*G,$+=r*W,_+=r*Q,A+=r*J,k+=r*Z,u+=(r=t[5])*M,h+=r*I,p+=r*L,d+=r*z,f+=r*B,m+=r*D,g+=r*q,y+=r*H,v+=r*K,b+=r*Y,w+=r*F,$+=r*G,_+=r*W,A+=r*Q,k+=r*J,x+=r*Z,h+=(r=t[6])*M,p+=r*I,d+=r*L,f+=r*z,m+=r*B,g+=r*D,y+=r*q,v+=r*H,b+=r*K,w+=r*Y,$+=r*F,_+=r*G,A+=r*W,k+=r*Q,x+=r*J,S+=r*Z,p+=(r=t[7])*M,d+=r*I,f+=r*L,m+=r*z,g+=r*B,y+=r*D,v+=r*q,b+=r*H,w+=r*K,$+=r*Y,_+=r*F,A+=r*G,k+=r*W,x+=r*Q,S+=r*J,T+=r*Z,d+=(r=t[8])*M,f+=r*I,m+=r*L,g+=r*z,y+=r*B,v+=r*D,b+=r*q,w+=r*H,$+=r*K,_+=r*Y,A+=r*F,k+=r*G,x+=r*W,S+=r*Q,T+=r*J,E+=r*Z,f+=(r=t[9])*M,m+=r*I,g+=r*L,y+=r*z,v+=r*B,b+=r*D,w+=r*q,$+=r*H,_+=r*K,A+=r*Y,k+=r*F,x+=r*G,S+=r*W,T+=r*Q,E+=r*J,C+=r*Z,m+=(r=t[10])*M,g+=r*I,y+=r*L,v+=r*z,b+=r*B,w+=r*D,$+=r*q,_+=r*H,A+=r*K,k+=r*Y,x+=r*F,S+=r*G,T+=r*W,E+=r*Q,C+=r*J,O+=r*Z,g+=(r=t[11])*M,y+=r*I,v+=r*L,b+=r*z,w+=r*B,$+=r*D,_+=r*q,A+=r*H,k+=r*K,x+=r*Y,S+=r*F,T+=r*G,E+=r*W,C+=r*Q,O+=r*J,P+=r*Z,y+=(r=t[12])*M,v+=r*I,b+=r*L,w+=r*z,$+=r*B,_+=r*D,A+=r*q,k+=r*H,x+=r*K,S+=r*Y,T+=r*F,E+=r*G,C+=r*W,O+=r*Q,P+=r*J,N+=r*Z,v+=(r=t[13])*M,b+=r*I,w+=r*L,$+=r*z,_+=r*B,A+=r*D,k+=r*q,x+=r*H,S+=r*K,T+=r*Y,E+=r*F,C+=r*G,O+=r*W,P+=r*Q,N+=r*J,R+=r*Z,b+=(r=t[14])*M,w+=r*I,$+=r*L,_+=r*z,A+=r*B,k+=r*D,x+=r*q,S+=r*H,T+=r*K,E+=r*Y,C+=r*F,O+=r*G,P+=r*W,N+=r*Q,R+=r*J,U+=r*Z,w+=(r=t[15])*M,i+=38*(_+=r*L),a+=38*(A+=r*z),c+=38*(k+=r*B),l+=38*(x+=r*D),u+=38*(S+=r*q),h+=38*(T+=r*H),p+=38*(E+=r*K),d+=38*(C+=r*Y),f+=38*(O+=r*F),m+=38*(P+=r*G),g+=38*(N+=r*W),y+=38*(R+=r*Q),v+=38*(U+=r*J),b+=38*(j+=r*Z),s=(r=(s+=38*($+=r*I))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),i=(r=i+o+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),w=(r=w+o+65535)-65536*(o=Math.floor(r/65536)),s=(r=(s+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),i=(r=i+o+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),w=(r=w+o+65535)-65536*(o=Math.floor(r/65536)),s+=o-1+37*(o-1),e[0]=s,e[1]=i,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=p,e[8]=d,e[9]=f,e[10]=m,e[11]=g,e[12]=y,e[13]=v,e[14]=b,e[15]=w}function z(e,t){L(e,t,t)}function B(e,n){var r,o=t();for(r=0;r<16;r++)o[r]=n[r];for(r=253;r>=0;r--)z(o,o),2!==r&&4!==r&&L(o,o,n);for(r=0;r<16;r++)e[r]=o[r]}function D(e,n){var r,o=t();for(r=0;r<16;r++)o[r]=n[r];for(r=250;r>=0;r--)z(o,o),1!==r&&L(o,o,n);for(r=0;r<16;r++)e[r]=o[r]}function q(e,n,r){var o,s,i=new Uint8Array(32),c=new Float64Array(80),l=t(),u=t(),h=t(),p=t(),d=t(),f=t();for(s=0;s<31;s++)i[s]=n[s];for(i[31]=127&n[31]|64,i[0]&=248,j(c,r),s=0;s<16;s++)u[s]=c[s],p[s]=l[s]=h[s]=0;for(l[0]=p[0]=1,s=254;s>=0;--s)P(l,u,o=i[s>>>3]>>>(7&s)&1),P(h,p,o),M(d,l,h),I(l,l,h),M(h,u,p),I(u,u,p),z(p,d),z(f,l),L(l,h,l),L(h,u,d),M(d,l,h),I(l,l,h),z(u,l),I(h,p,f),L(l,h,a),M(l,l,p),L(h,h,l),L(l,p,f),L(p,u,c),z(u,d),P(l,u,o),P(h,p,o);for(s=0;s<16;s++)c[s+16]=l[s],c[s+32]=h[s],c[s+48]=u[s],c[s+64]=p[s];var m=c.subarray(32),g=c.subarray(16);return B(m,m),L(g,g,m),N(e,g),0}function H(e,t){return q(e,t,o)}function K(e,t){return n(t,32),H(e,t)}function Y(e,t,n){var o=new Uint8Array(32);return q(o,n,t),v(e,r,o,b)}k.prototype.blocks=function(e,t,n){for(var r,o,s,i,a,c,l,u,h,p,d,f,m,g,y,v,b,w,$,_=this.fin?0:2048,A=this.h[0],k=this.h[1],x=this.h[2],S=this.h[3],T=this.h[4],E=this.h[5],C=this.h[6],O=this.h[7],P=this.h[8],N=this.h[9],R=this.r[0],U=this.r[1],j=this.r[2],M=this.r[3],I=this.r[4],L=this.r[5],z=this.r[6],B=this.r[7],D=this.r[8],q=this.r[9];n>=16;)p=h=0,p+=(A+=8191&(r=255&e[t+0]|(255&e[t+1])<<8))*R,p+=(k+=8191&(r>>>13|(o=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*q),p+=(x+=8191&(o>>>10|(s=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*D),p+=(S+=8191&(s>>>7|(i=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*B),h=(p+=(T+=8191&(i>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*z))>>>13,p&=8191,p+=(E+=a>>>1&8191)*(5*L),p+=(C+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*I),p+=(O+=8191&(c>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*M),p+=(P+=8191&(l>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*j),d=h+=(p+=(N+=u>>>5|_)*(5*U))>>>13,d+=A*U,d+=k*R,d+=x*(5*q),d+=S*(5*D),h=(d+=T*(5*B))>>>13,d&=8191,d+=E*(5*z),d+=C*(5*L),d+=O*(5*I),d+=P*(5*M),h+=(d+=N*(5*j))>>>13,d&=8191,f=h,f+=A*j,f+=k*U,f+=x*R,f+=S*(5*q),h=(f+=T*(5*D))>>>13,f&=8191,f+=E*(5*B),f+=C*(5*z),f+=O*(5*L),f+=P*(5*I),m=h+=(f+=N*(5*M))>>>13,m+=A*M,m+=k*j,m+=x*U,m+=S*R,h=(m+=T*(5*q))>>>13,m&=8191,m+=E*(5*D),m+=C*(5*B),m+=O*(5*z),m+=P*(5*L),g=h+=(m+=N*(5*I))>>>13,g+=A*I,g+=k*M,g+=x*j,g+=S*U,h=(g+=T*R)>>>13,g&=8191,g+=E*(5*q),g+=C*(5*D),g+=O*(5*B),g+=P*(5*z),y=h+=(g+=N*(5*L))>>>13,y+=A*L,y+=k*I,y+=x*M,y+=S*j,h=(y+=T*U)>>>13,y&=8191,y+=E*R,y+=C*(5*q),y+=O*(5*D),y+=P*(5*B),v=h+=(y+=N*(5*z))>>>13,v+=A*z,v+=k*L,v+=x*I,v+=S*M,h=(v+=T*j)>>>13,v&=8191,v+=E*U,v+=C*R,v+=O*(5*q),v+=P*(5*D),b=h+=(v+=N*(5*B))>>>13,b+=A*B,b+=k*z,b+=x*L,b+=S*I,h=(b+=T*M)>>>13,b&=8191,b+=E*j,b+=C*U,b+=O*R,b+=P*(5*q),w=h+=(b+=N*(5*D))>>>13,w+=A*D,w+=k*B,w+=x*z,w+=S*L,h=(w+=T*I)>>>13,w&=8191,w+=E*M,w+=C*j,w+=O*U,w+=P*R,$=h+=(w+=N*(5*q))>>>13,$+=A*q,$+=k*D,$+=x*B,$+=S*z,h=($+=T*L)>>>13,$&=8191,$+=E*I,$+=C*M,$+=O*j,$+=P*U,A=p=8191&(h=(h=((h+=($+=N*R)>>>13)<<2)+h|0)+(p&=8191)|0),k=d+=h>>>=13,x=f&=8191,S=m&=8191,T=g&=8191,E=y&=8191,C=v&=8191,O=b&=8191,P=w&=8191,N=$&=8191,t+=16,n-=16;this.h[0]=A,this.h[1]=k,this.h[2]=x,this.h[3]=S,this.h[4]=T,this.h[5]=E,this.h[6]=C,this.h[7]=O,this.h[8]=P,this.h[9]=N},k.prototype.finish=function(e,t){var n,r,o,s,i=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=n,n=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,i[0]=this.h[0]+5,n=i[0]>>>13,i[0]&=8191,s=1;s<10;s++)i[s]=this.h[s]+n,n=i[s]>>>13,i[s]&=8191;for(i[9]-=8192,r=(1^n)-1,s=0;s<10;s++)i[s]&=r;for(r=~r,s=0;s<10;s++)this.h[s]=this.h[s]&r|i[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,s=1;s<8;s++)o=(this.h[s]+this.pad[s]|0)+(o>>>16)|0,this.h[s]=65535&o;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},k.prototype.update=function(e,t,n){var r,o;if(this.leftover){for((o=16-this.leftover)>n&&(o=n),r=0;r<o;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(o=n-n%16,this.blocks(e,t,o),t+=o,n-=o),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};var F=T,G=E;var W=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Q(e,t,n,r){for(var o,s,i,a,c,l,u,h,p,d,f,m,g,y,v,b,w,$,_,A,k,x,S,T,E,C,O=new Int32Array(16),P=new Int32Array(16),N=e[0],R=e[1],U=e[2],j=e[3],M=e[4],I=e[5],L=e[6],z=e[7],B=t[0],D=t[1],q=t[2],H=t[3],K=t[4],Y=t[5],F=t[6],G=t[7],Q=0;r>=128;){for(_=0;_<16;_++)A=8*_+Q,O[_]=n[A+0]<<24|n[A+1]<<16|n[A+2]<<8|n[A+3],P[_]=n[A+4]<<24|n[A+5]<<16|n[A+6]<<8|n[A+7];for(_=0;_<80;_++)if(o=N,s=R,i=U,a=j,c=M,l=I,u=L,z,p=B,d=D,f=q,m=H,g=K,y=Y,v=F,G,S=65535&(x=G),T=x>>>16,E=65535&(k=z),C=k>>>16,S+=65535&(x=(K>>>14|M<<18)^(K>>>18|M<<14)^(M>>>9|K<<23)),T+=x>>>16,E+=65535&(k=(M>>>14|K<<18)^(M>>>18|K<<14)^(K>>>9|M<<23)),C+=k>>>16,S+=65535&(x=K&Y^~K&F),T+=x>>>16,E+=65535&(k=M&I^~M&L),C+=k>>>16,S+=65535&(x=W[2*_+1]),T+=x>>>16,E+=65535&(k=W[2*_]),C+=k>>>16,k=O[_%16],T+=(x=P[_%16])>>>16,E+=65535&k,C+=k>>>16,E+=(T+=(S+=65535&x)>>>16)>>>16,S=65535&(x=$=65535&S|T<<16),T=x>>>16,E=65535&(k=w=65535&E|(C+=E>>>16)<<16),C=k>>>16,S+=65535&(x=(B>>>28|N<<4)^(N>>>2|B<<30)^(N>>>7|B<<25)),T+=x>>>16,E+=65535&(k=(N>>>28|B<<4)^(B>>>2|N<<30)^(B>>>7|N<<25)),C+=k>>>16,T+=(x=B&D^B&q^D&q)>>>16,E+=65535&(k=N&R^N&U^R&U),C+=k>>>16,h=65535&(E+=(T+=(S+=65535&x)>>>16)>>>16)|(C+=E>>>16)<<16,b=65535&S|T<<16,S=65535&(x=m),T=x>>>16,E=65535&(k=a),C=k>>>16,T+=(x=$)>>>16,E+=65535&(k=w),C+=k>>>16,R=o,U=s,j=i,M=a=65535&(E+=(T+=(S+=65535&x)>>>16)>>>16)|(C+=E>>>16)<<16,I=c,L=l,z=u,N=h,D=p,q=d,H=f,K=m=65535&S|T<<16,Y=g,F=y,G=v,B=b,_%16==15)for(A=0;A<16;A++)k=O[A],S=65535&(x=P[A]),T=x>>>16,E=65535&k,C=k>>>16,k=O[(A+9)%16],S+=65535&(x=P[(A+9)%16]),T+=x>>>16,E+=65535&k,C+=k>>>16,w=O[(A+1)%16],S+=65535&(x=(($=P[(A+1)%16])>>>1|w<<31)^($>>>8|w<<24)^($>>>7|w<<25)),T+=x>>>16,E+=65535&(k=(w>>>1|$<<31)^(w>>>8|$<<24)^w>>>7),C+=k>>>16,w=O[(A+14)%16],T+=(x=(($=P[(A+14)%16])>>>19|w<<13)^(w>>>29|$<<3)^($>>>6|w<<26))>>>16,E+=65535&(k=(w>>>19|$<<13)^($>>>29|w<<3)^w>>>6),C+=k>>>16,C+=(E+=(T+=(S+=65535&x)>>>16)>>>16)>>>16,O[A]=65535&E|C<<16,P[A]=65535&S|T<<16;S=65535&(x=B),T=x>>>16,E=65535&(k=N),C=k>>>16,k=e[0],T+=(x=t[0])>>>16,E+=65535&k,C+=k>>>16,C+=(E+=(T+=(S+=65535&x)>>>16)>>>16)>>>16,e[0]=N=65535&E|C<<16,t[0]=B=65535&S|T<<16,S=65535&(x=D),T=x>>>16,E=65535&(k=R),C=k>>>16,k=e[1],T+=(x=t[1])>>>16,E+=65535&k,C+=k>>>16,C+=(E+=(T+=(S+=65535&x)>>>16)>>>16)>>>16,e[1]=R=65535&E|C<<16,t[1]=D=65535&S|T<<16,S=65535&(x=q),T=x>>>16,E=65535&(k=U),C=k>>>16,k=e[2],T+=(x=t[2])>>>16,E+=65535&k,C+=k>>>16,C+=(E+=(T+=(S+=65535&x)>>>16)>>>16)>>>16,e[2]=U=65535&E|C<<16,t[2]=q=65535&S|T<<16,S=65535&(x=H),T=x>>>16,E=65535&(k=j),C=k>>>16,k=e[3],T+=(x=t[3])>>>16,E+=65535&k,C+=k>>>16,C+=(E+=(T+=(S+=65535&x)>>>16)>>>16)>>>16,e[3]=j=65535&E|C<<16,t[3]=H=65535&S|T<<16,S=65535&(x=K),T=x>>>16,E=65535&(k=M),C=k>>>16,k=e[4],T+=(x=t[4])>>>16,E+=65535&k,C+=k>>>16,C+=(E+=(T+=(S+=65535&x)>>>16)>>>16)>>>16,e[4]=M=65535&E|C<<16,t[4]=K=65535&S|T<<16,S=65535&(x=Y),T=x>>>16,E=65535&(k=I),C=k>>>16,k=e[5],T+=(x=t[5])>>>16,E+=65535&k,C+=k>>>16,C+=(E+=(T+=(S+=65535&x)>>>16)>>>16)>>>16,e[5]=I=65535&E|C<<16,t[5]=Y=65535&S|T<<16,S=65535&(x=F),T=x>>>16,E=65535&(k=L),C=k>>>16,k=e[6],T+=(x=t[6])>>>16,E+=65535&k,C+=k>>>16,C+=(E+=(T+=(S+=65535&x)>>>16)>>>16)>>>16,e[6]=L=65535&E|C<<16,t[6]=F=65535&S|T<<16,S=65535&(x=G),T=x>>>16,E=65535&(k=z),C=k>>>16,k=e[7],T+=(x=t[7])>>>16,E+=65535&k,C+=k>>>16,C+=(E+=(T+=(S+=65535&x)>>>16)>>>16)>>>16,e[7]=z=65535&E|C<<16,t[7]=G=65535&S|T<<16,Q+=128,r-=128}return r}function J(e,t,n){var r,o=new Int32Array(8),s=new Int32Array(8),i=new Uint8Array(256),a=n;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,Q(o,s,t,n),n%=128,r=0;r<n;r++)i[r]=t[a-n+r];for(i[n]=128,i[(n=256-128*(n<112?1:0))-9]=0,d(i,n-8,a/536870912|0,a<<3),Q(o,s,i,n),r=0;r<8;r++)d(e,8*r,o[r],s[r]);return 0}function Z(e,n){var r=t(),o=t(),s=t(),i=t(),a=t(),c=t(),u=t(),h=t(),p=t();I(r,e[1],e[0]),I(p,n[1],n[0]),L(r,r,p),M(o,e[0],e[1]),M(p,n[0],n[1]),L(o,o,p),L(s,e[3],n[3]),L(s,s,l),L(i,e[2],n[2]),M(i,i,i),I(a,o,r),I(c,i,s),M(u,i,s),M(h,o,r),L(e[0],a,c),L(e[1],h,u),L(e[2],u,c),L(e[3],a,h)}function V(e,t,n){var r;for(r=0;r<4;r++)P(e[r],t[r],n)}function X(e,n){var r=t(),o=t(),s=t();B(s,n[2]),L(r,n[0],s),L(o,n[1],s),N(e,o),e[31]^=U(r)<<7}function ee(e,t,n){var r,o;for(C(e[0],s),C(e[1],i),C(e[2],i),C(e[3],s),o=255;o>=0;--o)V(e,t,r=n[o/8|0]>>(7&o)&1),Z(t,e),Z(e,e),V(e,t,r)}function te(e,n){var r=[t(),t(),t(),t()];C(r[0],u),C(r[1],h),C(r[2],i),L(r[3],u,h),ee(e,r,n)}function ne(e,r,o){var s,i=new Uint8Array(64),a=[t(),t(),t(),t()];for(o||n(r,32),J(i,r,32),i[0]&=248,i[31]&=127,i[31]|=64,te(a,i),X(e,a),s=0;s<32;s++)r[s+32]=e[s];return 0}var re=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var n,r,o,s;for(r=63;r>=32;--r){for(n=0,o=r-32,s=r-12;o<s;++o)t[o]+=n-16*t[r]*re[o-(r-32)],n=Math.floor((t[o]+128)/256),t[o]-=256*n;t[o]+=n,t[r]=0}for(n=0,o=0;o<32;o++)t[o]+=n-(t[31]>>4)*re[o],n=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=n*re[o];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function ie(e){var t,n=new Float64Array(64);for(t=0;t<64;t++)n[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,n)}function ae(e,n,r,o){var s,i,a=new Uint8Array(64),c=new Uint8Array(64),l=new Uint8Array(64),u=new Float64Array(64),h=[t(),t(),t(),t()];J(a,o,32),a[0]&=248,a[31]&=127,a[31]|=64;var p=r+64;for(s=0;s<r;s++)e[64+s]=n[s];for(s=0;s<32;s++)e[32+s]=a[32+s];for(J(l,e.subarray(32),r+32),ie(l),te(h,l),X(e,h),s=32;s<64;s++)e[s]=o[s];for(J(c,e,r+64),ie(c),s=0;s<64;s++)u[s]=0;for(s=0;s<32;s++)u[s]=l[s];for(s=0;s<32;s++)for(i=0;i<32;i++)u[s+i]+=c[s]*a[i];return oe(e.subarray(32),u),p}function ce(e,n,r,o){var a,l=new Uint8Array(32),u=new Uint8Array(64),h=[t(),t(),t(),t()],d=[t(),t(),t(),t()];if(r<64)return-1;if(function(e,n){var r=t(),o=t(),a=t(),l=t(),u=t(),h=t(),d=t();return C(e[2],i),j(e[1],n),z(a,e[1]),L(l,a,c),I(a,a,e[2]),M(l,e[2],l),z(u,l),z(h,u),L(d,h,u),L(r,d,a),L(r,r,l),D(r,r),L(r,r,a),L(r,r,l),L(r,r,l),L(e[0],r,l),z(o,e[0]),L(o,o,l),R(o,a)&&L(e[0],e[0],p),z(o,e[0]),L(o,o,l),R(o,a)?-1:(U(e[0])===n[31]>>7&&I(e[0],s,e[0]),L(e[3],e[0],e[1]),0)}(d,o))return-1;for(a=0;a<r;a++)e[a]=n[a];for(a=0;a<32;a++)e[a+32]=o[a];if(J(u,e,r),ie(u),ee(h,d,u),te(d,n.subarray(32)),Z(h,d),X(l,h),r-=64,g(n,0,l,0)){for(a=0;a<r;a++)e[a]=0;return-1}for(a=0;a<r;a++)e[a]=n[a+64];return r}function le(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function ue(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function he(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:v,crypto_stream_xor:A,crypto_stream:_,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:$,crypto_onetimeauth:x,crypto_onetimeauth_verify:S,crypto_verify_16:m,crypto_verify_32:g,crypto_secretbox:T,crypto_secretbox_open:E,crypto_scalarmult:q,crypto_scalarmult_base:H,crypto_box_beforenm:Y,crypto_box_afternm:F,crypto_box:function(e,t,n,r,o,s){var i=new Uint8Array(32);return Y(i,o,s),F(e,t,n,r,i)},crypto_box_open:function(e,t,n,r,o,s){var i=new Uint8Array(32);return Y(i,o,s),G(e,t,n,r,i)},crypto_box_keypair:K,crypto_hash:J,crypto_sign:ae,crypto_sign_keypair:ne,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:c,L:re,pack25519:N,unpack25519:j,M:L,A:M,S:z,Z:I,pow2523:D,add:Z,set25519:C,modL:oe,scalarmult:ee,scalarbase:te},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,n){ue(e,t,n),le(n,t);for(var r=new Uint8Array(32+e.length),o=new Uint8Array(r.length),s=0;s<e.length;s++)r[s+32]=e[s];return T(o,r,r.length,t,n),o.subarray(16)},e.secretbox.open=function(e,t,n){ue(e,t,n),le(n,t);for(var r=new Uint8Array(16+e.length),o=new Uint8Array(r.length),s=0;s<e.length;s++)r[s+16]=e[s];return r.length<32||0!==E(o,r,r.length,t,n)?null:o.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(ue(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var n=new Uint8Array(32);return q(n,e,t),n},e.scalarMult.base=function(e){if(ue(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return H(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,n,r,o){var s=e.box.before(r,o);return e.secretbox(t,n,s)},e.box.before=function(e,t){ue(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var n=new Uint8Array(32);return Y(n,e,t),n},e.box.after=e.secretbox,e.box.open=function(t,n,r,o){var s=e.box.before(r,o);return e.secretbox.open(t,n,s)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return K(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(ue(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return H(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(ue(e,t),64!==t.length)throw new Error("bad secret key size");var n=new Uint8Array(64+e.length);return ae(n,e,e.length,t),n},e.sign.open=function(e,t){if(ue(e,t),32!==t.length)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=ce(n,e,e.length,t);if(r<0)return null;for(var o=new Uint8Array(r),s=0;s<o.length;s++)o[s]=n[s];return o},e.sign.detached=function(t,n){for(var r=e.sign(t,n),o=new Uint8Array(64),s=0;s<o.length;s++)o[s]=r[s];return o},e.sign.detached.verify=function(e,t,n){if(ue(e,t,n),64!==t.length)throw new Error("bad signature size");if(32!==n.length)throw new Error("bad public key size");var r,o=new Uint8Array(64+e.length),s=new Uint8Array(64+e.length);for(r=0;r<64;r++)o[r]=t[r];for(r=0;r<e.length;r++)o[r+64]=e[r];return ce(s,o,o.length,n)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return ne(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(ue(e),64!==e.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(ue(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),n=new Uint8Array(64),r=0;r<32;r++)n[r]=e[r];return ne(t,n,!0),{publicKey:t,secretKey:n}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){ue(e);var t=new Uint8Array(64);return J(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return ue(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===f(e,0,t,0,e.length))},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,n){var r,o=new Uint8Array(n);for(r=0;r<n;r+=65536)t.getRandomValues(o.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)e[r]=o[r];he(o)}))}else(t=se)&&t.randomBytes&&e.setPRNG((function(e,n){var r,o=t.randomBytes(n);for(r=0;r<n;r++)e[r]=o[r];he(o)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})})),ae=re((function(e){var t,n;t=ne,n=function(){var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,n=unescape(encodeURIComponent(e)),r=new Uint8Array(n.length);for(t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r},e.encodeUTF8=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(n.join("")))},"undefined"==typeof atob?void 0!==Buffer.from?(e.encodeBase64=function(e){return Buffer.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(Buffer.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new Buffer(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new Buffer(e,"base64"),0))}):(e.encodeBase64=function(e){var t,n=[],r=e.length;for(t=0;t<r;t++)n.push(String.fromCharCode(e[t]));return btoa(n.join(""))},e.decodeBase64=function(e){t(e);var n,r=atob(e),o=new Uint8Array(r.length);for(n=0;n<r.length;n++)o[n]=r.charCodeAt(n);return o}),e},e.exports?e.exports=n():(t.nacl||(t.nacl={}),t.nacl.util=n())}));function ce(){}class le{constructor(e,t,n){this.prev=e,this.next=t,this.fn=n||ce}run(e){this.fn(e),this.next&&this.next.run(e)}}class ue{constructor(e){this.head=new le,this.tail=new le(this.head),this.head.next=this.tail,this.linkConstructor=e,this.reg={}}insert(e){const t=new le(this.tail.prev,this.tail,e);return t.next.prev=t,t.prev.next=t,t}remove(e){e.prev.next=e.next,e.next.prev=e.prev}}let he=0;const pe=/[\s,]+/g;class de{constructor(){this.events={}}on(e,t){const n=this;e.split(pe).forEach(e=>{const r=n.events[e]||(n.events[e]=new ue),o=t._eev||(t._eev=++he);r.reg[o]||(r.reg[o]=r.insert(t))})}off(e,t){const n=this;t&&e.split(pe).forEach((function(e){const r=n.events[e];if(!r)return;const o=r.reg[t._eev];r.reg[t._eev]=void 0,r&&o&&r.remove(o)}))}removeListener(...e){this.off(...e)}emit(e,t){const n=this.events[e];n&&n.head.run(t)}}function fe(e){console.log(`${(new Date).toLocaleString()} → ${e}`)}function me(e){return Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join("")}function ge(e,t=8){const n=new Array(t).fill(0);for(let t=0;t<n.length;t++){const r=255&e;n[t]=r,e=(e-r)/256}return n}function ye({data:e,connector:t}){var n;null!=(n=e)&&n.constructor==Object&&(e=JSON.stringify(e));const r=new Uint8Array(ge(2*t.sentCount,24));if(t.closed())console.log(`Warning: "${e}" was not sent because connector was not yet connected!`);else if(t.sentCount>1){let n=0;"string"==typeof e&&(n=1);const o=function(e,t){const n=new Uint8Array(e.length+1),r=new Uint8Array(1);return r[0]=t,n.set(r),n.set(e,r.length),n}(1==n?ie.util.decodeUTF8(e):e,n),s=ie.secretbox(o,r,t.sharedSecret);t.verbose&&(console.log(),console.log(`Connector → Sending encrypted message #${t.sentCount} @ ${t.address}:`),console.log(e)),t.connection.websocket.send(s)}else t.verbose&&(console.log(),console.log(`Connector → Sending message #${t.sentCount} @ ${t.address}:`),console.log(e)),t.connection.websocket.send(e)}function ve({jsonData:e,encryptedData:t,rawMessage:n,wasEncrypted:r,connector:o}){const s=new Uint8Array(ge(2*o.receivedCount+1,24));if(o.verbose&&!r&&(console.log(),console.log(`Connector → Received message #${o.receivedCount} @ ${o.address}:`)),e)e.jsonrpc?!function(e){return Object.keys(e).includes("result")||Object.keys(e).includes("error")}(e)?o.emit("json_rpc",n):(o.verbose&&!r&&(console.log("Received plain-text rpc result"),console.log(e)),o.rpcClient.jsonrpcMsgReceive(n)):o.emit("wire_receive",{jsonData:e,rawMessage:n});else if(t){"extra"==o.verbose&&(console.log("Received bytes:"),console.log(t),console.log(`Decrypting with shared secret ${o.sharedSecret}...`));const e=ie.secretbox.open(t,s,o.sharedSecret),n=e[0],r=e.subarray(1);if(1==n){const e=ie.util.encodeUTF8(r);try{const t=JSON.parse(e);if(t.jsonrpc)o.verbose&&(console.log("Received and decrypted rpc result:"),console.log(t)),ve({jsonData:t,rawMessage:e,wasEncrypted:!0,connector:o});else if(t.tag){const n=t;"binary_start"==n.tag?o.emit(n.tag,{...n,tag:void 0}):"binary_end"==n.tag?o.emit(n.tag,{sessionId:n.sessionId}):o.emit("wire_receive",{jsonData:t,rawMessage:e})}else o.emit("wire_receive",{jsonData:t,rawMessage:e})}catch(e){throw console.log("Couldn't parse json message although the flag was for string ..."),e}}else{const e=r,t=Buffer.from(e.buffer,e.byteOffset,64).toString(),n=Buffer.from(e.buffer,e.byteOffset+64);o.emit("binary_data",{sessionId:t,data:n})}}}ie.util=ae,ie.util=ae;class be extends de{constructor(e){super(),this.connector=e}send(...e){this.connector.send(...e)}}var we=-32700,$e=-32600,_e=-32601,Ae=-32602,ke=-32603;class xe{constructor({transports:e}){if(!e)throw new Error("TRANSPORT_REQUIRED");this.transportsToRegister=e,this.methods={}}setMethodPrefix(e){this.methodPrefix=e}expose(e){this.methods=e}registerTransport(e){e.onData(this._processRequest.bind(this,e))}async _processRequest(e,t){const n=JSON.parse(t);let r;return r=Array.isArray(n)?await Promise.all(n.map(t=>this._callMethod(t,e))):await this._callMethod(n,e),JSON.stringify(r)}async _callMethod(e,t){if(!e.hasOwnProperty("method"))return;const{method:n,params:r=[],id:o}=e;let s=n;if(s.includes("::")){const[e,t]=s.split("::");if(s=t,this.methodPrefix&&e!=this.methodPrefix)return}let i={};if(!this.methods[s]||"function"!=typeof this.methods[s]||"constructor"===s||s.startsWith("_")||this.methods[s]===Object.prototype[s])i={jsonrpc:"2.0",id:o,error:{code:_e,message:`Method [${s}] not found on remote target object`}};else{this.currentTransport=t;try{const e=await this.methods[s].apply(this.methods,r);if(!o)return;i={jsonrpc:"2.0",result:void 0===e?null:e,id:o}}catch(e){console.log(`Exposed RPC method ${n} internal error:`),console.log(e),console.log("Sending this error as a result to calling client ..."),i={jsonrpc:"2.0",error:{code:ke,message:`Method [${n}] internal error: ${e.stack}`},id:o}}}return i}run(){for(const e of this.transportsToRegister)this.registerTransport(e);this.transportsToRegister=[]}}class Se extends Error{constructor(e={}){if(super(),!e.code)throw new Error("Code required");if(!e.message)throw new Error("Message required");this.code=e.code,this.message=e.message}}class Te extends Se{}var Ee={Base:Se,MethodNotFound:class extends Se{constructor(e){super({code:_e,message:e||"Method not found"})}},InvalidRequest:class extends Se{constructor(){super({code:$e,message:"Invalid request"})}},InvalidParams:class extends Se{constructor(){super({code:Ae,message:"Invalid params"})}},RemoteInternalError:class extends Se{constructor(e){super({code:ke,message:`Error originating at remote endpoint: ${e}`||"Remote Internal error"})}},ServerError:Te,ParseError:class extends Se{constructor(){super({code:we,message:"Parse error"})}},RequestTimeout:class extends Te{constructor(e){super({code:-32001,message:`Request exceeded maximum execution time ${e}`})}}};class Ce{constructor({transport:e,requestTimeout:t=2e4}){if(!e)throw new Error("TRANSPORT_REQUIRED");this.transport=e,this.requestTimeout=t,this.pendingRequest={},this.initialized=!1}setMethodPrefix(e){this.methodPrefix=e}async callMethod(e,t){this._init();const n=this.methodPrefix?`${this.methodPrefix}::${e}`:e,r=this._makeRequestObject({method:n,params:t});return this._sendRequest({object:r,id:r.id})}notify(e,t){this._init();const n=this._makeRequestObject({method:e,params:t,mode:"notify"});return this.transport.sendData(JSON.stringify(n)),!0}async runBatch(e){const t=this._generateId();let n=!0;const r=[];for(const[o,s,i]of e){const e=this._makeRequestObject({method:o,params:s,mode:i,batchId:t});e.id&&(n=!1),r.push(e)}return n?this.transport.sendData(JSON.stringify(r)):this._sendRequest({object:r,id:t})}_init(){this.initialized||(this.transport.onData(this._processResponse.bind(this)),this.initialized=!0)}_sendRequest({object:e,id:t}){const n=JSON.stringify(e);return new Promise((r,o)=>{this.pendingRequest[t]={resolve:r,reject:o,sentObject:e},setTimeout(()=>{this.pendingRequest[t]&&(delete this.pendingRequest[t],o(new Ee.RequestTimeout(n)))},this.requestTimeout);try{this.transport.sendData(n)}catch(e){delete this.pendingRequest[t],o(e)}})}_processResponse(e){const t=JSON.parse(e);Array.isArray(t)?this._processBatchResponse(t):this._processSingleCallResponse(t)}_processSingleCallResponse(e){const t=e.hasOwnProperty("result")||!1,n=e.hasOwnProperty("error");if(!t&&!n)return;const r=this.pendingRequest[e.id];if(delete this.pendingRequest[e.id],r)if(t)r.resolve(e.result);else if(n){const t=this._makeErrorObject(e.error);r.reject(t)}}_processBatchResponse(e){let t;const n={},r=[];for(const o of e)o.id?(t||(t=o.id.split("|")[0]),n[o.id]=o):o.error&&r.push(o.error);if(!this.pendingRequest[t])return;const{sentObject:o,resolve:s}=this.pendingRequest[t];delete this.pendingRequest[t];const i=[];let a=0;for(const e of o){if(!e.id){i.push(null);continue}const t=n[e.id];if(t){t.hasOwnProperty("result")||!1?i.push({success:!0,result:t.result}):i.push({success:!1,result:this._makeErrorObject(t.error)})}else i.push({success:!1,error:this._makeErrorObject(r[a])}),a++}s(i)}_makeRequestObject({method:e,params:t,mode:n,batchId:r}){const o={jsonrpc:"2.0",method:e};return t&&t.length&&(o.params=t),"notify"!==n&&(o.id=r?`${r}|${this._generateId()}`:this._generateId()),o}_makeErrorObject(e){return(0,{[_e]:()=>new Ee.MethodNotFound(e.message),[ke]:()=>new Ee.RemoteInternalError(e.message)}[e.code])()}_generateId(){let e=10,t="";for(;0<e--;)t+="bjectSymhasOwnProp-0123456789ABCDEFGHIJKLMNQRTUVWXYZ_dfgiklquvxz"[64*Math.random()|0];return t}}function Oe(e){return new Proxy(e,{get:(e,t)=>(...n)=>e.call(null,t,n),apply:(e,t,n)=>e.apply(null,n)})}class Pe{constructor(e){this.channel=e}onData(e){this.channel.on("json_rpc",async t=>{const n=await e(t);n&&this.channel.send(n)})}}var Ne=Object.freeze({__proto__:null,MoleServer:xe,MoleClient:Ce,MoleClientProxified:class extends Ce{constructor(...e){return super(...e),function(e){const t=Oe(e.callMethod.bind(e)),n=Oe(e.notify.bind(e));return new Proxy(e,{get:(r,o)=>"notify"===o?n:"callMethod"===o?t:"then"!==o?"setMethodPrefix"===o?(...t)=>e.setMethodPrefix(t):(...e)=>r.callMethod.call(r,o,e):void 0})}(this)}},ClientTransport:class{constructor(e){this.channel=e}onData(e){this.channel.on("json_rpc",e)}sendData(e){this.channel.send(e)}},ServerTransport:Pe});class Re extends Error{constructor(e,t){super(e),this.name=this.constructor.name,this.errorCode=t}errorCode(){return this.errorCode}}const{MoleClient:Ue,ClientTransport:je}=Ne;class Me{constructor(e,t,n){this.moleChannel=new be(e),this.methodPrefix=t,this.connectorOrServersideChannel=e,this.client=new Ue({requestTimeout:n,transport:new je(this.moleChannel)})}jsonrpcMsgReceive(e){this.moleChannel.emit("json_rpc",e)}call(e,t){return this.connectorOrServersideChannel.closed()?new Promise((t,n)=>{n(new Re(`Method call [${e}] on closed channel or connector ignored. Please add a check for closed channel in your code.`,"CLOSED_CHANNEL"))}):this.client.callMethod(`${this.methodPrefix}::${e}`,t)}}class Ie{constructor(e,t){this.connectorOrServersideChannel=e,this.remoteObjects={},this.requestTimeout=t||5e3}remoteObject(e){return this.remoteObjects[e]||(this.remoteObjects[e]=new Me(this.connectorOrServersideChannel,e,this.requestTimeout)),this.remoteObjects[e]}jsonrpcMsgReceive(e){for(const t of Object.values(this.remoteObjects))t.jsonrpcMsgReceive(e)}}class Le{constructor({serversideChannel:e,serverMethods:t,methodPrefix:n}){const r=[new Pe(e)];this.server=new xe({transports:r}),this.server.expose(t),this.server.setMethodPrefix(n),this.server.run()}}ie.util=ae;class ze extends de{constructor({protocolLane:e,clientPrivateKey:t,clientPublicKey:n,rpcRequestTimeout:r,verbose:o=!1,address:s}={}){super(),this.protocolLane=e,this.clientPrivateKey=t,this.clientPublicKey=n,this.clientPublicKeyHex=me(n),this.rpcClient=new Ie(this,r),this.address=s,this.verbose=o,this.sentCount=0,this.receivedCount=0}isReady(){return this.ready}send(e){ye({data:e,connector:this}),this.sentCount+=1}wireReceive({jsonData:e,encryptedData:t,rawMessage:n}){ve({jsonData:e,encryptedData:t,rawMessage:n,connector:this}),this.receivedCount+=1}closed(){return!this.connected}connectStatus(e){this.connected=e,e?(this.sentCount=0,this.receivedCount=0,this.diffieHellman({clientPrivateKey:this.clientPrivateKey,clientPublicKey:this.clientPublicKey,protocolLane:this.protocolLane}).then(({sharedSecret:e,sharedSecretHex:t})=>{this.ready=!0,this.emit("ready",{sharedSecret:e,sharedSecretHex:t})}).catch(e=>{console.log(e),console.log("dropping connection and retrying again ..."),this.close()})):(this.ready=!1,this.emit("disconnected"))}remoteObject(e){return{call:(t,n=[])=>{return this.rpcClient.remoteObject(e).call(t,void 0===(r=n)||null==r?[]:Array.isArray(r)?r:[r]);var r}}}registerRemoteObject(e,t){new Le({serversideChannel:this,serverMethods:t,methodPrefix:e})}diffieHellman({clientPrivateKey:e,clientPublicKey:t,protocolLane:n}){return new Promise((t,r)=>{this.remoteObject("Auth").call("exchangePubkeys",{pubkey:this.clientPublicKeyHex}).then(o=>{const s=ie.box.before(function(e){const t=e.match(/.{1,2}(?=(.{2})+(?!.))|.{1,2}$/g);return new Uint8Array(t.map(e=>parseInt(e,16)))}(o),e),i=me(s);this.sharedSecret=s,this.remotePubkeyHex=o,t({sharedSecret:s,sharedSecretHex:i}),this.verbose&&(console.log("Established shared secret through diffie-hellman exchange:"),console.log(i)),this.remoteObject("Auth").call("finalizeHandshake",{protocolLane:n}).then(()=>{}).catch(r)}).catch(r)})}clientPubkey(){return this.clientPublicKeyHex}remotePubkey(){return this.remotePubkeyHex}remoteIp(){return this.address}close(){this.connection.websocket.close()}closeAndDontReopenUNUSED(){this.connection.closedManually=!0,this.connection.websocket.onclose=()=>{},this.connectStatus(!1),this.connection.websocket.close()}}const Be="undefined"!=typeof window;function De({connector:e,endpoint:t,protocol:n},{WebSocket:r,log:o,resumeNow:s}){const i=e.connection;!function(e){return e.websocket&&e.checkTicker>12&&1==e.websocket.readyState}(i)?(He(i)?i.websocket.send("ping"):!e.reconnectPaused&&(s||i.checkTicker<=30||i.checkTicker%3==0)&&(null==e.connected&&e.connectStatus(!1),qe({connector:e,endpoint:t,protocol:n},{WebSocket:r,log:o})),i.checkTicker+=1):i.websocket.close()}function qe({connector:e,endpoint:t,protocol:n},{WebSocket:r,log:o}){if(e.connection.closedManually)return;const s=e.connection,i=new r(t,n);Be&&(i.binaryType="arraybuffer"),Be||i.on("error",e=>{});const a=n=>{e.closed()?(o(`websocket conn to ${t} open`),s.checkTicker=0,function({ws:e,connector:t,openCallback:n},{log:r}){const o=t.connection,s=e=>{r(`websocket conn ${t.connection.endpoint} error`),r(e)},i=e=>{r(`websocket conn ${t.connection.endpoint} closed`),t.closed()||t.connectStatus(!1)},a=e=>{o.checkTicker=0;const n=Be?e.data:e;if("pong"==n)return;let r;try{r=JSON.parse(n)}catch(e){}r?t.wireReceive({jsonData:r,rawMessage:n}):Be?t.wireReceive({encryptedData:new Uint8Array(n)}):t.wireReceive({encryptedData:n})};Be?(e.addEventListener("error",s),e.addEventListener("close",i),e.addEventListener("message",a)):(e.on("error",s),e.on("close",i),e.on("message",a));const c=()=>{He(o)?setTimeout(c,1e3):e.close()};setTimeout(c,1e3)}({ws:i,connector:e,openCallback:a},{log:o}),s.websocket=i,e.connectStatus(!0)):i.close()};Be?i.addEventListener("open",a):i.on("open",a)}function He(e){return e.websocket&&1==e.websocket.readyState}function Ke(e){return new Promise(t=>{t(function({obj:e,address:t,ssl:n=!1,port:r,protocol:o,protocolLane:s,rpcRequestTimeout:i,clientPrivateKey:a,clientPublicKey:c,remotePubkey:l,resumeNow:u,verbose:h},{WebSocket:p,log:d}){const f=n?"wss":"ws",m=r.toString().startsWith("/")?`${f}://${t}${r}`:`${f}://${t}:${r}`;d(`Trying to connect to ws endpoint ${m} ...`);const g=e||new ze({address:t,protocolLane:s,rpcRequestTimeout:i,clientPrivateKey:a,clientPublicKey:c,verbose:h});if(u)return De({connector:g,endpoint:m,protocol:o},{WebSocket:p,log:d,resumeNow:u}),g;if(g.connection)return g;g.connection={},g.connection.endpoint=m,setTimeout(()=>qe({connector:g,endpoint:m,protocol:o},{WebSocket:p,log:d}),10),g.connection.checkTicker=0;const y=()=>{g.connection.closedManually||(De({connector:g,endpoint:m,protocol:o},{WebSocket:p,log:d}),setTimeout(y,1e3))};return setTimeout(y,1e3),g}(e,{WebSocket:WebSocket,log:fe}))})}ie.util=ae,ie.util=ae,ie.util=ae,ie.util=ae;const{applyPatch:Ye}=te;class Fe extends S{constructor({ip:e=null,ssl:t=!1,port:n,protocol:r,protocolLane:o,session:s,logStore:i,rpcRequestTimeout:a,rpcObjectsSetup:c,verbose:l}={}){super(),this.ssl=t,this.protocol=r,this.protocolLane=o,this.session=s,this.logStore=i,this.verbose=l,this.set({ip:e||window.location.hostname}),this.rpcRequestTimeout=a;const u=c?c({store:this}):{};this.connect(this.ip,n,u)}remoteObject(e){return this.connector.remoteObject(e)}connect(e,t,n){const r=this.session.privateKey,o=this.session.publicKey;Ke({address:e,ssl:this.ssl,port:t,protocol:this.protocol,protocolLane:this.protocolLane,clientPrivateKey:r,clientPublicKey:o,rpcRequestTimeout:this.rpcRequestTimeout,verbose:this.verbose}).then(e=>{this.connector=e;for(const[t,r]of Object.entries(n))e.registerRemoteObject(t,r);e.on("wire_receive",({jsonData:e})=>{e.state&&(this.wireStateReceived=!0,this.verbose&&(console.log(`New store ${this.ip} / ${this.protocol} / ${this.protocolLane} state:`),console.log(e.state)),this.set(e.state)),e.diff&&this.wireStateReceived&&(Ye(this.state,e.diff),this.pushStateToSubscribers())}),e.on("ready",({sharedSecret:e,sharedSecretHex:t})=>{this.connected||this.emit("connected"),this.set({connected:!0}),this.session.set({sharedSecret:e,sharedSecretHex:t})}),e.on("disconnected",()=>{this.set({connected:!1})})})}}var Ge={SimpleStore:S,ConnectedStore:Fe,MultiConnectedStore:class extends S{constructor({port:e,protocol:t,protocolLane:n,session:r,initialIp:o}){super(),this.session=r,this.activeStoreId=0,this.currentIp=window.location.hostname,this.port=e,this.protocol=t,this.protocolLane=n,this.stores=[],this.switch({ip:this.currentIp}),o&&this.switch({ip:o})}remoteObject(e){return this.activeStore.remoteObject(e)}switch({deviceId:e,ip:t}){let n;if(this.stores.forEach((e,r)=>{e.ip==t&&(n=e)}),this.currentIp=t,!n){const e=new Fe({ip:t,port:this.port,protocol:this.protocol,protocolLane:this.protocolLane,session:this.session});n=e,e.subscribe(e=>{e.ip==this.currentIp&&this.set(e)}),this.stores.push(e)}this.set(n.state),this.activeStore=n}},ParallelStore:class extends S{constructor({session:e,port:t,protocol:n,addressList:r}){super(),this.stores=[];for(const{ip:o}of r)this.addStore({ip:o,port:t,protocol:n,session:e})}addStore({ip:e,port:t,protocol:n,session:r}){let o;if(this.stores.forEach((t,n)=>{t.ip==e&&(o=t)}),this.currentIp=e,!o){const s=new Fe({ip:e,port:t,protocol:n,session:r});o=s,s.subscribe(e=>{e.ip==this.currentIp&&this.set(e)}),this.stores.push(s)}this.set(o.state)}},SessionStore:class extends S{constructor({verbose:e=!1}={}){super(),this.verbose=e,this.constructOurKeypair()}constructOurKeypair(){const e=function(){const e=ie.box.keyPair(),t=me(e.publicKey),n=me(e.secretKey);return{privateKey:e.secretKey,publicKey:e.publicKey,privateKeyHex:n,publicKeyHex:t}}();this.set(e),this.verbose&&(console.log("Constructed new client keypair:"),console.log(`Private key: ${e.privateKeyHex}`),console.log(`Public key: ${e.publicKeyHex}`))}},LogStore:class extends S{constructor(){super(),this.set({log:[]})}addToLog({origConsoleLog:e,limit:t},...n){1==n.length&&(n=n[0]);let{log:r}=this.get();if("string"==typeof n)r.push(n);else try{r.push(`${JSON.stringify(n)}`)}catch(e){r.push(n)}r=r.slice(-t),this.set({log:r}),this.emit("new_log_entry")}}};function We(e,t){return`<span style="color: ${t};">${e}</span>`}var Qe={white:function(e){return We(e,"white")},red:function(e){return We(e,"#E34042")},green:function(e){return We(e,"#5FE02A")},gray:function(e){return We(e,"#C3C6C6")},yellow:function(e){return We(e,"#E5AE34")},cyan:function(e){return We(e,"#29B3BF")},magenta:function(e){return We(e,"#A144E9")}};function Je(){return"undefined"!=typeof ethereum&&ethereum.isMetaMask}function Ze(e){if(e.length>0)return e[0]}function Ve(e){return()=>new Promise((t,n)=>{new Promise((e,t)=>{Je()?ethereum.send("eth_requestAccounts").then(t=>{e(t.result)}).catch(e=>{4001===e.code?t(new Error("Please connect to MetaMask.")):t(e)}):t(new Error("Metamask not installed! Why was the connect button shown ?"))}).then(t=>{const n=Ze(t);n?e(n):(console.log("WARNING: received this from eth_requestAccounts, could not parse out a single account:"),console.log(t),console.log("--------------------"))}).catch(n)})}var Xe=Object.freeze({__proto__:null,metamaskInit:function e(t=(()=>{}),{retryCount:n=20}={}){const r=20==n;return Je()?(ethereum.selectedAddress?(console.log(`Success at ${20-n}`),t(ethereum.selectedAddress)):n>0&&setTimeout(()=>e(t,{retryCount:n-1}),100),r&&ethereum.on("accountsChanged",e=>{const n=Ze(e);n&&t(n)}),Ve(t)):(console.log("METAMASK INIT FAILED: not installed"),!1)}});function et(e){return e?e.trim().replace(/\s+/g," "):e}let tt,nt="";const rt=[];function ot({searchQuery:e,remoteObject:t,remoteMethod:n,searchDelay:r=300,force:o,searchStatusCallback:s=(()=>{})}){return new Promise((i,a)=>{if(""==e.trim())return rt.push(Date.now()),(""!=nt||o)&&(clearTimeout(tt),s({searching:!1}),i(o?null:[])),void(nt=e);try{console.log("prevQuery:"),console.log(nt),console.log(`force: ${o}`),(o||function({searchQuery:e,prevQuery:t}){return et(e)!=et(t)}({searchQuery:e,prevQuery:nt}))&&(clearTimeout(tt),s({searching:!0}),nt=e,tt=setTimeout(()=>{const r=Date.now();rt.push(r),console.log(`Search executed on remote object: ${e}`),t.call(n,{query:et(e),searchOriginHost:window.location.host}).then(e=>{const t=rt[rt.length-1];if(r==t){const t=e.filter(e=>e.error||0==e.results.length).length==e.length;s({searching:!1,noHits:t}),i(e)}else console.log("Discarding search result which came out of order because a more recent result is due ...")}).catch(e=>{s({searching:!1}),a(e)})},r))}catch(e){console.log("This error should not happen: bug in dmt-js"),s({searching:!1}),a(e)}})}function st(){}function it(e){return e()}function at(){return Object.create(null)}function ct(e){e.forEach(it)}function lt(e){return"function"==typeof e}function ut(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function ht(e,...t){if(null==e)return st;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function pt(e,t){e.appendChild(t)}function dt(e,t,n){e.insertBefore(t,n||null)}function ft(e){e.parentNode.removeChild(e)}function mt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function gt(e){return document.createElement(e)}function yt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function vt(e){return document.createTextNode(e)}function bt(){return vt(" ")}function wt(){return vt("")}function $t(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function _t(e){return function(t){return t.preventDefault(),e.call(this,t)}}function At(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function kt(e,t){t=""+t,e.data!==t&&(e.data=t)}function xt(e,t){(null!=t||e.value)&&(e.value=t)}function St(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function Tt(e,t,n){e.classList[n?"add":"remove"](t)}let Et;function Ct(e){Et=e}function Ot(){if(!Et)throw new Error("Function called outside component initialization");return Et}function Pt(e){return Ot().$$.context.get(e)}const Nt=[],Rt=[],Ut=[],jt=[],Mt=Promise.resolve();let It=!1;function Lt(e){Ut.push(e)}let zt=!1;const Bt=new Set;function Dt(){if(!zt){zt=!0;do{for(let e=0;e<Nt.length;e+=1){const t=Nt[e];Ct(t),qt(t.$$)}for(Nt.length=0;Rt.length;)Rt.pop()();for(let e=0;e<Ut.length;e+=1){const t=Ut[e];Bt.has(t)||(Bt.add(t),t())}Ut.length=0}while(Nt.length);for(;jt.length;)jt.pop()();It=!1,zt=!1,Bt.clear()}}function qt(e){if(null!==e.fragment){e.update(),ct(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Lt)}}const Ht=new Set;let Kt;function Yt(){Kt={r:0,c:[],p:Kt}}function Ft(){Kt.r||ct(Kt.c),Kt=Kt.p}function Gt(e,t){e&&e.i&&(Ht.delete(e),e.i(t))}function Wt(e,t,n,r){if(e&&e.o){if(Ht.has(e))return;Ht.add(e),Kt.c.push(()=>{Ht.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const Qt="undefined"!=typeof window?window:global;function Jt(e){e&&e.c()}function Zt(e,t,n){const{fragment:r,on_mount:o,on_destroy:s,after_update:i}=e.$$;r&&r.m(t,n),Lt(()=>{const t=o.map(it).filter(lt);s?s.push(...t):ct(t),e.$$.on_mount=[]}),i.forEach(Lt)}function Vt(e,t){const n=e.$$;null!==n.fragment&&(ct(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Xt(e,t){-1===e.$$.dirty[0]&&(Nt.push(e),It||(It=!0,Mt.then(Dt)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function en(e,t,n,r,o,s,i=[-1]){const a=Et;Ct(e);const c=t.props||{},l=e.$$={fragment:null,ctx:null,props:s,update:st,not_equal:o,bound:at(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:at(),dirty:i};let u=!1;l.ctx=n?n(e,c,(t,n,...r)=>{const s=r.length?r[0]:n;return l.ctx&&o(l.ctx[t],l.ctx[t]=s)&&(l.bound[t]&&l.bound[t](s),u&&Xt(e,t)),n}):[],l.update(),u=!0,ct(l.before_update),l.fragment=!!r&&r(l.ctx),t.target&&(t.hydrate?l.fragment&&l.fragment.l(function(e){return Array.from(e.childNodes)}(t.target)):l.fragment&&l.fragment.c(),t.intro&&Gt(e.$$.fragment),Zt(e,t.target,t.anchor),Dt()),Ct(a)}class tn{$destroy(){Vt(this,1),this.$destroy=st}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function nn(e){let t;return{c(){t=gt("div"),t.innerHTML='<a href="/apps"><img src="/img/icons/home.png" class="svelte-1imf61r"></a>',At(t,"class","escape svelte-1imf61r")},m(e,n){dt(e,t,n)},p:st,i:st,o:st,d(e){e&&ft(t)}}}class rn extends tn{constructor(e){super(),en(this,e,null,nn,ut,{})}}function on(e){switch(e){case"music":return"♬";default:return""}}const{SimpleStore:sn}=Ge;var an=new class extends x{constructor(){super(),this.isLocalhost="localhost"==window.location.hostname,this.isLAN=window.location.hostname.startsWith("192.168."),this.isZetaSeek="zetaseek.com"==window.location.hostname,this.isMobile=window.screen.width<768,this.ssl="https:"==window.location.protocol}},cn=re((function(e){window.addEventListener("popstate",(function(e){t.triggerPopStateCb(e)}));const t=e.exports={_onPopStateCbs:[],_isHash:!1,queryString(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(location.search),o=null;return null===r?!!(n=new RegExp("[\\?&]"+e+"(\\&([^&#]*)|$)")).test(location.search)||void 0:(o=r[1].replace(/\+/g," "),t?o:decodeURIComponent(o))},parseQuery(e){var t={};if("string"!=typeof e&&(e=window.location.search),!(e=e.replace(/^\?/g,"")))return{};for(var n,r=e.split("&"),o=0,s=null;o<r.length;++o)(n=r[o].indexOf("="))<0?(n=r[o].length,s=!0):s=decodeURIComponent(r[o].slice(n+1)),t[decodeURIComponent(r[o].slice(0,n))]=s;return t},stringify(e){if(!e||e.constructor!==Object)throw new Error("Query object should be an object.");var t="";return Object.keys(e).forEach((function(n){var r=e[n];t+=n,!0!==r&&(t+="="+encodeURIComponent(e[n])),t+="&"})),t=t.replace(/\&$/g,"")},updateSearchParam(e,n,r,o){var s=this.parseQuery();if(void 0===n)delete s[e];else{if(s[e]===n)return t;s[e]=n}var i="?"+this.stringify(s);return this._updateAll(window.location.pathname+i+location.hash,r,o),t},getLocation:()=>window.location.pathname+window.location.search+window.location.hash,hash:(e,n)=>void 0===e?location.hash.substring(1):(n||(setTimeout((function(){t._isHash=!1}),0),t._isHash=!0),location.hash=e),_updateAll:(e,n,r)=>(window.history[n?"pushState":"replaceState"](null,"",e),r&&t.triggerPopStateCb({}),e),pathname(e,t,n){return void 0===e?location.pathname:this._updateAll(e+window.location.search+window.location.hash,t,n)},triggerPopStateCb(e){this._isHash||this._onPopStateCbs.forEach((function(t){t(e)}))},onPopState(e){this._onPopStateCbs.push(e)},removeHash(){this._updateAll(window.location.pathname+window.location.search,!1,!1)},removeQuery(){this._updateAll(window.location.pathname+window.location.hash,!1,!1)},version:"2.3.1"}}));cn._onPopStateCbs,cn._isHash,cn.queryString,cn.parseQuery,cn.stringify,cn.updateSearchParam,cn.getLocation,cn.hash,cn._updateAll,cn.pathname,cn.triggerPopStateCb,cn.onPopState,cn.removeHash,cn.removeQuery,cn.version;function ln(e){let t,n,r,o,s,i,a,c,l,u;return{c(){t=gt("div"),n=gt("b"),n.textContent="Zeta",r=gt("span"),r.textContent="/",o=gt("b"),o.innerHTML='<a href="https://dmt-system.com" class="svelte-i1o8kz">DMT</a>',s=vt(" DEMO "),i=gt("span"),i.textContent=`v${e[0]}`,a=bt(),c=gt("p"),c.innerHTML='\n      An evolving search<sup>+</sup> technology for <b>web3</b>  <span class="svelte-i1o8kz">r</span>evolution.\n    ',l=bt(),u=gt("p"),u.textContent="[ If you think all times are the same, you are wrong ]",At(r,"class","dash svelte-i1o8kz"),At(i,"class","version svelte-i1o8kz"),At(c,"class","svelte-i1o8kz"),At(u,"class","svelte-i1o8kz"),At(t,"class","about svelte-i1o8kz")},m(e,h){dt(e,t,h),pt(t,n),pt(t,r),pt(t,o),pt(t,s),pt(t,i),pt(t,a),pt(t,c),pt(t,l),pt(t,u)},p:st,i:st,o:st,d(e){e&&ft(t)}}}function un(e){const t=new Date;return[`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`]}class hn extends tn{constructor(e){super(),en(this,e,un,ln,ut,{})}}function pn(e){let t,n,r,o=e[0]&&fn();return{c(){o&&o.c(),t=bt(),n=gt("span"),r=vt(e[1]),At(n,"class","svelte-1v7thbn")},m(e,s){o&&o.m(e,s),dt(e,t,s),dt(e,n,s),pt(n,r)},p(e,n){e[0]?o||(o=fn(),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),2&n&&kt(r,e[1])},d(e){o&&o.d(e),e&&ft(t),e&&ft(n)}}}function dn(e){let t,n,r,o,s,i=e[3]&&mn();return{c(){t=vt(e[2]),n=bt(),i&&i.c(),r=vt("\n    ←\n    "),o=gt("span"),s=vt(e[1]),At(o,"class","svelte-1v7thbn")},m(e,a){dt(e,t,a),dt(e,n,a),i&&i.m(e,a),dt(e,r,a),dt(e,o,a),pt(o,s)},p(e,n){4&n&&kt(t,e[2]),e[3]?i||(i=mn(),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null),2&n&&kt(s,e[1])},d(e){e&&ft(t),e&&ft(n),i&&i.d(e),e&&ft(r),e&&ft(o)}}}function fn(e){let t;return{c(){t=gt("span"),t.innerHTML='Anonymous <span class="invite svelte-1v7thbn">[please edit your profile]</span> ←',At(t,"class","anon svelte-1v7thbn")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}function mn(e){let t;return{c(){t=gt("span"),t.textContent="(+)",At(t,"class","admin svelte-1v7thbn")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}function gn(e){let t;function n(e,t){return e[2]?dn:pn}let r=n(e),o=r(e);return{c(){t=gt("div"),o.c(),At(t,"id","eth_identity"),At(t,"class","svelte-1v7thbn")},m(e,n){dt(e,t,n),o.m(t,null)},p(e,[s]){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t,null)))},i:st,o:st,d(e){e&&ft(t),o.d()}}}function yn(e,t,n){Pt("app");let{connected:r}=t,{ethAddress:o}=t,{displayName:s}=t,{isAdmin:i}=t;return e.$set=e=>{"connected"in e&&n(0,r=e.connected),"ethAddress"in e&&n(1,o=e.ethAddress),"displayName"in e&&n(2,s=e.displayName),"isAdmin"in e&&n(3,i=e.isAdmin)},[r,o,s,i]}class vn extends tn{constructor(e){super(),en(this,e,yn,gn,ut,{connected:0,ethAddress:1,displayName:2,isAdmin:3})}}function bn(e){let t,n,r,o,s,i,a,c,l,u,h=e[0].isZetaSeek&&function(e){let t;return{c(){t=gt("div"),t.innerHTML='\n      When you login with truly revolutionary MetaMask identity, you get to know more about this project as well.\n      <br><br> \n      <span class="svelte-5qmkma">\n        We invite you to the path of enjoyable exploration and collaborative innovation.\n      </span> \n      <span class="cyan svelte-5qmkma">\n        To live is to know.\n      </span>',At(t,"class","explain svelte-5qmkma")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}();return{c(){t=gt("div"),n=vt("Install "),r=gt("a"),r.textContent="MetaMask",o=vt(" extension to login.\n  "),s=gt("div"),s.textContent="MetaMask provides the simplest yet most secure way to connect to decentralized applications. You are always in control when interacting on the new decentralized web.",i=bt(),a=gt("div"),a.innerHTML='<span class="green svelte-5qmkma">\n      [ <a href="https://swarm-gateways.net/bzz:/0df387857246f1e70d89cd5f0e0be587f6a939bdf7c5b40f435a559f563aa292" class="svelte-5qmkma">Watch MetaMask explainer video via p2p</a> ]\n    </span>',c=bt(),l=gt("a"),l.innerHTML='<img src="/apps/zeta/img/metamask.png" alt="metamask" class="svelte-5qmkma">',u=bt(),h&&h.c(),At(r,"href","https://metamask.io"),At(r,"class","svelte-5qmkma"),At(s,"class","explain svelte-5qmkma"),At(a,"class","explain svelte-5qmkma"),At(l,"href","https://metamask.io"),At(l,"class","svelte-5qmkma"),At(t,"class","metamask_missing svelte-5qmkma")},m(e,p){dt(e,t,p),pt(t,n),pt(t,r),pt(t,o),pt(t,s),pt(t,i),pt(t,a),pt(t,c),pt(t,l),pt(t,u),h&&h.m(t,null)},p:st,i:st,o:st,d(e){e&&ft(t),h&&h.d()}}}function wn(e){return[Pt("app")]}class $n extends tn{constructor(e){super(),en(this,e,wn,bn,ut,{})}}function _n(e){let t;const n=new $n({});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p:st,i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function An(e){let t,n,r,o,s,i,a,c,l,u,h=e[5].isZetaSeek&&function(e){let t;return{c(){t=gt("div"),t.innerHTML='<span class="svelte-1cfzoh7">\n            We invite you to the path of enjoyable exploration and collaborative innovation.\n          </span>',At(t,"class","explain svelte-1cfzoh7")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}();return{c(){t=gt("div"),n=gt("a"),r=gt("img"),s=bt(),i=gt("br"),a=bt(),c=gt("b"),c.textContent="CONNECT",l=bt(),h&&h.c(),r.src!==(o="/apps/zeta/img/metamask.png")&&At(r,"src","/apps/zeta/img/metamask.png"),At(r,"alt","metamask "),At(r,"class","svelte-1cfzoh7"),At(n,"href","#"),At(t,"class","login svelte-1cfzoh7")},m(o,p){dt(o,t,p),pt(t,n),pt(n,r),pt(t,s),pt(t,i),pt(t,a),pt(t,c),pt(t,l),h&&h.m(t,null),u=[$t(r,"click",_t(e[7])),$t(t,"click",_t(e[8]))]},p:st,i:st,o:st,d(e){e&&ft(t),h&&h.d(),ct(u)}}}function kn(e){let t;const n=new vn({props:{connected:e[0],ethAddress:e[2],displayName:e[3],isAdmin:e[4],metamaskConnect:e[1]}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.connected=e[0]),4&t&&(r.ethAddress=e[2]),8&t&&(r.displayName=e[3]),16&t&&(r.isAdmin=e[4]),2&t&&(r.metamaskConnect=e[1]),n.$set(r)},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function xn(e){let t,n,r,o;const s=[kn,An,_n],i=[];function a(e,t){return e[2]?0:e[1]?1:2}return t=a(e),n=i[t]=s[t](e),{c(){n.c(),r=wt()},m(e,n){i[t].m(e,n),dt(e,r,n),o=!0},p(e,[o]){let c=t;t=a(e),t===c?i[t].p(e,o):(Yt(),Wt(i[c],1,1,()=>{i[c]=null}),Ft(),n=i[t],n||(n=i[t]=s[t](e),n.c()),Gt(n,1),n.m(r.parentNode,r))},i(e){o||(Gt(n),o=!0)},o(e){Wt(n),o=!1},d(e){i[t].d(e),e&&ft(r)}}}function Sn(e,t,n){const r=Pt("app");let{connected:o}=t,{metamaskConnect:s}=t,{ethAddress:i}=t,{displayName:a}=t,{isAdmin:c}=t;function l(){s().catch(e=>{console.log("Metamask not connected (yet):"),console.log(e)})}return e.$set=e=>{"connected"in e&&n(0,o=e.connected),"metamaskConnect"in e&&n(1,s=e.metamaskConnect),"ethAddress"in e&&n(2,i=e.ethAddress),"displayName"in e&&n(3,a=e.displayName),"isAdmin"in e&&n(4,c=e.isAdmin)},[o,s,i,a,c,r,l,()=>{l()},()=>{l()}]}class Tn extends tn{constructor(e){super(),en(this,e,Sn,xn,ut,{connected:0,metamaskConnect:1,ethAddress:2,displayName:3,isAdmin:4})}}function En(e){let t;return{c(){t=vt("Disconnected")},m(e,n){dt(e,t,n)},p:st,d(e){e&&ft(t)}}}function Cn(e){let t,n;return{c(){t=gt("a"),t.textContent="Save",At(t,"href","#")},m(r,o){dt(r,t,o),n=$t(t,"click",_t(e[10]))},p:st,d(e){e&&ft(t),n()}}}function On(e){let t;return{c(){t=gt("div"),t.textContent="Provide email if you want to be notified about project progress.",At(t,"class","explain svelte-1y5q2gy")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}function Pn(e){let t,n,r,o,s,i,a,c,l,u,h,p,d,f,m,g,y,v,b,w,$,_,A,k,x,S,T,E,C,O,P,N,R=(e[3]||"/")+"",U=(e[4]||"/")+"";function j(e,t){return e[0]?Cn:En}let M=j(e),I=M(e),L=!e[4]&&On();return{c(){t=gt("div"),n=gt("h3"),n.textContent="Profile",r=bt(),o=gt("div"),s=gt("label"),s.textContent="Your nick or real name",i=bt(),a=gt("input"),l=bt(),u=gt("label"),u.textContent="Your email",h=bt(),p=gt("input"),f=bt(),m=gt("p"),I.c(),g=vt("\n      | "),y=gt("a"),y.textContent="Cancel",v=bt(),b=gt("div"),w=gt("p"),$=gt("span"),$.textContent="Name:",_=bt(),A=vt(R),k=bt(),x=gt("p"),S=gt("span"),S.textContent="Email:",T=bt(),E=vt(U),C=bt(),O=gt("a"),O.textContent="Edit profile",P=bt(),L&&L.c(),At(n,"class","svelte-1y5q2gy"),At(s,"for","name"),At(a,"id","name"),At(a,"placeholder",""),a.disabled=c=!e[0],At(a,"class","svelte-1y5q2gy"),At(u,"for","email"),At(p,"id","email"),At(p,"placeholder",""),p.disabled=d=!e[0],At(p,"class","svelte-1y5q2gy"),At(y,"href","#"),At(o,"class","edit_form svelte-1y5q2gy"),Tt(o,"visible",e[2]),At($,"class","svelte-1y5q2gy"),At(S,"class","svelte-1y5q2gy"),At(O,"href","#"),At(b,"class","display_profile svelte-1y5q2gy"),Tt(b,"visible",!e[2]),At(t,"class","profile svelte-1y5q2gy")},m(c,d){dt(c,t,d),pt(t,n),pt(t,r),pt(t,o),pt(o,s),pt(o,i),pt(o,a),pt(o,l),pt(o,u),pt(o,h),pt(o,p),pt(o,f),pt(o,m),I.m(m,null),pt(m,g),pt(m,y),pt(t,v),pt(t,b),pt(b,w),pt(w,$),pt(w,_),pt(w,A),pt(b,k),pt(b,x),pt(x,S),pt(x,T),pt(x,E),pt(b,C),pt(b,O),pt(t,P),L&&L.m(t,null),N=[$t(y,"click",_t(e[11])),$t(O,"click",_t(e[12]))]},p(e,[n]){1&n&&c!==(c=!e[0])&&(a.disabled=c),1&n&&d!==(d=!e[0])&&(p.disabled=d),M===(M=j(e))&&I?I.p(e,n):(I.d(1),I=M(e),I&&(I.c(),I.m(m,g))),4&n&&Tt(o,"visible",e[2]),8&n&&R!==(R=(e[3]||"/")+"")&&kt(A,R),16&n&&U!==(U=(e[4]||"/")+"")&&kt(E,U),4&n&&Tt(b,"visible",!e[2]),e[4]?L&&(L.d(1),L=null):L||(L=On(),L.c(),L.m(t,null))},i:st,o:st,d(e){e&&ft(t),I.d(),L&&L.d(),ct(N)}}}function Nn(e,t,n){let r,o=st,s=()=>(o(),o=ht(a,e=>n(9,r=e)),a);e.$$.on_destroy.push(()=>o());let{connected:i}=t,{loginStore:a}=t;s();let c,{store:l}=t;function u(e=!0){n(2,c=e),document.getElementById("name").value=d||"",document.getElementById("email").value=f||""}function h(){const e=document.getElementById("name").value,t=document.getElementById("email").value;l.saveUserProfile({ethAddress:p,userName:e,userEmail:t}),n(2,c=!1)}let p,d,f;return e.$set=e=>{"connected"in e&&n(0,i=e.connected),"loginStore"in e&&s(n(1,a=e.loginStore)),"store"in e&&n(7,l=e.store)},e.$$.update=()=>{512&e.$$.dirty&&(p=r.ethAddress),512&e.$$.dirty&&n(3,d=r.userName||r.userIdentity),512&e.$$.dirty&&n(4,f=r.userEmail)},[i,a,c,d,f,u,h,l,p,r,()=>{h()},()=>{u(!1)},()=>{u()}]}class Rn extends tn{constructor(e){super(),en(this,e,Nn,Pn,ut,{connected:0,loginStore:1,store:7})}}function Un(e){let t,n=e[0].toUpperCase()+"";return{c(){t=vt(n)},m(e,n){dt(e,t,n)},p(e,r){1&r&&n!==(n=e[0].toUpperCase()+"")&&kt(t,n)},d(e){e&&ft(t)}}}function jn(e){let t,n=on(e[0])+"";return{c(){t=vt(n)},m(e,n){dt(e,t,n)},p(e,r){1&r&&n!==(n=on(e[0])+"")&&kt(t,n)},d(e){e&&ft(t)}}}function Mn(e){let t,n,r;function o(e,t){return(null==n||1&t)&&(n=!!on(e[0])),n?jn:Un}let s=o(e,-1),i=s(e);return{c(){t=gt("span"),i.c(),At(t,"class",r="tag "+e[0].toLowerCase()+"Tag svelte-sxfs0q")},m(e,n){dt(e,t,n),i.m(t,null)},p(e,[n]){s===(s=o(e,n))&&i?i.p(e,n):(i.d(1),i=s(e),i&&(i.c(),i.m(t,null))),1&n&&r!==(r="tag "+e[0].toLowerCase()+"Tag svelte-sxfs0q")&&At(t,"class",r)},i:st,o:st,d(e){e&&ft(t),i.d()}}}function In(e,t,n){let{tag:r}=t;return e.$set=e=>{"tag"in e&&n(0,r=e.tag)},[r]}class Ln extends tn{constructor(e){super(),en(this,e,In,Mn,ut,{tag:0})}}function zn(e){let t,n,r,o,s,i,a,c,l,u,h,p,d,f,m,g,y,v,b,w,$,_=e[0].toUpperCase()+"";return{c(){t=gt("div"),n=gt("h3"),r=gt("span"),o=vt(_),s=vt(" 😎🏖️ "),i=gt("span"),i.textContent="Summer Reading Club",a=bt(),c=gt("div"),l=gt("p"),u=gt("a"),u.textContent="The Book Of Swarm",h=bt(),p=gt("span"),d=bt(),f=gt("section"),m=vt("Get "),g=gt("a"),g.textContent="The Book Of Swarm",y=vt(" 📙🐝\n      \n\n      "),v=gt("p"),v.innerHTML='\n        A technical book released on <b>May 18th 2020</b> which serves as a reference for <b>implementation of Swarm clients</b>:\n        The <a class="outside svelte-zuv3jb" href="https://github.com/ethersphere/bee">Ethereum Swarm Bee</a>  <span class="small svelte-zuv3jb">(the next official client to replace the current legacy one)</span> and others.\n      ',b=bt(),w=gt("p"),w.innerHTML='<a class="outside svelte-zuv3jb" href="https://swarm.ethereum.org">Swarm Project Website</a> <a href="https://swarm-gateways.net/bzz:/swarm.eth/" class="outside svelte-zuv3jb">Swarm gateway</a> \n      <br> \n      <span class="tagline svelte-zuv3jb">Storage and Communication for a Sovereign Digital Society</span>',At(r,"class","swarm_official svelte-zuv3jb"),At(i,"class","svelte-zuv3jb"),At(n,"class","svelte-zuv3jb"),At(u,"href","#"),At(u,"class","section_header svelte-zuv3jb"),At(p,"class","mark svelte-zuv3jb"),Tt(p,"section_visible",e[1].Swarm.visible),At(g,"href","#"),At(f,"class","svelte-zuv3jb"),Tt(f,"visible",e[1].Swarm.visible),At(c,"class","inner"),At(t,"class","promo svelte-zuv3jb")},m(_,A){dt(_,t,A),pt(t,n),pt(n,r),pt(r,o),pt(n,s),pt(n,i),pt(t,a),pt(t,c),pt(c,l),pt(l,u),pt(l,h),pt(l,p),pt(c,d),pt(c,f),pt(f,m),pt(f,g),pt(f,y),pt(f,v),pt(c,b),pt(c,w),$=[$t(u,"click",_t(e[4])),$t(g,"click",_t(e[5]))]},p(e,[t]){1&t&&_!==(_=e[0].toUpperCase()+"")&&kt(o,_),2&t&&Tt(p,"section_visible",e[1].Swarm.visible),2&t&&Tt(f,"visible",e[1].Swarm.visible)},i:st,o:st,d(e){e&&ft(t),ct($)}}}function Bn(e,t,n){const r=Pt("app");let{teamName:o}=t;const s={Swarm:{visible:!1}};function i(e){n(1,s[e].visible=!s[e].visible,s)}return e.$set=e=>{"teamName"in e&&n(0,o=e.teamName)},[o,s,r,i,()=>{i("Swarm")},()=>{r.emit("search","Book of Swarm pdf")}]}class Dn extends tn{constructor(e){super(),en(this,e,Bn,zn,ut,{teamName:0})}}function qn(e){let t,n,r,o,s,i,a,c,l,u,h,p,d,f,m,g,y,v,b,w,$,_,A,k;return{c(){t=gt("div"),n=gt("h3"),r=vt(e[0]),o=bt(),s=gt("span"),s.textContent="⬌",i=bt(),a=vt(e[1]),c=vt(" 😎🏖️ "),l=gt("span"),l.textContent="Summer Reading Club",u=bt(),h=gt("div"),p=gt("p"),d=gt("a"),d.textContent="Collaborative Innovation Networks",f=bt(),m=gt("span"),g=bt(),y=gt("section"),v=gt("p"),b=gt("a"),b.textContent="Peter Gloor's books on collaborative innovation",w=vt("\n\n      Especially recommended: "),$=gt("a"),$.textContent="Coolfarming",_=bt(),A=gt("p"),A.textContent="Why is it that Apple products are cool? Why is Steve Jobs cool? What if you could become cool, too? And what if you could make your own ideas cool? What if you could even turn them into the next big thing?",At(s,"class","svelte-12yynby"),At(l,"class","svelte-12yynby"),At(n,"class","svelte-12yynby"),At(d,"href","#"),At(d,"class","section_header svelte-12yynby"),At(m,"class","mark svelte-12yynby"),Tt(m,"section_visible",e[2].PeterGloor.visible),At(b,"href","#"),At($,"href","#"),At(y,"class","svelte-12yynby"),Tt(y,"visible",e[2].PeterGloor.visible),At(h,"class","inner"),At(t,"class","promo svelte-12yynby")},m(x,S){dt(x,t,S),pt(t,n),pt(n,r),pt(n,o),pt(n,s),pt(n,i),pt(n,a),pt(n,c),pt(n,l),pt(t,u),pt(t,h),pt(h,p),pt(p,d),pt(p,f),pt(p,m),pt(h,g),pt(h,y),pt(y,v),pt(v,b),pt(y,w),pt(y,$),pt(y,_),pt(y,A),k=[$t(d,"click",_t(e[5])),$t(b,"click",_t(e[6])),$t($,"click",_t(e[7]))]},p(e,[t]){1&t&&kt(r,e[0]),2&t&&kt(a,e[1]),4&t&&Tt(m,"section_visible",e[2].PeterGloor.visible),4&t&&Tt(y,"visible",e[2].PeterGloor.visible)},i:st,o:st,d(e){e&&ft(t),ct(k)}}}function Hn(e,t,n){const r=Pt("app");let{displayName:o}=t,{teamName:s}=t;const i={PeterGloor:{visible:!1}};function a(e){n(2,i[e].visible=!i[e].visible,i)}return e.$set=e=>{"displayName"in e&&n(0,o=e.displayName),"teamName"in e&&n(1,s=e.teamName)},[o,s,i,r,a,()=>{a("PeterGloor")},()=>{r.emit("search","Peter Gloor")},()=>{r.emit("search","Peter Gloor Coolfarming")}]}class Kn extends tn{constructor(e){super(),en(this,e,Hn,qn,ut,{displayName:0,teamName:1})}}function Yn(e){let t,n,r=(e[7].isLocalhost&&"eclipse"==e[2]||e[7].isZetaSeek)&&Fn(e);return{c(){r&&r.c(),t=wt()},m(e,o){r&&r.m(e,o),dt(e,t,o),n=!0},p(e,n){e[7].isLocalhost&&"eclipse"==e[2]||e[7].isZetaSeek?r?(r.p(e,n),Gt(r,1)):(r=Fn(e),r.c(),Gt(r,1),r.m(t.parentNode,t)):r&&(Yt(),Wt(r,1,1,()=>{r=null}),Ft())},i(e){n||(Gt(r),n=!0)},o(e){Wt(r),n=!1},d(e){r&&r.d(e),e&&ft(t)}}}function Fn(e){let t,n,r;const o=new Rn({props:{connected:e[0],loginStore:e[4],store:e[5]}});let s=e[0]&&Gn(e);return{c(){Jt(o.$$.fragment),t=bt(),s&&s.c(),n=wt()},m(e,i){Zt(o,e,i),dt(e,t,i),s&&s.m(e,i),dt(e,n,i),r=!0},p(e,t){const r={};1&t&&(r.connected=e[0]),16&t&&(r.loginStore=e[4]),32&t&&(r.store=e[5]),o.$set(r),e[0]?s?(s.p(e,t),Gt(s,1)):(s=Gn(e),s.c(),Gt(s,1),s.m(n.parentNode,n)):s&&(Yt(),Wt(s,1,1,()=>{s=null}),Ft())},i(e){r||(Gt(o.$$.fragment,e),Gt(s),r=!0)},o(e){Wt(o.$$.fragment,e),Wt(s),r=!1},d(e){Vt(o,e),e&&ft(t),s&&s.d(e),e&&ft(n)}}}function Gn(e){let t,n,r=e[6]&&e[6].includes("zeta"),o=r&&Wn(e);const s=new Dn({props:{teamName:"Swarm"}});return{c(){o&&o.c(),t=bt(),Jt(s.$$.fragment)},m(e,r){o&&o.m(e,r),dt(e,t,r),Zt(s,e,r),n=!0},p(e,n){64&n&&(r=e[6]&&e[6].includes("zeta")),r?o?(o.p(e,n),Gt(o,1)):(o=Wn(e),o.c(),Gt(o,1),o.m(t.parentNode,t)):o&&(Yt(),Wt(o,1,1,()=>{o=null}),Ft())},i(e){n||(Gt(o),Gt(s.$$.fragment,e),n=!0)},o(e){Wt(o),Wt(s.$$.fragment,e),n=!1},d(e){o&&o.d(e),e&&ft(t),Vt(s,e)}}}function Wn(e){let t;const n=new Kn({props:{displayName:e[3],teamName:"ZetaTeam"}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.displayName=e[3]),n.$set(r)},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function Qn(e){let t,n,r=e[1]&&Yn(e);return{c(){t=gt("div"),r&&r.c(),At(t,"class","leftbar svelte-xcx6wx")},m(e,o){dt(e,t,o),r&&r.m(t,null),n=!0},p(e,[n]){e[1]?r?(r.p(e,n),Gt(r,1)):(r=Yn(e),r.c(),Gt(r,1),r.m(t,null)):r&&(Yt(),Wt(r,1,1,()=>{r=null}),Ft())},i(e){n||(Gt(r),n=!0)},o(e){Wt(r),n=!1},d(e){e&&ft(t),r&&r.d()}}}function Jn(e,t,n){let r,o=st,s=()=>(o(),o=ht(d,e=>n(11,r=e)),d);e.$$.on_destroy.push(()=>o());const i=Pt("app");let{connected:a}=t,{loggedIn:c}=t,{deviceName:l}=t,{metamaskConnect:u}=t,{searchQuery:h}=t,{displayName:p}=t,{loginStore:d}=t;s();let f,m,{store:g}=t;return e.$set=e=>{"connected"in e&&n(0,a=e.connected),"loggedIn"in e&&n(1,c=e.loggedIn),"deviceName"in e&&n(2,l=e.deviceName),"metamaskConnect"in e&&n(8,u=e.metamaskConnect),"searchQuery"in e&&n(9,h=e.searchQuery),"displayName"in e&&n(3,p=e.displayName),"loginStore"in e&&s(n(4,d=e.loginStore)),"store"in e&&n(5,g=e.store)},e.$$.update=()=>{2048&e.$$.dirty&&(f=r.userIdentity),2048&e.$$.dirty&&n(6,m=r.userTeams)},[a,c,l,p,d,g,m,i,u,h]}class Zn extends tn{constructor(e){super(),en(this,e,Jn,Qn,ut,{connected:0,loggedIn:1,deviceName:2,metamaskConnect:8,searchQuery:9,displayName:3,loginStore:4,store:5})}}function Vn(e){let t,n,r;return{c(){t=yt("svg"),n=yt("circle"),At(n,"role","presentation"),At(n,"cx","16"),At(n,"cy","16"),At(n,"r",e[4]),At(n,"stroke",e[2]),At(n,"fill","none"),At(n,"stroke-width",e[3]),At(n,"stroke-dasharray",r=e[5]+",100"),At(n,"stroke-linecap","round"),At(t,"height",e[0]),At(t,"width",e[0]),St(t,"animation-duration",e[1]+"ms"),At(t,"class","svelte-spinner svelte-1bbsd2f"),At(t,"viewBox","0 0 32 32")},m(e,r){dt(e,t,r),pt(t,n)},p(e,[o]){16&o&&At(n,"r",e[4]),4&o&&At(n,"stroke",e[2]),8&o&&At(n,"stroke-width",e[3]),32&o&&r!==(r=e[5]+",100")&&At(n,"stroke-dasharray",r),1&o&&At(t,"height",e[0]),1&o&&At(t,"width",e[0]),2&o&&St(t,"animation-duration",e[1]+"ms")},i:st,o:st,d(e){e&&ft(t)}}}function Xn(e,t,n){let r,{size:o=25}=t,{speed:s=750}=t,{color:i="rgba(0,0,0,0.4)"}=t,{thickness:a=2}=t,{gap:c=40}=t,{radius:l=10}=t;return e.$set=e=>{"size"in e&&n(0,o=e.size),"speed"in e&&n(1,s=e.speed),"color"in e&&n(2,i=e.color),"thickness"in e&&n(3,a=e.thickness),"gap"in e&&n(6,c=e.gap),"radius"in e&&n(4,l=e.radius)},e.$$.update=()=>{80&e.$$.dirty&&n(5,r=2*Math.PI*l*(100-c)/100)},[o,s,i,a,l,r,c]}class er extends tn{constructor(e){super(),en(this,e,Xn,Vn,ut,{size:0,speed:1,color:2,thickness:3,gap:6,radius:4})}}function tr(e){let t,n,r,o,s,i,a=e[3](e[1])+"",c=e[3](e[1])?"reconnecting":"Reconnecting";const l=new er({props:{size:"15",speed:"2000",color:"#EFCAF8",thickness:"3",gap:"25"}});return{c(){t=gt("span"),n=vt(a),r=bt(),o=vt(c),s=bt(),Jt(l.$$.fragment),At(t,"class","device_name svelte-v3sztg")},m(e,a){dt(e,t,a),pt(t,n),dt(e,r,a),dt(e,o,a),dt(e,s,a),Zt(l,e,a),i=!0},p(e,t){(!i||2&t)&&a!==(a=e[3](e[1])+"")&&kt(n,a),(!i||2&t)&&c!==(c=e[3](e[1])?"reconnecting":"Reconnecting")&&kt(o,c)},i(e){i||(Gt(l.$$.fragment,e),i=!0)},o(e){Wt(l.$$.fragment,e),i=!1},d(e){e&&ft(t),e&&ft(r),e&&ft(o),e&&ft(s),Vt(l,e)}}}function nr(e){let t,n,r,o,s,i,a,c,l,u=e[3](e[1])+"",h=e[3](e[1])?"ready":"Ready";const p=[or,rr],d=[];function f(e,t){return e[2]?0:1}return i=f(e),a=d[i]=p[i](e),{c(){t=gt("span"),n=vt(u),r=bt(),o=vt(h),s=bt(),a.c(),c=wt(),At(t,"class","device_name svelte-v3sztg")},m(e,a){dt(e,t,a),pt(t,n),dt(e,r,a),dt(e,o,a),dt(e,s,a),d[i].m(e,a),dt(e,c,a),l=!0},p(e,t){(!l||2&t)&&u!==(u=e[3](e[1])+"")&&kt(n,u),(!l||2&t)&&h!==(h=e[3](e[1])?"ready":"Ready")&&kt(o,h);let r=i;i=f(e),i!==r&&(Yt(),Wt(d[r],1,1,()=>{d[r]=null}),Ft(),a=d[i],a||(a=d[i]=p[i](e),a.c()),Gt(a,1),a.m(c.parentNode,c))},i(e){l||(Gt(a),l=!0)},o(e){Wt(a),l=!1},d(e){e&&ft(t),e&&ft(r),e&&ft(o),e&&ft(s),d[i].d(e),e&&ft(c)}}}function rr(e){let t;return{c(){t=gt("span"),t.textContent="✓",At(t,"class","mark svelte-v3sztg")},m(e,n){dt(e,t,n)},i:st,o:st,d(e){e&&ft(t)}}}function or(e){let t;const n=new er({props:{size:"15",speed:"400",color:"#fff",thickness:"2",gap:"40"}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function sr(e){let t,n,r,o;const s=[nr,tr],i=[];function a(e,t){return e[0]?0:1}return n=a(e),r=i[n]=s[n](e),{c(){t=gt("p"),r.c(),At(t,"class","connection_status svelte-v3sztg"),Tt(t,"ok",e[0])},m(e,r){dt(e,t,r),i[n].m(t,null),o=!0},p(e,[o]){let c=n;n=a(e),n===c?i[n].p(e,o):(Yt(),Wt(i[c],1,1,()=>{i[c]=null}),Ft(),r=i[n],r||(r=i[n]=s[n](e),r.c()),Gt(r,1),r.m(t,null)),1&o&&Tt(t,"ok",e[0])},i(e){o||(Gt(r),o=!0)},o(e){Wt(r),o=!1},d(e){e&&ft(t),i[n].d()}}}function ir(e,t,n){const r=Pt("app");let{connected:o}=t,{deviceName:s}=t,{isSearching:i}=t;return e.$set=e=>{"connected"in e&&n(0,o=e.connected),"deviceName"in e&&n(1,s=e.deviceName),"isSearching"in e&&n(2,i=e.isSearching)},[o,s,i,function(e){return e&&r.isLocalhost||r.isLAN?`@${e}`:""}]}class ar extends tn{constructor(e){super(),en(this,e,ir,sr,ut,{connected:0,deviceName:1,isSearching:2})}}function cr(e){let t,n,r,o;const s=[ur,lr],i=[];function a(e,t){return"photo"==e[0]?0:1}return t=a(e),n=i[t]=s[t](e),{c(){n.c(),r=wt()},m(e,n){i[t].m(e,n),dt(e,r,n),o=!0},p(e,o){let c=t;t=a(e),t===c?i[t].p(e,o):(Yt(),Wt(i[c],1,1,()=>{i[c]=null}),Ft(),n=i[t],n||(n=i[t]=s[t](e),n.c()),Gt(n,1),n.m(r.parentNode,r))},i(e){o||(Gt(n),o=!0)},o(e){Wt(n),o=!1},d(e){i[t].d(e),e&&ft(r)}}}function lr(e){let t;const n=new Ln({props:{tag:e[0]}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.tag=e[0]),n.$set(r)},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function ur(e){let t;const n=new Ln({props:{tag:"image"}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p:st,i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function hr(e){let t;const n=new Ln({props:{tag:e[1]}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p(e,t){const r={};2&t&&(r.tag=e[1]),n.$set(r)},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function pr(e){let t,n,r,o=e[0]&&cr(e),s=e[1]&&hr(e);return{c(){o&&o.c(),t=bt(),s&&s.c(),n=wt()},m(e,i){o&&o.m(e,i),dt(e,t,i),s&&s.m(e,i),dt(e,n,i),r=!0},p(e,[r]){e[0]?o?(o.p(e,r),Gt(o,1)):(o=cr(e),o.c(),Gt(o,1),o.m(t.parentNode,t)):o&&(Yt(),Wt(o,1,1,()=>{o=null}),Ft()),e[1]?s?(s.p(e,r),Gt(s,1)):(s=hr(e),s.c(),Gt(s,1),s.m(n.parentNode,n)):s&&(Yt(),Wt(s,1,1,()=>{s=null}),Ft())},i(e){r||(Gt(o),Gt(s),r=!0)},o(e){Wt(o),Wt(s),r=!1},d(e){o&&o.d(e),e&&ft(t),s&&s.d(e),e&&ft(n)}}}function dr(e,t,n){let{mediaType:r}=t,{resultType:o}=t,{entryType:s}=t;return e.$set=e=>{"mediaType"in e&&n(0,r=e.mediaType),"resultType"in e&&n(1,o=e.resultType),"entryType"in e&&n(2,s=e.entryType)},[r,o,s]}class fr extends tn{constructor(e){super(),en(this,e,dr,pr,ut,{mediaType:0,resultType:1,entryType:2})}}function mr(e){let t,n;return{c(){t=gt("button"),t.textContent="PLAY",At(t,"class","svelte-cp7du7")},m(r,o){dt(r,t,o),n=$t(t,"click",e[4])},p:st,d(e){e&&ft(t),n()}}}function gr(e){let t,n=!e[2].isZetaSeek&&"music"==e[0]&&mr(e);return{c(){n&&n.c(),t=wt()},m(e,r){n&&n.m(e,r),dt(e,t,r)},p(e,[r]){e[2].isZetaSeek||"music"!=e[0]?n&&(n.d(1),n=null):n?n.p(e,r):(n=mr(e),n.c(),n.m(t.parentNode,t))},i:st,o:st,d(e){n&&n.d(e),e&&ft(t)}}}function yr(e,t,n){const r=Pt("app");let{mediaType:o}=t,{playableUrl:s}=t;function i(e){r.emit("play",{playableUrl:e})}return e.$set=e=>{"mediaType"in e&&n(0,o=e.mediaType),"playableUrl"in e&&n(1,s=e.playableUrl)},[o,s,r,i,()=>{i(s)}]}class vr extends tn{constructor(e){super(),en(this,e,yr,gr,ut,{mediaType:0,playableUrl:1})}}function br(e){let t,n,r;return{c(){t=vt("·\n  "),n=gt("span"),r=vt(e[2]),At(n,"class","pretty_time svelte-17vp07m")},m(e,o){dt(e,t,o),dt(e,n,o),pt(n,r)},p(e,t){4&t&&kt(r,e[2])},d(e){e&&ft(t),e&&ft(n)}}}function wr(e){let t,n,r;function o(e,t){return"ens"==e[3]?_r:$r}let s=o(e),i=s(e),a="ens"!=e[3]&&Ar(),c="ens"!=e[3]&&kr();return{c(){i.c(),t=bt(),n=gt("span"),a&&a.c(),r=vt(e[5]),c&&c.c(),At(n,"class","context svelte-17vp07m")},m(e,o){i.m(e,o),dt(e,t,o),dt(e,n,o),a&&a.m(n,null),pt(n,r),c&&c.m(n,null)},p(e,l){s!==(s=o(e))&&(i.d(1),i=s(e),i&&(i.c(),i.m(t.parentNode,t))),"ens"!=e[3]?a||(a=Ar(),a.c(),a.m(n,r)):a&&(a.d(1),a=null),32&l&&kt(r,e[5]),"ens"!=e[3]?c||(c=kr(),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},d(e){i.d(e),e&&ft(t),e&&ft(n),a&&a.d(),c&&c.d()}}}function $r(e){let t;return{c(){t=vt("·")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}function _r(e){let t;return{c(){t=vt("∞")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}function Ar(e){let t;return{c(){t=vt("(")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}function kr(e){let t;return{c(){t=vt(")")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}function xr(e){let t,n,r,o,s,i,a,c;const l=new fr({props:{entryType:e[3],mediaType:e[4],resultType:"swarm"}});let u=e[2]&&br(e),h=e[5]&&wr(e);const p=new vr({props:{playableUrl:e[0],mediaType:e[4]}});return{c(){Jt(l.$$.fragment),t=bt(),n=gt("a"),r=gt("b"),o=vt(e[1]),s=bt(),u&&u.c(),i=bt(),h&&h.c(),a=bt(),Jt(p.$$.fragment),At(n,"href",e[0]),At(n,"class","svelte-17vp07m")},m(e,d){Zt(l,e,d),dt(e,t,d),dt(e,n,d),pt(n,r),pt(r,o),dt(e,s,d),u&&u.m(e,d),dt(e,i,d),h&&h.m(e,d),dt(e,a,d),Zt(p,e,d),c=!0},p(e,[t]){const r={};8&t&&(r.entryType=e[3]),16&t&&(r.mediaType=e[4]),l.$set(r),(!c||2&t)&&kt(o,e[1]),(!c||1&t)&&At(n,"href",e[0]),e[2]?u?u.p(e,t):(u=br(e),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null),e[5]?h?h.p(e,t):(h=wr(e),h.c(),h.m(a.parentNode,a)):h&&(h.d(1),h=null);const s={};1&t&&(s.playableUrl=e[0]),16&t&&(s.mediaType=e[4]),p.$set(s)},i(e){c||(Gt(l.$$.fragment,e),Gt(p.$$.fragment,e),c=!0)},o(e){Wt(l.$$.fragment,e),Wt(p.$$.fragment,e),c=!1},d(e){Vt(l,e),e&&ft(t),e&&ft(n),e&&ft(s),u&&u.d(e),e&&ft(i),h&&h.d(e),e&&ft(a),Vt(p,e)}}}function Sr(e,t,n){let{playableUrl:r}=t,{name:o}=t,{prettyTime:s}=t,{entryType:i}=t,{mediaType:a}=t,{context:c}=t;return e.$set=e=>{"playableUrl"in e&&n(0,r=e.playableUrl),"name"in e&&n(1,o=e.name),"prettyTime"in e&&n(2,s=e.prettyTime),"entryType"in e&&n(3,i=e.entryType),"mediaType"in e&&n(4,a=e.mediaType),"context"in e&&n(5,c=e.context)},[r,o,s,i,a,c]}class Tr extends tn{constructor(e){super(),en(this,e,Sr,xr,ut,{playableUrl:0,name:1,prettyTime:2,entryType:3,mediaType:4,context:5})}}function Er(e,t,n){const r=e.slice();return r[4]=t[n],r}function Cr(e){let t,n,r,o=e[4].text+"";return{c(){t=gt("span"),n=vt(o),At(t,"style",r=e[4].css),At(t,"class","svelte-mt9r16")},m(e,r){dt(e,t,r),pt(t,n)},p(e,s){2&s&&o!==(o=e[4].text+"")&&kt(n,o),2&s&&r!==(r=e[4].css)&&At(t,"style",r)},d(e){e&&ft(t)}}}function Or(e){let t,n;return{c(){t=gt("span"),n=vt(e[3]),At(t,"class","file_size svelte-mt9r16")},m(e,r){dt(e,t,r),pt(t,n)},p(e,t){8&t&&kt(n,e[3])},d(e){e&&ft(t)}}}function Pr(e){let t,n,r,o,s,i;const a=new fr({props:{mediaType:e[2]}});let c=b.parse(e[1]).spans,l=[];for(let t=0;t<c.length;t+=1)l[t]=Cr(Er(e,c,t));const u=new vr({props:{playableUrl:e[0],mediaType:e[2]}});let h=e[3]&&Or(e);return{c(){Jt(a.$$.fragment),t=bt(),n=gt("a");for(let e=0;e<l.length;e+=1)l[e].c();r=bt(),Jt(u.$$.fragment),o=bt(),h&&h.c(),s=wt(),At(n,"href",e[0])},m(e,c){Zt(a,e,c),dt(e,t,c),dt(e,n,c);for(let e=0;e<l.length;e+=1)l[e].m(n,null);dt(e,r,c),Zt(u,e,c),dt(e,o,c),h&&h.m(e,c),dt(e,s,c),i=!0},p(e,[t]){const r={};if(4&t&&(r.mediaType=e[2]),a.$set(r),2&t){let r;for(c=b.parse(e[1]).spans,r=0;r<c.length;r+=1){const o=Er(e,c,r);l[r]?l[r].p(o,t):(l[r]=Cr(o),l[r].c(),l[r].m(n,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=c.length}(!i||1&t)&&At(n,"href",e[0]);const o={};1&t&&(o.playableUrl=e[0]),4&t&&(o.mediaType=e[2]),u.$set(o),e[3]?h?h.p(e,t):(h=Or(e),h.c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null)},i(e){i||(Gt(a.$$.fragment,e),Gt(u.$$.fragment,e),i=!0)},o(e){Wt(a.$$.fragment,e),Wt(u.$$.fragment,e),i=!1},d(e){Vt(a,e),e&&ft(t),e&&ft(n),mt(l,e),e&&ft(r),Vt(u,e),e&&ft(o),h&&h.d(e),e&&ft(s)}}}function Nr(e,t,n){b.rgb={black:[0,0,0],darkGray:[160,160,160],cyan:[37,176,188],lightCyan:[0,204,255]};let{playableUrl:r}=t,{filePathANSI:o}=t,{mediaType:s}=t,{fileSizePretty:i}=t;return e.$set=e=>{"playableUrl"in e&&n(0,r=e.playableUrl),"filePathANSI"in e&&n(1,o=e.filePathANSI),"mediaType"in e&&n(2,s=e.mediaType),"fileSizePretty"in e&&n(3,i=e.fileSizePretty)},[r,o,s,i]}class Rr extends tn{constructor(e){super(),en(this,e,Nr,Pr,ut,{playableUrl:0,filePathANSI:1,mediaType:2,fileSizePretty:3})}}function Ur(e){let t,n,r,o,s,i,a,c,l;const u=new fr({props:{resultType:"note"}});return{c(){Jt(u.$$.fragment),t=bt(),n=gt("a"),r=vt(e[1]),o=bt(),s=gt("span"),i=vt("["),a=vt(e[2]),c=vt("]"),At(s,"class","note_tags svelte-16d5mug"),At(n,"href",e[0])},m(e,h){Zt(u,e,h),dt(e,t,h),dt(e,n,h),pt(n,r),pt(n,o),pt(n,s),pt(s,i),pt(s,a),pt(s,c),l=!0},p(e,[t]){(!l||2&t)&&kt(r,e[1]),(!l||4&t)&&kt(a,e[2]),(!l||1&t)&&At(n,"href",e[0])},i(e){l||(Gt(u.$$.fragment,e),l=!0)},o(e){Wt(u.$$.fragment,e),l=!1},d(e){Vt(u,e),e&&ft(t),e&&ft(n)}}}function jr(e,t,n){let{noteUrl:r}=t,{notePreview:o}=t,{noteTags:s}=t;return e.$set=e=>{"noteUrl"in e&&n(0,r=e.noteUrl),"notePreview"in e&&n(1,o=e.notePreview),"noteTags"in e&&n(2,s=e.noteTags)},[r,o,s]}class Mr extends tn{constructor(e){super(),en(this,e,jr,Ur,ut,{noteUrl:0,notePreview:1,noteTags:2})}}function Ir(e){let t,n,r=e[0].contentId+"";return{c(){t=vt("/"),n=vt(r)},m(e,r){dt(e,t,r),dt(e,n,r)},p(e,t){1&t&&r!==(r=e[0].contentId+"")&&kt(n,r)},d(e){e&&ft(t),e&&ft(n)}}}function Lr(e){let t,n,r,o,s=e[0].providerHost+"",i=e[0].contentId&&Ir(e);return{c(){t=gt("h3"),n=vt("@"),r=vt(s),o=gt("span"),i&&i.c(),At(o,"class","contentId svelte-17mcit5"),At(t,"class","svelte-17mcit5")},m(e,s){dt(e,t,s),pt(t,n),pt(t,r),pt(t,o),i&&i.m(o,null)},p(e,[t]){1&t&&s!==(s=e[0].providerHost+"")&&kt(r,s),e[0].contentId?i?i.p(e,t):(i=Ir(e),i.c(),i.m(o,null)):i&&(i.d(1),i=null)},i:st,o:st,d(e){e&&ft(t),i&&i.d()}}}function zr(e,t,n){let{meta:r}=t;return e.$set=e=>{"meta"in e&&n(0,r=e.meta)},[r]}class Br extends tn{constructor(e){super(),en(this,e,zr,Lr,ut,{meta:0})}}function Dr(e){let t,n=qr(e[0])+"";return{c(){t=gt("div"),At(t,"class","results_meta svelte-1l1lxgb")},m(e,r){dt(e,t,r),t.innerHTML=n},p(e,[r]){1&r&&n!==(n=qr(e[0])+"")&&(t.innerHTML=n)},i:st,o:st,d(e){e&&ft(t)}}}function qr(e){if(e.error)return Qe.red(`⚠️  Error: ${e.error}`);const{meta:t}=e,{page:n,noMorePages:r,resultCount:o,resultsFrom:s,resultsTo:i,searchTimePretty:a,networkTimePretty:c}=t;let l="";if(a&&(l+=Qe.gray(` · ${Qe.gray("fs")} ${Qe.white(a)}`)),c&&(l+=Qe.gray(` · ${Qe.gray("network")} ${Qe.white(c)}`)),o>0){if(1==n&&r)return Qe.white(`${o} ${1==o?"result":"results"}${l}`);const e=r?Qe.white(" (last page)"):"",t=`${Qe.white(`Results ${s} to ${i}`)}`;return Qe.gray(`${Qe.white(`Page ${n}`)}${e} → ${t}${l}`)}return Qe.gray(`No ${n>1?"more ":""}results${l}`)}function Hr(e,t,n){let{providerResponse:r}=t;return e.$set=e=>{"providerResponse"in e&&n(0,r=e.providerResponse)},[r]}class Kr extends tn{constructor(e){super(),en(this,e,Hr,Dr,ut,{providerResponse:0})}}function Yr(e,t,n){const r=e.slice();return r[6]=t[n].filePath,r[7]=t[n].name,r[8]=t[n].context,r[9]=t[n].swarmBzzHash,r[10]=t[n].mediaType,r[11]=t[n].entryType,r[12]=t[n].prettyTime,r[13]=t[n].filePathANSI,r[14]=t[n].playableUrl,r[15]=t[n].fiberContentURL,r[16]=t[n].fileSizePretty,r[17]=t[n].isNote,r[18]=t[n].notePreview,r[19]=t[n].noteUrl,r[20]=t[n].noteContents,r[21]=t[n].noteTags,r}function Fr(e,t,n){const r=e.slice();return r[3]=t[n],r}function Gr(e){let t,n;return{c(){t=vt("// "),n=gt("span"),n.textContent="PERHAPS TRY TO LOGIN FIRST",At(n,"class","svelte-1o5crda")},m(e,r){dt(e,t,r),dt(e,n,r)},d(e){e&&ft(t),e&&ft(n)}}}function Wr(e){let t;return{c(){t=vt("FOR NOW")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}function Qr(e){let t,n,r,o;const s=[Zr,Jr],i=[];function a(e,t){return e[1].error?0:1}return t=a(e),n=i[t]=s[t](e),{c(){n.c(),r=wt()},m(e,n){i[t].m(e,n),dt(e,r,n),o=!0},p(e,o){let c=t;t=a(e),t===c?i[t].p(e,o):(Yt(),Wt(i[c],1,1,()=>{i[c]=null}),Ft(),n=i[t],n||(n=i[t]=s[t](e),n.c()),Gt(n,1),n.m(r.parentNode,r))},i(e){o||(Gt(n),o=!0)},o(e){Wt(n),o=!1},d(e){i[t].d(e),e&&ft(r)}}}function Jr(e){let t,n,r=e[1],o=[];for(let t=0;t<r.length;t+=1)o[t]=so(Fr(e,r,t));const s=e=>Wt(o[e],1,1,()=>{o[e]=null});return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=wt()},m(e,r){for(let t=0;t<o.length;t+=1)o[t].m(e,r);dt(e,t,r),n=!0},p(e,n){if(2&n){let i;for(r=e[1],i=0;i<r.length;i+=1){const s=Fr(e,r,i);o[i]?(o[i].p(s,n),Gt(o[i],1)):(o[i]=so(s),o[i].c(),Gt(o[i],1),o[i].m(t.parentNode,t))}for(Yt(),i=r.length;i<o.length;i+=1)s(i);Ft()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Gt(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Wt(o[e]);n=!1},d(e){mt(o,e),e&&ft(t)}}}function Zr(e){let t,n,r,o,s,i,a,c=e[1].error.message+"",l=e[1].error.stack.split("\n").join("<br>")+"";return{c(){t=gt("div"),n=gt("p"),n.textContent="Search Error in Frontend Code:",r=bt(),o=gt("span"),s=vt(c),i=bt(),a=gt("span"),At(o,"class","svelte-1o5crda"),At(a,"class","svelte-1o5crda"),At(t,"class","search_error svelte-1o5crda")},m(e,c){dt(e,t,c),pt(t,n),pt(t,r),pt(t,o),pt(o,s),pt(t,i),pt(t,a),a.innerHTML=l},p(e,t){2&t&&c!==(c=e[1].error.message+"")&&kt(s,c),2&t&&l!==(l=e[1].error.stack.split("\n").join("<br>")+"")&&(a.innerHTML=l)},i:st,o:st,d(e){e&&ft(t)}}}function Vr(e){let t,n,r,o,s,i,a=JSON.stringify(e[3].error)+"";const c=new Br({props:{meta:e[3].meta}});return{c(){Jt(c.$$.fragment),t=bt(),n=gt("div"),r=vt("Error: "),o=gt("span"),s=vt(a),At(o,"class","svelte-1o5crda"),At(n,"class","result_error svelte-1o5crda")},m(e,a){Zt(c,e,a),dt(e,t,a),dt(e,n,a),pt(n,r),pt(n,o),pt(o,s),i=!0},p(e,t){const n={};2&t&&(n.meta=e[3].meta),c.$set(n),(!i||2&t)&&a!==(a=JSON.stringify(e[3].error)+"")&&kt(s,a)},i(e){i||(Gt(c.$$.fragment,e),i=!0)},o(e){Wt(c.$$.fragment,e),i=!1},d(e){Vt(c,e),e&&ft(t),e&&ft(n)}}}function Xr(e){let t,n,r;const o=new Br({props:{meta:e[3].meta}});let s=e[3].results,i=[];for(let t=0;t<s.length;t+=1)i[t]=oo(Yr(e,s,t));const a=e=>Wt(i[e],1,1,()=>{i[e]=null}),c=new Kr({props:{providerResponse:e[3]}});return{c(){Jt(o.$$.fragment),t=bt();for(let e=0;e<i.length;e+=1)i[e].c();n=bt(),Jt(c.$$.fragment)},m(e,s){Zt(o,e,s),dt(e,t,s);for(let t=0;t<i.length;t+=1)i[t].m(e,s);dt(e,n,s),Zt(c,e,s),r=!0},p(e,t){const r={};if(2&t&&(r.meta=e[3].meta),o.$set(r),2&t){let r;for(s=e[3].results,r=0;r<s.length;r+=1){const o=Yr(e,s,r);i[r]?(i[r].p(o,t),Gt(i[r],1)):(i[r]=oo(o),i[r].c(),Gt(i[r],1),i[r].m(n.parentNode,n))}for(Yt(),r=s.length;r<i.length;r+=1)a(r);Ft()}const l={};2&t&&(l.providerResponse=e[3]),c.$set(l)},i(e){if(!r){Gt(o.$$.fragment,e);for(let e=0;e<s.length;e+=1)Gt(i[e]);Gt(c.$$.fragment,e),r=!0}},o(e){Wt(o.$$.fragment,e),i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Wt(i[e]);Wt(c.$$.fragment,e),r=!1},d(e){Vt(o,e),e&&ft(t),mt(i,e),e&&ft(n),Vt(c,e)}}}function eo(e){let t;return{c(){t=gt("div"),t.textContent="Unsupported search results format.",At(t,"class","resultError")},m(e,n){dt(e,t,n)},p:st,i:st,o:st,d(e){e&&ft(t)}}}function to(e){let t;const n=new Mr({props:{noteUrl:e[19],notePreview:e[18],noteTags:e[21]}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p(e,t){const r={};2&t&&(r.noteUrl=e[19]),2&t&&(r.notePreview=e[18]),2&t&&(r.noteTags=e[21]),n.$set(r)},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function no(e){let t;const n=new Rr({props:{playableUrl:e[14],mediaType:e[10],filePathANSI:e[13],fileSizePretty:e[16]}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p(e,t){const r={};2&t&&(r.playableUrl=e[14]),2&t&&(r.mediaType=e[10]),2&t&&(r.filePathANSI=e[13]),2&t&&(r.fileSizePretty=e[16]),n.$set(r)},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function ro(e){let t;const n=new Tr({props:{name:e[7],playableUrl:e[14],mediaType:e[10],entryType:e[11],prettyTime:e[12],context:e[8]}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p(e,t){const r={};2&t&&(r.name=e[7]),2&t&&(r.playableUrl=e[14]),2&t&&(r.mediaType=e[10]),2&t&&(r.entryType=e[11]),2&t&&(r.prettyTime=e[12]),2&t&&(r.context=e[8]),n.$set(r)},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function oo(e){let t,n,r,o;const s=[ro,no,to,eo],i=[];function a(e,t){return e[9]?0:e[6]?1:e[17]?2:3}return n=a(e),r=i[n]=s[n](e),{c(){t=gt("div"),r.c(),At(t,"class","result svelte-1o5crda")},m(e,r){dt(e,t,r),i[n].m(t,null),o=!0},p(e,o){let c=n;n=a(e),n===c?i[n].p(e,o):(Yt(),Wt(i[c],1,1,()=>{i[c]=null}),Ft(),r=i[n],r||(r=i[n]=s[n](e),r.c()),Gt(r,1),r.m(t,null))},i(e){o||(Gt(r),o=!0)},o(e){Wt(r),o=!1},d(e){e&&ft(t),i[n].d()}}}function so(e){let t,n,r,o,s=e[3].error&&Vr(e),i=e[3].results&&e[3].results.length>0&&Xr(e);return{c(){t=gt("div"),s&&s.c(),n=bt(),i&&i.c(),r=bt(),At(t,"class","results svelte-1o5crda")},m(e,a){dt(e,t,a),s&&s.m(t,null),pt(t,n),i&&i.m(t,null),pt(t,r),o=!0},p(e,o){e[3].error?s?(s.p(e,o),Gt(s,1)):(s=Vr(e),s.c(),Gt(s,1),s.m(t,n)):s&&(Yt(),Wt(s,1,1,()=>{s=null}),Ft()),e[3].results&&e[3].results.length>0?i?(i.p(e,o),Gt(i,1)):(i=Xr(e),i.c(),Gt(i,1),i.m(t,r)):i&&(Yt(),Wt(i,1,1,()=>{i=null}),Ft())},i(e){o||(Gt(s),Gt(i),o=!0)},o(e){Wt(s),Wt(i),o=!1},d(e){e&&ft(t),s&&s.d(),i&&i.d()}}}function io(e){let t,n,r,o,s;function i(e,t){return e[0]?Wr:Gr}let a=i(e),c=a(e),l=e[1]&&Qr(e);return{c(){t=gt("div"),n=vt("NO HITS\n  "),c.c(),r=bt(),l&&l.c(),o=wt(),At(t,"class","no_results svelte-1o5crda"),Tt(t,"visible",e[2])},m(e,i){dt(e,t,i),pt(t,n),c.m(t,null),dt(e,r,i),l&&l.m(e,i),dt(e,o,i),s=!0},p(e,[n]){a!==(a=i(e))&&(c.d(1),c=a(e),c&&(c.c(),c.m(t,null))),4&n&&Tt(t,"visible",e[2]),e[1]?l?(l.p(e,n),Gt(l,1)):(l=Qr(e),l.c(),Gt(l,1),l.m(o.parentNode,o)):l&&(Yt(),Wt(l,1,1,()=>{l=null}),Ft())},i(e){s||(Gt(l),s=!0)},o(e){Wt(l),s=!1},d(e){e&&ft(t),c.d(),e&&ft(r),l&&l.d(e),e&&ft(o)}}}function ao(e,t,n){let{loggedIn:r}=t,{searchResults:o}=t,{noSearchHits:s}=t;return e.$set=e=>{"loggedIn"in e&&n(0,r=e.loggedIn),"searchResults"in e&&n(1,o=e.searchResults),"noSearchHits"in e&&n(2,s=e.noSearchHits)},[r,o,s]}class co extends tn{constructor(e){super(),en(this,e,ao,io,ut,{loggedIn:0,searchResults:1,noSearchHits:2})}}const{document:lo}=Qt;function uo(e){return{c(){lo.title="search"},m:st,d:st}}function ho(e){return{c(){lo.title="ZetaSeek"},m:st,d:st}}function po(e){let t;const n=new Zn({props:{connected:e[8],loggedIn:e[10],metamaskConnect:e[1],displayName:e[12],loginStore:e[16],store:e[0],searchQuery:e[4],deviceName:e[6]}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p(e,t){const r={};256&t&&(r.connected=e[8]),1024&t&&(r.loggedIn=e[10]),2&t&&(r.metamaskConnect=e[1]),4096&t&&(r.displayName=e[12]),1&t&&(r.store=e[0]),16&t&&(r.searchQuery=e[4]),64&t&&(r.deviceName=e[6]),n.$set(r)},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function fo(e){let t;const n=new hn({});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function mo(e){let t;const n=new rn({});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p:st,i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function go(e){let t;const n=new Tn({props:{connected:e[8],metamaskConnect:e[1],ethAddress:e[9],displayName:e[12],isAdmin:e[11]}});return{c(){Jt(n.$$.fragment)},m(e,r){Zt(n,e,r),t=!0},p(e,t){const r={};256&t&&(r.connected=e[8]),2&t&&(r.metamaskConnect=e[1]),512&t&&(r.ethAddress=e[9]),4096&t&&(r.displayName=e[12]),2048&t&&(r.isAdmin=e[11]),n.$set(r)},i(e){t||(Gt(n.$$.fragment,e),t=!0)},o(e){Wt(n.$$.fragment,e),t=!1},d(e){Vt(n,e)}}}function yo(e){let t;return{c(){t=gt("p"),t.innerHTML='\n        Please start <span class="svelte-621yip">dmt-proc</span>.\n      ',At(t,"class","connection_status_help svelte-621yip")},m(e,n){dt(e,t,n)},d(e){e&&ft(t)}}}function vo(e){let t;function n(e,t){return e[10]?wo:bo}let r=n(e),o=r(e);return{c(){t=gt("p"),o.c(),At(t,"class","connection_status_help svelte-621yip")},m(e,n){dt(e,t,n),o.m(t,null)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t,null)))},d(e){e&&ft(t),o.d()}}}function bo(e){let t;return{c(){t=vt("The secret realm awaits.")},m(e,n){dt(e,t,n)},p:st,d(e){e&&ft(t)}}}function wo(e){let t,n,r,o,s,i=(e[12]?` ${e[12]}`:"")+"";return{c(){t=vt("Welcome"),n=gt("span"),r=vt(i),o=vt(", you have found a fine place "),s=gt("span"),s.textContent="♪♫♬",At(n,"class","svelte-621yip"),At(s,"class","svelte-621yip")},m(e,i){dt(e,t,i),dt(e,n,i),pt(n,r),dt(e,o,i),dt(e,s,i)},p(e,t){4096&t&&i!==(i=(e[12]?` ${e[12]}`:"")+"")&&kt(r,i)},d(e){e&&ft(t),e&&ft(n),e&&ft(o),e&&ft(s)}}}function $o(e){let t,n,r,o,s,i,a,c,l,u,h,p,d,f,m,g,y,v,b,w,$,_;let A=function(e,t){return e[13]?ho:uo}(e)(e),k=(e[14]&&"eclipse"==e[6]||e[13])&&po(e),x=(e[14]&&"eclipse"==e[6]||e[13]&&(!e[15]||e[15]&&!e[4]))&&fo();const S=[go,mo],T=[];function E(e,t){return!e[14]||e[14]&&"eclipse"==e[6]?0:1}i=E(e),a=T[i]=S[i](e);const C=new ar({props:{connected:e[8],isSearching:e[2],deviceName:e[6]}});let O=!e[8]&&e[14]&&yo(),P=!e[14]&&e[8]&&!e[7]&&vo(e);const N=new co({props:{loggedIn:e[10],searchResults:e[7],noSearchHits:e[3]}});return{c(){A.c(),t=wt(),n=bt(),k&&k.c(),r=bt(),x&&x.c(),o=bt(),s=gt("main"),a.c(),c=bt(),l=gt("div"),u=gt("a"),h=gt("img"),d=bt(),Jt(C.$$.fragment),f=bt(),m=gt("div"),g=gt("input"),v=bt(),O&&O.c(),b=bt(),P&&P.c(),w=bt(),Jt(N.$$.fragment),h.src!==(p=`/apps/zeta/img/${e[13]?"zetaseek":"search"}_logo.png`)&&At(h,"src",p),At(h,"alt","zeta logo"),At(h,"class","svelte-621yip"),At(u,"href","#"),At(u,"class","svelte-621yip"),At(l,"class","logo svelte-621yip"),At(g,"id","search_input"),At(g,"placeholder","Please type your query ..."),g.disabled=y=!e[8],At(g,"class","svelte-621yip"),At(m,"class","search svelte-621yip"),At(s,"class","svelte-621yip")},m(a,p){A.m(lo.head,null),pt(lo.head,t),dt(a,n,p),k&&k.m(a,p),dt(a,r,p),x&&x.m(a,p),dt(a,o,p),dt(a,s,p),T[i].m(s,null),pt(s,c),pt(s,l),pt(l,u),pt(u,h),pt(s,d),Zt(C,s,null),pt(s,f),pt(s,m),pt(m,g),xt(g,e[4]),e[30](g),pt(m,v),O&&O.m(m,null),pt(m,b),P&&P.m(m,null),pt(m,w),Zt(N,m,null),$=!0,_=[$t(u,"click",_t(e[28])),$t(g,"input",e[29]),$t(g,"keyup",e[17]),$t(g,"paste",e[17])]},p(e,[t]){e[14]&&"eclipse"==e[6]||e[13]?k?(k.p(e,t),Gt(k,1)):(k=po(e),k.c(),Gt(k,1),k.m(r.parentNode,r)):k&&(Yt(),Wt(k,1,1,()=>{k=null}),Ft()),e[14]&&"eclipse"==e[6]||e[13]&&(!e[15]||e[15]&&!e[4])?x?Gt(x,1):(x=fo(),x.c(),Gt(x,1),x.m(o.parentNode,o)):x&&(Yt(),Wt(x,1,1,()=>{x=null}),Ft());let n=i;i=E(e),i===n?T[i].p(e,t):(Yt(),Wt(T[n],1,1,()=>{T[n]=null}),Ft(),a=T[i],a||(a=T[i]=S[i](e),a.c()),Gt(a,1),a.m(s,c));const l={};256&t&&(l.connected=e[8]),4&t&&(l.isSearching=e[2]),64&t&&(l.deviceName=e[6]),C.$set(l),(!$||256&t&&y!==(y=!e[8]))&&(g.disabled=y),16&t&&g.value!==e[4]&&xt(g,e[4]),!e[8]&&e[14]?O||(O=yo(),O.c(),O.m(m,b)):O&&(O.d(1),O=null),e[14]||!e[8]||e[7]?P&&(P.d(1),P=null):P?P.p(e,t):(P=vo(e),P.c(),P.m(m,w));const u={};1024&t&&(u.loggedIn=e[10]),128&t&&(u.searchResults=e[7]),8&t&&(u.noSearchHits=e[3]),N.$set(u)},i(e){$||(Gt(k),Gt(x),Gt(a),Gt(C.$$.fragment,e),Gt(N.$$.fragment,e),$=!0)},o(e){Wt(k),Wt(x),Wt(a),Wt(C.$$.fragment,e),Wt(N.$$.fragment,e),$=!1},d(a){A.d(a),ft(t),a&&ft(n),k&&k.d(a),a&&ft(r),x&&x.d(a),a&&ft(o),a&&ft(s),T[i].d(),Vt(C),e[30](null),O&&O.d(),P&&P.d(),Vt(N),ct(_)}}}function _o(e,t,n){let r,o,s=st,i=()=>(s(),s=ht(a,e=>n(20,r=e)),a);e.$$.on_destroy.push(()=>s());let{store:a}=t;i();let{appHelper:c}=t,{metamaskConnect:l}=t;var u,h;u="app",h=c,Ot().$$.context.set(u,h);const{isZetaSeek:p,isLocalhost:d,isMobile:f}=c;c.on("play",({playableUrl:e})=>{console.log(`Loading ${e} into mpv on localhost ...`),a.remoteObject("GUIPlayerObject").call("playUrl",{playableUrl:e})});const m=d?50:70;let g,y;const{loginStore:v}=a;let b,w;var $;function _({force:e=!1}={}){n(4,b=document.getElementById("search_input").value),console.log(`triggerSearch: ${b}`);const t=a.remoteObject("GUISearchObject"),r=({searching:e,noHits:t})=>{n(2,g=e),n(3,y=t)};T?(null==b&&console.log("Warning: null SEARCH QUERY !!! Should not hapen. There is a bug probably in GUI code"),b?cn.updateSearchParam("q",b):cn.updateSearchParam("q"),ot({searchQuery:b,remoteObject:t,remoteMethod:"search",searchStatusCallback:r,searchDelay:m,force:e}).then(e=>{a.set({searchResults:e})}).catch(e=>{a.set({searchResults:{error:e}})})):b&&setTimeout(()=>{_()},500)}function A(){k("")}function k(e){document.getElementById("search_input").value=e,_()}!function(e,t,n){e.$$.on_destroy.push(ht(t,n))}(e,v,e=>n(21,o=e)),b=cn.parseQuery().q,b&&(b=decodeURIComponent(b)),$=()=>{f||setTimeout(()=>{w.focus()},700),setTimeout(()=>{_({force:!0})},100)},Ot().$$.on_mount.push($),c.on("search",k),p||setTimeout(()=>{x&&(document.title=`${x} - search`)},800);let x,S,T,E,C,O,P,N,R,U;return e.$set=e=>{"store"in e&&i(n(0,a=e.store)),"appHelper"in e&&n(19,c=e.appHelper),"metamaskConnect"in e&&n(1,l=e.metamaskConnect)},e.$$.update=()=>{1048576&e.$$.dirty&&n(6,x=r.deviceName),1048576&e.$$.dirty&&n(7,S=r.searchResults),1048576&e.$$.dirty&&n(8,T=r.connected),2097152&e.$$.dirty&&n(9,E=o.ethAddress),2097152&e.$$.dirty&&n(22,C=o.userIdentity),2097152&e.$$.dirty&&n(23,O=o.userName),2097152&e.$$.dirty&&n(10,P=o.loggedIn),2097152&e.$$.dirty&&n(11,N=o.isAdmin),2097152&e.$$.dirty&&(R=o.userTeams),12582912&e.$$.dirty&&n(12,U=O||C)},[a,l,g,y,b,w,x,S,T,E,P,N,U,p,d,f,v,function(){console.log("searchInputChanged event received, triggering search ..."),_()},A,c,r,o,C,O,R,m,_,k,()=>{A()},function(){b=this.value,n(4,b)},function(e){Rt[e?"unshift":"push"](()=>{n(5,w=e)})}]}const{SessionStore:Ao,LogStore:ko}=Ge,{metamaskInit:xo}=Xe,So=an.ssl?"/ws":7780,To=new ko,Eo=console.log.bind(console);console.log=(...e)=>{To.addToLog({origConsoleLog:Eo,limit:100},...e),Eo(...e)};const Co=new Ao({verbose:!1}),Oo=new class extends sn{constructor({verbose:e=!1}={}){super(),this.verbose=e}login(e){this.set({ethAddress:e,loggedIn:!0}),this.emit("metamask_login",e)}},Po=new class extends Ge.ConnectedStore{constructor(e,t){super(t),this.loginStore=e,this.on("connected",()=>{const{ethAddress:e}=this.loginStore.get();e&&this.loginAddress(e)}),e.on("metamask_login",e=>{this.connected&&this.loginAddress(e)})}loginAddress(e){this.remoteObject("GUIFrontendAcceptor").call("getUserIdentity",{address:e,urlHostname:window.location.hostname}).then(e=>{this.loginStore.set(e)}).catch(console.log)}saveUserProfile(e){this.remoteObject("GUIFrontendAcceptor").call("saveUserProfile",e).then(()=>{console.log("Profile saved"),this.loginStore.set(e)}).catch(console.log)}}(Oo,{port:So,ssl:an.ssl,protocol:"zeta",protocolLane:"gui",rpcRequestTimeout:5500,rpcObjectsSetup:({store:e})=>({Receiver:{msg:t=>{e.set({msg:t})}}}),verbose:!1,session:Co,logStore:To}),No=xo(e=>{console.log(`Connected ethereum address: ${e}`),Oo.login(e)});return new class extends tn{constructor(e){super(),en(this,e,_o,$o,ut,{store:0,appHelper:19,metamaskConnect:1})}}({target:document.body,props:{store:Po,appHelper:an,metamaskConnect:No}})}(crypto);
//# sourceMappingURL=bundle.js.map
