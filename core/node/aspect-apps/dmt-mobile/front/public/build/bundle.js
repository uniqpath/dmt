var app=function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=Object,i=["black","red","green","yellow","blue","magenta","cyan","lightGray","","default"],a=["darkGray","lightRed","lightGreen","lightYellow","lightBlue","lightMagenta","lightCyan","white",""],c=["","bright","dim","italic","underline","","","inverse"],l={red:"lightRed",green:"lightGreen",yellow:"lightYellow",blue:"lightBlue",magenta:"lightMagenta",cyan:"lightCyan",black:"darkGray",lightGray:"white"},u={0:"style",2:"unstyle",3:"color",9:"colorLight",4:"bgColor",10:"bgColorLight"},h={color:i,colorLight:a,bgColor:i,bgColorLight:a,style:c,unstyle:c},f=function(e){for(var t in e)e[t]||delete e[t];return 0===s.keys(e).length?void 0:e},d=function(){function e(t,r,n){o(this,e),this.background=t,this.name=r,this.brightness=n}return r(e,[{key:"defaultBrightness",value:function(t){return new e(this.background,this.name,this.brightness||t)}},{key:"css",value:function(e){var t=e?this.inverse:this,r=t.brightness===p.bright&&l[t.name]||t.name,o=t.background?"background:":"color:",s=m.rgb[r],i=this.brightness===p.dim?.5:1;return s?o+"rgba("+[].concat(n(s),[i]).join(",")+");":!t.background&&i<1?"color:rgba(0,0,0,0.5);":""}},{key:"inverse",get:function(){return new e(!this.background,this.name||(this.background?"black":"white"),this.brightness)}},{key:"clean",get:function(){return f({name:"default"===this.name?"":this.name,bright:this.brightness===p.bright,dim:this.brightness===p.dim})}}]),e}(),p=function(){function e(t){o(this,e),void 0!==t&&(this.value=Number(t))}return r(e,[{key:"type",get:function(){return u[Math.floor(this.value/10)]}},{key:"subtype",get:function(){return h[this.type][this.value%10]}},{key:"str",get:function(){return this.value?"["+this.value+"m":""}},{key:"isBrightness",get:function(){return this.value===e.noBrightness||this.value===e.bright||this.value===e.dim}}],[{key:"str",value:function(t){return new e(t).str}}]),e}();s.assign(p,{reset:0,bright:1,dim:2,inverse:7,noBrightness:22,noItalic:23,noUnderline:24,noInverse:27,noColor:39,noBgColor:49});var y=function(e,t,r){var n=p.str(t),o=p.str(r);return String(e).split("\n").map((function(e){return function(e){return e.replace(/(\u001b\[(1|2)m)/g,"[22m$1")}(n+(t=e.replace(/\u001b\[22m(\u001b\[(1|2)m)/g,"$1"),r=o,s=n,t.split(r).join(s))+o);var t,r,s})).join("\n")},g=function(e,t){return e+t.charAt(0).toUpperCase()+t.slice(1)},v=[].concat(n(i.map((function(e,t){return e?[[e,30+t,p.noColor],[g("bg",e),40+t,p.noBgColor]]:[]}))),n(a.map((function(e,t){return e?[[e,90+t,p.noColor],[g("bg",e),100+t,p.noBgColor]]:[]}))),n(["","BrightRed","BrightGreen","BrightYellow","BrightBlue","BrightMagenta","BrightCyan"].map((function(e,t){return e?[["bg"+e,100+t,p.noBgColor]]:[]}))),n(c.map((function(e,t){return e?[[e,t,"bright"===e||"dim"===e?p.noBrightness:20+t]]:[]})))).reduce((function(e,t){return e.concat(t)}));var m=function(){function e(t){o(this,e),this.spans=t?function(e){for(var t=0,r="",n="",o="",s=[],i=[],a=0,c=e.length;a<c;a++){var l=e[a];switch(r+=l,t){case 0:""===l?(t=1,r=l):n+=l;break;case 1:"["===l?(t=2,o="",s=[]):(t=0,n+=r);break;case 2:if(l>="0"&&l<="9")o+=l;else if(";"===l)s.push(new p(o)),o="";else if("m"===l&&o.length){s.push(new p(o));var u=!0,h=!1,f=void 0;try{for(var d,y=s[Symbol.iterator]();!(u=(d=y.next()).done);u=!0){var g=d.value;i.push({text:n,code:g}),n=""}}catch(e){h=!0,f=e}finally{try{!u&&y.return&&y.return()}finally{if(h)throw f}}t=0}else t=0,n+=r}}return 0!==t&&(n+=r),n&&i.push({text:n,code:new p}),i}(t):[]}return r(e,[{key:Symbol.iterator,value:function(){return this.spans[Symbol.iterator]()}},{key:"str",get:function(){return this.spans.reduce((function(e,t){return e+t.text+t.code.str}),"")}},{key:"parsed",get:function(){var t=void 0,r=void 0,n=void 0,o=void 0;function i(){t=new d,r=new d(!0),n=void 0,o=new Set}return i(),s.assign(new e,{spans:this.spans.map((function(e){var a=e.code,c=o.has("inverse"),l=o.has("underline")?"text-decoration: underline;":"",u=o.has("italic")?"font-style: italic;":"",h=n===p.bright?"font-weight: bold;":"",y=t.defaultBrightness(n),g=s.assign({css:h+u+l+y.css(c)+r.css(c)},f({bold:!!h,color:y.clean,bgColor:r.clean}),e),v=!0,m=!1,b=void 0;try{for(var w,_=o[Symbol.iterator]();!(v=(w=_.next()).done);v=!0){g[w.value]=!0}}catch(e){m=!0,b=e}finally{try{!v&&_.return&&_.return()}finally{if(m)throw b}}if(a.isBrightness)n=a.value;else if(void 0!==e.code.value)if(e.code.value===p.reset)i();else switch(e.code.type){case"color":case"colorLight":t=new d(!1,a.subtype);break;case"bgColor":case"bgColorLight":r=new d(!0,a.subtype);break;case"style":o.add(a.subtype);break;case"unstyle":o.delete(a.subtype)}return g})).filter((function(e){return e.text.length>0}))})}},{key:"asChromeConsoleLogArguments",get:function(){var e=this.parsed.spans;return[e.map((function(e){return"%c"+e.text})).join("")].concat(n(e.map((function(e){return e.css}))))}},{key:"browserConsoleArguments",get:function(){return this.asChromeConsoleLogArguments}}],[{key:"parse",value:function(t){return new e(t).parsed}},{key:"strip",value:function(e){return e.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g,"")}},{key:"nice",get:function(){return e.names.forEach((function(t){t in String.prototype||s.defineProperty(String.prototype,t,{get:function(){return e[t](this)}})})),e}},{key:"ansicolor",get:function(){return e}}]),e}();function b(e){return t=>{let r=e;for(const e of t.split(".")){const t=new RegExp(/(\S*)\[['"]?(\S*?)['"]?\]/),n=e.match(t);if(n){const e=n[1],t=n[2];r=A(r[e]).find(e=>w(e)==t)}else r=r[e];if(void 0===r)return}return r}}function w(e){return _(e)[0]}function _(e){return A(e).map(e=>e.id)}function A(e){return void 0===e||null==e?[]:Array.isArray(e)?e:"string"==typeof e?[{id:e}]:[e]}!function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return v.reduce((function(r,o){var i=t(o,3),a=i[0],c=i[1],l=i[2];return s.defineProperty(r,a,{get:function(){return e((function(e){return n(y(e,c,l))}))}})}),r)}(m,(function(e){return e})),m.names=v.map((function(e){return t(e,1)[0]})),m.rgb={black:[0,0,0],darkGray:[100,100,100],lightGray:[200,200,200],white:[255,255,255],red:[204,0,0],lightRed:[255,51,0],green:[0,204,0],lightGreen:[51,204,51],yellow:[204,102,0],lightYellow:[255,153,51],blue:[0,0,255],lightBlue:[26,140,255],magenta:[204,0,204],lightMagenta:[255,0,255],cyan:[0,153,255],lightCyan:[0,204,255]};var x={makeTryable:function(e){return e||(e={}),e.try=b(e),e},tryOnTheFly:function(e,t){return b(e)(t)},id:w,values:_,listify:A};var E=new class{setWallpaper(e){e?e.startsWith("/")&&(document.body.style.backgroundImage=`url('${e}')`):document.body.style.backgroundImage=""}setBodyClass(e){document.getElementsByTagName("body")[0].className=e}};function S(e){console.log(`${(new Date).toLocaleString()} → ${e}`)}function O(e,t=2){return Array(Math.max(t-String(e).length+1,0)).join(0)+e}S.write=S;var k={log:S,dir:function(e){console.log(`${(new Date).toLocaleString()} → ${JSON.stringify(e,null,2)}`)},pad:O,getDisplayTime:function(e){return`${O(e.getHours())}:${O(e.getMinutes())}`},unique:function(e){return[...new Set(e)]},setWallpaper:function(e){e?E.setWallpaper(e):E.setWallpaper("")},compareValues:function(e,t="asc"){return function(r,n){if(!r.hasOwnProperty(e)||!n.hasOwnProperty(e))return 0;const o="string"==typeof r[e]?r[e].toUpperCase():r[e],s="string"==typeof n[e]?n[e].toUpperCase():n[e];let i=0;return o>s?i=1:o<s&&(i=-1),"desc"===t?-1*i:i}},accessProperty:function(e,t){return x.tryOnTheFly(e,t)},mapTempToHUE:function(e){const t=50-e;return Math.round(270*t/100+(e<-10?65:e>20?35:60))},msIntoTimeSpan:function e(t,r=0,n={}){const o=["day","h","min","s"];if(r==o.length)return n.ms=t,n;0==r&&(n.totalSeconds=t/1e3);const s=[24,60,60,1e3].slice(r).reduce((e,t)=>e*t,1);return n[o[r]]=Math.floor(t/s),e(t%s,r+1,n)},humanTime:function(e){const t=["day","h","min","s"];let r="";for(const n of t)e[n]>0&&("s"!=n||"s"==n&&e.totalSeconds<60)&&(r=`${r} ${e[n]} ${n}`);return r.trim()},songTime:function(e){e=Math.round(e);const t=Math.floor(e/3600),r=e%3600,n=Math.floor(r/60);return e=r%60,t?`${t}h ${O(n)}min ${O(e)}s`:`${n}:${O(e)}`},colorJSON:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number",r="yellow";return/^"/.test(e)?/:$/.test(e)?(t="key",r="cyan"):(t="string",r="#66F62A"):/true|false/.test(e)?(t="boolean",r="orange"):/null/.test(e)&&(t="null",r="red"),`<span style="color: ${r}" class="${t}">${e}</span>`}))},Utf8ArrayToStr:function(e){let t,r,n,o,s;t="";const i=e.length;for(r=0;r<i;)switch(n=e[r++],n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(n);break;case 12:case 13:o=e[r++],t+=String.fromCharCode((31&n)<<6|63&o);break;case 14:o=e[r++],s=e[r++],t+=String.fromCharCode((15&n)<<12|(63&o)<<6|(63&s)<<0)}return t},isInputElementActive:function(){const{activeElement:e}=document;if(e&&-1!==["input","select","textarea"].indexOf(e.tagName.toLowerCase()))return!0},listify:function(e){return void 0===e||null==e?[]:Array.isArray(e)?e:[e]},bufferToHex:function(e){return Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join("")},hexToBuffer:function(e){const t=e.match(/.{1,2}(?=(.{2})+(?!.))|.{1,2}$/g);return new Uint8Array(t.map(e=>parseInt(e,16)))}};function T(){}class C{constructor(e,t,r){this.prev=e,this.next=t,this.fn=r||T}run(e){this.fn(e),this.next&&this.next.run(e)}}class ${constructor(e){this.head=new C,this.tail=new C(this.head),this.head.next=this.tail,this.linkConstructor=e,this.reg={}}insert(e){const t=new C(this.tail.prev,this.tail,e);return t.next.prev=t,t.prev.next=t,t}remove(e){e.prev.next=e.next,e.next.prev=e.prev}}let M=0;const R=/[\s,]+/g;class P extends class{constructor(){this.events={}}on(e,t){const r=this;e.split(R).forEach(e=>{const n=r.events[e]||(r.events[e]=new $),o=t._eev||(t._eev=++M);n.reg[o]||(n.reg[o]=n.insert(t))})}off(e,t){const r=this;t&&e.split(R).forEach((function(e){const n=r.events[e];if(!n)return;const o=n.reg[t._eev];n.reg[t._eev]=void 0,n&&o&&n.remove(o)}))}removeListener(...e){this.off(...e)}emit(e,t){const r=this.events[e];r&&r.head.run(t)}}{constructor(){super(),this.state={},this.subscriptions=[]}set(e){Object.assign(this.state,e),Object.assign(this,this.state),this.pushStateToSubscribers()}get(){return this.state}subscribe(e){const t=Math.random();return this.subscriptions.push({subscriptionId:t,callback:e}),e(this.state),()=>{this.subscriptions.forEach((e,r)=>{e.subscriptionId==t&&this.subscriptions.splice(r,1)})}}pushStateToSubscribers(){this.subscriptions.forEach(e=>e.callback(this.state))}}
/*!
     * https://github.com/Starcounter-Jack/JSON-Patch
     * (c) 2017 Joachim Wester
     * MIT license
     */var j,L=(j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),N=Object.prototype.hasOwnProperty;function U(e,t){return N.call(e,t)}function I(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);t=[];for(var n in e)U(e,n)&&t.push(n);return t}function D(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function B(e){for(var t,r=0,n=e.length;r<n;){if(!((t=e.charCodeAt(r))>=48&&t<=57))return!1;r++}return!0}function q(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function K(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function H(e,t){var r=[e];for(var n in t){var o="object"==typeof t[n]?JSON.stringify(t[n],null,2):t[n];void 0!==o&&r.push(n+": "+o)}return r.join("\n")}var Y=function(e){function t(t,r,n,o,s){var i=this.constructor,a=e.call(this,H(t,{name:r,index:n,operation:o,tree:s}))||this;return a.name=r,a.index=n,a.operation=o,a.tree=s,Object.setPrototypeOf(a,i.prototype),a.message=H(t,{name:r,index:n,operation:o,tree:s}),a}return L(t,e),t}(Error),F=Y,W=D,z={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){var n=V(r,this.path);n&&(n=D(n));var o=G(r,{op:"remove",path:this.from}).removed;return G(r,{op:"add",path:this.path,value:o}),{newDocument:r,removed:n}},copy:function(e,t,r){var n=V(r,this.from);return G(r,{op:"add",path:this.path,value:D(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:ee(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},J={add:function(e,t,r){return B(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:z.move,copy:z.copy,test:z.test,_get:z._get};function V(e,t){if(""==t)return e;var r={op:"_get",path:t};return G(e,r),r.value}function G(e,t,r,n,o,s){if(void 0===r&&(r=!1),void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===s&&(s=0),r&&("function"==typeof r?r(t,0,e,t.path):Q(t,0)),""===t.path){var i={newDocument:e};if("add"===t.op)return i.newDocument=t.value,i;if("replace"===t.op)return i.newDocument=t.value,i.removed=e,i;if("move"===t.op||"copy"===t.op)return i.newDocument=V(e,t.from),"move"===t.op&&(i.removed=e),i;if("test"===t.op){if(i.test=ee(e,t.value),!1===i.test)throw new F("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return i.newDocument=e,i}if("remove"===t.op)return i.removed=e,i.newDocument=null,i;if("_get"===t.op)return t.value=e,i;if(r)throw new F("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return i}n||(e=D(e));var a=(t.path||"").split("/"),c=e,l=1,u=a.length,h=void 0,f=void 0,d=void 0;for(d="function"==typeof r?r:Q;;){if(f=a[l],o&&"__proto__"==f)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===h&&(void 0===c[f]?h=a.slice(0,l).join("/"):l==u-1&&(h=t.path),void 0!==h&&d(t,0,e,h)),l++,Array.isArray(c)){if("-"===f)f=c.length;else{if(r&&!B(f))throw new F("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);B(f)&&(f=~~f)}if(l>=u){if(r&&"add"===t.op&&f>c.length)throw new F("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);if(!1===(i=J[t.op].call(t,c,f,e)).test)throw new F("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return i}}else if(f&&-1!=f.indexOf("~")&&(f=K(f)),l>=u){if(!1===(i=z[t.op].call(t,c,f,e)).test)throw new F("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return i}c=c[f]}}function Z(e,t,r,n,o){if(void 0===n&&(n=!0),void 0===o&&(o=!0),r&&!Array.isArray(t))throw new F("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=D(e));for(var s=new Array(t.length),i=0,a=t.length;i<a;i++)s[i]=G(e,t[i],r,!0,o,i),e=s[i].newDocument;return s.newDocument=e,s}function Q(e,t,r,n){if("object"!=typeof e||null===e||Array.isArray(e))throw new F("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(!z[e.op])throw new F("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r);if("string"!=typeof e.path)throw new F("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new F('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new F("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new F("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)if(e(t[r]))return!0}else if("object"==typeof t){var o=I(t),s=o.length;for(r=0;r<s;r++)if(e(t[o[r]]))return!0}return!1}(e.value))throw new F("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r)if("add"==e.op){var o=e.path.split("/").length,s=n.split("/").length;if(o!==s+1&&o!==s)throw new F("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==n)throw new F("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if("move"===e.op||"copy"===e.op){var i=X([{op:"_get",path:e.from,value:void 0}],r);if(i&&"OPERATION_PATH_UNRESOLVABLE"===i.name)throw new F("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}function X(e,t,r){try{if(!Array.isArray(e))throw new F("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Z(D(t),D(e),r||!0);else{r=r||Q;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(e){if(e instanceof F)return e;throw e}}function ee(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,o,s=Array.isArray(e),i=Array.isArray(t);if(s&&i){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!ee(e[r],t[r]))return!1;return!0}if(s!=i)return!1;var a=Object.keys(e);if((n=a.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!t.hasOwnProperty(a[r]))return!1;for(r=n;0!=r--;)if(!ee(e[o=a[r]],t[o]))return!1;return!0}return e!=e&&t!=t}var te=Object.freeze({__proto__:null,JsonPatchError:F,deepClone:W,getValueByPointer:V,applyOperation:G,applyPatch:Z,applyReducer:function(e,t,r){var n=G(e,t);if(!1===n.test)throw new F("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument},validator:Q,validate:X,_areEquals:ee}),re=new WeakMap,ne=function(e){this.observers=new Map,this.obj=e},oe=function(e,t){this.callback=e,this.observer=t};
/*!
     * https://github.com/Starcounter-Jack/JSON-Patch
     * (c) 2017 Joachim Wester
     * MIT license
     */function se(e,t){void 0===t&&(t=!1);var r=re.get(e.object);ie(r.value,e.object,e.patches,"",t),e.patches.length&&Z(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function ie(e,t,r,n,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var s=I(t),i=I(e),a=!1,c=i.length-1;c>=0;c--){var l=e[h=i[c]];if(!U(t,h)||void 0===t[h]&&void 0!==l&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(o&&r.push({op:"test",path:n+"/"+q(h),value:D(l)}),r.push({op:"remove",path:n+"/"+q(h)}),a=!0):(o&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}));else{var u=t[h];"object"==typeof l&&null!=l&&"object"==typeof u&&null!=u?ie(l,u,r,n+"/"+q(h),o):l!==u&&(o&&r.push({op:"test",path:n+"/"+q(h),value:D(l)}),r.push({op:"replace",path:n+"/"+q(h),value:D(u)}))}}if(a||s.length!=i.length)for(c=0;c<s.length;c++){var h;U(e,h=s[c])||void 0===t[h]||r.push({op:"add",path:n+"/"+q(h),value:D(t[h])})}}}var ae=Object.freeze({__proto__:null,unobserve:function(e,t){t.unobserve()},observe:function(e,t){var r,n=function(e){return re.get(e)}(e);if(n){var o=function(e,t){return e.observers.get(t)}(n,t);r=o&&o.observer}else n=new ne(e),re.set(e,n);if(r)return r;if(r={},n.value=D(e),t){r.callback=t,r.next=null;var s=function(){se(r)},i=function(){clearTimeout(r.next),r.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener("mouseup",i),window.addEventListener("keyup",i),window.addEventListener("mousedown",i),window.addEventListener("keydown",i),window.addEventListener("change",i))}return r.patches=[],r.object=e,r.unobserve=function(){se(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(n,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",i),window.removeEventListener("keyup",i),window.removeEventListener("mousedown",i),window.removeEventListener("keydown",i),window.removeEventListener("change",i))},n.observers.set(t,new oe(t,r)),r},generate:se,compare:function(e,t,r){void 0===r&&(r=!1);var n=[];return ie(e,t,n,"",r),n}}),ce=Object.assign({},te,ae,{JsonPatchError:Y,deepClone:D,escapePathComponent:q,unescapePathComponent:K}),le="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ue(e,t){return e(t={exports:{}},t.exports),t.exports}function he(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var fe,de=(fe=Object.freeze({__proto__:null,default:{}}))&&fe.default||fe,pe=ue((function(e){!function(e){var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=t(),i=t([1]),a=t([56129,1]),c=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function p(e,t,r,n,o){var s,i=0;for(s=0;s<o;s++)i|=e[t+s]^r[n+s];return(1&i-1>>>8)-1}function y(e,t,r,n){return p(e,t,r,n,16)}function g(e,t,r,n){return p(e,t,r,n,32)}function v(e,t,r,n){!function(e,t,r,n){for(var o,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,f=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,y=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,v=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,m=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=s,A=i,x=a,E=c,S=l,O=u,k=h,T=f,C=d,$=p,M=y,R=g,P=v,j=m,L=b,N=w,U=0;U<20;U+=2)_^=(o=(P^=(o=(C^=(o=(S^=(o=_+P|0)<<7|o>>>25)+_|0)<<9|o>>>23)+S|0)<<13|o>>>19)+C|0)<<18|o>>>14,O^=(o=(A^=(o=(j^=(o=($^=(o=O+A|0)<<7|o>>>25)+O|0)<<9|o>>>23)+$|0)<<13|o>>>19)+j|0)<<18|o>>>14,M^=(o=(k^=(o=(x^=(o=(L^=(o=M+k|0)<<7|o>>>25)+M|0)<<9|o>>>23)+L|0)<<13|o>>>19)+x|0)<<18|o>>>14,N^=(o=(R^=(o=(T^=(o=(E^=(o=N+R|0)<<7|o>>>25)+N|0)<<9|o>>>23)+E|0)<<13|o>>>19)+T|0)<<18|o>>>14,_^=(o=(E^=(o=(x^=(o=(A^=(o=_+E|0)<<7|o>>>25)+_|0)<<9|o>>>23)+A|0)<<13|o>>>19)+x|0)<<18|o>>>14,O^=(o=(S^=(o=(T^=(o=(k^=(o=O+S|0)<<7|o>>>25)+O|0)<<9|o>>>23)+k|0)<<13|o>>>19)+T|0)<<18|o>>>14,M^=(o=($^=(o=(C^=(o=(R^=(o=M+$|0)<<7|o>>>25)+M|0)<<9|o>>>23)+R|0)<<13|o>>>19)+C|0)<<18|o>>>14,N^=(o=(L^=(o=(j^=(o=(P^=(o=N+L|0)<<7|o>>>25)+N|0)<<9|o>>>23)+P|0)<<13|o>>>19)+j|0)<<18|o>>>14;_=_+s|0,A=A+i|0,x=x+a|0,E=E+c|0,S=S+l|0,O=O+u|0,k=k+h|0,T=T+f|0,C=C+d|0,$=$+p|0,M=M+y|0,R=R+g|0,P=P+v|0,j=j+m|0,L=L+b|0,N=N+w|0,e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=A>>>0&255,e[5]=A>>>8&255,e[6]=A>>>16&255,e[7]=A>>>24&255,e[8]=x>>>0&255,e[9]=x>>>8&255,e[10]=x>>>16&255,e[11]=x>>>24&255,e[12]=E>>>0&255,e[13]=E>>>8&255,e[14]=E>>>16&255,e[15]=E>>>24&255,e[16]=S>>>0&255,e[17]=S>>>8&255,e[18]=S>>>16&255,e[19]=S>>>24&255,e[20]=O>>>0&255,e[21]=O>>>8&255,e[22]=O>>>16&255,e[23]=O>>>24&255,e[24]=k>>>0&255,e[25]=k>>>8&255,e[26]=k>>>16&255,e[27]=k>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=C>>>0&255,e[33]=C>>>8&255,e[34]=C>>>16&255,e[35]=C>>>24&255,e[36]=$>>>0&255,e[37]=$>>>8&255,e[38]=$>>>16&255,e[39]=$>>>24&255,e[40]=M>>>0&255,e[41]=M>>>8&255,e[42]=M>>>16&255,e[43]=M>>>24&255,e[44]=R>>>0&255,e[45]=R>>>8&255,e[46]=R>>>16&255,e[47]=R>>>24&255,e[48]=P>>>0&255,e[49]=P>>>8&255,e[50]=P>>>16&255,e[51]=P>>>24&255,e[52]=j>>>0&255,e[53]=j>>>8&255,e[54]=j>>>16&255,e[55]=j>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=N>>>0&255,e[61]=N>>>8&255,e[62]=N>>>16&255,e[63]=N>>>24&255}(e,t,r,n)}function m(e,t,r,n){!function(e,t,r,n){for(var o,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,f=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,y=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,v=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,m=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=0;_<20;_+=2)s^=(o=(v^=(o=(d^=(o=(l^=(o=s+v|0)<<7|o>>>25)+s|0)<<9|o>>>23)+l|0)<<13|o>>>19)+d|0)<<18|o>>>14,u^=(o=(i^=(o=(m^=(o=(p^=(o=u+i|0)<<7|o>>>25)+u|0)<<9|o>>>23)+p|0)<<13|o>>>19)+m|0)<<18|o>>>14,y^=(o=(h^=(o=(a^=(o=(b^=(o=y+h|0)<<7|o>>>25)+y|0)<<9|o>>>23)+b|0)<<13|o>>>19)+a|0)<<18|o>>>14,w^=(o=(g^=(o=(f^=(o=(c^=(o=w+g|0)<<7|o>>>25)+w|0)<<9|o>>>23)+c|0)<<13|o>>>19)+f|0)<<18|o>>>14,s^=(o=(c^=(o=(a^=(o=(i^=(o=s+c|0)<<7|o>>>25)+s|0)<<9|o>>>23)+i|0)<<13|o>>>19)+a|0)<<18|o>>>14,u^=(o=(l^=(o=(f^=(o=(h^=(o=u+l|0)<<7|o>>>25)+u|0)<<9|o>>>23)+h|0)<<13|o>>>19)+f|0)<<18|o>>>14,y^=(o=(p^=(o=(d^=(o=(g^=(o=y+p|0)<<7|o>>>25)+y|0)<<9|o>>>23)+g|0)<<13|o>>>19)+d|0)<<18|o>>>14,w^=(o=(b^=(o=(m^=(o=(v^=(o=w+b|0)<<7|o>>>25)+w|0)<<9|o>>>23)+v|0)<<13|o>>>19)+m|0)<<18|o>>>14;e[0]=s>>>0&255,e[1]=s>>>8&255,e[2]=s>>>16&255,e[3]=s>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=y>>>0&255,e[9]=y>>>8&255,e[10]=y>>>16&255,e[11]=y>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=h>>>0&255,e[17]=h>>>8&255,e[18]=h>>>16&255,e[19]=h>>>24&255,e[20]=f>>>0&255,e[21]=f>>>8&255,e[22]=f>>>16&255,e[23]=f>>>24&255,e[24]=d>>>0&255,e[25]=d>>>8&255,e[26]=d>>>16&255,e[27]=d>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,n)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(e,t,r,n,o,s,i){var a,c,l=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=s[c];for(;o>=64;){for(v(u,l,i,b),c=0;c<64;c++)e[t+c]=r[n+c]^u[c];for(a=1,c=8;c<16;c++)a=a+(255&l[c])|0,l[c]=255&a,a>>>=8;o-=64,t+=64,n+=64}if(o>0)for(v(u,l,i,b),c=0;c<o;c++)e[t+c]=r[n+c]^u[c];return 0}function _(e,t,r,n,o){var s,i,a=new Uint8Array(16),c=new Uint8Array(64);for(i=0;i<16;i++)a[i]=0;for(i=0;i<8;i++)a[i]=n[i];for(;r>=64;){for(v(c,a,o,b),i=0;i<64;i++)e[t+i]=c[i];for(s=1,i=8;i<16;i++)s=s+(255&a[i])|0,a[i]=255&s,s>>>=8;r-=64,t+=64}if(r>0)for(v(c,a,o,b),i=0;i<r;i++)e[t+i]=c[i];return 0}function A(e,t,r,n,o){var s=new Uint8Array(32);m(s,n,o,b);for(var i=new Uint8Array(8),a=0;a<8;a++)i[a]=n[a+16];return _(e,t,r,i,s)}function x(e,t,r,n,o,s,i){var a=new Uint8Array(32);m(a,s,i,b);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=s[l+16];return w(e,t,r,n,o,c,a)}var E=function(e){var t,r,n,o,s,i,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),o=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|o<<9),s=255&e[8]|(255&e[9])<<8,this.r[4]=255&(o>>>4|s<<12),this.r[5]=s>>>1&8190,i=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(s>>>14|i<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(i>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function S(e,t,r,n,o,s){var i=new E(s);return i.update(r,n,o),i.finish(e,t),0}function O(e,t,r,n,o,s){var i=new Uint8Array(16);return S(i,0,r,n,o,s),y(e,t,i,0)}function k(e,t,r,n,o){var s;if(r<32)return-1;for(x(e,0,t,0,r,n,o),S(e,16,e,32,r-32,e),s=0;s<16;s++)e[s]=0;return 0}function T(e,t,r,n,o){var s,i=new Uint8Array(32);if(r<32)return-1;if(A(i,0,32,n,o),0!==O(t,16,t,32,r-32,i))return-1;for(x(e,0,t,0,r,n,o),s=0;s<32;s++)e[s]=0;return 0}function C(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function $(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function M(e,t,r){for(var n,o=~(r-1),s=0;s<16;s++)n=o&(e[s]^t[s]),e[s]^=n,t[s]^=n}function R(e,r){var n,o,s,i=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for($(a),$(a),$(a),o=0;o<2;o++){for(i[0]=a[0]-65517,n=1;n<15;n++)i[n]=a[n]-65535-(i[n-1]>>16&1),i[n-1]&=65535;i[15]=a[15]-32767-(i[14]>>16&1),s=i[15]>>16&1,i[14]&=65535,M(a,i,1-s)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function P(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return R(r,e),R(n,t),g(r,0,n,0)}function j(e){var t=new Uint8Array(32);return R(t,e),1&t[0]}function L(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function N(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function I(e,t,r){var n,o,s=0,i=0,a=0,c=0,l=0,u=0,h=0,f=0,d=0,p=0,y=0,g=0,v=0,m=0,b=0,w=0,_=0,A=0,x=0,E=0,S=0,O=0,k=0,T=0,C=0,$=0,M=0,R=0,P=0,j=0,L=0,N=r[0],U=r[1],I=r[2],D=r[3],B=r[4],q=r[5],K=r[6],H=r[7],Y=r[8],F=r[9],W=r[10],z=r[11],J=r[12],V=r[13],G=r[14],Z=r[15];s+=(n=t[0])*N,i+=n*U,a+=n*I,c+=n*D,l+=n*B,u+=n*q,h+=n*K,f+=n*H,d+=n*Y,p+=n*F,y+=n*W,g+=n*z,v+=n*J,m+=n*V,b+=n*G,w+=n*Z,i+=(n=t[1])*N,a+=n*U,c+=n*I,l+=n*D,u+=n*B,h+=n*q,f+=n*K,d+=n*H,p+=n*Y,y+=n*F,g+=n*W,v+=n*z,m+=n*J,b+=n*V,w+=n*G,_+=n*Z,a+=(n=t[2])*N,c+=n*U,l+=n*I,u+=n*D,h+=n*B,f+=n*q,d+=n*K,p+=n*H,y+=n*Y,g+=n*F,v+=n*W,m+=n*z,b+=n*J,w+=n*V,_+=n*G,A+=n*Z,c+=(n=t[3])*N,l+=n*U,u+=n*I,h+=n*D,f+=n*B,d+=n*q,p+=n*K,y+=n*H,g+=n*Y,v+=n*F,m+=n*W,b+=n*z,w+=n*J,_+=n*V,A+=n*G,x+=n*Z,l+=(n=t[4])*N,u+=n*U,h+=n*I,f+=n*D,d+=n*B,p+=n*q,y+=n*K,g+=n*H,v+=n*Y,m+=n*F,b+=n*W,w+=n*z,_+=n*J,A+=n*V,x+=n*G,E+=n*Z,u+=(n=t[5])*N,h+=n*U,f+=n*I,d+=n*D,p+=n*B,y+=n*q,g+=n*K,v+=n*H,m+=n*Y,b+=n*F,w+=n*W,_+=n*z,A+=n*J,x+=n*V,E+=n*G,S+=n*Z,h+=(n=t[6])*N,f+=n*U,d+=n*I,p+=n*D,y+=n*B,g+=n*q,v+=n*K,m+=n*H,b+=n*Y,w+=n*F,_+=n*W,A+=n*z,x+=n*J,E+=n*V,S+=n*G,O+=n*Z,f+=(n=t[7])*N,d+=n*U,p+=n*I,y+=n*D,g+=n*B,v+=n*q,m+=n*K,b+=n*H,w+=n*Y,_+=n*F,A+=n*W,x+=n*z,E+=n*J,S+=n*V,O+=n*G,k+=n*Z,d+=(n=t[8])*N,p+=n*U,y+=n*I,g+=n*D,v+=n*B,m+=n*q,b+=n*K,w+=n*H,_+=n*Y,A+=n*F,x+=n*W,E+=n*z,S+=n*J,O+=n*V,k+=n*G,T+=n*Z,p+=(n=t[9])*N,y+=n*U,g+=n*I,v+=n*D,m+=n*B,b+=n*q,w+=n*K,_+=n*H,A+=n*Y,x+=n*F,E+=n*W,S+=n*z,O+=n*J,k+=n*V,T+=n*G,C+=n*Z,y+=(n=t[10])*N,g+=n*U,v+=n*I,m+=n*D,b+=n*B,w+=n*q,_+=n*K,A+=n*H,x+=n*Y,E+=n*F,S+=n*W,O+=n*z,k+=n*J,T+=n*V,C+=n*G,$+=n*Z,g+=(n=t[11])*N,v+=n*U,m+=n*I,b+=n*D,w+=n*B,_+=n*q,A+=n*K,x+=n*H,E+=n*Y,S+=n*F,O+=n*W,k+=n*z,T+=n*J,C+=n*V,$+=n*G,M+=n*Z,v+=(n=t[12])*N,m+=n*U,b+=n*I,w+=n*D,_+=n*B,A+=n*q,x+=n*K,E+=n*H,S+=n*Y,O+=n*F,k+=n*W,T+=n*z,C+=n*J,$+=n*V,M+=n*G,R+=n*Z,m+=(n=t[13])*N,b+=n*U,w+=n*I,_+=n*D,A+=n*B,x+=n*q,E+=n*K,S+=n*H,O+=n*Y,k+=n*F,T+=n*W,C+=n*z,$+=n*J,M+=n*V,R+=n*G,P+=n*Z,b+=(n=t[14])*N,w+=n*U,_+=n*I,A+=n*D,x+=n*B,E+=n*q,S+=n*K,O+=n*H,k+=n*Y,T+=n*F,C+=n*W,$+=n*z,M+=n*J,R+=n*V,P+=n*G,j+=n*Z,w+=(n=t[15])*N,i+=38*(A+=n*I),a+=38*(x+=n*D),c+=38*(E+=n*B),l+=38*(S+=n*q),u+=38*(O+=n*K),h+=38*(k+=n*H),f+=38*(T+=n*Y),d+=38*(C+=n*F),p+=38*($+=n*W),y+=38*(M+=n*z),g+=38*(R+=n*J),v+=38*(P+=n*V),m+=38*(j+=n*G),b+=38*(L+=n*Z),s=(n=(s+=38*(_+=n*U))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),i=(n=i+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),w=(n=w+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=(s+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),i=(n=i+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),w=(n=w+o+65535)-65536*(o=Math.floor(n/65536)),s+=o-1+37*(o-1),e[0]=s,e[1]=i,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=f,e[8]=d,e[9]=p,e[10]=y,e[11]=g,e[12]=v,e[13]=m,e[14]=b,e[15]=w}function D(e,t){I(e,t,t)}function B(e,r){var n,o=t();for(n=0;n<16;n++)o[n]=r[n];for(n=253;n>=0;n--)D(o,o),2!==n&&4!==n&&I(o,o,r);for(n=0;n<16;n++)e[n]=o[n]}function q(e,r){var n,o=t();for(n=0;n<16;n++)o[n]=r[n];for(n=250;n>=0;n--)D(o,o),1!==n&&I(o,o,r);for(n=0;n<16;n++)e[n]=o[n]}function K(e,r,n){var o,s,i=new Uint8Array(32),c=new Float64Array(80),l=t(),u=t(),h=t(),f=t(),d=t(),p=t();for(s=0;s<31;s++)i[s]=r[s];for(i[31]=127&r[31]|64,i[0]&=248,L(c,n),s=0;s<16;s++)u[s]=c[s],f[s]=l[s]=h[s]=0;for(l[0]=f[0]=1,s=254;s>=0;--s)M(l,u,o=i[s>>>3]>>>(7&s)&1),M(h,f,o),N(d,l,h),U(l,l,h),N(h,u,f),U(u,u,f),D(f,d),D(p,l),I(l,h,l),I(h,u,d),N(d,l,h),U(l,l,h),D(u,l),U(h,f,p),I(l,h,a),N(l,l,f),I(h,h,l),I(l,f,p),I(f,u,c),D(u,d),M(l,u,o),M(h,f,o);for(s=0;s<16;s++)c[s+16]=l[s],c[s+32]=h[s],c[s+48]=u[s],c[s+64]=f[s];var y=c.subarray(32),g=c.subarray(16);return B(y,y),I(g,g,y),R(e,g),0}function H(e,t){return K(e,t,o)}function Y(e,t){return r(t,32),H(e,t)}function F(e,t,r){var o=new Uint8Array(32);return K(o,r,t),m(e,n,o,b)}E.prototype.blocks=function(e,t,r){for(var n,o,s,i,a,c,l,u,h,f,d,p,y,g,v,m,b,w,_,A=this.fin?0:2048,x=this.h[0],E=this.h[1],S=this.h[2],O=this.h[3],k=this.h[4],T=this.h[5],C=this.h[6],$=this.h[7],M=this.h[8],R=this.h[9],P=this.r[0],j=this.r[1],L=this.r[2],N=this.r[3],U=this.r[4],I=this.r[5],D=this.r[6],B=this.r[7],q=this.r[8],K=this.r[9];r>=16;)f=h=0,f+=(x+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*P,f+=(E+=8191&(n>>>13|(o=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*K),f+=(S+=8191&(o>>>10|(s=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*q),f+=(O+=8191&(s>>>7|(i=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*B),h=(f+=(k+=8191&(i>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*D))>>>13,f&=8191,f+=(T+=a>>>1&8191)*(5*I),f+=(C+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*U),f+=($+=8191&(c>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*N),f+=(M+=8191&(l>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*L),d=h+=(f+=(R+=u>>>5|A)*(5*j))>>>13,d+=x*j,d+=E*P,d+=S*(5*K),d+=O*(5*q),h=(d+=k*(5*B))>>>13,d&=8191,d+=T*(5*D),d+=C*(5*I),d+=$*(5*U),d+=M*(5*N),h+=(d+=R*(5*L))>>>13,d&=8191,p=h,p+=x*L,p+=E*j,p+=S*P,p+=O*(5*K),h=(p+=k*(5*q))>>>13,p&=8191,p+=T*(5*B),p+=C*(5*D),p+=$*(5*I),p+=M*(5*U),y=h+=(p+=R*(5*N))>>>13,y+=x*N,y+=E*L,y+=S*j,y+=O*P,h=(y+=k*(5*K))>>>13,y&=8191,y+=T*(5*q),y+=C*(5*B),y+=$*(5*D),y+=M*(5*I),g=h+=(y+=R*(5*U))>>>13,g+=x*U,g+=E*N,g+=S*L,g+=O*j,h=(g+=k*P)>>>13,g&=8191,g+=T*(5*K),g+=C*(5*q),g+=$*(5*B),g+=M*(5*D),v=h+=(g+=R*(5*I))>>>13,v+=x*I,v+=E*U,v+=S*N,v+=O*L,h=(v+=k*j)>>>13,v&=8191,v+=T*P,v+=C*(5*K),v+=$*(5*q),v+=M*(5*B),m=h+=(v+=R*(5*D))>>>13,m+=x*D,m+=E*I,m+=S*U,m+=O*N,h=(m+=k*L)>>>13,m&=8191,m+=T*j,m+=C*P,m+=$*(5*K),m+=M*(5*q),b=h+=(m+=R*(5*B))>>>13,b+=x*B,b+=E*D,b+=S*I,b+=O*U,h=(b+=k*N)>>>13,b&=8191,b+=T*L,b+=C*j,b+=$*P,b+=M*(5*K),w=h+=(b+=R*(5*q))>>>13,w+=x*q,w+=E*B,w+=S*D,w+=O*I,h=(w+=k*U)>>>13,w&=8191,w+=T*N,w+=C*L,w+=$*j,w+=M*P,_=h+=(w+=R*(5*K))>>>13,_+=x*K,_+=E*q,_+=S*B,_+=O*D,h=(_+=k*I)>>>13,_&=8191,_+=T*U,_+=C*N,_+=$*L,_+=M*j,x=f=8191&(h=(h=((h+=(_+=R*P)>>>13)<<2)+h|0)+(f&=8191)|0),E=d+=h>>>=13,S=p&=8191,O=y&=8191,k=g&=8191,T=v&=8191,C=m&=8191,$=b&=8191,M=w&=8191,R=_&=8191,t+=16,r-=16;this.h[0]=x,this.h[1]=E,this.h[2]=S,this.h[3]=O,this.h[4]=k,this.h[5]=T,this.h[6]=C,this.h[7]=$,this.h[8]=M,this.h[9]=R},E.prototype.finish=function(e,t){var r,n,o,s,i=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=r,r=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,i[0]=this.h[0]+5,r=i[0]>>>13,i[0]&=8191,s=1;s<10;s++)i[s]=this.h[s]+r,r=i[s]>>>13,i[s]&=8191;for(i[9]-=8192,n=(1^r)-1,s=0;s<10;s++)i[s]&=n;for(n=~n,s=0;s<10;s++)this.h[s]=this.h[s]&n|i[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,s=1;s<8;s++)o=(this.h[s]+this.pad[s]|0)+(o>>>16)|0,this.h[s]=65535&o;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},E.prototype.update=function(e,t,r){var n,o;if(this.leftover){for((o=16-this.leftover)>r&&(o=r),n=0;n<o;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(o=r-r%16,this.blocks(e,t,o),t+=o,r-=o),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var W=k,z=T;var J=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function V(e,t,r,n){for(var o,s,i,a,c,l,u,h,f,d,p,y,g,v,m,b,w,_,A,x,E,S,O,k,T,C,$=new Int32Array(16),M=new Int32Array(16),R=e[0],P=e[1],j=e[2],L=e[3],N=e[4],U=e[5],I=e[6],D=e[7],B=t[0],q=t[1],K=t[2],H=t[3],Y=t[4],F=t[5],W=t[6],z=t[7],V=0;n>=128;){for(A=0;A<16;A++)x=8*A+V,$[A]=r[x+0]<<24|r[x+1]<<16|r[x+2]<<8|r[x+3],M[A]=r[x+4]<<24|r[x+5]<<16|r[x+6]<<8|r[x+7];for(A=0;A<80;A++)if(o=R,s=P,i=j,a=L,c=N,l=U,u=I,D,f=B,d=q,p=K,y=H,g=Y,v=F,m=W,z,O=65535&(S=z),k=S>>>16,T=65535&(E=D),C=E>>>16,O+=65535&(S=(Y>>>14|N<<18)^(Y>>>18|N<<14)^(N>>>9|Y<<23)),k+=S>>>16,T+=65535&(E=(N>>>14|Y<<18)^(N>>>18|Y<<14)^(Y>>>9|N<<23)),C+=E>>>16,O+=65535&(S=Y&F^~Y&W),k+=S>>>16,T+=65535&(E=N&U^~N&I),C+=E>>>16,O+=65535&(S=J[2*A+1]),k+=S>>>16,T+=65535&(E=J[2*A]),C+=E>>>16,E=$[A%16],k+=(S=M[A%16])>>>16,T+=65535&E,C+=E>>>16,T+=(k+=(O+=65535&S)>>>16)>>>16,O=65535&(S=_=65535&O|k<<16),k=S>>>16,T=65535&(E=w=65535&T|(C+=T>>>16)<<16),C=E>>>16,O+=65535&(S=(B>>>28|R<<4)^(R>>>2|B<<30)^(R>>>7|B<<25)),k+=S>>>16,T+=65535&(E=(R>>>28|B<<4)^(B>>>2|R<<30)^(B>>>7|R<<25)),C+=E>>>16,k+=(S=B&q^B&K^q&K)>>>16,T+=65535&(E=R&P^R&j^P&j),C+=E>>>16,h=65535&(T+=(k+=(O+=65535&S)>>>16)>>>16)|(C+=T>>>16)<<16,b=65535&O|k<<16,O=65535&(S=y),k=S>>>16,T=65535&(E=a),C=E>>>16,k+=(S=_)>>>16,T+=65535&(E=w),C+=E>>>16,P=o,j=s,L=i,N=a=65535&(T+=(k+=(O+=65535&S)>>>16)>>>16)|(C+=T>>>16)<<16,U=c,I=l,D=u,R=h,q=f,K=d,H=p,Y=y=65535&O|k<<16,F=g,W=v,z=m,B=b,A%16==15)for(x=0;x<16;x++)E=$[x],O=65535&(S=M[x]),k=S>>>16,T=65535&E,C=E>>>16,E=$[(x+9)%16],O+=65535&(S=M[(x+9)%16]),k+=S>>>16,T+=65535&E,C+=E>>>16,w=$[(x+1)%16],O+=65535&(S=((_=M[(x+1)%16])>>>1|w<<31)^(_>>>8|w<<24)^(_>>>7|w<<25)),k+=S>>>16,T+=65535&(E=(w>>>1|_<<31)^(w>>>8|_<<24)^w>>>7),C+=E>>>16,w=$[(x+14)%16],k+=(S=((_=M[(x+14)%16])>>>19|w<<13)^(w>>>29|_<<3)^(_>>>6|w<<26))>>>16,T+=65535&(E=(w>>>19|_<<13)^(_>>>29|w<<3)^w>>>6),C+=E>>>16,C+=(T+=(k+=(O+=65535&S)>>>16)>>>16)>>>16,$[x]=65535&T|C<<16,M[x]=65535&O|k<<16;O=65535&(S=B),k=S>>>16,T=65535&(E=R),C=E>>>16,E=e[0],k+=(S=t[0])>>>16,T+=65535&E,C+=E>>>16,C+=(T+=(k+=(O+=65535&S)>>>16)>>>16)>>>16,e[0]=R=65535&T|C<<16,t[0]=B=65535&O|k<<16,O=65535&(S=q),k=S>>>16,T=65535&(E=P),C=E>>>16,E=e[1],k+=(S=t[1])>>>16,T+=65535&E,C+=E>>>16,C+=(T+=(k+=(O+=65535&S)>>>16)>>>16)>>>16,e[1]=P=65535&T|C<<16,t[1]=q=65535&O|k<<16,O=65535&(S=K),k=S>>>16,T=65535&(E=j),C=E>>>16,E=e[2],k+=(S=t[2])>>>16,T+=65535&E,C+=E>>>16,C+=(T+=(k+=(O+=65535&S)>>>16)>>>16)>>>16,e[2]=j=65535&T|C<<16,t[2]=K=65535&O|k<<16,O=65535&(S=H),k=S>>>16,T=65535&(E=L),C=E>>>16,E=e[3],k+=(S=t[3])>>>16,T+=65535&E,C+=E>>>16,C+=(T+=(k+=(O+=65535&S)>>>16)>>>16)>>>16,e[3]=L=65535&T|C<<16,t[3]=H=65535&O|k<<16,O=65535&(S=Y),k=S>>>16,T=65535&(E=N),C=E>>>16,E=e[4],k+=(S=t[4])>>>16,T+=65535&E,C+=E>>>16,C+=(T+=(k+=(O+=65535&S)>>>16)>>>16)>>>16,e[4]=N=65535&T|C<<16,t[4]=Y=65535&O|k<<16,O=65535&(S=F),k=S>>>16,T=65535&(E=U),C=E>>>16,E=e[5],k+=(S=t[5])>>>16,T+=65535&E,C+=E>>>16,C+=(T+=(k+=(O+=65535&S)>>>16)>>>16)>>>16,e[5]=U=65535&T|C<<16,t[5]=F=65535&O|k<<16,O=65535&(S=W),k=S>>>16,T=65535&(E=I),C=E>>>16,E=e[6],k+=(S=t[6])>>>16,T+=65535&E,C+=E>>>16,C+=(T+=(k+=(O+=65535&S)>>>16)>>>16)>>>16,e[6]=I=65535&T|C<<16,t[6]=W=65535&O|k<<16,O=65535&(S=z),k=S>>>16,T=65535&(E=D),C=E>>>16,E=e[7],k+=(S=t[7])>>>16,T+=65535&E,C+=E>>>16,C+=(T+=(k+=(O+=65535&S)>>>16)>>>16)>>>16,e[7]=D=65535&T|C<<16,t[7]=z=65535&O|k<<16,V+=128,n-=128}return n}function G(e,t,r){var n,o=new Int32Array(8),s=new Int32Array(8),i=new Uint8Array(256),a=r;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,V(o,s,t,r),r%=128,n=0;n<r;n++)i[n]=t[a-r+n];for(i[r]=128,i[(r=256-128*(r<112?1:0))-9]=0,d(i,r-8,a/536870912|0,a<<3),V(o,s,i,r),n=0;n<8;n++)d(e,8*n,o[n],s[n]);return 0}function Z(e,r){var n=t(),o=t(),s=t(),i=t(),a=t(),c=t(),u=t(),h=t(),f=t();U(n,e[1],e[0]),U(f,r[1],r[0]),I(n,n,f),N(o,e[0],e[1]),N(f,r[0],r[1]),I(o,o,f),I(s,e[3],r[3]),I(s,s,l),I(i,e[2],r[2]),N(i,i,i),U(a,o,n),U(c,i,s),N(u,i,s),N(h,o,n),I(e[0],a,c),I(e[1],h,u),I(e[2],u,c),I(e[3],a,h)}function Q(e,t,r){var n;for(n=0;n<4;n++)M(e[n],t[n],r)}function X(e,r){var n=t(),o=t(),s=t();B(s,r[2]),I(n,r[0],s),I(o,r[1],s),R(e,o),e[31]^=j(n)<<7}function ee(e,t,r){var n,o;for(C(e[0],s),C(e[1],i),C(e[2],i),C(e[3],s),o=255;o>=0;--o)Q(e,t,n=r[o/8|0]>>(7&o)&1),Z(t,e),Z(e,e),Q(e,t,n)}function te(e,r){var n=[t(),t(),t(),t()];C(n[0],u),C(n[1],h),C(n[2],i),I(n[3],u,h),ee(e,n,r)}function re(e,n,o){var s,i=new Uint8Array(64),a=[t(),t(),t(),t()];for(o||r(n,32),G(i,n,32),i[0]&=248,i[31]&=127,i[31]|=64,te(a,i),X(e,a),s=0;s<32;s++)n[s+32]=e[s];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var r,n,o,s;for(n=63;n>=32;--n){for(r=0,o=n-32,s=n-12;o<s;++o)t[o]+=r-16*t[n]*ne[o-(n-32)],r=Math.floor((t[o]+128)/256),t[o]-=256*r;t[o]+=r,t[n]=0}for(r=0,o=0;o<32;o++)t[o]+=r-(t[31]>>4)*ne[o],r=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=r*ne[o];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function se(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,r)}function ie(e,r,n,o){var s,i,a=new Uint8Array(64),c=new Uint8Array(64),l=new Uint8Array(64),u=new Float64Array(64),h=[t(),t(),t(),t()];G(a,o,32),a[0]&=248,a[31]&=127,a[31]|=64;var f=n+64;for(s=0;s<n;s++)e[64+s]=r[s];for(s=0;s<32;s++)e[32+s]=a[32+s];for(G(l,e.subarray(32),n+32),se(l),te(h,l),X(e,h),s=32;s<64;s++)e[s]=o[s];for(G(c,e,n+64),se(c),s=0;s<64;s++)u[s]=0;for(s=0;s<32;s++)u[s]=l[s];for(s=0;s<32;s++)for(i=0;i<32;i++)u[s+i]+=c[s]*a[i];return oe(e.subarray(32),u),f}function ae(e,r,n,o){var a,l=new Uint8Array(32),u=new Uint8Array(64),h=[t(),t(),t(),t()],d=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),o=t(),a=t(),l=t(),u=t(),h=t(),d=t();return C(e[2],i),L(e[1],r),D(a,e[1]),I(l,a,c),U(a,a,e[2]),N(l,e[2],l),D(u,l),D(h,u),I(d,h,u),I(n,d,a),I(n,n,l),q(n,n),I(n,n,a),I(n,n,l),I(n,n,l),I(e[0],n,l),D(o,e[0]),I(o,o,l),P(o,a)&&I(e[0],e[0],f),D(o,e[0]),I(o,o,l),P(o,a)?-1:(j(e[0])===r[31]>>7&&U(e[0],s,e[0]),I(e[3],e[0],e[1]),0)}(d,o))return-1;for(a=0;a<n;a++)e[a]=r[a];for(a=0;a<32;a++)e[a+32]=o[a];if(G(u,e,n),se(u),ee(h,d,u),te(d,r.subarray(32)),Z(h,d),X(l,h),n-=64,g(r,0,l,0)){for(a=0;a<n;a++)e[a]=0;return-1}for(a=0;a<n;a++)e[a]=r[a+64];return n}function ce(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function le(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ue(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:m,crypto_stream_xor:x,crypto_stream:A,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:_,crypto_onetimeauth:S,crypto_onetimeauth_verify:O,crypto_verify_16:y,crypto_verify_32:g,crypto_secretbox:k,crypto_secretbox_open:T,crypto_scalarmult:K,crypto_scalarmult_base:H,crypto_box_beforenm:F,crypto_box_afternm:W,crypto_box:function(e,t,r,n,o,s){var i=new Uint8Array(32);return F(i,o,s),W(e,t,r,n,i)},crypto_box_open:function(e,t,r,n,o,s){var i=new Uint8Array(32);return F(i,o,s),z(e,t,r,n,i)},crypto_box_keypair:Y,crypto_hash:G,crypto_sign:ie,crypto_sign_keypair:re,crypto_sign_open:ae,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:c,L:ne,pack25519:R,unpack25519:L,M:I,A:N,S:D,Z:U,pow2523:q,add:Z,set25519:C,modL:oe,scalarmult:ee,scalarbase:te},e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,r){le(e,t,r),ce(r,t);for(var n=new Uint8Array(32+e.length),o=new Uint8Array(n.length),s=0;s<e.length;s++)n[s+32]=e[s];return k(o,n,n.length,t,r),o.subarray(16)},e.secretbox.open=function(e,t,r){le(e,t,r),ce(r,t);for(var n=new Uint8Array(16+e.length),o=new Uint8Array(n.length),s=0;s<e.length;s++)n[s+16]=e[s];return n.length<32||0!==T(o,n,n.length,t,r)?null:o.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(le(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return K(r,e,t),r},e.scalarMult.base=function(e){if(le(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return H(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,o){var s=e.box.before(n,o);return e.secretbox(t,r,s)},e.box.before=function(e,t){le(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return F(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,o){var s=e.box.before(n,o);return e.secretbox.open(t,r,s)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return Y(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(le(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return H(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(le(e,t),64!==t.length)throw new Error("bad secret key size");var r=new Uint8Array(64+e.length);return ie(r,e,e.length,t),r},e.sign.open=function(e,t){if(le(e,t),32!==t.length)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ae(r,e,e.length,t);if(n<0)return null;for(var o=new Uint8Array(n),s=0;s<o.length;s++)o[s]=r[s];return o},e.sign.detached=function(t,r){for(var n=e.sign(t,r),o=new Uint8Array(64),s=0;s<o.length;s++)o[s]=n[s];return o},e.sign.detached.verify=function(e,t,r){if(le(e,t,r),64!==t.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var n,o=new Uint8Array(64+e.length),s=new Uint8Array(64+e.length);for(n=0;n<64;n++)o[n]=t[n];for(n=0;n<e.length;n++)o[n+64]=e[n];return ae(s,o,o.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(le(e),64!==e.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(le(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=e[n];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){le(e);var t=new Uint8Array(64);return G(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return le(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===p(e,0,t,0,e.length))},e.setPRNG=function(e){r=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,r){var n,o=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(o.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=o[n];ue(o)}))}else void 0!==he&&(t=de)&&t.randomBytes&&e.setPRNG((function(e,r){var n,o=t.randomBytes(r);for(n=0;n<r;n++)e[n]=o[n];ue(o)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})})),ye=ue((function(e){var t,r;t=le,r=function(){var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n},e.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==Buffer.from?(e.encodeBase64=function(e){return Buffer.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(Buffer.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new Buffer(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new Buffer(e,"base64"),0))}):(e.encodeBase64=function(e){var t,r=[],n=e.length;for(t=0;t<n;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},e.decodeBase64=function(e){t(e);var r,n=atob(e),o=new Uint8Array(n.length);for(r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return o}),e},e.exports?e.exports=r():(t.nacl||(t.nacl={}),t.nacl.util=r())}));function ge(){}class ve{constructor(e,t,r){this.prev=e,this.next=t,this.fn=r||ge}run(e){this.fn(e),this.next&&this.next.run(e)}}class me{constructor(e){this.head=new ve,this.tail=new ve(this.head),this.head.next=this.tail,this.linkConstructor=e,this.reg={}}insert(e){const t=new ve(this.tail.prev,this.tail,e);return t.next.prev=t,t.prev.next=t,t}remove(e){e.prev.next=e.next,e.next.prev=e.prev}}let be=0;const we=/[\s,]+/g;class _e{constructor(){this.events={}}on(e,t){const r=this;e.split(we).forEach(e=>{const n=r.events[e]||(r.events[e]=new me),o=t._eev||(t._eev=++be);n.reg[o]||(n.reg[o]=n.insert(t))})}off(e,t){const r=this;t&&e.split(we).forEach((function(e){const n=r.events[e];if(!n)return;const o=n.reg[t._eev];n.reg[t._eev]=void 0,n&&o&&n.remove(o)}))}removeListener(...e){this.off(...e)}emit(e,t){const r=this.events[e];r&&r.head.run(t)}}function Ae(e){console.log(`${(new Date).toLocaleString()} → ${e}`)}function xe(e){return Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join("")}function Ee(e,t=8){const r=new Array(t).fill(0);for(let t=0;t<r.length;t++){const n=255&e;r[t]=n,e=(e-n)/256}return r}function Se({data:e,connector:t}){var r;null!=(r=e)&&r.constructor==Object&&(e=JSON.stringify(e));const n=new Uint8Array(Ee(2*t.sentCount,24));if(t.closed())console.log(`Warning: "${e}" was not sent because connector was not yet connected!`);else if(t.sentCount>1){let r=0;"string"==typeof e&&(r=1);const o=function(e,t){const r=new Uint8Array(e.length+1),n=new Uint8Array(1);return n[0]=t,r.set(n),r.set(e,n.length),r}(1==r?pe.util.decodeUTF8(e):e,r),s=pe.secretbox(o,n,t.sharedSecret);t.verbose&&(console.log(),console.log(`Connector → Sending encrypted message #${t.sentCount} @ ${t.address}:`),console.log(e)),t.connection.websocket.send(s)}else t.verbose&&(console.log(),console.log(`Connector → Sending message #${t.sentCount} @ ${t.address}:`),console.log(e)),t.connection.websocket.send(e)}function Oe({jsonData:e,encryptedData:t,rawMessage:r,wasEncrypted:n,connector:o}){const s=new Uint8Array(Ee(2*o.receivedCount+1,24));if(o.verbose&&!n&&(console.log(),console.log(`Connector → Received message #${o.receivedCount} @ ${o.address}:`)),e)e.jsonrpc?!function(e){return Object.keys(e).includes("result")||Object.keys(e).includes("error")}(e)?o.emit("json_rpc",r):(o.verbose&&!n&&(console.log("Received plain-text rpc result"),console.log(e)),o.rpcClient.jsonrpcMsgReceive(r)):o.emit("wire_receive",{jsonData:e,rawMessage:r});else if(t){"extra"==o.verbose&&(console.log("Received bytes:"),console.log(t),console.log(`Decrypting with shared secret ${o.sharedSecret}...`));const e=pe.secretbox.open(t,s,o.sharedSecret),r=e[0],n=e.subarray(1);if(1==r){const e=pe.util.encodeUTF8(n);try{const t=JSON.parse(e);if(t.jsonrpc)o.verbose&&(console.log("Received and decrypted rpc result:"),console.log(t)),Oe({jsonData:t,rawMessage:e,wasEncrypted:!0,connector:o});else if(t.tag){const r=t;"file_not_found"==r.tag||"binary_start"==r.tag?o.emit(r.tag,{...r,tag:void 0}):"binary_end"==r.tag?o.emit(r.tag,{sessionId:r.sessionId}):o.emit("wire_receive",{jsonData:t,rawMessage:e})}else o.emit("wire_receive",{jsonData:t,rawMessage:e})}catch(e){throw console.log("Couldn't parse json message although the flag was for string ..."),e}}else{const e=n,t=Buffer.from(e.buffer,e.byteOffset,64).toString(),r=Buffer.from(e.buffer,e.byteOffset+64);o.emit("binary_data",{sessionId:t,data:r})}}}pe.util=ye,pe.util=ye;class ke extends _e{constructor(e){super(),this.connector=e}send(...e){this.connector.send(...e)}}var Te=-32700,Ce=-32600,$e=-32601,Me=-32602,Re=-32603;class Pe{constructor({transports:e}){if(!e)throw new Error("TRANSPORT_REQUIRED");this.transportsToRegister=e,this.methods={}}setMethodPrefix(e){this.methodPrefix=e}expose(e){this.methods=e}registerTransport(e){e.onData(this._processRequest.bind(this,e))}async _processRequest(e,t){const r=JSON.parse(t);let n;return n=Array.isArray(r)?await Promise.all(r.map(t=>this._callMethod(t,e))):await this._callMethod(r,e),JSON.stringify(n)}async _callMethod(e,t){if(!e.hasOwnProperty("method"))return;const{method:r,params:n=[],id:o}=e;let s=r;if(s.includes("::")){const[e,t]=s.split("::");if(s=t,this.methodPrefix&&e!=this.methodPrefix)return}let i={};if(!this.methods[s]||"function"!=typeof this.methods[s]||"constructor"===s||s.startsWith("_")||this.methods[s]===Object.prototype[s])i={jsonrpc:"2.0",id:o,error:{code:$e,message:`Method [${s}] not found on remote target object`}};else{this.currentTransport=t;try{const e=await this.methods[s].apply(this.methods,n);if(!o)return;i={jsonrpc:"2.0",result:void 0===e?null:e,id:o}}catch(e){console.log(`Exposed RPC method ${r} internal error:`),console.log(e),console.log("Sending this error as a result to calling client ..."),i={jsonrpc:"2.0",error:{code:Re,message:`Method [${r}] internal error: ${e.stack}`},id:o}}}return i}run(){for(const e of this.transportsToRegister)this.registerTransport(e);this.transportsToRegister=[]}}class je extends Error{constructor(e={}){if(super(),!e.code)throw new Error("Code required");if(!e.message)throw new Error("Message required");this.code=e.code,this.message=e.message}}class Le extends je{}var Ne={Base:je,MethodNotFound:class extends je{constructor(e){super({code:$e,message:e||"Method not found"})}},InvalidRequest:class extends je{constructor(){super({code:Ce,message:"Invalid request"})}},InvalidParams:class extends je{constructor(){super({code:Me,message:"Invalid params"})}},RemoteInternalError:class extends je{constructor(e){super({code:Re,message:"Error originating at remote endpoint: "+e||"Remote Internal error"})}},ServerError:Le,ParseError:class extends je{constructor(){super({code:Te,message:"Parse error"})}},RequestTimeout:class extends Le{constructor(e){super({code:-32001,message:"Request exceeded maximum execution time "+e})}}};class Ue{constructor({transport:e,requestTimeout:t=2e4}){if(!e)throw new Error("TRANSPORT_REQUIRED");this.transport=e,this.requestTimeout=t,this.pendingRequest={},this.initialized=!1}setMethodPrefix(e){this.methodPrefix=e}async callMethod(e,t){this._init();const r=this.methodPrefix?`${this.methodPrefix}::${e}`:e,n=this._makeRequestObject({method:r,params:t});return this._sendRequest({object:n,id:n.id})}notify(e,t){this._init();const r=this._makeRequestObject({method:e,params:t,mode:"notify"});return this.transport.sendData(JSON.stringify(r)),!0}async runBatch(e){const t=this._generateId();let r=!0;const n=[];for(const[o,s,i]of e){const e=this._makeRequestObject({method:o,params:s,mode:i,batchId:t});e.id&&(r=!1),n.push(e)}return r?this.transport.sendData(JSON.stringify(n)):this._sendRequest({object:n,id:t})}_init(){this.initialized||(this.transport.onData(this._processResponse.bind(this)),this.initialized=!0)}_sendRequest({object:e,id:t}){const r=JSON.stringify(e);return new Promise((n,o)=>{this.pendingRequest[t]={resolve:n,reject:o,sentObject:e},setTimeout(()=>{this.pendingRequest[t]&&(delete this.pendingRequest[t],o(new Ne.RequestTimeout(r)))},this.requestTimeout);try{this.transport.sendData(r)}catch(e){delete this.pendingRequest[t],o(e)}})}_processResponse(e){const t=JSON.parse(e);Array.isArray(t)?this._processBatchResponse(t):this._processSingleCallResponse(t)}_processSingleCallResponse(e){const t=e.hasOwnProperty("result")||!1,r=e.hasOwnProperty("error");if(!t&&!r)return;const n=this.pendingRequest[e.id];if(delete this.pendingRequest[e.id],n)if(t)n.resolve(e.result);else if(r){const t=this._makeErrorObject(e.error);n.reject(t)}}_processBatchResponse(e){let t;const r={},n=[];for(const o of e)o.id?(t||(t=o.id.split("|")[0]),r[o.id]=o):o.error&&n.push(o.error);if(!this.pendingRequest[t])return;const{sentObject:o,resolve:s}=this.pendingRequest[t];delete this.pendingRequest[t];const i=[];let a=0;for(const e of o){if(!e.id){i.push(null);continue}const t=r[e.id];if(t){t.hasOwnProperty("result")||!1?i.push({success:!0,result:t.result}):i.push({success:!1,result:this._makeErrorObject(t.error)})}else i.push({success:!1,error:this._makeErrorObject(n[a])}),a++}s(i)}_makeRequestObject({method:e,params:t,mode:r,batchId:n}){const o={jsonrpc:"2.0",method:e};return t&&t.length&&(o.params=t),"notify"!==r&&(o.id=n?`${n}|${this._generateId()}`:this._generateId()),o}_makeErrorObject(e){return(0,{[$e]:()=>new Ne.MethodNotFound(e.message),[Re]:()=>new Ne.RemoteInternalError(e.message)}[e.code])()}_generateId(){let e=10,t="";for(;0<e--;)t+="bjectSymhasOwnProp-0123456789ABCDEFGHIJKLMNQRTUVWXYZ_dfgiklquvxz"[64*Math.random()|0];return t}}function Ie(e){return new Proxy(e,{get:(e,t)=>(...r)=>e.call(null,t,r),apply:(e,t,r)=>e.apply(null,r)})}class De{constructor(e){this.channel=e}onData(e){this.channel.on("json_rpc",async t=>{const r=await e(t);r&&this.channel.send(r)})}}var Be=Object.freeze({__proto__:null,MoleServer:Pe,MoleClient:Ue,MoleClientProxified:class extends Ue{constructor(...e){return super(...e),function(e){const t=Ie(e.callMethod.bind(e)),r=Ie(e.notify.bind(e));return new Proxy(e,{get:(n,o)=>"notify"===o?r:"callMethod"===o?t:"then"!==o?"setMethodPrefix"===o?(...t)=>e.setMethodPrefix(t):(...e)=>n.callMethod.call(n,o,e):void 0})}(this)}},ClientTransport:class{constructor(e){this.channel=e}onData(e){this.channel.on("json_rpc",e)}sendData(e){this.channel.send(e)}},ServerTransport:De});class qe extends Error{constructor(e,t){super(e),this.name=this.constructor.name,this.errorCode=t}errorCode(){return this.errorCode}}const{MoleClient:Ke,ClientTransport:He}=Be;class Ye{constructor(e,t,r){this.moleChannel=new ke(e),this.methodPrefix=t,this.connectorOrServersideChannel=e,this.client=new Ke({requestTimeout:r,transport:new He(this.moleChannel)})}jsonrpcMsgReceive(e){this.moleChannel.emit("json_rpc",e)}call(e,t){return this.connectorOrServersideChannel.closed()?new Promise((t,r)=>{r(new qe(`Method call [${e}] on closed channel or connector ignored. Please add a check for closed channel in your code.`,"CLOSED_CHANNEL"))}):this.client.callMethod(`${this.methodPrefix}::${e}`,t)}}class Fe{constructor(e,t){this.connectorOrServersideChannel=e,this.remoteObjects={},this.requestTimeout=t||5e3}remoteObject(e){return this.remoteObjects[e]||(this.remoteObjects[e]=new Ye(this.connectorOrServersideChannel,e,this.requestTimeout)),this.remoteObjects[e]}jsonrpcMsgReceive(e){for(const t of Object.values(this.remoteObjects))t.jsonrpcMsgReceive(e)}}class We{constructor({serversideChannel:e,serverMethods:t,methodPrefix:r}){const n=[new De(e)];this.server=new Pe({transports:n}),this.server.expose(t),this.server.setMethodPrefix(r),this.server.run()}}pe.util=ye;class ze extends _e{constructor({protocolLane:e,clientPrivateKey:t,clientPublicKey:r,rpcRequestTimeout:n,verbose:o=!1,address:s}={}){super(),this.protocolLane=e,this.clientPrivateKey=t,this.clientPublicKey=r,this.clientPublicKeyHex=xe(r),this.rpcClient=new Fe(this,n),this.address=s,this.verbose=o,this.sentCount=0,this.receivedCount=0,this.successfulConnectsCount=0}send(e){Se({data:e,connector:this}),this.sentCount+=1}wireReceive({jsonData:e,encryptedData:t,rawMessage:r}){Oe({jsonData:e,encryptedData:t,rawMessage:r,connector:this}),this.receivedCount+=1}isReady(){return this.ready}closed(){return!this.connected}decommission(){this.decommissioned=!0}connectStatus(e){if(e){this.sentCount=0,this.receivedCount=0,this.connected=!0,console.log(`Connector ${this.address} CONNECTED`),this.successfulConnectsCount+=1;const e=this.successfulConnectsCount;this.diffieHellman({clientPrivateKey:this.clientPrivateKey,clientPublicKey:this.clientPublicKey,protocolLane:this.protocolLane}).then(({sharedSecret:e,sharedSecretHex:t})=>{this.ready=!0,this.emit("ready",{sharedSecret:e,sharedSecretHex:t}),console.log(`Connector ${this.address} READY`)}).catch(t=>{e==this.successfulConnectsCount&&(console.log(t),console.log("dropping connection and retrying again"),this.connection.terminate())})}else this.connected&&this.emit("disconnected"),console.log(`Connector ${this.address} DISCONNECTED, setting READY to false`),this.connected=!1,this.ready=!1}remoteObject(e){return{call:(t,r=[])=>{return this.rpcClient.remoteObject(e).call(t,void 0===(n=r)||null==n?[]:Array.isArray(n)?n:[n]);var n}}}registerRemoteObject(e,t){new We({serversideChannel:this,serverMethods:t,methodPrefix:e})}diffieHellman({clientPrivateKey:e,clientPublicKey:t,protocolLane:r}){return new Promise((t,n)=>{this.remoteObject("Auth").call("exchangePubkeys",{pubkey:this.clientPublicKeyHex}).then(o=>{const s=pe.box.before(function(e){const t=e.match(/.{1,2}(?=(.{2})+(?!.))|.{1,2}$/g);return new Uint8Array(t.map(e=>parseInt(e,16)))}(o),e),i=xe(s);this.sharedSecret=s,this.remotePubkeyHex=o,t({sharedSecret:s,sharedSecretHex:i}),this.verbose&&(console.log("Established shared secret through diffie-hellman exchange:"),console.log(i)),this.remoteObject("Auth").call("finalizeHandshake",{protocolLane:r}).then(()=>{}).catch(n)}).catch(n)})}clientPubkey(){return this.clientPublicKeyHex}remotePubkey(){return this.remotePubkeyHex}remoteIp(){return this.address}}const Je="undefined"!=typeof window;function Ve({address:e,ssl:t=!1,port:r,protocol:n,protocolLane:o,rpcRequestTimeout:s,clientPrivateKey:i,clientPublicKey:a,remotePubkey:c,verbose:l},{WebSocket:u,log:h}){const f=t?"wss":"ws",d=r.toString().startsWith("/")?`${f}://${e}${r}`:`${f}://${e}:${r}`;h(`Trying to connect to ws endpoint ${d} ...`);const p=new ze({address:e,protocolLane:o,rpcRequestTimeout:s,clientPrivateKey:i,clientPublicKey:a,verbose:l});if(p.connection)return p;p.connection={terminate(){this.websocket._removeAllCallbacks(),this.websocket.close(),p.connectStatus(!1)},endpoint:d,checkTicker:0},setTimeout(()=>Ge({connector:p,endpoint:d,protocol:n},{WebSocket:u,log:h}),10);const y=()=>{p.decommissioned||(!function({connector:e,endpoint:t,protocol:r},{WebSocket:n,log:o}){const s=e.connection;if(Qe(s)||e.decommissioned)return Qe(s)?o(`Connection ${e.connection.endpoint} became idle, closing websocket ${s.websocket.rand}`):o(`Connection ${e.connection.endpoint} decommisioned, closing websocket ${s.websocket.rand}, will not retry again `),void s.terminate();Ze(s)?s.websocket.send("ping"):(null==e.connected&&(o("Setting connector status to FALSE because connector.connected is undefined"),e.connectStatus(!1)),Ge({connector:e,endpoint:t,protocol:r},{WebSocket:n,log:o}));s.checkTicker+=1}({connector:p,endpoint:d,protocol:n},{WebSocket:u,log:h}),setTimeout(y,1500))};return setTimeout(y,1500),p}function Ge({connector:e,endpoint:t,protocol:r},{WebSocket:n,log:o}){const s=e.connection;if(s.currentlyTryingWS&&0==s.currentlyTryingWS.readyState){if(3!=s.currentlyTryingWS._waitForConnectCounter)return void(s.currentlyTryingWS._waitForConnectCounter+=1);s.currentlyTryingWS._removeAllCallbacks(),s.currentlyTryingWS.close()}const i=new n(t,r);s.currentlyTryingWS=i,s.currentlyTryingWS._waitForConnectCounter=0,i.rand=Math.random(),o(`Created new WebSocket ${i.rand} for endpoint ${t}`),Je&&(i.binaryType="arraybuffer"),Je||i.on("error",e=>{});const a=r=>{o(`websocket ${i.rand} conn to ${t} open`),s.currentlyTryingWS=null,s.checkTicker=0,function({ws:e,connector:t,openCallback:r},{log:n}){const o=t.connection,s=r=>{n(`websocket ${e.rand} conn ${t.connection.endpoint} error`),n(r)},i=r=>{n(`websocket ${e.rand} conn ${t.connection.endpoint} closed`),t.connectStatus(!1)},a=e=>{o.checkTicker=0;const r=Je?e.data:e;if("pong"==r)return;let n;try{n=JSON.parse(r)}catch(e){}if(n)t.wireReceive({jsonData:n,rawMessage:r});else{const e=Je?new Uint8Array(r):r;t.wireReceive({encryptedData:e})}};e._removeAllCallbacks=()=>{e.removeEventListener("error",s),e.removeEventListener("close",i),e.removeEventListener("message",a),e.removeEventListener("open",r)},Je?(e.addEventListener("error",s),e.addEventListener("close",i),e.addEventListener("message",a)):(e.on("error",s),e.on("close",i),e.on("message",a))}({ws:i,connector:e,openCallback:a},{log:o}),s.websocket=i,e.connectStatus(!0)};i._removeAllCallbacks=()=>{i.removeEventListener("open",a)},Je?i.addEventListener("open",a):i.on("open",a)}function Ze(e){return e.websocket&&1==e.websocket.readyState}function Qe(e){return Ze(e)&&e.checkTicker>5}pe.util=ye,pe.util=ye,pe.util=ye,pe.util=ye;const{applyPatch:Xe}=ce;class et extends P{constructor({ip:e=null,ssl:t=!1,port:r,protocol:n,protocolLane:o,session:s,logStore:i,rpcRequestTimeout:a,rpcObjectsSetup:c,verbose:l}={}){super(),this.ssl=t,this.protocol=n,this.protocolLane=o,this.session=s,this.logStore=i,this.verbose=l,this.set({ip:e||window.location.hostname}),this.rpcRequestTimeout=a;const u=c?c({store:this}):{};this.connect(this.ip,r,u)}remoteObject(e){return this.connector.remoteObject(e)}connect(e,t,r){const n=this.session.privateKey,o=this.session.publicKey;var s;(s={address:e,ssl:this.ssl,port:t,protocol:this.protocol,protocolLane:this.protocolLane,clientPrivateKey:n,clientPublicKey:o,rpcRequestTimeout:this.rpcRequestTimeout,verbose:this.verbose},new Promise(e=>{e(Ve(s,{WebSocket:WebSocket,log:Ae}))})).then(e=>{this.connector=e;for(const[t,n]of Object.entries(r))e.registerRemoteObject(t,n);e.on("wire_receive",({jsonData:e})=>{e.state&&(this.wireStateReceived=!0,this.verbose&&(console.log(`New store ${this.ip} / ${this.protocol} / ${this.protocolLane} state:`),console.log(e.state)),this.set(e.state)),e.diff&&this.wireStateReceived&&(Xe(this.state,e.diff),this.pushStateToSubscribers())}),e.on("ready",({sharedSecret:e,sharedSecretHex:t})=>{this.connected||this.emit("connected"),this.set({connected:!0}),this.session.set({sharedSecret:e,sharedSecretHex:t})}),e.on("disconnected",()=>{this.set({connected:!1})})})}}var tt={SimpleStore:P,ConnectedStore:et,MultiConnectedStore:class extends P{constructor({port:e,protocol:t,protocolLane:r,session:n,initialIp:o}){super(),this.session=n,this.activeStoreId=0,this.currentIp=window.location.hostname,this.port=e,this.protocol=t,this.protocolLane=r,this.stores=[],this.switch({ip:this.currentIp}),o&&this.switch({ip:o})}remoteObject(e){return this.activeStore.remoteObject(e)}switch({deviceName:e,ip:t}){let r;if(this.stores.forEach((e,n)=>{e.ip==t&&(r=e)}),this.currentIp=t,!r){const e=new et({ip:t,port:this.port,protocol:this.protocol,protocolLane:this.protocolLane,session:this.session});r=e,e.subscribe(e=>{e.ip==this.currentIp&&this.set(e)}),this.stores.push(e)}this.set(r.state),this.activeStore=r}},ParallelStore:class extends P{constructor({session:e,port:t,protocol:r,addressList:n}){super(),this.stores=[];for(const{ip:o}of n)this.addStore({ip:o,port:t,protocol:r,session:e})}addStore({ip:e,port:t,protocol:r,session:n}){let o;if(this.stores.forEach((t,r)=>{t.ip==e&&(o=t)}),this.currentIp=e,!o){const s=new et({ip:e,port:t,protocol:r,session:n});o=s,s.subscribe(e=>{e.ip==this.currentIp&&this.set(e)}),this.stores.push(s)}this.set(o.state)}},SessionStore:class extends P{constructor({verbose:e=!1}={}){super(),this.verbose=e,this.constructOurKeypair()}constructOurKeypair(){const e=function(){const e=pe.box.keyPair(),t=xe(e.publicKey),r=xe(e.secretKey);return{privateKey:e.secretKey,publicKey:e.publicKey,privateKeyHex:r,publicKeyHex:t}}();this.set(e),this.verbose&&(console.log("Constructed new client keypair:"),console.log("Private key: "+e.privateKeyHex),console.log("Public key: "+e.publicKeyHex))}},LogStore:class extends P{constructor(){super(),this.set({log:[]})}addToLog({origConsoleLog:e,limit:t},...r){1==r.length&&(r=r[0]);let{log:n}=this.get();if("string"==typeof r)n.push(r);else try{n.push(""+JSON.stringify(r))}catch(e){n.push(r)}n=n.slice(-t),this.set({log:n}),this.emit("new_log_entry")}}};function rt(){}function nt(e){return e()}function ot(){return Object.create(null)}function st(e){e.forEach(nt)}function it(e){return"function"==typeof e}function at(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function ct(e,...t){if(null==e)return rt;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function lt(e,t){e.appendChild(t)}function ut(e,t,r){e.insertBefore(t,r||null)}function ht(e){e.parentNode.removeChild(e)}function ft(e){return document.createElement(e)}function dt(e){return document.createTextNode(e)}function pt(){return dt(" ")}function yt(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function gt(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function vt(e,t){t=""+t,e.data!==t&&(e.data=t)}function mt(e,t,r){e.classList[r?"add":"remove"](t)}let bt;function wt(e){bt=e}const _t=[],At=[],xt=[],Et=[],St=Promise.resolve();let Ot=!1;function kt(e){xt.push(e)}let Tt=!1;const Ct=new Set;function $t(){if(!Tt){Tt=!0;do{for(let e=0;e<_t.length;e+=1){const t=_t[e];wt(t),Mt(t.$$)}for(_t.length=0;At.length;)At.pop()();for(let e=0;e<xt.length;e+=1){const t=xt[e];Ct.has(t)||(Ct.add(t),t())}xt.length=0}while(_t.length);for(;Et.length;)Et.pop()();Ot=!1,Tt=!1,Ct.clear()}}function Mt(e){if(null!==e.fragment){e.update(),st(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(kt)}}const Rt=new Set;function Pt(e,t){e&&e.i&&(Rt.delete(e),e.i(t))}function jt(e,t,r){const{fragment:n,on_mount:o,on_destroy:s,after_update:i}=e.$$;n&&n.m(t,r),kt(()=>{const t=o.map(nt).filter(it);s?s.push(...t):st(t),e.$$.on_mount=[]}),i.forEach(kt)}function Lt(e,t){const r=e.$$;null!==r.fragment&&(st(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Nt(e,t){-1===e.$$.dirty[0]&&(_t.push(e),Ot||(Ot=!0,St.then($t)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ut(e,t,r,n,o,s,i=[-1]){const a=bt;wt(e);const c=t.props||{},l=e.$$={fragment:null,ctx:null,props:s,update:rt,not_equal:o,bound:ot(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:ot(),dirty:i};let u=!1;if(l.ctx=r?r(e,c,(t,r,...n)=>{const s=n.length?n[0]:r;return l.ctx&&o(l.ctx[t],l.ctx[t]=s)&&(l.bound[t]&&l.bound[t](s),u&&Nt(e,t)),r}):[],l.update(),u=!0,st(l.before_update),l.fragment=!!n&&n(l.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);l.fragment&&l.fragment.l(e),e.forEach(ht)}else l.fragment&&l.fragment.c();t.intro&&Pt(e.$$.fragment),jt(e,t.target,t.anchor),$t()}wt(a)}class It{$destroy(){Lt(this,1),this.$destroy=rt}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(){}}function Dt(e){let t;return{c(){t=ft("div"),t.innerHTML='<a href="/apps"><img src="/img/icons/home.png" class="svelte-1imf61r"></a>',gt(t,"class","escape svelte-1imf61r")},m(e,r){ut(e,t,r)},p:rt,i:rt,o:rt,d(e){e&&ht(t)}}}class Bt extends It{constructor(e){super(),Ut(this,e,null,Dt,at,{})}}function qt(e,t,r){const n=e.slice();return n[28]=t[r],n}function Kt(e){let t,r,n,o,s,i,a=e[4].deviceName+"",c=e[3]?"":"✖",l=e[5]&&Ht(e);return{c(){t=ft("h2"),r=dt(a),n=pt(),o=dt(c),s=pt(),l&&l.c(),i=dt(""),gt(t,"class","svelte-1q8p3xr"),mt(t,"faded",!e[3])},m(e,a){ut(e,t,a),lt(t,r),lt(t,n),lt(t,o),ut(e,s,a),l&&l.m(e,a),ut(e,i,a)},p(e,n){16&n&&a!==(a=e[4].deviceName+"")&&vt(r,a),8&n&&c!==(c=e[3]?"":"✖")&&vt(o,c),8&n&&mt(t,"faded",!e[3]),e[5]?l?l.p(e,n):(l=Ht(e),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(e){e&&ht(t),e&&ht(s),l&&l.d(e),e&&ht(i)}}}function Ht(e){let t,r,n,o,s,i,a,c,l,u,h,f,d,p,y,g,v,m,b,w,_,A,x,E,S,O,k,T,C,$,M,R,P,j,L,N,U,I,D,B,q,K=(e[5].limit||"")+"",H=(e[5].repeatCount||"")+"";function Y(e,t){return e[5].currentMedia&&e[5].currentMedia.song&&e[3]?Ft:e[3]?Yt:void 0}let F=Y(e),W=F&&F(e),z=e[3]&&Vt(e);function J(e,t){return e[5].paused?Zt:Gt}let V=J(e),G=V(e),Z=e[5].limit>0&&Qt(e);return{c(){t=ft("div"),W&&W.c(),r=pt(),z&&z.c(),n=pt(),o=ft("div"),G.c(),s=pt(),i=ft("button"),a=dt("Vol ↓"),l=pt(),u=ft("button"),h=dt("Vol ↑"),d=pt(),p=ft("div"),y=ft("button"),g=dt("Limit "),v=dt(K),b=pt(),Z&&Z.c(),w=pt(),_=ft("button"),A=dt("→ Next"),E=pt(),S=ft("button"),O=dt("Shuffle"),T=pt(),C=ft("button"),$=dt("Repeat "),M=dt(H),P=pt(),j=ft("button"),L=dt("↞ RWD"),U=pt(),I=ft("button"),D=dt("↠ FWD"),gt(t,"class","player_media section svelte-1q8p3xr"),gt(i,"class","volume svelte-1q8p3xr"),i.disabled=c=!e[3],gt(u,"class","volume svelte-1q8p3xr"),u.disabled=f=!e[3],gt(o,"class","player_controls section svelte-1q8p3xr"),gt(y,"class","limit svelte-1q8p3xr"),y.disabled=m=!e[3],gt(_,"class","next svelte-1q8p3xr"),_.disabled=x=!e[3],gt(S,"class","shuffle svelte-1q8p3xr"),S.disabled=k=!e[3],gt(C,"class","repeat svelte-1q8p3xr"),C.disabled=R=!e[3],gt(j,"class","backward svelte-1q8p3xr"),j.disabled=N=!e[3],gt(I,"class","forward svelte-1q8p3xr"),I.disabled=B=!e[3],gt(p,"class","player_more section svelte-1q8p3xr"),mt(p,"visible",e[2])},m(c,f,m){ut(c,t,f),W&&W.m(t,null),lt(t,r),z&&z.m(t,null),ut(c,n,f),ut(c,o,f),G.m(o,null),lt(o,s),lt(o,i),lt(i,a),lt(o,l),lt(o,u),lt(u,h),ut(c,d,f),ut(c,p,f),lt(p,y),lt(y,g),lt(y,v),lt(p,b),Z&&Z.m(p,null),lt(p,w),lt(p,_),lt(_,A),lt(p,E),lt(p,S),lt(S,O),lt(p,T),lt(p,C),lt(C,$),lt(C,M),lt(p,P),lt(p,j),lt(j,L),lt(p,U),lt(p,I),lt(I,D),m&&st(q),q=[yt(i,"click",e[19]),yt(u,"click",e[20]),yt(y,"click",e[21]),yt(_,"click",e[23]),yt(S,"click",e[24]),yt(C,"click",e[25]),yt(j,"click",e[26]),yt(I,"click",e[27])]},p(e,n){F===(F=Y(e))&&W?W.p(e,n):(W&&W.d(1),W=F&&F(e),W&&(W.c(),W.m(t,r))),e[3]?z?z.p(e,n):(z=Vt(e),z.c(),z.m(t,null)):z&&(z.d(1),z=null),V===(V=J(e))&&G?G.p(e,n):(G.d(1),G=V(e),G&&(G.c(),G.m(o,s))),8&n&&c!==(c=!e[3])&&(i.disabled=c),8&n&&f!==(f=!e[3])&&(u.disabled=f),32&n&&K!==(K=(e[5].limit||"")+"")&&vt(v,K),8&n&&m!==(m=!e[3])&&(y.disabled=m),e[5].limit>0?Z?Z.p(e,n):(Z=Qt(e),Z.c(),Z.m(p,w)):Z&&(Z.d(1),Z=null),8&n&&x!==(x=!e[3])&&(_.disabled=x),8&n&&k!==(k=!e[3])&&(S.disabled=k),32&n&&H!==(H=(e[5].repeatCount||"")+"")&&vt(M,H),8&n&&R!==(R=!e[3])&&(C.disabled=R),8&n&&N!==(N=!e[3])&&(j.disabled=N),8&n&&B!==(B=!e[3])&&(I.disabled=B),4&n&&mt(p,"visible",e[2])},d(e){e&&ht(t),W&&W.d(),z&&z.d(),e&&ht(n),e&&ht(o),G.d(),e&&ht(d),e&&ht(p),Z&&Z.d(),st(q)}}}function Yt(e){let t;return{c(){t=ft("p"),t.innerHTML="<b>No media loaded</b>",gt(t,"class","svelte-1q8p3xr")},m(e,r){ut(e,t,r)},p:rt,d(e){e&&ht(t)}}}function Ft(e){let t,r,n,o,s,i,a=e[5].paused?" ":"video"==e[5].currentMedia.mediaType?"▶":"♫",c=(e[5].currentMedia.artist?`${e[5].currentMedia.artist} - ${e[5].currentMedia.song}`:e[5].currentMedia.song)+"";function l(e,t){return e[5].isStream?Jt:e[5].timeposition?zt:e[5].duration?Wt:void 0}let u=l(e),h=u&&u(e);return{c(){t=ft("p"),r=dt(a),n=pt(),o=dt(c),s=pt(),i=ft("p"),h&&h.c(),gt(t,"class","current_media svelte-1q8p3xr"),mt(t,"faded",e[5].paused),gt(i,"class","svelte-1q8p3xr"),mt(i,"faded",e[5].paused)},m(e,a){ut(e,t,a),lt(t,r),lt(t,n),lt(t,o),ut(e,s,a),ut(e,i,a),h&&h.m(i,null)},p(e,n){32&n&&a!==(a=e[5].paused?" ":"video"==e[5].currentMedia.mediaType?"▶":"♫")&&vt(r,a),32&n&&c!==(c=(e[5].currentMedia.artist?`${e[5].currentMedia.artist} - ${e[5].currentMedia.song}`:e[5].currentMedia.song)+"")&&vt(o,c),32&n&&mt(t,"faded",e[5].paused),u===(u=l(e))&&h?h.p(e,n):(h&&h.d(1),h=u&&u(e),h&&(h.c(),h.m(i,null))),32&n&&mt(i,"faded",e[5].paused)},d(e){e&&ht(t),e&&ht(s),e&&ht(i),h&&h.d()}}}function Wt(e){let t,r=sr(e[5].currentMedia.duration)+"";return{c(){t=dt(r)},m(e,r){ut(e,t,r)},p(e,n){32&n&&r!==(r=sr(e[5].currentMedia.duration)+"")&&vt(t,r)},d(e){e&&ht(t)}}}function zt(e){let t,r,n,o,s,i,a=sr(Math.floor(e[5].timeposition))+"",c=sr(e[5].currentMedia.duration)+"",l=Math.round(e[5].percentposition)+"";return{c(){t=dt(a),r=dt(" / "),n=dt(c),o=dt(" — "),s=dt(l),i=dt("%")},m(e,a){ut(e,t,a),ut(e,r,a),ut(e,n,a),ut(e,o,a),ut(e,s,a),ut(e,i,a)},p(e,r){32&r&&a!==(a=sr(Math.floor(e[5].timeposition))+"")&&vt(t,a),32&r&&c!==(c=sr(e[5].currentMedia.duration)+"")&&vt(n,c),32&r&&l!==(l=Math.round(e[5].percentposition)+"")&&vt(s,l)},d(e){e&&ht(t),e&&ht(r),e&&ht(n),e&&ht(o),e&&ht(s),e&&ht(i)}}}function Jt(e){let t;return{c(){t=dt("(radio)")},m(e,r){ut(e,t,r)},p:rt,d(e){e&&ht(t)}}}function Vt(e){let t,r,n,o=e[5].volume+"";return{c(){t=ft("p"),r=dt("Volume: "),n=dt(o),gt(t,"class","svelte-1q8p3xr"),mt(t,"faded",e[5].paused)},m(e,o){ut(e,t,o),lt(t,r),lt(t,n)},p(e,r){32&r&&o!==(o=e[5].volume+"")&&vt(n,o),32&r&&mt(t,"faded",e[5].paused)},d(e){e&&ht(t)}}}function Gt(e){let t,r,n,o;return{c(){t=ft("button"),r=dt("● Pause"),gt(t,"class","pause svelte-1q8p3xr"),t.disabled=n=!e[3]},m(n,s,i){ut(n,t,s),lt(t,r),i&&o(),o=yt(t,"click",e[18])},p(e,r){8&r&&n!==(n=!e[3])&&(t.disabled=n)},d(e){e&&ht(t),o()}}}function Zt(e){let t,r,n,o;return{c(){t=ft("button"),r=dt("▶ Play"),gt(t,"class","play svelte-1q8p3xr"),t.disabled=n=!e[3]},m(n,s,i){ut(n,t,s),lt(t,r),i&&o(),o=yt(t,"click",e[17])},p(e,r){8&r&&n!==(n=!e[3])&&(t.disabled=n)},d(e){e&&ht(t),o()}}}function Qt(e){let t,r,n,o;return{c(){t=ft("button"),r=dt("Remove"),gt(t,"class","remove_limit svelte-1q8p3xr"),t.disabled=n=!e[3]},m(n,s,i){ut(n,t,s),lt(t,r),i&&o(),o=yt(t,"click",e[22])},p(e,r){8&r&&n!==(n=!e[3])&&(t.disabled=n)},d(e){e&&ht(t),o()}}}function Xt(e){let t,r=e[6],n=[];for(let t=0;t<r.length;t+=1)n[t]=rr(qt(e,r,t));return{c(){t=ft("div");for(let e=0;e<n.length;e+=1)n[e].c();gt(t,"class","nearby_devices section svelte-1q8p3xr")},m(e,r){ut(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,o){if(704&o){let s;for(r=e[6],s=0;s<r.length;s+=1){const i=qt(e,r,s);n[s]?n[s].p(i,o):(n[s]=rr(i),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(e){e&&ht(t),function(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}(n,e)}}}function er(e){let t;return{c(){t=ft("span"),t.textContent="!",gt(t,"class","error svelte-1q8p3xr")},m(e,r){ut(e,t,r)},d(e){e&&ht(t)}}}function tr(e){let t,r="music"==e[28].mediaType?"♫":"▶";return{c(){t=dt(r)},m(e,r){ut(e,t,r)},p(e,n){64&n&&r!==(r="music"==e[28].mediaType?"♫":"▶")&&vt(t,r)},d(e){e&&ht(t)}}}function rr(e){let t,r,n,o,s,i,a=e[28].deviceName+"",c=e[28].hasErrors&&er(),l=e[28].playing&&tr(e);return{c(){t=ft("button"),c&&c.c(),r=pt(),l&&l.c(),n=pt(),o=dt(a),s=pt(),gt(t,"class","svelte-1q8p3xr"),mt(t,"active",e[28].deviceName==e[7])},m(a,u,h){ut(a,t,u),c&&c.m(t,null),lt(t,r),l&&l.m(t,null),lt(t,n),lt(t,o),lt(t,s),h&&i(),i=yt(t,"click",(function(){it(e[9](e[28]))&&e[9](e[28]).apply(this,arguments)}))},p(s,i){(e=s)[28].hasErrors?c||(c=er(),c.c(),c.m(t,r)):c&&(c.d(1),c=null),e[28].playing?l?l.p(e,i):(l=tr(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),64&i&&a!==(a=e[28].deviceName+"")&&vt(o,a),192&i&&mt(t,"active",e[28].deviceName==e[7])},d(e){e&&ht(t),c&&c.d(),l&&l.d(),i()}}}function nr(e){let t,r,n,o;const s=new Bt({});let i=e[4]&&Kt(e),a=e[6]&&Xt(e);return{c(){var e;t=ft("main"),(e=s.$$.fragment)&&e.c(),r=pt(),i&&i.c(),n=pt(),a&&a.c(),gt(t,"class","svelte-1q8p3xr")},m(e,c){ut(e,t,c),jt(s,t,null),lt(t,r),i&&i.m(t,null),lt(t,n),a&&a.m(t,null),o=!0},p(e,[r]){e[4]?i?i.p(e,r):(i=Kt(e),i.c(),i.m(t,n)):i&&(i.d(1),i=null),e[6]?a?a.p(e,r):(a=Xt(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i(e){o||(Pt(s.$$.fragment,e),o=!0)},o(e){!function(e,t,r,n){if(e&&e.o){if(Rt.has(e))return;Rt.add(e),(void 0).c.push(()=>{Rt.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}}(s.$$.fragment,e),o=!1},d(e){e&&ht(t),Lt(s),i&&i.d(),a&&a.d()}}}function or(e,t=2){return Array(Math.max(t-String(e).length+1,0)).join(0)+e}function sr(e){e=Math.round(e);const t=Math.floor(e/3600),r=e%3600,n=Math.floor(r/60);return e=r%60,t?`${t}h ${or(n)}min ${or(e)}s`:`${n}:${or(e)}`}function ir(e,t,r){let n,o,s=rt,i=()=>(s(),s=ct(l,e=>r(10,n=e)),l),a=rt,c=()=>(a(),a=ct(u,e=>r(12,o=e)),u);e.$$.on_destroy.push(()=>s()),e.$$.on_destroy.push(()=>a());let{store:l}=t;i();let{session:u}=t;function h(e,t){console.log("Action: "+e),l.remoteObject("gui").call("action",{action:e,storeName:"player",payload:t}).catch(console.log)}c();let f=!1;let d,p,y,g,v,m,b;return e.$set=e=>{"store"in e&&i(r(0,l=e.store)),"session"in e&&c(r(1,u=e.session))},e.$$.update=()=>{1024&e.$$.dirty&&r(3,d=n.connected),1024&e.$$.dirty&&r(4,p=n.controller),1024&e.$$.dirty&&r(5,y=n.player),1024&e.$$.dirty&&r(6,g=n.nearbyDevices?n.nearbyDevices.filter(e=>e.hasGui).sort(k.compareValues("deviceName")):[]),4096&e.$$.dirty&&(v=o.publicKeyHex),4096&e.$$.dirty&&(m=o.sharedSecretHex),16&e.$$.dirty&&r(7,b=p?p.deviceName:null)},[l,u,f,d,p,y,g,b,h,function(e){localStorage.setItem("current_device_ip",e.ip),l.switch(e)},n,v,o,m,void 0,function(e,t){console.log("Action: "+e),l.remoteObject("gui").call("action",{action:e,storeName:"iot",payload:t}).catch(console.log)},function(){r(2,f=!f)},()=>h("play"),()=>h("pause"),()=>h("volume_down"),()=>h("volume_up"),()=>h("limit"),()=>h("remove_limit"),()=>h("next"),()=>h("shuffle"),()=>h("repeat"),()=>h("backward"),()=>h("forward")]}const{SessionStore:ar,MultiConnectedStore:cr}=tt,lr=new ar,ur=new cr({session:lr,port:7780,protocol:"dmt",protocolLane:"gui",initialIp:null});return new class extends It{constructor(e){super(),Ut(this,e,ir,nr,at,{store:0,session:1})}}({target:document.body,props:{store:ur,session:lr}})}(crypto);
//# sourceMappingURL=bundle.js.map
