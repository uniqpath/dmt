{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../Escape.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { util, xstate, Escape } from 'dmt-js';\n\n  export let store;\n  export let session;\n\n  $: connected = $store.connected;\n  $: controller = $store.controller;\n  $: player = $store.player;\n  $: nearbyDevices = $store.nearbyDevices ? Object.values($store.nearbyDevices).filter(device => device.hasGui).sort(util.compareValues('deviceId')) : [];\n\n  $: clientPubkey = $session.publicKeyHex;\n  $: sharedSecretHex = $session.sharedSecretHex;\n\n  $: activeDeviceId = controller ? controller.deviceName : null;\n\n  //const usualDeviceList = ['kitchen', 'midroom', 'outside', 'living-room', 'tv', 'dpanel', 'lab'];\n\n  let searchTerms;\n\n  // METHODS :::\n\n  function action(action, payload) {\n    console.log(`Action: ${action}`);\n\n    store\n      .remoteObject('gui')\n      .call('action', { action, storeName: 'player', payload })\n      .catch(console.log);\n  }\n\n  function iotAction(action, payload) {\n    console.log(`Action: ${action}`);\n\n    store\n      .remoteObject('gui')\n      .call('action', { action, storeName: 'iot', payload })\n      .catch(console.log);\n  }\n\n  function switchDevice(device) {\n    localStorage.setItem('current_device_ip', device.ip);\n    store.switch(device);\n  }\n\n  let playerMoreVisible = false;\n\n  function toggleMore() {\n    playerMoreVisible = !playerMoreVisible;\n  }\n\n  function pad(number, digits = 2) {\n    return Array(Math.max(digits - String(number).length + 1, 0)).join(0) + number;\n  }\n\n  function songTime(s) {\n    s = Math.round(s);\n    const hours = Math.floor(s / 3600);\n    const rem = s % 3600;\n    const min = Math.floor(rem / 60);\n    s = rem % 60;\n\n    return hours ? `${hours}h ${pad(min)}min ${pad(s)}s` : `${min}:${pad(s)}`;\n  }\n\n</script>\n\n<main>\n\n  <Escape />\n\n  <!-- <p>{connected ? '' : 'Disconnected ✖'}</p> -->\n\n  <!-- <input bind:value={searchTerms} on:keyup={searchInputChanged} on:paste={searchInputChanged}> -->\n\n  {#if controller}\n\n    <h2 class:faded={!connected}>{controller.deviceName} {connected ? '' : '✖'}</h2>\n\n    {#if player}\n\n      <div class=\"player_media section\">\n\n        {#if player.currentMedia && player.currentMedia.song && connected}\n          <p class=\"current_media\" class:faded={player.paused}>\n            {player.paused ? ' ' : (player.currentMedia.mediaType == 'music' ? '♫' : '▶')}\n            {player.currentMedia.artist ? `${player.currentMedia.artist} - ${player.currentMedia.song}` : player.currentMedia.song}\n          </p>\n          <p class:faded={player.paused}>\n            {#if player.isStream}\n              (radio)\n            {:else}\n              {#if player.timeposition}\n                {songTime(Math.floor(player.timeposition))} / {songTime(player.currentMedia.duration)} — {Math.round(player.percentposition)}%\n              {:else if player.duration}\n                {songTime(player.currentMedia.duration)}\n              {/if}\n            {/if}\n          </p>\n        {:else if connected}\n          <p><b>No media loaded</b></p>\n        {/if}\n\n        {#if connected}\n          <p class:faded={player.paused}>Volume: {player.volume}</p>\n        {/if}\n\n      </div>\n\n      <div class=\"player_controls section\">\n\n        {#if player.paused}\n          <button on:click={() => action('play')} class=\"play\" disabled={!connected}>▶ Play </button>\n        {:else}\n          <button on:click={() => action('pause')} class=\"pause\" disabled={!connected}>● Pause</button>\n        {/if}\n\n        <button on:click={() => action('volume_down')} class=\"volume\" disabled={!connected}>Vol ↓</button>\n        <button on:click={() => action('volume_up')} class=\"volume\" disabled={!connected}>Vol ↑</button>\n\n        <!-- <button on:click={() => toggleMore()} class=\"more\" class:bold={playerMoreVisible}>More</button> -->\n\n      </div>\n\n      <div class=\"player_more section\" class:visible={playerMoreVisible}>\n\n        <button on:click={() => action('limit')} class=\"limit\" disabled={!connected}>Limit {player.limit || ''}</button>\n        {#if player.limit > 0}\n          <button on:click={() => action('remove_limit')} class=\"remove_limit\" disabled={!connected}>Remove</button>\n        {/if}\n\n        <button on:click={() => action('next')} class=\"next\" disabled={!connected}>→ Next</button>\n        <button on:click={() => action('shuffle')} class=\"shuffle\" disabled={!connected}>Shuffle</button>\n        <button on:click={() => action('repeat')} class=\"repeat\" disabled={!connected}>Repeat {player.repeatCount || ''}</button>\n\n        <button on:click={() => action('backward')} class=\"backward\" disabled={!connected}>↞ RWD</button>\n        <button on:click={() => action('forward')} class=\"forward\" disabled={!connected}>↠ FWD</button>\n      </div>\n\n    {/if}\n\n  {/if}\n\n  {#if nearbyDevices}\n    <div class=\"nearby_devices section\">\n      <!-- window.location.hostname != '192.168.0.60' || -->\n      {#each nearbyDevices as device}\n      <!-- {#each nearbyDevices.filter(device => usualDeviceList.includes(device.deviceId)) as device} -->\n\n        <button on:click={switchDevice(device)} class:active={device.deviceId == activeDeviceId}>\n\n          {#if device.hasErrors}<span class='error'>!</span>{/if}\n\n          {#if device.playing}\n            {device.mediaType == 'music' ? '♫' : '▶'}\n          {/if}\n\n          {device.deviceId}\n        </button>\n      {/each}\n    </div>\n  {/if}\n\n  <div class=\"iot section\">\n      <button on:click={() => iotAction('alarm', 'on')} class=\"\" disabled={!connected}>Alarm:ON</button>\n      <button on:click={() => iotAction('alarm', 'off')} class=\"\" disabled={!connected}>Alarm:OFF</button>\n  </div>\n\n</main>\n\n<style>\n\tmain {\n\t\ttext-align: center;\n\t\tmargin: 0 auto;\n\t}\n\n  .current_media {\n    color: #3B419A;\n  }\n\n  .section {\n    padding: 10px 10px;\n  }\n\n\t.player_media {\n    /**/\n  }\n\n  .player_controls {\n    /**/\n  }\n\n  .player_more {\n    /*display: none;*/\n  }\n\n  .player_more.visible {\n    display: block;\n  }\n\n  .nearby_devices, .iot {\n    border-top: 1px solid #999;\n    /**/\n  }\n\n  h2.faded, p.faded {\n    color: #999;\n  }\n\n  button {\n    margin-left: 10px;\n    border-radius: 5px;\n    cursor: pointer;\n  }\n\n  button:hover {\n    opacity: 0.9;\n  }\n\n  button.active {\n    border: 2px solid #3B419A;\n  }\n\n  button.more {\n    /**/\n  }\n\n  button.more.bold {\n    font-weight: bold;\n  }\n\n  button.remove_limit {\n    color: #777;\n    background-color: white;\n  }\n\n  .error {\n    background-color: #983128;\n    color: white;\n    padding: 2px 5px;\n    margin-right: 5px;\n  }\n\n  p {\n    padding: 0;\n  }\n\n\t@media (min-width: 640px) {\n\t\tmain {\n\t\t\tmax-width: none;\n\t\t}\n\t}\n</style>\n",
    "<script>\n\n</script>\n\n<div class=\"escape\">\n  <a href=\"/apps\">\n    <!-- <img src=\"/img/zeta_escape.png\" /> -->\n    <img src=\"/img/icons/home.png\" />\n  </a>\n</div>\n\n<style>\n  .escape img {\n    position: absolute;\n    top: 15px;\n    right: 0px;\n    width: 120px;\n    padding: 5px 20px;\n  }\n\n  .escape:hover {\n    opacity: 0.9;\n  }\n\n  @media (max-width: 812px) {\n    .escape {\n      display: none;\n    }\n  }\n</style>\n"
  ],
  "names": [],
  "mappings": "AA2KC,IAAI,eAAC,CAAC,AACL,UAAU,CAAE,MAAM,CAClB,MAAM,CAAE,CAAC,CAAC,IAAI,AACf,CAAC,AAEA,cAAc,eAAC,CAAC,AACd,KAAK,CAAE,OAAO,AAChB,CAAC,AAED,QAAQ,eAAC,CAAC,AACR,OAAO,CAAE,IAAI,CAAC,IAAI,AACpB,CAAC,AAEF,aAAa,eAAC,CAAC,AAEd,CAAC,AAED,gBAAgB,eAAC,CAAC,AAElB,CAAC,AAED,YAAY,eAAC,CAAC,AAEd,CAAC,AAED,YAAY,QAAQ,eAAC,CAAC,AACpB,OAAO,CAAE,KAAK,AAChB,CAAC,AAED,8BAAe,CAAE,IAAI,eAAC,CAAC,AACrB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AAE5B,CAAC,AAED,EAAE,qBAAM,CAAE,CAAC,MAAM,eAAC,CAAC,AACjB,KAAK,CAAE,IAAI,AACb,CAAC,AAED,MAAM,eAAC,CAAC,AACN,WAAW,CAAE,IAAI,CACjB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,OAAO,AACjB,CAAC,AAED,qBAAM,MAAM,AAAC,CAAC,AACZ,OAAO,CAAE,GAAG,AACd,CAAC,AAED,MAAM,OAAO,eAAC,CAAC,AACb,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AAC3B,CAAC,AAEW,CAAC,AAEb,CAAC,AAMD,MAAM,aAAa,eAAC,CAAC,AACnB,KAAK,CAAE,IAAI,CACX,gBAAgB,CAAE,KAAK,AACzB,CAAC,AAED,MAAM,eAAC,CAAC,AACN,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,KAAK,CACZ,OAAO,CAAE,GAAG,CAAC,GAAG,CAChB,YAAY,CAAE,GAAG,AACnB,CAAC,AAED,CAAC,eAAC,CAAC,AACD,OAAO,CAAE,CAAC,AACZ,CAAC,AAEF,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AAC1B,IAAI,eAAC,CAAC,AACL,SAAS,CAAE,IAAI,AAChB,CAAC,AACF,CAAC;AC/OA,sBAAO,CAAC,GAAG,eAAC,CAAC,AACX,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,IAAI,CACT,KAAK,CAAE,GAAG,CACV,KAAK,CAAE,KAAK,CACZ,OAAO,CAAE,GAAG,CAAC,IAAI,AACnB,CAAC,AAED,qCAAO,MAAM,AAAC,CAAC,AACb,OAAO,CAAE,GAAG,AACd,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,OAAO,8BAAC,CAAC,AACP,OAAO,CAAE,IAAI,AACf,CAAC,AACH,CAAC"
}